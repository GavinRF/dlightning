class MobileUIEditor{modalAdded=!1;fabAdded=!1;constructor(){this.state={canvasCount:1,selectedCanvases:new Set,navbarStates:new Map},this.alignmentController=new AlignmentController(".canvas-content"),this.animationController=new AnimationController,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>this.init())):this.init()}init(){console.log("Initializing editor..."),this.initializeFirstCanvas(),this.setupEventListeners(),this.setupDownloadButton(),this.updateTime(),setInterval(this.updateTime,6e4),this.initOnboarding(),this.setupImageUpload(),this.setupIconPicker()}initializeFirstCanvas(){this.createNewCanvas();const e=document.querySelector(".canvas");e.classList="canvas selected",e&&(this.state.selectedCanvases.add(e),e.addEventListener("click",(e=>this.handleCanvasSelection(e))))}updateTime(){const e=new Date,t=e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0");document.querySelector(".time").textContent=t}setupEventListeners(){document.querySelectorAll(".component-btn, .addHeadingButton").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),this.handleComponentAddition(e)}))}));const e=document.querySelector(".add-canvas-btn");e&&e.addEventListener("click",(e=>{e.preventDefault(),this.createNewCanvas()})),document.addEventListener("click",(e=>{e.target.classList.contains("delete-canvas-btn")&&this.handleCanvasDelete(e)}))}handleComponentAddition(e){const t=e.getAttribute("data-component"),n=this.state.selectedCanvases.size>0?Array.from(this.state.selectedCanvases):document.querySelectorAll(".canvas");if(["navbar","bottomNav","modal","floatingActionButton"].includes(t)){if(Array.from(n).some((e=>e.querySelector("navbar"===t?".navbar":"bottomNav"===t?"nav":"modal"===t?".modal":".fab"))))return void this.removeComponent(t,n)}n.forEach((n=>{if(!n)return void console.error("No canvas found");let o,a,i;switch(t){case"navbar":o=this.components.navbar(),this.insertNavbar(n,o,"top");break;case"bottomNav":o=this.components.bottomNav(),this.insertNavbar(n,o,"bottom");break;case"modal":if(this.modalAdded){const e=n.querySelector(".modal-wrapper");e&&e.remove()}else o=this.components.modal(),n.appendChild(o);break;case"floatingActionButton":this.fabAdded||(o=this.components.floatingActionButton(),n.appendChild(o));break;case"hero":if(o=this.components.hero(),a=this.wrapComponentInContainer(o,"hero"),i=n.querySelector(".canvas-content"),i){const e=i.firstChild;n.querySelector(".navbar-spacer")&&e?i.insertBefore(a,e.nextSibling):e?i.insertBefore(a,e):i.appendChild(a)}break;case"heading":const r=e.getAttribute("data-level");if(o=this.components.heading(null,r||"h1","Heading Text"),a=this.wrapComponentInContainer(o,"heading"),i=n.querySelector(".canvas-content"),i){const e=i.querySelector("footer")?.closest(".component-container");e?i.insertBefore(a,e):i.appendChild(a)}break;default:const s=(e=>{const t=`#${e}-type`,n=document.querySelector(t);return n?n.value:null})(t);if(o=this.components[t]?.(s),a=this.wrapComponentInContainer(o,`${t}-${s||""}`),i=n.querySelector(".canvas-content"),i){const e=i.querySelector("footer")?.closest(".component-container");e?i.insertBefore(a,e):i.appendChild(a)}}if(!["navbar","bottomNav","modal"].includes(t)){const e=n.querySelector(".phoneScrollCon");e&&(e.scrollTop="hero"===t?0:e.scrollHeight)}}))}wrapComponentInContainer(e,t){const n=document.createElement("div");for(n.className="component-container",n.setAttribute("data-component-type",t);n.firstChild;)n.removeChild(n.firstChild);const o=document.createElement("div");o.className="component-handle",o.textContent="⋮";const a=document.createElement("div");a.className="component-content";const i=document.createElement("button");i.className="delete-btn",i.textContent="×";const r=document.createElement("button");r.className="duplicate-btn",r.setAttribute("title","duplicate"),r.innerHTML='<i class="fa-solid fa-copy"></i>',n.append(o,a,i,r);if(e.container&&"function"==typeof e.setup?(a.appendChild(e.container),e.setup()):a.appendChild(e),t&&t.includes("-")&&n.setAttribute("data-component-variant",t),a.querySelector('[style*="var(--color"]')){a.querySelectorAll('[style*="var(--color"]').forEach((e=>{const t=createColorSwatches(e);Array.isArray(t)?t.forEach((e=>{e&&e.children.length>0&&n.insertBefore(e,n.firstChild)})):t&&t.children.length>0&&n.insertBefore(t,n.firstChild)}))}function s(e){const t=e.querySelector("[data-placeholder]"),n=e.querySelector(".resize-handle");if(!n||!t)return;let o,a;function i(e){const n=a+(e.clientY-o);n>=80&&(t.style.height=`${n}px`)}function r(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",r)}n.addEventListener("mousedown",(e=>{o=e.clientY,a=parseInt(window.getComputedStyle(t).height),document.addEventListener("mousemove",i),document.addEventListener("mouseup",r),e.preventDefault()}))}n.querySelector(".delete-btn").addEventListener("click",(()=>{n.classList.add("delete-animation"),setTimeout((()=>{n.remove()}),200)})),n.querySelector(".duplicate-btn").addEventListener("click",(()=>this.duplicateComponent(n,t)));const l=document.createElement("div");l.classList="controls",l.style.cssText="position: absolute; top: -24px; left: 50%; transform: translateX(-50%); gap: 4px; align-items: center; padding: 4px; background-color: var(--interface-color); border-radius: 6px; z-index: 9939939";const c=document.createElement("button");c.innerHTML='<i class="fas fa-circle-left"></i>',c.className="nav-control prev-nav",c.style.cssText="background: var(--basic-txt-color); padding: 1px; border-radius: 50%; border: none; color: var(--input-bg-color); font-size: 20px; cursor: pointer; opacity: 0; transition: opacity 0.3s;";const d=document.createElement("button");d.innerHTML='<i class="fas fa-circle-right"></i>',d.className="nav-control next-nav",d.style.cssText="background: var(--basic-txt-color); padding: 1px; border-radius: 50%; border: none; color: var(--input-bg-color); font-size: 20px; cursor: pointer; opacity: 0; transition: opacity 0.3s;";const p=document.createElement("span");p.style.cssText="opacity: 0; transition: opacity 0.3s; color: white; font-size: 14px; min-width: 30px; text-align: center;";const u=t?t.replace(/-+$/,""):null;let m=null;u?(m=setupVariants(u),m||(m=[])):(console.error("Invalid componentType provided:",t),m=[]);const h=m.length||0;p.textContent=`1/${h||"N/A"}`,l.appendChild(c),l.appendChild(p),l.appendChild(d);null!==setupVariants(t)&&n.appendChild(l),a.dataset.componentType=t,a.dataset.currentVariant="0",a.dataset.cachedVariants=JSON.stringify(setupVariants(t)||[]);const y=e=>{const t=a.dataset.componentType,o=t.replace(/-+$/,""),i=parseInt(a.dataset.currentVariant),r=setupVariants(o);n.querySelectorAll(".color-swatch-container").forEach((e=>e.remove()));const l=a.innerHTML,c=a.dataset.variantCache?JSON.parse(a.dataset.variantCache):{};c[i]=l,a.dataset.variantCache=JSON.stringify(c);const d=(i+e+r.length)%r.length;a.dataset.currentVariant=d;const u=c[d];if(u)a.innerHTML=u;else{const e=document.createElement("div");e.innerHTML=r[d];const t=e.firstChild;a.innerHTML="",a.appendChild(t)}if(t.startsWith("input")||t.startsWith("searchBar")){a.querySelectorAll("[contenteditable=true]").forEach((e=>{e.addEventListener("input",(function(){""===this.textContent.trim()?this.classList.add("empty"):this.classList.remove("empty")})),e.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()})),e.addEventListener("paste",(e=>{e.preventDefault();const t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)}))}))}if(t.startsWith("textarea")){a.querySelectorAll("[contenteditable=true]").forEach((e=>{e.addEventListener("input",(function(){""===this.textContent.trim()?this.classList.add("empty"):this.classList.remove("empty")}))}))}if(a.querySelector('[style*="var(--color"]')){a.querySelectorAll('[style*="var(--color"]').forEach((e=>{const t=createColorSwatches(e);Array.isArray(t)?t.forEach((e=>{e&&e.children.length>0&&(n.insertBefore(e,n.firstChild),e.style.visibility="visible",e.style.opacity="1")})):t&&t.children.length>0&&(n.insertBefore(t,n.firstChild),t.style.visibility="visible",t.style.opacity="1")}))}this.setupIconPicker(a),this.setupImageUpload(a),s(n);const m=n.querySelectorAll(".resizeable");if(m.length&&m.forEach((e=>{resizer.makeResizable(e)})),createColorSwatches(a),["avatar-","icon-","floatingActionButton-"].includes(a.dataset.componentType)){a.querySelectorAll(".alignment-arrow").forEach((e=>e.remove()));const e=a.style.justifyContent||"center";createAlignmentControls(a).setAlignment(e)}a.querySelectorAll("*").forEach((e=>{1!==e.childNodes.length||e.childNodes[0].nodeType!==Node.TEXT_NODE||e.classList.contains("non-editable")||e.setAttribute("contentEditable","true")})),a.dataset.currentVariant=d.toString(),p.textContent=`${d+1}/${r.length}`};c.addEventListener("click",(()=>y(-1))),d.addEventListener("click",(()=>y(1))),n.addEventListener("mouseenter",(()=>{c.style.opacity="1",d.style.opacity="1",p.style.opacity="1",n.querySelectorAll(".color-swatch-container").forEach((e=>{e.style.visibility="visible",e.style.opacity="1"}))})),n.addEventListener("mouseleave",(()=>{c.style.opacity="0",d.style.opacity="0",p.style.opacity="0",n.querySelectorAll(".color-swatch-container").forEach((e=>{e.style.visibility="hidden",e.style.opacity="0"}))})),this.setupIconPicker(a),this.setupImageUpload(a),s(n),createColorSwatches(a);const x=n.querySelectorAll(".resizeable");return x.length&&x.forEach((e=>{resizer.makeResizable(e)})),n}setupIconPicker=e=>{e.querySelectorAll(".icon-container i").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),showIconPicker(e)}))}))};setupImageUpload(e){e.querySelectorAll(".card-image, .nav-image").forEach((t=>{function n(n){const o=n.target?.files?.[0]||n.dataTransfer?.files?.[0];if(o&&o.type.startsWith("image/")){const n=new FileReader;n.onload=n=>{!function(n){t.style.backgroundImage=`url(${n})`,t.style.position="relative",t.style.backgroundSize="cover",t.style.backgroundPosition="center",t.innerHTML="";const o=e.querySelectorAll(".resizeable");o.length&&o.forEach((e=>{resizer.makeResizable(e)}))}(n.target.result)},n.readAsDataURL(o)}}function o(e){e.preventDefault(),e.stopPropagation()}t.addEventListener("click",(()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=n,e.click()})),["dragenter","dragover","dragleave","drop"].forEach((e=>{t.addEventListener(e,o)})),t.addEventListener("dragenter",(()=>{t.style.outline="2px dashed var(--color-primary)",t.style.outlineOffset="-6px",t.style.backgroundColor="rgba(52, 152, 219, 0.1)"})),t.addEventListener("dragleave",(()=>{t.style.outline="none",t.style.outlineOffset="0",t.style.backgroundColor="var(--neutral-gray)"})),t.addEventListener("drop",(function(e){o(e),t.style.outline="none",t.style.outlineOffset="0",t.style.backgroundColor="var(--neutral-gray)",n(e)}))}))}duplicateComponent(e,t){const n=e.querySelector(".component-content > *"),o=e.getAttribute("data-component-variant");let a;if(o){const[e,t]=o.split("-");this.components[e]&&(a=this.components[e](n))}else{const[e]=t.split("-");this.components[e]&&(a=this.components[e](n))}if(a){const i=this.wrapComponentInContainer(a,o||t),r=i.querySelector(".component-content > *");this.copyUserModifications(n,r);const s=n.querySelector('div[style*="padding"]');if(s){const e=r.querySelector('div[style*="padding"]');e&&(e.style.cssText=s.style.cssText)}e.parentNode.insertBefore(i,e.nextSibling)}}copyUserModifications(e,t){const n=e.querySelector('div[style*="padding"]'),o=t.querySelector('div[style*="padding"]');n&&o&&(o.style.cssText=n.style.cssText),"true"===e.getAttribute("contentEditable")&&(t.textContent=e.textContent,""===e.textContent.trim()?t.classList.add("empty"):t.classList.remove("empty"));const a=e.querySelectorAll('[contenteditable="true"]'),i=t.querySelectorAll('[contenteditable="true"]');a.forEach(((e,t)=>{i[t]&&(i[t].textContent=e.textContent,""===e.textContent.trim()?i[t].classList.add("empty"):i[t].classList.remove("empty"))}));const r=e.querySelectorAll(".fa-square-check"),s=t.querySelectorAll(".fa-square-check");r.forEach(((e,t)=>{s[t]&&(s[t].style.display=e.style.display)}))}removeComponent(e,t){t.forEach((t=>{const n=t.querySelector(".canvas-content");switch(e){case"navbar":const e=t.querySelector(".navContain");if(e){e.remove();let t=n.querySelector(".navbar-spacer");t&&t.remove(),n.style.paddingTop="28px"}break;case"bottomNav":const o=t.querySelector(".bottomNavContain");o&&o.remove();break;case"modal":const a=t.querySelector(".modal-wrapper");a&&(a.remove(),this.modalAdded=!1);break;case"floatingActionButton":const i=t.querySelector(".fab");i&&(i.remove(),this.fabAdded=!1)}}))}createNewCanvas(){this.state.canvasCount++;const e=document.createElement("div");e.className="canvas-wrapper";const t=`canvas-${this.state.canvasCount}`;e.innerHTML=`\n        <div class="canvas-number-container">\n            <div class="dimension-indicator">\n                <div>\n                    <i class="fa-solid fa-mobile-screen"></i>\n                    <span class="dimensions"></span>\n                </div>\n            </div>\n            <div class="spaceHolder"></div>\n            <div class="canvas-number" >Canvas ${this.state.canvasCount}</div>\n            <div>\n                <button class="delete-canvas-btn">×</button>\n            </div>\n        </div>\n\n        <div class="canvas" id="${t}">\n\n            <div class="status-bar">\n                <div class="mobile-status">\n                    <span class="time">12:00</span>\n                    <div class="camera"></div>\n                    <div class="iphone-notch" style="display: none"></div>\n                    <div class="dynamic-island" style="display: none"></div>\n                    <div class="icons">\n                        <i class="fa-solid fa-signal"></i>\n                        <i class="fa-solid fa-wifi"></i>\n                        <i style="font-size: 14px;" class="fa-solid fa-battery-full"></i>\n                    </div>\n                    <div style="width: 100%; height: 28px; background-color: rgba(51, 51, 51, 0.48); z-index: -1; position: absolute; top: 0; left: 0;"></div>\n                </div>\n        \n                <div class="desktop-status" style="display: none">\n                    <div class="browser-actions">\n                        <span class="browser-dot"></span>\n                        <span class="browser-dot"></span>\n                        <span class="browser-dot"></span>\n                    </div>\n                    <div class="browser-address" contenteditable>\n                        <i class="fa-solid fa-lock"></i>\n                        <span>dlightning.org</span>\n                    </div>\n                    <div class="icon-container" style="display: flex; gap: 8; margin-right: 28px;">\n                    <i class="fa-solid fa-circle-user"></i>\n                    </div>\n                    <div style="width: 100%; height: 28px; background-color: rgba(51, 51, 51, 0.48); z-index: -1; position: absolute; top: 0; left: 0;"></div>\n                </div>\n                \n            </div>\n\n            <div class="phoneScrollCon">\n                <div class="canvas-content"></div>\n            </div>\n        </div>\n        \n    `;const n=e.querySelector(".canvas"),o=e.querySelector(".dimensions"),a=e.querySelector(".dimension-indicator i"),i=()=>{const{offsetWidth:t,offsetHeight:i}=n,r=n.querySelector(".status-bar"),s=r.querySelector(".mobile-status"),l=r.querySelector(".desktop-status"),c=r.querySelector(".iphone-notch"),d=r.querySelector(".dynamic-island"),p=r.querySelector(".camera"),u=e.querySelector(".canvas-content");o.matches(":focus")||(o.textContent=`${t-6} × ${i-6}`),t<480?(a.className="fa-solid fa-mobile-screen",r.style.display="block",d.style.display="none",c.style.display="none",u.style.paddingTop="28px",u.style.minHeight="calc(100% - 100px)",396===t&&850===i?d.style.display="block":(381===t&&673===i||420===t&&902===i||434===t&&932===i)&&(c.style.display="block")):t<1024?(a.className="fa-solid fa-tablet-screen-button",r.style.display="none",s.style.display="flex",l.style.display="none",d.style.display="none",c.style.display="none",u.style.paddingTop="0px",u.style.minHeight="calc(100% - 72px)",p&&(p.style.display="block")):(a.className="fa-solid fa-desktop",r.style.display="block",s.style.display="none",l.style.display="flex",d.style.display="none",c.style.display="none",u.style.paddingTop="28px",u.style.minHeight="calc(100% - 100px)",p&&(p.style.display="none"))};o.contentEditable=!0,o.spellcheck=!1;o.addEventListener("focus",(()=>{o.dataset.original=o.textContent})),o.addEventListener("blur",(()=>{const e=(e=>{const t=e.match(/(\d+)\s*×\s*(\d+)/);return t?{width:parseInt(t[1],10),height:parseInt(t[2],10)}:null})(o.textContent);if(e){const t=Math.max(160,e.width),a=Math.max(142,e.height);n.style.width=`${t}px`,n.style.height=`${a}px`,o.textContent=`${t} × ${a}`}else o.textContent=o.dataset.original})),o.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),o.blur()),"Escape"===e.key&&(e.preventDefault(),o.textContent=o.dataset.original,o.blur())})),o.addEventListener("mousedown",(e=>{e.target===o&&e.stopPropagation()}));new ResizeObserver(i).observe(n),i();const r=e.querySelector(".dimension-indicator i"),s=this.createScreenSizeModal();r.addEventListener("click",(e=>{e.stopPropagation(),s.style.display="flex";s.querySelectorAll(".screen-size-option").forEach((e=>{e.onclick=()=>{const t=parseInt(e.dataset.width),i=parseInt(e.dataset.height);n.style.width=`${t}px`,n.style.height=`${i}px`,n.style.transition="height 200ms, width 200ms";const r=t-6,l=i-6;o.textContent=`${r} × ${l}`,a.className=t<480?"fa-solid fa-mobile-screen":t<1024?"fa-solid fa-tablet-screen-button":"fa-solid fa-desktop",s.style.display="none",setTimeout((()=>{n.style.transition="none"}),200)}}))}));setInterval((()=>{this.saveCanvas(e)}),5e3);const l=document.querySelector(".add-canvas-btn");l&&l.parentElement?l.parentElement.insertBefore(e,l):document.querySelector(".canvas-container").appendChild(e);const c=e.querySelector(".canvas");c.addEventListener("click",(e=>this.handleCanvasSelection(e)));const d=c.querySelector(".canvas-content");d&&new Sortable(d,{animation:150,handle:".component-handle, .card-image",ghostClass:"sortable-ghost",group:"shared-components",swapThreshold:.85,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,onEnd:function(e){$(e.item).trigger("mouseleave");const t=e=>{e.querySelectorAll(".color-swatch-container").forEach((e=>{e.style.visibility="hidden",e.style.opacity="0"}));const t=e.querySelector(".prev-btn"),n=e.querySelector(".next-btn"),o=e.querySelector(".variant-number"),a=e.querySelector(".add-image-button"),i=e.querySelector(".size-control"),r=e.querySelector(".left-arrow"),s=e.querySelector(".right-arrow");[e.querySelector(".resize-handle"),a,i,r,s,e.querySelector(".alignment-controls")].forEach((e=>{e&&(e.style.display="none")})),[t,n,o].forEach((e=>{e&&(e.style.opacity="0")}))};t(e.from),t(e.to)},onMove:function(e){return!e.related.classList.contains("navbar-spacer")},onStart:function(e){e.item.querySelector(".space-range:active")&&e.preventDefault()}}),this.updateCanvasNumbers()}createScreenSizeModal(){const e=document.createElement("div");e.className="screen-size-modal",e.style.display="none";e.innerHTML=`\n        <div class="screen-size-modal-content">\n            <div class="screen-size-modal-header">\n                <h3>Standard Screen Sizes</h3>\n                <button class="screen-size-modal-close">×</button>\n            </div>\n            <div class="screen-size-modal-body">\n                ${[{name:"Galaxy Z Flip",width:320,height:746,icon:"mobile-screen"},{name:"Android Small",width:360,height:640,icon:"mobile-screen"},{name:"Pixel 4",width:360,height:740,icon:"mobile-screen"},{name:"Android Average",width:360,height:800,icon:"mobile-screen"},{name:"iPhone SE",width:375,height:667,icon:"mobile-screen"},{name:"Pixel 3",width:380,height:780,icon:"mobile-screen"},{name:"iPhone 12/13/14",width:390,height:844,icon:"mobile-screen"},{name:"Pixel 6",width:412,height:915,icon:"mobile-screen"},{name:"iPhone XR/11",width:414,height:896,icon:"mobile-screen"},{name:"Pixel 7",width:420,height:933,icon:"mobile-screen"},{name:"iPhone 12/13/14 Pro Max",width:428,height:926,icon:"mobile-screen"},{name:"Galaxy Z Fold",width:468,height:832,icon:"mobile-screen"},{name:"Galaxy Tab S7",width:712,height:1138,icon:"tablet-screen-button"},{name:"iPad Mini",width:768,height:1024,icon:"tablet-screen-button"},{name:"Galaxy Tab S8",width:800,height:1280,icon:"tablet-screen-button"},{name:"iPad Air",width:820,height:1180,icon:"tablet-screen-button"},{name:'iPad Pro 11"',width:834,height:1194,icon:"tablet-screen-button"},{name:"Galaxy Tab S8+",width:880,height:1440,icon:"tablet-screen-button"},{name:'iPad Pro 12.9"',width:1024,height:1366,icon:"tablet-screen-button"},{name:"Small Desktop",width:1280,height:720,icon:"desktop"},{name:"HD Desktop",width:1366,height:768,icon:"desktop"},{name:"Full HD",width:1920,height:1080,icon:"desktop"}].map((e=>`\n                    <div class="screen-size-option" data-width="${e.width}" data-height="${e.height}">\n                        <i class="fa-solid fa-${e.icon}"></i>\n                        <div class="screen-size-info">\n                            <div class="screen-size-name">${e.name}</div>\n                            <div class="screen-size-dimensions">${e.width} × ${e.height}</div>\n                        </div>\n                    </div>\n                `)).join("")}\n            </div>\n        </div>\n    `,document.body.appendChild(e),e.addEventListener("click",(t=>{t.target===e&&(e.style.display="none")}));return e.querySelector(".screen-size-modal-close").addEventListener("click",(()=>{e.style.display="none"})),e}saveCanvas(e){const t=e.querySelector(".canvas-content"),n=document.querySelector(".canvas-timestamp"),o=Array.from(document.querySelectorAll(".canvas-wrapper")).indexOf(e)+1,a={content:t.innerHTML,timestamp:(new Date).toLocaleString(),hasTopNav:this.topNavbarAdded,hasBottomNav:this.bottomNavbarAdded};localStorage.setItem(`canvas_${o}`,JSON.stringify(a)),n.textContent=`last saved: ${a.timestamp}`}loadSavedCanvases(){Object.keys(localStorage).filter((e=>e.startsWith("canvas_"))).sort(((e,t)=>parseInt(e.split("_")[1])-parseInt(t.split("_")[1]))).forEach((e=>{const t=JSON.parse(localStorage.getItem(e)),n=parseInt(e.split("_")[1]);if(isNaN(n))return void console.warn("Invalid canvas index for key:",e);for(;document.querySelectorAll(".canvas-wrapper").length<n;)this.createNewCanvas();const o=document.querySelectorAll(".canvas-wrapper")[n-1];if(o){const e=o.querySelector(".canvas-content"),n=o.querySelector(".canvas-timestamp");if(e&&t.content&&(e.innerHTML=t.content,e.querySelectorAll(".delete-btn").forEach((e=>{e.onclick=function(){this.closest(".component-container").remove()}}))),n&&t.timestamp&&(n.textContent=`Last saved: ${t.timestamp}`),t.hasTopNav){this.topNavbarAdded=!0;const e=this.components.navbar();this.insertNavbar(e,"top")}if(t.hasBottomNav){this.bottomNavbarAdded=!0;const e=this.components.bottomNav();this.insertNavbar(e,"bottom")}e&&(this.setupImageUpload(),this.setupIconPicker(),this.setupTextEditable())}}))}handleCanvasDelete(e){const t=e.target.closest(".canvas-wrapper");if(!t)return;const n=t.querySelector(".canvas");if(confirm("Are you sure you want to delete this canvas?")){if(this.state.selectedCanvases.has(n)){this.state.selectedCanvases.delete(n);const e=t.previousElementSibling.querySelector(".canvas");e&&this.handleSingleSelect(e)}t.remove(),this.updateCanvasNumbers()}}makeTextEditable(e){e.addEventListener("click",(function(){if(e.querySelector("input"))return;const t=this.textContent,n=document.createElement("input");n.value=t,n.style.width="100%",n.style.boxSizing="border-box",n.style.font=window.getComputedStyle(this).font,e.dataset.originalText=t,this.textContent="",this.appendChild(n),n.focus(),n.addEventListener("blur",(function(){const t=this.value||e.dataset.originalText;this.remove(),e.textContent=t})),n.addEventListener("keypress",(function(e){"Enter"===e.key&&this.blur()}))}))}insertNavbar(e,t,n){const o=e.querySelector(".canvas-content");if("top"===n){e.insertBefore(t,e.firstChild);let n=o.querySelector(".navbar-spacer");n||(n=document.createElement("div"),n.className="navbar-spacer",n.style.height="54px",n.style.width="100%",o.insertBefore(n,o.firstChild)),t.style.cssText="position: absolute; left: 0; right: 0; top: 24px;"}else"bottom"===n?(e.appendChild(t),t.style.cssText="position: absolute; left: 0; right: 0; bottom: 0;"):e.appendChild(t)}handleCanvasSelection(e){const t=e.currentTarget;e.shiftKey?this.handleMultiSelect(t):this.handleSingleSelect(t),this.updateCanvasNumbers()}handleMultiSelect(e){this.state.selectedCanvases.has(e)?this.state.selectedCanvases.size>1&&(this.state.selectedCanvases.delete(e),e.classList.remove("selected")):(this.state.selectedCanvases.add(e),e.classList.add("selected"))}handleSingleSelect(e){this.state.selectedCanvases.forEach((e=>{e.classList.remove("selected")})),this.state.selectedCanvases.clear(),this.state.selectedCanvases.add(e),e.classList.add("selected")}updateCanvasNumbers(){document.querySelectorAll(".canvas-number").forEach(((e,t)=>{const n=e.closest(".canvas-wrapper").querySelector(".canvas"),o=this.state.selectedCanvases.has(n);e.textContent=`Canvas ${t+1}${o?" (Selected)":""}`}))}replaceRangeSliders(e){e.querySelectorAll(".custom-range-slider").forEach((e=>{const t=document.createElement("div");t.style.cssText="\n            width: 100%;\n            height: 8px;\n            border-radius: 4px;\n            background: var(--neutral-gray);\n            position: relative;\n            padding: 0 4px;\n        ";const n=document.createElement("div"),o=(e.value-e.min)/(e.max-e.min)*100;n.style.cssText=`\n            position: absolute;\n            left: 4px;\n            top: 28%;\n            height: 40%;\n            width: ${o}%;\n            background: var(--color-primary);\n            border-radius: 4px;\n        `;const a=document.createElement("div");a.style.cssText=`\n            position: absolute;\n            left: calc(${o}% - 10px);\n            top: 50%;\n            transform: translateY(-50%);\n            width: 20px;\n            height: 20px;\n            border-radius: 50%;\n            background: var(--color-primary);\n        `,t.appendChild(n),t.appendChild(a),e.parentNode.replaceChild(t,e)}))}updateButtonState(e){const t=document.getElementById("download-btn");t&&(e?(t.innerHTML='<i class="fas fa-spinner fa-spin"></i> Generating...',t.disabled=!0,t.classList.add("loading")):(t.innerHTML='<i class="fas fa-download"></i> Download PNG',t.disabled=!1,t.classList.remove("loading")))}async captureScreenshot(){this.animationController.disableAnimations(),this.updateButtonState(!0);const e=scale;setZoomScale(1);try{const e=Array.from(this.state.selectedCanvases).map((async(e,t)=>{const n=e.querySelector(".phoneScrollCon");if(!n)return void console.error("Phone scroll container not found");const o=n.scrollTop,a=n.scrollLeft,i=e.cloneNode(!0),r=document.createDocumentFragment(),s=document.createElement("div");s.style.cssText=`\n          position: absolute;\n          top: -9999px;\n          left: -9999px;\n          width: ${e.clientWidth+12}px;\n          height: ${e.clientHeight+12}px;\n          overflow: hidden;\n          padding: 6px;\n        `,s.appendChild(i),r.appendChild(s),document.body.appendChild(r);const l=i.querySelector(".phoneScrollCon");if(l){l.scrollTop=0,l.scrollLeft=0;const e=l.firstElementChild;e&&(e.style.transform=`translate(${-a}px, ${-o}px)`)}Object.assign(i.style,{height:`${e.clientHeight}px`,width:`${e.clientWidth}px`,overflow:"hidden",margin:"0"}),this.replaceRangeSliders(i),await new Promise((e=>requestAnimationFrame(e)));const c=await html2canvas(i,{backgroundColor:null,logging:!1,useCORS:!0,scale:window.devicePixelRatio,width:e.clientWidth+12,height:e.clientHeight+12,scrollX:-6,scrollY:-6,windowWidth:e.clientWidth+12,windowHeight:e.clientHeight+12,imageTimeout:6e4,onclone:e=>new Promise((t=>{requestAnimationFrame((()=>{const n=e.querySelector(i.tagName);if(n){const e=n.querySelector(".phoneScrollCon");if(e){e.scrollTop=0,e.scrollLeft=0;const t=e.firstElementChild;t&&(t.style.transform=`translate(${-a}px, ${-o}px)`)}}t()}))}))});if(document.body.removeChild(s),0===c.width||0===c.height)return void console.error("Rendered canvas has zero dimensions");const d=document.createElement("a"),p=this.state.selectedCanvases.size>1?`Dlightning-mockup-${t+1}.png`:"Dlightning-mockup.png";d.download=p,d.href=c.toDataURL("image/png",1),d.click()}));await Promise.all(e)}catch(e){console.error("Screenshot error:",e)}finally{this.animationController.restoreAnimations(),setZoomScale(e),this.updateButtonState(!1)}}setupDownloadButton(){document.getElementById("download-btn").addEventListener("click",(()=>this.captureScreenshot()))}initOnboarding(){if(localStorage.getItem("onboardingComplete"))return;if(window.innerWidth<=768||"ontouchstart"in window||navigator.maxTouchPoints>0)return;const e=document.createElement("div");e.className="onboarding-overlay";const t=document.createElement("div");t.className="onboarding-modal";const n=[{title:'Welcome to the <span style="letter-spacing: .2rem;;">Dlightning <i style="color: var(--color-accent)" class="fas fa-bolt-lightning"></i></span> <br> Screen Builder!',content:"Create beautiful wireframes<br> in minutes",highlight:null},{title:"Add Components",content:"Select an interface element in the menu-bar to add it to&nbsp;the&nbsp;screen.<br>",highlight:".component-btn"},{title:"Versions",content:"Some components have alternate versions. Once added to the canvas, hover the component to cycle through your options.",highlight:null},{title:"3 Menu Tabs",content:"Switch between common interface elements, more complex components, and set the overall theme!",highlight:".sidebar-tabs"},{title:"View Content Full-Height",content:"Toggle the mock screen's height to show all components.<br>Click this before export to download the screen top-to-bottom.",highlight:"#toggleCanvasBtn"},{title:"Add A New Screen",content:"Create multiple screens using the + button. <br> (Hold Shift to select multiple screens at once)",highlight:".add-canvas-btn"},{title:"Export Screens",content:"When you're ready to share your work, export an image. <br><br>",highlight:"#download-btn"},{title:"Choose A Starting Template",content:" ",highlight:null,isTemplateStep:!0}];let o=localStorage.getItem("onboardingComplete")?n.length-1:0;function a(e){if(n[e].isTemplateStep?t.innerHTML=`\n                <h2 style="color: #2c3e50; margin-top: 0;">${n[e].title}</h2>\n                <p style="color: #475152; font-size: 16px;">${n[e].content}</p>\n                <div class="templates" style="display: flex; gap: 16px; margin: 20px 0;">\n                    <button onclick="selectTemplate('template1')">\n                        <h3 style="margin-top: 0;">Profile Template</h3>\n                        <hr>\n                        <p style="color: var(--basic-txt-color)">Image, Avatar, Pills, and Paragraph <br><br></p>\n                    </button>\n                    <button onclick="selectTemplate('template2')">\n                        <h3 style="margin-top: 0;">Content Template</h3>\n                        <hr>\n                        <p style="color: var(--basic-txt-color)">Hero, Heading, Accordion, and Footer</p>\n                    </button>\n                    <button onclick="selectTemplate('template3')">\n                        <h3 style="margin-top: 0;">Form Template</h3>\n                        <hr>\n                        <p style="color: var(--basic-txt-color)">Heading, Form Elements, Submit Button</p>\n                    </button>\n                    <button onclick="selectTemplate('blank')">\n                        <h3 style="margin-top: 0;">Blank Canvas</h3>\n                        <br><br><br><br><br><br><br>\n                    </button>\n                </div>\n                <div class="onboarding-nav" >\n                    <button onclick="prevStep()" style="padding: 10px 14px; background: #ecf0f1; border: none; border-radius: 5px; cursor: pointer; margin-right: 45px;"><i class="fas fa-arrow-left"></i></button>\n                     <button onclick="${e===n.length-1?"completeOnboarding()":"nextStep()"}" style="padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer;">\n                            ${e===n.length-1?"Skip":"Next"}\n                        </button>\n                </div>\n            `:t.innerHTML=`\n                <div style="display: flex; gap: 24px;">\n                    <div>\n                    <h2 style="color: #2c3e50; margin-top: 0;">${n[e].title}</h2>\n                    <p style="color: #7f8c8d; font-size: 16px;">${n[e].content}</p>\n                    </div>\n                    ${e>0?"":" \n                    <div>\n                        <img width=\"140px\" src='img/products/BHandH.png'>\n                    </div>"}\n                </div>\n                <div class="onboarding-nav">\n                    ${e>0?'\n                        <button onclick="prevStep()" style="padding: 10px 14px; background: #ecf0f1; border: none; border-radius: 5px; cursor: pointer;"><i class="fas fa-arrow-left"></i></button>\n                    ':'<button onclick="prevStep()" style="padding: 10px 14px; background: var(--neutral-gray); border: none; opacity: 0.46; border-radius: 5px; cursor: not-allowed;" disabled><i class="fas fa-arrow-left"></i></button>'}\n                    <div style="display: flex; align-items: center;">\n                        ${n.map(((t,n)=>`\n                            <div class="onboarding-dot ${n===e?"active":""}" onclick="goToStep(${n})"></div>\n                        `)).join("")}\n                    </div>\n                    <div style="display: flex; gap: 10px;">\n                        <button onclick="completeOnboarding()" style="padding: 10px 20px; background: #95a5a6; color: white; border: none; border-radius: 5px; cursor: pointer;">\n                            Skip Tutorial\n                        </button>\n                        <button onclick="${e===n.length-1?"completeOnboarding()":"nextStep()"}" style="padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer;">\n                            ${e===n.length-1?"Get Started":"Next"}\n                        </button>\n                    </div>\n                </div>\n            `,document.querySelectorAll(".highlight-element").forEach((e=>e.remove())),n[e].highlight){const t=document.querySelector(n[e].highlight);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((()=>{const e=t.getBoundingClientRect(),n=document.createElement("div");n.className="highlight-element",n.style.cssText=`\n                        position: fixed;\n                        top: ${e.top-6}px;\n                        left: ${e.left-6}px;\n                        width: ${e.width+8}px;\n                        height: ${e.height+8}px;\n                        border: 2px solid #3498db;\n                        border-radius: 4px;\n                        pointer-events: none;\n                        z-index: 10000;\n                        animation: pulse .8s 2;\n                    `,document.body.appendChild(n)}),500))}}window.nextStep=function(){o<n.length-1&&(o++,a(o))},window.prevStep=function(){o>0&&(o--,a(o))},window.goToStep=function(e){o=e,a(o)},window.completeOnboarding=function(){localStorage.setItem("onboardingComplete","true"),e.remove(),document.querySelectorAll(".highlight-element").forEach((e=>e.remove()))};const i="This is a paragraph, click to edit it directly. For quick deletion, triple-click to highlight.",r="Hover over any element to reveal options for customization. Use the ⋮ handle on the left to drag elements into a new order or to another screen. The red 'x' on the right deletes components, and the icon at the bottom duplicates them. Each element has unique features to explore!";window.selectTemplate=e=>{const t=document.querySelector(".canvas-content");t.innerHTML="","template1"===e?[{component:this.components.adjustableSpace(),type:"adjustableSpace"},{component:this.components.image(),type:"image"},{component:this.components.avatar(),type:"avatar"},{component:this.components.chipGroup(),type:"chipGroup"},{component:this.components.paragraph(null,i),type:"paragraph"},{component:this.components.paragraph(null,r),type:"paragraph"}].forEach((({component:e,type:n})=>{t.appendChild(this.wrapComponentInContainer(e,n))})):"template2"===e?[{component:this.components.hero(),type:"hero"},{component:this.components.heading("h2"),type:"heading"},{component:this.components.paragraph(null,i),type:"paragraph"},{component:this.components.paragraph(null,r),type:"paragraph"},{component:this.components.icon(),type:"icon"},{component:this.components.accordion(),type:"accordion"},{component:this.components.adjustableSpace(),type:"adjustableSpace"},{component:this.components.footer(),type:"footer"}].forEach((({component:e,type:n})=>{t.appendChild(this.wrapComponentInContainer(e,n))})):"template3"===e&&[{component:this.components.heading("h2"),type:"heading"},{component:this.components.paragraph(null,i),type:"paragraph"},{component:this.components.label(),type:"label"},{component:this.components.input(),type:"input"},{component:this.components.label(),type:"label"},{component:this.components.textarea(),type:"textarea"},{component:this.components.label(),type:"label"},{component:this.components.dropdown(),type:"dropdown"},{component:this.components.label(),type:"label"},{component:this.components.checkbox(),type:"checkbox"},{component:this.components.checkbox(),type:"checkbox"},{component:this.components.checkbox(),type:"checkbox"},{component:this.components.adjustableSpace(),type:"adjustableSpace"},{component:this.components.button(),type:"button"}].forEach((({component:e,type:n})=>{t.appendChild(this.wrapComponentInContainer(e,n))})),localStorage.setItem("onboardingComplete","true"),document.querySelector(".onboarding-overlay").remove();const n=document.querySelector(".sidebar");n&&n.scrollTo({top:0,behavior:"smooth"})},e.appendChild(t),document.body.appendChild(e),setTimeout((()=>{e.classList.add("visible"),a(o)}),100)}components={hero:()=>{const e=document.createElement("div");e.style.cssText="width: 100%; position: relative; margin-top: -10px; margin-bottom: 8px; padding: 40px 10px 2px 10px;";const t=document.createElement("div");t.style.cssText="width: 100%; padding: 0 10px; position: absolute; top: -1; left: 0; right: 0; bottom: 0; background-size: cover; background-position: center; margin-left: -10px;";const n=document.createElement("div");n.style.cssText="position: absolute; width: 100%; padding: 0 10px; top: 0; left: 0; right: 0; bottom: -1; background: linear-gradient(transparent 28%, var(--color-primary) 78%, var(--color-primary) 92%); opacity: 0.94; margin-left: -10px;";const o=document.createElement("div");o.classList.add("resizeable"),o.style.cssText="position: relative; padding: 64px 10px 10px 10px; text-align: center; width: 100%; color: white; margin-left: -10px;";const a=document.createElement("button");a.textContent="Add Image",a.style.cssText="\n        position: absolute; top: 40px; left: 50%; transform: translateX(-50%);\n        padding: 5px 10px; font-size: 14px; background-color: #333; color: white; \n        border: none; cursor: pointer; display: none; z-index: 9991;\n    ",e.appendChild(a);const i=document.createElement("div"),r=document.createElement("h1");r.contentEditable="true",r.textContent="Welcome",r.style.cssText="margin: 0; font-size: 28px; margin-bottom: 10px; color: white !important;",i.appendChild(r);const s=document.createElement("div"),l=document.createElement("p");return l.contentEditable="true",l.textContent="This is a hero section with a beautiful gradient background",l.style.cssText="margin: 0; font-size: 16px;",s.appendChild(l),o.appendChild(i),o.appendChild(s),e.appendChild(t),e.appendChild(n),e.appendChild(o),e.addEventListener("mouseenter",(()=>{a.style.display="block"})),e.addEventListener("mouseleave",(()=>{a.style.display="none"})),a.addEventListener("click",(()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{const n=e.target.files[0];if(n){const e=new FileReader;e.onload=e=>{t.style.backgroundImage=`url(${e.target.result})`},e.readAsDataURL(n)}},e.click()})),e},button(e){let t;return e?t=e.cloneNode(!0):(t=document.createElement("div"),t.style.cssText="width: 100%; display: flex; justify-content: space-between; gap: 14px;",t.innerHTML=setupVariants("button")[0],t.classList.add("componentButton")),t.querySelectorAll(".button").forEach((e=>{e.setAttribute("contentEditable","true"),e.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()})),e.addEventListener("paste",(e=>{e.preventDefault();const t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)}))})),t},input(e){let t;if(e){t=e.cloneNode(!0);const n=t.querySelector('[contenteditable="true"]');return n&&(n.addEventListener("input",(function(){""===this.textContent.trim()?this.classList.add("empty"):this.classList.remove("empty")})),n.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()})),n.addEventListener("paste",(e=>{e.preventDefault();const t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)}))),t}t=document.createElement("div"),t.style.cssText="width: 100%;",t.innerHTML=setupVariants("input")[0];const n=t.querySelector('[contenteditable="true"]');if(n&&n.addEventListener("input",(function(){""===this.textContent.trim()?this.classList.add("empty"):this.classList.remove("empty")})),!document.querySelector("style[data-input-placeholder]")){const e=document.createElement("style");e.setAttribute("data-input-placeholder","true"),e.textContent="\n        [contenteditable=true].empty:before {\n          content: attr(data-placeholder);\n          color: #999;\n          cursor: text;\n          padding-left: 4px;\n        }\n      ",document.head.appendChild(e)}return t.classList.add("empty"),t.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()})),t.addEventListener("paste",(e=>{e.preventDefault();const t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)})),t},searchBar(e){let t;e&&(t=e.cloneNode(!0)),t=document.createElement("div"),t.style.cssText="width: 100%;",t.innerHTML=setupVariants("searchBar")[0];return t.querySelector('[contenteditable="true"]').addEventListener("input",(function(){""===this.textContent.trim()?this.classList.add("empty"):this.classList.remove("empty")})),t.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()})),t},textarea(e){let t;if(e){t=e.cloneNode(!0);const n=t.querySelector('[contenteditable="true"]'),o=t.querySelector(".resize-handle");return n&&o&&this.attachEventListeners(n,o),t}t=document.createElement("div"),t.style.cssText="width: 100%; position: relative;";const n=document.createElement("div");if(n.innerHTML=setupVariants("textarea")[0],!document.querySelector("style[data-textarea-placeholder]")){const e=document.createElement("style");e.setAttribute("data-textarea-placeholder","true"),e.textContent="\n        [contenteditable=true].empty:before {\n          content: attr(data-placeholder);\n          color: #999;\n          cursor: text;\n        }\n      ",document.head.appendChild(e)}return n.querySelector('[contenteditable="true"]').addEventListener("input",(function(){""===this.textContent.trim()?this.classList.add("empty"):this.classList.remove("empty")})),n.addEventListener("paste",(e=>{e.preventDefault();const t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)})),t.appendChild(n),t},checkbox:()=>{const e=document.createElement("div");e.style.cssText="\n        display: flex; align-items: center;\n        font-size: 16px; color: var(--basic-txt-color); width: 100%;\n        justify-content: flex-start;\n        margin: 4px 0 0 0;\n    ";const t=document.createElement("div");t.className="fa-regular fa-square",t.style.cssText="\n        margin: -2px 10px 0 10px;\n        border-radius: 4px;\n        cursor: pointer;\n        position: relative;\n        font-size: 26px;\n        color: #a0a0a0;\n    ";const n=document.createElement("i");n.className="fa-solid fa-square-check",n.style.cssText="\n        font-size: 26px;\n        color: var(--color-primary);\n        display: none; \n        position: absolute;\n        top: 0px;\n        left: 0px;\n        border: none;\n    ",t.appendChild(n),t.addEventListener("click",(()=>{const e="none"===n.style.display;n.style.display=e?"block":"none"}));const o=document.createElement("span");return o.textContent="click to edit",o.style.cssText="font-size: 16px; color: var(--basic-txt-color)",this.makeTextEditable(o),e.appendChild(t),e.appendChild(o),e},radio:()=>{const e=document.createElement("div");e.style.cssText="display: flex; align-items: center; width: 100%; margin: 4px 0 0 0;";const t=document.createElement("label");t.style.cssText="display: flex; align-items: center; font-size: 16px; color: #333; justify-content: flex-start;";const n=document.createElement("div");n.style.cssText="\n        width: 20px; height: 20px; \n        margin: 0 10px;\n        border: 2px solid #a0a0a0;\n        border-radius: 50%;\n        display: flex; align-items: center; justify-content: center;\n        cursor: pointer;\n    ",n.classList.add("custom-radio");const o=document.createElement("span");o.style.cssText="\n        width: 12px; height: 12px;\n        background-color: var(--color-primary);\n        border-radius: 50%;\n        display: none;\n    ",n.appendChild(o),n.addEventListener("click",(()=>{document.querySelectorAll(".custom-radio").forEach((e=>{e.querySelector("span").style.display="none",e.style.borderColor="#e0e0e0"})),o.style.display="block",n.style.borderColor="var(--color-primary)"}));const a=document.createElement("span");return a.textContent="click to edit",this.makeTextEditable(a),e.appendChild(t),t.appendChild(n),e.appendChild(a),e},dropdown:()=>{const e=document.createElement("div");e.className="custom-dropdown-container";const t=document.createElement("div");t.className="dropdown-header";const n=document.createElement("div");n.className="selected-text",n.textContent="Dropdown";const o=document.createElement("i");o.className="fas fa-chevron-down";const a=document.createElement("div");a.className="options-container";const i=e=>{const t=document.createElement("div");t.className="option-wrapper";const n=document.createElement("div");n.className="option",n.setAttribute("contenteditable","true"),n.textContent=e;const o=document.createElement("button");return o.className="delete-button",o.innerHTML='<i class="fas fa-times"></i>',o.addEventListener("click",(e=>{e.stopPropagation(),t.remove()})),t.appendChild(n),t.appendChild(o),t},r=document.createElement("div");r.className="add-option-wrapper";const s=document.createElement("button");s.className="add-button",s.innerHTML='<i class="fas fa-plus"></i> Add Option',r.appendChild(s),["Option 1","Option 2"].forEach((e=>{a.appendChild(i(e))})),t.appendChild(n),t.appendChild(o),e.appendChild(t),e.appendChild(a),a.appendChild(r);const l=document.createElement("style");return l.textContent="\n      .custom-dropdown-container {\n        position: relative;\n        width: 100%;\n        font-size: 16px;\n        color: var(--basic-txt-color);\n      }\n      \n      .dropdown-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        height: 42px;\n        padding: 0 12px;\n        background-color: var(--input-bg-color);\n        border-bottom: 2px solid var(--color-primary);\n        cursor: pointer;\n      }\n      \n      .selected-text {\n        flex-grow: 1;\n      }\n      \n      .options-container {\n        display: none;\n        position: absolute;\n        top: 100%;\n        left: 0;\n        right: 0;\n        background: var(--input-bg-color);\n        border: 1px solid var(--neutral-gray);\n        border-top: none;\n        max-height: 300px;\n        overflow-y: auto;\n        z-index: 900;\n        opacity: 0.94;\n      }\n      \n      .options-container.active {\n        display: block;\n      }\n      \n      .option-wrapper {\n        display: flex;\n        align-items: center;\n        padding: 8px 12px;\n        position: relative;\n      }\n      \n      .option-wrapper:hover {\n        background-color: var(--color-primary);\n      }\n      \n      .option {\n        flex-grow: 1;\n        padding: 4px;\n        min-height: 20px;\n      }\n      \n      .option:focus {\n        outline: none;\n        background-color: rgba(255,255,255,0.2);\n        box-shadow: 0 0 0 2px var(--color-primary);\n        border-radius: 4px;\n      }\n      \n      .delete-button {\n        display: none;\n        background: none;\n        border: none;\n        color: #ff4444;\n        cursor: pointer;\n        padding: 4px 8px;\n        margin-left: 8px;\n      }\n      \n      .option-wrapper:hover .delete-button {\n        display: block;\n      }\n      \n      .add-option-wrapper {\n        padding: 8px 12px;\n        border-top: 1px solid #ddd;\n        display: none; /* Hide by default */\n        }\n\n        .options-container:hover .add-option-wrapper {\n        display: block; /* Show on hover over options container */\n        }\n      \n      .add-button {\n        width: 100%;\n        padding: 8px;\n        background: none;\n        border: 0.12rem dashed #ddd;\n        color: #666;\n        cursor: pointer;\n        border-radius: 4px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n      }\n      \n      .add-button:hover {\n        border-color: var(--color-primary);\n        color: var(--color-primary);\n      }\n      \n      .add-button i {\n        font-size: 12px;\n      }\n    ",document.head.appendChild(l),t.addEventListener("click",(()=>{a.classList.toggle("active"),o.classList.toggle("fa-chevron-up"),o.classList.toggle("fa-chevron-down")})),s.addEventListener("click",(()=>{const e=i("New Option");a.insertBefore(e,r),e.querySelector(".option").focus()})),a.addEventListener("click",(e=>{const t=e.target.closest(".option");t&&(n.textContent=t.textContent)})),e},icon(e){let t;if(e)t=e.cloneNode(!0);else{t=document.createElement("div"),t.classList.add("iconContainerClass"),t.style.cssText="width: 100%; text-align: center; padding: 10px; position: relative;";const e=document.createElement("i");e.className="fa-solid fa-bolt-lightning",e.style.cssText="font-size: 24px; color: var(--color-accent); cursor: pointer;",t.appendChild(e)}const n=t.querySelector("i")||t.firstChild,o=document.createElement("input");o.classList.add("iconControls"),o.type="number",o.min="12",o.max="96",o.value="24",o.style.cssText="\n        position: absolute;\n        top: -16px;\n        left: 50%;\n        transform: translateX(-50%);\n        width: 60px;\n        padding: 3px 0;\n        border: 1px solid #ddd;\n        border-radius: 2px;\n        font-size: 12px;\n        text-align: center;\n        z-index: 2445;\n    ",t.appendChild(o);const a=document.createElement("i");a.className="fas fa-arrow-left iconControls",a.style.cssText="\n        position: absolute;\n        left: 32px;\n        top: 50%;\n        transform: translateY(-50%);\n        cursor: pointer;\n        color: var(--interface-color);\n        font-size: 16px;\n        border-left: 2px solid var(--interface-color);\n    ",t.appendChild(a);const i=document.createElement("i");return i.className="fas fa-arrow-right iconControls",i.style.cssText="\n        position: absolute;\n        right: 32px;\n        top: 50%;\n        transform: translateY(-50%);\n        cursor: pointer;\n        color: var(--interface-color);\n        font-size: 16px;\n        border-right: 2px solid var(--interface-color);\n    ",t.appendChild(i),a.addEventListener("click",(e=>{e.stopPropagation(),"center"!==t.style.textAlign&&t.style.textAlign?"right"===t.style.textAlign&&(t.style.textAlign="center",a.style.visibility="visible",i.style.visibility="visible"):(t.style.textAlign="left",a.style.visibility="hidden",i.style.visibility="visible")})),i.addEventListener("click",(e=>{e.stopPropagation(),"center"!==t.style.textAlign&&t.style.textAlign?"left"===t.style.textAlign&&(t.style.textAlign="center",a.style.visibility="visible",i.style.visibility="visible"):(t.style.textAlign="right",i.style.visibility="hidden",a.style.visibility="visible")})),o.addEventListener("input",(e=>{n.style.fontSize=`${e.target.value}px`})),n.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(n)})),t},card(e){let t;return e?t=e.cloneNode(!0):(t=document.createElement("div"),t.innerHTML=setupVariants("card")[0],t.classList.add("componentCard"),t.style.cssText="\n            width: 100%;\n            border-radius: var(--standard-radius);\n            padding: 0;\n            border-bottom: 3px solid rgba(0,0,0,.12);\n        "),t.querySelectorAll("h3, p").forEach((e=>{e.setAttribute("contentEditable","true")})),t},card2(e){let t;return e?t=e.cloneNode(!0):(t=document.createElement("div"),t.innerHTML=setupVariants("card2")[0],t.classList.add("componentCard"),t.style.cssText="\n            width: 100%;\n            border-radius: var(--standard-radius);\n            padding: 0;\n            border-bottom: 3px solid rgba(0,0,0,.12);\n        "),t.querySelectorAll("h3, p").forEach((e=>{e.setAttribute("contentEditable","true")})),t},adjustableSpace:e=>{let t,n,o;return e?(t=e.cloneNode(!0),n=t.querySelector(".space-range"),o=t.querySelector(".height-display")):(t=document.createElement("div"),t.classList="blankSpace",t.style.height="50px",o=document.createElement("input"),o.type="number",o.classList="height-display",o.value="50",o.style.fontSize="16px",t.appendChild(o),n=document.createElement("input"),n.className="space-range",n.type="range",n.min="12",n.max="300",n.value="50",n.style.width="100%",t.appendChild(n)),n.addEventListener("input",(()=>{const e=n.value;t.style.height=`${e}px`,o.value=`${e}`})),o.addEventListener("change",(()=>{const e=o.value;t.style.height=`${e}px`,n.value=`${e}`})),{container:t,setup:()=>{const e=t.closest(".component-container");e&&(e.addEventListener("mouseenter",(()=>{})),e.addEventListener("mouseleave",(()=>{t.style.outline="none"})))}}},image(e){const t=document.createElement("div");return t.classList.add("non-editable"),t.style.cssText="\n        width: 100%; \n        display: flex; \n        gap: 8px;\n        ",t.innerHTML=setupVariants("image")[0],t},imgGallery(e){const t=document.createElement("div");t.style.cssText="width: 100%; position: relative;";const n=document.createElement("div");n.style.cssText=" \n            display: flex;\n            gap: 8px;\n            overflow-x: visible; \n            flex-wrap: nowrap; \n            min-width: 120px; \n            height: auto;\n            padding-bottom: 4px;\n    ";const o=document.createElement("div"),a=document.createElement("div");o.style.cssText="\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n            gap: 8px;\n        ",a.style.cssText="\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n            gap: 8px;\n        ";const i=()=>{const e=document.createElement("div");e.style.cssText="\n            display: flex; \n            flex-direction: column; \n            gap: 6px;\n            min-width: 46%;\n        ";const t=document.createElement("div");t.classList="card-image resizeable",t.style.cssText="\n            width: 100%;\n            height: 140px !important;\n            background-color: var(--neutral-gray); \n            display: flex; \n            justify-content: center; \n            align-items: center; \n            cursor: pointer; \n            border-radius: var(--standard-radius); \n            overflow: hidden;\n            position: relative;\n        ",t.innerHTML='<span class="imgMsg non-editable">Click to add image</span>',resizer.makeResizable(t);const o=document.createElement("figcaption");o.textContent="Image caption",o.contentEditable="true",o.style.cssText="text-align: right; color: #666; font-style: italic; font-size: 12px; padding-right: 4px; margin: 0 4px; display: none;";const a=document.createElement("div");a.style.cssText="\n            position: absolute;\n            leftt: 14px;\n            bottom: 4px;\n            width: 26px;\n            height: 26px;\n            cursor: pointer;\n            display: none;\n            align-items: center;\n            justify-content: center;\n            z-index: 20;\n            background: rgba(51, 51, 51, 0.7);\n            border-radius: 4px;\n            color: white;\n            font-size: 14px;\n        ",a.innerHTML="+ caption";let i=!1;return a.addEventListener("click",(e=>{e.stopPropagation(),i=!i,o.style.display=i?"block":"none",a.style.background=i?"rgba(51, 51, 51, 0.9)":"rgba(51, 51, 51, 0.7)"})),t.addEventListener("mouseover",(()=>{t.style.backgroundImage&&(a.style.display="flex")})),t.addEventListener("mouseout",(()=>{isResizing||(a.style.display="none")})),o.addEventListener("input",(()=>{o.setAttribute("data-updated","true")})),n.addEventListener("mouseout",(()=>{"true"===o.getAttribute("data-updated")?o.style.display="block":o.style.display="none"})),t.addEventListener("click",(e=>{const n=document.createElement("input");n.type="file",n.accept="image/*",n.onchange=e=>{const n=e.target.files[0];if(n){const e=new FileReader;e.onload=e=>{t.style.backgroundImage=`url(${e.target.result})`,t.style.backgroundSize="cover",t.style.backgroundPosition="center";const n=t.querySelector(".imgMsg");n&&n.remove()},e.readAsDataURL(n)}},n.click()})),e.appendChild(t),e};o.appendChild(i()),a.appendChild(i()),o.appendChild(i()),n.appendChild(o),n.appendChild(a),t.appendChild(n);const r=(()=>{const e=document.createElement("button");return e.classList="fa fa-plus",e.style.cssText="\n            background-color: var(--interface-color); \n            color: white; \n            border: 1px solid var(neutral-gray); \n            border-radius: 64px; \n            padding: 8px; \n            cursor: pointer;\n            display: none;\n            position: absolute;\n            bottom: 28px;\n            left: 50%;\n            transform: translatex(-50%);\n            }\n        ",e.addEventListener("click",(()=>{const t=i();o.children.length<=a.children.length?o.appendChild(t):a.appendChild(t),e.style.display="none"})),e})();return t.appendChild(r),t.addEventListener("mouseover",(()=>{r.style.display="block"})),t.addEventListener("mouseout",(()=>{r.style.display="none"})),t},navbar:()=>{const e=document.createElement("div");e.className="navContain",e.style.cssText="position: relative;";const t=document.createElement("div");t.style.cssText="background-color: rgba(0,0,0,0.12); width: 100%; height: 59px; position: absolute; top:0; left: 0; z-index: 1";const n=document.createElement("div");n.className="navbar top-navbar";const o=document.createElement("button");o.innerHTML='<i class="fas fa-circle-left"></i>',o.className="nav-control prev-nav",o.style.cssText="\n                position: absolute;\n                left: 40%;\n                top: -6px;\n                transform: translateY(-50%);\n                background: var(--basic-txt-color);\n                border-radius: 99px;\n                padding: 1px;\n                border: none;\n                font-size: 24px;\n                color: var(--input-bg-color);\n                cursor: pointer;\n                opacity: 0;\n                transition: opacity 0.3s ease, color 0.3s ease;\n                z-index: 9910;\n            ";const a=document.createElement("button");a.innerHTML='<i class="fas fa-circle-right"></i>',a.className="nav-control next-nav",a.style.cssText="\n                position: absolute;\n                right: 40%;\n                top: -6px;\n                transform: translateY(-50%);\n                background: var(--basic-txt-color);\n                border-radius: 99px;\n                padding: 1px;\n                border: none;\n                font-size: 24px;\n                color: var(--input-bg-color);\n                cursor: pointer;\n                opacity: 0;\n                transition: opacity 0.3s ease, color 0.3s ease;\n                z-index: 9910;\n            ",e.addEventListener("mouseenter",(()=>{o.style.opacity="1",a.style.opacity="1"})),e.addEventListener("mouseleave",(()=>{o.style.opacity="0",a.style.opacity="0"}));let i=0;const r={content:['<span spellcheck="false" style="font-size: 20px; font-weight: bold; color: var(--color-primary);">Brand</span>\n                    <div style="display: flex; align-items: center;">\n                        <a href="#" style="margin-left: 20px; color: var(--basic-txt-color); text-decoration: none;">Home</a>\n                        <a href="#" style="margin-left: 20px; color: var(--basic-txt-color); text-decoration: none;">About</a>\n                        <a href="#" style="margin-left: 20px; color: var(--basic-txt-color); text-decoration: none;">Contact</a>\n                        <div class="icon-container" style="margin-left: 20px;">\n                            <i class="fas fa-bars" style="font-size: 20px; color: var(--color-primary); cursor: pointer;"></i>\n                        </div>\n                    </div>','<div style="flex: 1; background-color: var(--color-background);"></div>\n                    <div style="width: 40px; height: 40px; background-color: var(--neutral-gray); border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer;" class="nav-image">\n                        <span class="non-editable">IMG</span>\n                    </div>\n                    <div style="flex: 1; display: flex; justify-content: flex-end;" class="icon-container">\n                        <i class="fas fa-bars" style="font-size: 24px; color: var(--color-primary); cursor: pointer;"></i>\n                    </div>','<div class="icon-container">\n                        <i class="fas fa-arrow-left" style="font-size: 20px; color: var(basic-txt-color); margin-right: 15px; cursor: pointer;"></i>\n                    </div>\n                    <div style="width: 100%; display: flex; justify-content: center;">\n                        <span spellcheck="false" style="font-size: 24px; font-weight: bold; color: var(--basic-txt-color);">Brand</span>\n                    </div>\n                    <div class="icon-container">\n                        <i class="fas fa-bars" style="font-size: 20px; color: var(basic-txt-color); margin-right: 15px; cursor: pointer;"></i>\n                    </div>','<div style="display: flex; align-items: center; width: 100%; padding: 0 10px;">\n                        <div class="icon-container">\n                            <i class="fas fa-arrow-left" style="font-size: 20px; color: var(--color-primary); margin-right: 15px; cursor: pointer;"></i>\n                        </div>\n                        <div style="width: 40px; height: 40px; background-color: var(--color-transparent-blk); border-radius: 50%; margin-right: 15px; display: flex; justify-content: center; align-items: center; cursor: pointer;" class="nav-image">\n                            <span class="non-editable">IMG</span>\n                        </div>\n                        <div style="flex: 1;">\n                            <span style="display: block; font-weight: bold; color: var(--color-primary);">Username</span>\n                            <span class="status" style="font-size: 14px; color: #27ae60; cursor: pointer;">Online</span>\n                        </div>\n                        <div style="display: flex; gap: 20px;">\n                            <div class="icon-container">\n                                <i class="fas fa-phone" style="font-size: 20px; color: var(--color-primary); cursor: pointer;"></i>\n                            </div>\n                            <div class="icon-container">\n                                <i class="fas fa-ellipsis-vertical" style="font-size: 20px; color: var(--color-primary); cursor: pointer;"></i>\n                            </div>\n                        </div>\n                    </div>'],cached:[]};r.cached=[...r.content],n.innerHTML=r.cached[i];const s=document.createElement("div");s.style.cssText="position: absolute; bottom: -24px; left: 50%; transform: translateX(-50%); display: flex; gap: 8px;",s.appendChild(o),s.appendChild(a);const l=()=>{(()=>{const e=n.querySelector(".nav-image");e&&e.addEventListener("click",(()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=t=>{const o=t.target.files[0];if(o){const t=new FileReader;t.onload=t=>{e.style.backgroundImage=`url(${t.target.result})`,e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.innerHTML="",r.cached[i]=n.innerHTML},t.readAsDataURL(o)}},t.click()}))})(),n.querySelectorAll(".icon-container i").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),showIconPicker(e)}))})),n.querySelectorAll("span:not(.non-editable), a").forEach((e=>{e.contentEditable=!0}))};l();return new MutationObserver((()=>{r.cached[i]=n.innerHTML})).observe(n,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),o.addEventListener("click",(()=>{i=(i-1+r.cached.length)%r.cached.length,n.innerHTML=r.cached[i],n.style.backgroundColor=2===i?"var(--color-primary)":"var(--color-background)",l()})),a.addEventListener("click",(()=>{i=(i+1)%r.cached.length,n.innerHTML=r.cached[i],n.style.backgroundColor=2===i?"var(--color-primary)":"var(--color-background)",l()})),e.appendChild(n),e.appendChild(t),e.appendChild(o),e.appendChild(a),e},modal:()=>{const e=document.createElement("div");e.className="modal-wrapper",e.style.cssText="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.6); display: flex; justify-content: center; align-items: center; z-index: 991; height: 100%";const t=document.createElement("div");return t.className="modal",t.innerHTML='\n                <h2 style="margin-top: 0; color: #2c3e50;">Modal Title</h2>\n                <p style="color: #7f8c8d;">This is the modal content. You can add any information here.</p>\n                <div style="text-align: right;">\n                    <button id="modal-ok-btn" style="padding: 10px 20px; background-color: var(--color-primary); color: white; border: none; border-radius: 5px; cursor: pointer;">OK</button>\n                </div>\n            ',t.querySelectorAll("h2, p").forEach((e=>this.makeTextEditable(e))),e.appendChild(t),t.querySelector("#modal-ok-btn").addEventListener("click",(()=>{e.remove(),this.modalAdded=!1})),e},toggleSwitch:()=>{const e=document.createElement("div");e.style.cssText="display: flex; align-items: center; min-width: 120px; width: 100%; padding: 0 10px;";const t=document.createElement("span");t.textContent="Off",t.style.cssText="margin-right: 10px; cursor: pointer;",this.makeTextEditable(t);const n=document.createElement("div");n.style.cssText="position: relative; display: inline-block; min-width: 60px; height: 34px;";const o=document.createElement("div");o.className="slider round",o.style.cssText="\n                position: absolute;\n                cursor: pointer;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: var(--neutral-gray);\n                transition: .4s;\n                border-radius: 34px;\n            ";const a=document.createElement("div");a.style.cssText='\n                position: absolute;\n                content: "";\n                height: 26px;\n                width: 26px;\n                left: 4px;\n                bottom: 4px;\n                background-color: white;\n                transition: .4s;\n                border-radius: 50%;\n            ';const i=document.createElement("span");i.textContent="On",i.style.cssText="margin-left: 10px; cursor: pointer;",this.makeTextEditable(i);let r=!1;const s=()=>{r=!r,r?(o.style.backgroundColor="var(--color-primary)",a.style.left="30px"):(o.style.backgroundColor="var(--neutral-gray)",a.style.left="4px")};return o.appendChild(a),n.appendChild(o),n.addEventListener("click",s),t.addEventListener("click",(()=>{r=!0,s()})),i.addEventListener("click",(()=>{r=!1,s()})),e.appendChild(t),e.appendChild(n),e.appendChild(i),e},progressBar:()=>{const e=document.createElement("div");e.style.cssText="width: 100%; text-align: center;";const t=document.createElement("div");t.style.cssText="width: 100%; height: 10px; background-color: #e0e0e0; border-radius: 5px; overflow: hidden;",t.className="progress-bar";const n=document.createElement("div");n.style.cssText="width: 76%; height: 100%; background-color: var(--color-primary); transition: width 0.3s ease;";const o=document.createElement("div");return o.textContent="76%",o.style.cssText="margin-top: 5px; font-weight: bold; color: var(--basic-txt-color);",t.appendChild(n),e.appendChild(t),e.appendChild(o),e},avatar(e){const t=document.createElement("div");t.style.width="100%",t.innerHTML=e?e.outerHTML:setupVariants("avatar")[0];let n=t.querySelector(".component-content");if(!n){for(n=document.createElement("div"),n.className="component-content";t.firstChild;)n.appendChild(t.firstChild);t.appendChild(n)}const o=createAlignmentControls(n);return n.alignmentControls=o,t},tabs(){const e=document.createElement("div");e.style.cssText="position: relative; width: 100%;";const t=document.createElement("div");t.style.cssText="display: flex; width: 100%;";const n=document.createElement("div");n.style.cssText="\n      position: absolute;\n      top: -22px;\n      left: 50%;\n      transform: translateX(-50%);\n      display: none;\n      gap: 6px;\n      padding: 5px;\n      z-index: 448;\n    ";const o=document.createElement("button");o.textContent="+",o.style.cssText="\n      background-color: var(--interface-color);\n      color: white;\n      border: none;\n      width: 24px;\n      height: 24px;\n      cursor: pointer;\n      border-radius: 4px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    ";const a=document.createElement("button");a.textContent="-",a.style.cssText="\n      background-color: var(--interface-color);\n      color: white;\n      border: none;\n      width: 24px;\n      height: 24px;\n      cursor: pointer;\n      border-radius: 4px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    ";const i=e=>{Array.from(t.children).forEach((e=>{e.style.backgroundColor="var(--neutral-gray)",e.style.color="var(--basic-txt-color)"})),e.style.backgroundColor="var(--color-primary)",e.style.color="white"},r=e=>{const t=document.createElement("button");return t.textContent=`Tab ${e}`,t.setAttribute("contentEditable","true"),t.style.cssText=`\n        background-color: ${1===e?"var(--color-primary)":"var(--neutral-gray)"};\n        color: ${1===e?"white":"black"};\n        border: none;\n        margin-right: 1px;\n        padding: 10px 20px;\n        cursor: pointer;\n        flex: 1;\n      `,t.addEventListener("click",(e=>{i(t)})),t};for(let e=1;e<=3;e++)t.appendChild(r(e));return o.addEventListener("click",(()=>{if(t.children.length<5){const e=t.children.length+1,n=r(e);t.appendChild(n),i(n)}})),a.addEventListener("click",(()=>{t.children.length>1&&t.removeChild(t.lastChild)})),n.appendChild(a),n.appendChild(o),e.addEventListener("mouseenter",(()=>{n.style.display="flex"})),e.addEventListener("mouseleave",(()=>{n.style.display="none"})),e.appendChild(t),e.appendChild(n),e},accordion:()=>{const e=document.createElement("div");e.style.cssText="width: 100%; border-radius: 8px; overflow: hidden; border: .12rem solid var(--color-primary)",e.innerHTML='\n        <button class="accordion-header" style="\n            background-color: var(--color-primary);\n            color: white;\n            cursor: pointer;\n            padding: 12px;\n            width: 100%;\n            border: none;\n            text-align: left;\n            outline: none;\n            transition: 0.4s;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            font-weight: 500;\n            font-size: 16px;">\n            <span contenteditable>Section Title</span>\n            <i class="fas fa-chevron-down" style="transition: transform 0.3s ease;"></i>\n        </button>\n        <div class="accordion-content" style="\n            padding: 0px 12px;\n            height: 0;\n            overflow: hidden;\n            transition: height 0.3s ease-out;\n            background-color: var(--input-bg-color);">\n            <div class="placeholder" style="padding: 18px 0;">\n                <div>\n                <p contenteditable style="margin: 0; color: #666;">Content for this section can be added here.</p>\n                </div>\n        </div>\n        </div>\n    ';const t=e.querySelector(".accordion-content");new MutationObserver((()=>{"0px"!==t.style.height&&""!==t.style.height?(t.style.padding="8px 12px 0 12px",t.style.height=t.scrollHeight-8+"px"):t.style.padding="0 12px";const e=t.querySelector(".component-container"),n=t.querySelector(".placeholder");e&&n?n.remove():e||n||(t.innerHTML='\n       <div class="placeholder" style="padding: 18px 0;">\n           <div>\n               <p contenteditable style="margin: 0; color: #666;">Content for this section can be added here.</p>\n           </div>\n       </div>\n    ')})).observe(t,{childList:!0,subtree:!0,attributes:!0}),t.addEventListener("mouseover",(e=>{e.target.closest('[data-component-variant^="accordion-"]');const n=e.target.closest(".component-container");t.querySelectorAll(".component-container").forEach((e=>{e.classList.add("controls-hidden")})),n&&n.classList.remove("controls-hidden")})),t.addEventListener("mouseleave",(()=>{t.querySelectorAll(".component-container").forEach((e=>{e.classList.add("controls-hidden")}))}));const n=document.createElement("style");n.textContent='\n        [data-component-variant="accordion-"] {\n            outline: none !important;\n        }\n\n        .controls-hidden > .component-handle,\n        .controls-hidden > .delete-btn,\n        .controls-hidden > .duplicate-btn,\n        .controls-hidden > .color-swatch-container {\n            visibility: hidden !important;\n            opacity: 0 !important;\n        }\n\n        .controls-hidden {\n            outline: none !important;\n        }\n    ',document.head.appendChild(n);const o=e.querySelector(".accordion-header"),a=e.querySelector(".fa-chevron-down");return o.addEventListener("click",(()=>{"0px"!==t.style.height&&""!==t.style.height?(t.style.height="0",a.style.transform="rotate(0)"):(t.style.height=t.scrollHeight+"px",a.style.transform="rotate(180deg)")})),new Sortable(t,{animation:150,handle:".component-handle, .card-image",ghostClass:"sortable-ghost",group:"shared-components",swapThreshold:.85,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,onEnd:function(e){const t=e=>{e.querySelectorAll(".color-swatch-container").forEach((e=>{e.style.visibility="hidden",e.style.opacity="0"}));const t=e.querySelector(".prev-btn"),n=e.querySelector(".next-btn"),o=e.querySelector(".variant-number"),a=e.querySelector(".add-image-button"),i=e.querySelector(".size-control"),r=e.querySelector(".left-arrow"),s=e.querySelector(".right-arrow");[e.querySelector(".resize-handle"),a,i,r,s,e.querySelector(".alignment-controls")].forEach((e=>{e&&(e.style.display="none")})),[controls,t,n,o].forEach((e=>{e&&(e.style.opacity="0")}))};t(e.from),t(e.to),e.item.classList.remove("controls-hidden")},onMove:function(e){return!e.related.classList.contains("navbar-spacer")},onStart:function(e){e.item.querySelector(".space-range:active")&&e.preventDefault()}}),e},alert:()=>{const e=document.createElement("div");return e.style.cssText="width: 100%",e.innerHTML=setupVariants("alert")[0],e.querySelectorAll("span").forEach((e=>{e.setAttribute("contentEditable","true")})),e},slider:()=>{const e=document.createElement("div");e.style.cssText="width: 100%; padding: 10px 0; display: flex; align-items: center;";const t=document.createElement("input");t.type="range",t.min="0",t.max="100",t.value="50",t.className="custom-range-slider",t.style.flex="1";const n=document.createElement("span");return n.style.cssText="margin: 0 6px 0 4px; font-weight: bold; min-width: 30px; text-align: right;",n.textContent="50",e.appendChild(t),e.appendChild(n),t.addEventListener("input",(()=>{n.textContent=t.value})),e},datePicker:()=>{const e=document.createElement("div");e.style.cssText="\n                width: 100%;\n                padding: 10px 18px 10px 10px;\n                border: 1px solid var(--color-primary);\n                border-radius: 5px;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                font-family: Arial, sans-serif;\n                font-size: 14px;\n                color: var(--basic-txt-color);\n                background-color: var(--input-bg-color);\n                position: relative;\n            ";const t=document.createElement("span");t.textContent="DD/MM/YYYY",t.style.cssText="opacity: 0.7;",t.setAttribute("contenteditable","true"),t.setAttribute("spellcheck","false"),t.addEventListener("input",(()=>{t.style.opacity="1"}));const n=document.createElement("i");n.className="fas fa-calendar-alt",n.style.cssText="\n                color: var(--color-primary);\n                font-size: 18px;\n                cursor: pointer;\n            ";const o=document.createElement("div");o.style.cssText="\n                position: absolute;\n                top: 101%;\n                right: 0;\n                width: 200px;\n                padding: 10px;\n                border: 1px solid #ddd;\n                border-radius: 5px;\n                background-color: var(--input-bg-color);\n                display: none; /* Initially hidden */\n                box-shadow: 0 2px 8px rgba(0,0,0,0.15);\n                z-index: 9;\n            ";const a=document.createElement("div");a.textContent="January",a.setAttribute("contenteditable","true"),a.style.cssText="\n                text-align: center;\n                font-weight: bold;\n                margin-bottom: 6px;\n            ";const i=document.createElement("div");i.textContent="2025",i.setAttribute("contenteditable","true"),i.style.cssText="\n                text-align: center;\n                font-weight: bold;\n                margin-bottom: 8px;\n            ";const r=document.createElement("div");r.style.cssText="\n                display: grid;\n                grid-template-columns: repeat(7, 1fr);\n                gap: 4px;\n                text-align: center;\n                font-size: 12px;\n            ";for(let e=1;e<=31;e++){const n=document.createElement("span");n.textContent=e,n.style.cssText="\n            padding: 5px;\n            border-radius: 3px;\n            cursor: pointer;\n            background-color: var(--neutral-gray);\n        ",n.addEventListener("click",(()=>{t.textContent=`${a.textContent} ${e}, ${i.textContent}`,o.style.display="none",t.style.opacity="1"})),r.appendChild(n)}return o.appendChild(a),o.appendChild(i),o.appendChild(r),n.addEventListener("click",(()=>{o.style.display="none"===o.style.display?"block":"none"})),e.appendChild(t),e.appendChild(n),e.appendChild(o),e},fileUpload:()=>{const e=document.createElement("div");e.style.cssText="width: 100%; position: relative;";const t=document.createElement("input");t.type="file",t.id="file-upload",t.style.cssText="width: 100%; height: 100%; opacity: 0; position: absolute; cursor: pointer;";const n=document.createElement("label");return n.htmlFor="file-upload",n.className="file-upload-label",n.innerHTML='<i class="fas fa-cloud-upload-alt"></i> Choose a file',e.appendChild(t),e.appendChild(n),e},bottomNav:()=>{const e=document.createElement("nav");e.className="bottomNavContain max-items";const t=document.createElement("div");t.style.cssText="background-color: rgba(0,0,0,0.12); width: 100%; height: 3px; position: absolute; top:-3px; left: 0;";const n=document.createElement("div");n.className="bottomNav bottom-navbar",n.innerHTML='\n                <div class="nav-item-container">\n                    <button class="nav-delete-btn">×</button>\n                    <a href="#" style="text-align: center; color: var(--color-primary); text-decoration: none; display: flex; flex-direction: column; align-items: center;">\n                        <i class="fas fa-home" style="font-size: 20px; margin-bottom: 4px;"></i>\n                        <span style="font-size: 12px;">Home</span>\n                    </a>\n                </div>\n                <div class="nav-item-container">\n                    <button class="nav-delete-btn">×</button>\n                    <a href="#" style="text-align: center; color: var(--color-primary); text-decoration: none; display: flex; flex-direction: column; align-items: center;">\n                        <i class="fas fa-search" style="font-size: 20px; margin-bottom: 4px;"></i>\n                        <span style="font-size: 12px;">Search</span>\n                    </a>\n                </div>\n                <div class="nav-item-container">\n                    <button class="nav-delete-btn">×</button>\n                    <a href="#" style="text-align: center; color: var(--color-primary); text-decoration: none; display: flex; flex-direction: column; align-items: center;">\n                        <i class="fas fa-plus" style="font-size: 20px; margin-bottom: 4px;"></i>\n                        <span style="font-size: 12px;">Add</span>\n                    </a>\n                </div>\n                <div class="nav-item-container">\n                    <button class="nav-delete-btn">×</button>\n                    <a href="#" style="text-align: center; color: var(--color-primary); text-decoration: none; display: flex; flex-direction: column; align-items: center;">\n                        <i class="fas fa-heart" style="font-size: 20px; margin-bottom: 4px;"></i>\n                        <span style="font-size: 12px;">Like</span>\n                    </a>\n                </div>\n                <div class="nav-item-container">\n                    <button class="nav-delete-btn">×</button>\n                    <a href="#" style="text-align: center; color: var(--color-primary); text-decoration: none; display: flex; flex-direction: column; align-items: center;">\n                        <i class="fas fa-user" style="font-size: 20px; margin-bottom: 4px;"></i>\n                        <span style="font-size: 12px;">Profile</span>\n                    </a>\n                </div>\n                <button class="nav-add-btn"><i class="fas fa-plus"></i></button>\n            ',n.querySelectorAll(".nav-delete-btn").forEach((t=>{t.addEventListener("click",(function(){n.querySelectorAll(".nav-item-container").length>1&&(this.closest(".nav-item-container").remove(),a(e))}))}));const o=n.querySelector(".nav-add-btn");function a(e){e.querySelectorAll(".nav-item-container").length>=5?e.classList.add("max-items"):e.classList.remove("max-items")}return o.addEventListener("click",(()=>{if(n.querySelectorAll(".nav-item-container").length<5){const t=document.createElement("div");t.className="nav-item-container",t.innerHTML='\n                        <button class="nav-delete-btn">×</button>\n                        <a href="#" style="text-align: center; color: var(--color-primary); text-decoration: none; display: flex; flex-direction: column; align-items: center;">\n                            <i class="fa-solid fa-bolt-lightning" style="font-size: 20px; margin-bottom: 4px;"></i>\n                            <span style="font-size: 12px;">New</span>\n                        </a>\n                    ',t.querySelector(".nav-delete-btn").addEventListener("click",(function(){n.querySelectorAll(".nav-item-container").length>1&&(this.closest(".nav-item-container").remove(),a(e))})),t.querySelector("i").addEventListener("click",(e=>{e.preventDefault(),showIconPicker(e.target)})),this.makeTextEditable(t.querySelector("span")),n.insertBefore(t,o),a(e)}})),n.querySelectorAll("span").forEach((e=>this.makeTextEditable(e))),n.querySelectorAll(".nav-item-container i").forEach((e=>{e.style.cursor="pointer",e.addEventListener("click",(t=>{t.preventDefault(),showIconPicker(e)}))})),e.appendChild(t),e.appendChild(n),e},heading(e,t="h1",n="Heading"){const o=["h1","h2","h3","h4","h5","h6"];let a=o.indexOf(t.toLowerCase());-1===a&&(a=0);const i=document.createElement("div");i.className="heading-wrapper",i.style.cssText="width: 100%; position: relative;";const r=document.createElement("div");r.className="heading-controls",r.style.cssText="\n        position: absolute;\n        top: -24px;\n        left: 14px;\n        opacity: 0;\n        transition: opacity 0.2s ease;\n        display: none;\n        gap: 2px;\n        display: flex;\n    ";const s=document.createElement("button"),l=document.createElement("i");l.className="fas fa-minus",s.appendChild(l),s.style.cssText="\n        padding: 6px 9px;\n        border: 1px solid var(--input-bg-color);\n        border-radius: 4px;\n        background: var(--interface-color);\n        color: #e8e8e8;\n        cursor: pointer;\n        font-size: 13px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        opacity: 0;\n    ";const c=document.createElement("button"),d=document.createElement("i");d.className="fas fa-angle-right",c.appendChild(d),c.style.cssText=s.style.cssText;const p=document.createElement("span");let u;p.className="level-indicator",p.style.cssText="\n        padding: 7px 4px 4px 4px;\n        border: 1px solid var(--input-bg-color);\n        border-radius: 4px;\n        background: var(--interface-color);\n        color: #e8e8e8;\n        font-size: 13px;\n        line-height: 1;\n        min-width: 22px;\n        max-width: 22px;\n        text-align: center;\n        opacity: 0;\n    ",u=document.createElement(o[a]),u.textContent=n,u.setAttribute("contentEditable","true"),u.style.cssText="margin: 0;";const m=e=>{a=(e+o.length)%o.length;const t=o[a],n=document.createElement(t);n.textContent=u.textContent,n.setAttribute("contentEditable","true"),n.style.cssText=u.style.cssText,p.textContent=t.toUpperCase(),u.replaceWith(n),u=n};return s.addEventListener("click",(()=>m(a-1))),c.addEventListener("click",(()=>m(a+1))),i.addEventListener("mouseenter",(()=>{r.style.display="flex",setTimeout((()=>{r.style.opacity="1",c.style.opacity="1",s.style.opacity="1",p.style.opacity="1"}),0)})),i.addEventListener("mouseleave",(()=>{r.style.opacity="0",c.style.opacity="0",s.style.opacity="0",p.style.opacity="0",setTimeout((()=>{r.style.display="none"}),200)})),p.textContent=o[a].toUpperCase(),r.appendChild(p),r.appendChild(c),i.appendChild(r),i.appendChild(u),i},paragraph(e,t="This is a paragraph. Click to edit."){const n=document.createElement("div");n.className="component-wrapper",n.style.cssText="width: 100%;";const o=document.createElement("div");let a;return e?a=e.cloneNode(!0):(a=document.createElement("p"),a.textContent=t,a.style.cssText="color: var(--basic-txt-color); line-height: 1.6; margin-bottom: 15px;",a.setAttribute("contentEditable","true"),a.addEventListener("input",(()=>{n.dataset.paragraphText=a.textContent}))),o.appendChild(a),n.appendChild(o),n},blockquote(e){const t=document.createElement("div");t.className="component-wrapper",t.style.cssText="width: 100%;";const n=document.createElement("div");let o;return e?o=e.cloneNode(!0):(o=document.createElement("blockquote"),o.textContent="This is a block-quote. Click to edit.",o.style.cssText="color: #555; font-style: italic; border-left: 5px solid var(--color-primary); padding-left: 18px; margin: 12px 0;",o.setAttribute("contentEditable","true"),o.addEventListener("input",(()=>{t.dataset.blockquoteText=o.textContent}))),n.appendChild(o),t.appendChild(n),t},label(e){let t;return e?t=e.cloneNode(!0):(t=document.createElement("label"),t.textContent="Label Text",t.style.cssText="\n                display: block;\n                color: #2c3e50;\n                font-weight: 500;\n                margin: 10px 0 -4px 4px;\n                font-size: 14px;\n                width: 100%;\n              ",t.setAttribute("contentEditable","true"),t.addEventListener("input",(()=>{t.dataset.labelText=t.textContent}))),t},graph:()=>{const e=document.createElement("div");e.classList.add("resizeable"),e.style.cssText="width: 100%; height: 260px; background: var(--input-bg-color); padding: 34px 12px 14px 14px; border-radius: 8px; border: 0.12rem solid var(--neutral-gray); border-bottom: 3px solid rgba(0,0,0,.12); position: relative;";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=[{label:"Jan",value:30},{label:"Feb",value:45},{label:"Mar",value:25},{label:"Apr",value:60},{label:"May",value:40}],o=document.createElement("div");o.style.cssText="\n        width: 100%;\n        height: 100%;\n        position: relative;\n    ";const a=document.createElement("div");a.style.cssText="\n        position: absolute;\n        left: 20px;\n        right: 0;\n        top: 0;\n        bottom: 30px;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        pointer-events: none;\n    ";const i=document.createElement("div");function r(){i.innerHTML="";const e=Math.max(...n.map((e=>e.value)),1);a.innerHTML="";for(let t=0;t<=5;t++){const n=document.createElement("div");n.style.cssText="\n                width: 100%;\n                height: 1px;\n                background: var(--neutral-gray);\n                position: relative;\n            ";const o=document.createElement("div");o.textContent=Math.round(e*(1-t/5)),o.style.cssText="\n                position: absolute;\n                right: 100%;\n                transform: translateY(-50%);\n                font-size: 12px;\n                color: var(--basic-txt-color);\n                margin-right: 8px;\n            ",n.appendChild(o),a.appendChild(n)}n.forEach(((t,o)=>{const a=document.createElement("div");a.style.cssText="\n                flex: 1;\n                height: 100%;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: flex-end;\n                position: relative;\n            ";const s=document.createElement("div"),l=t.value/e*100;s.style.cssText=`\n                width: 100%;\n                height: ${l}%;\n                background: var(--primary-color);\n                border-radius: 4px 4px 0 0;\n                cursor: pointer;\n                transition: background-color 0.2s;\n            `;const c=document.createElement("div");c.textContent=t.value,c.style.cssText=`\n                font-size: 12px;\n                color: var(--basic-txt-color);\n                position: absolute;\n                bottom: ${l}%; \n                margin-bottom: 4px;         \n            `;const d=document.createElement("div");d.textContent=t.label,d.style.cssText="\n                font-size: 12px;\n                color: var(--basic-txt-color);\n                position: absolute;\n                bottom: -25px;\n            ";let p=!1;s.addEventListener("mousedown",(()=>{p=!0,s.style.backgroundColor="var(--interface-color)"})),document.addEventListener("mousemove",(t=>{if(!p)return;const a=i.getBoundingClientRect(),r=Math.max(0,Math.min(a.height,a.bottom-t.clientY)),l=Math.round(r/a.height*e);l!==n[o].value&&(n[o].value=l,c.textContent=l,s.style.height=l/e*100+"%")})),document.addEventListener("mouseup",(()=>{p&&(p=!1,s.style.backgroundColor="var(--color-primary)",r())})),a.appendChild(c),a.appendChild(s),a.appendChild(d),i.appendChild(a)}))}i.style.cssText="\n        position: absolute;\n        left: 30px;\n        right: 0;\n        bottom: 30px;\n        top: 0;\n        display: flex;\n        align-items: flex-end;\n        gap: 10px;\n    ";const s=document.createElement("div");s.style.cssText="\n        position: absolute;\n        top: -28px;\n        left: 50%;\n        transform: translateX(-50%);\n        display: flex;\n        gap: 8px;\n        padding: 4px;\n        background: var(--interface-color);\n        border-radius: 4px;\n        opacity: 0;\n        transition: opacity 0.3s;\n        z-index: 87940;\n    ";const l=document.createElement("button");l.innerHTML='<i class="fas fa-plus"></i>',l.style.cssText="\n        padding: 4px 8px;\n        border: none;\n        border-radius: 4px;\n        background: none;\n        color: white;\n        cursor: pointer;\n    ";const c=document.createElement("button");return c.innerHTML='<i class="fas fa-minus"></i>',c.style.cssText=l.style.cssText,l.onclick=()=>{n.length<12&&(n.push({label:t[n.length],value:Math.floor(80*Math.random())+10}),r())},c.onclick=()=>{n.length>2&&(n.pop(),r())},e.addEventListener("mouseenter",(()=>s.style.opacity="1")),e.addEventListener("mouseleave",(()=>s.style.opacity="0")),s.appendChild(c),s.appendChild(l),e.appendChild(s),o.appendChild(a),o.appendChild(i),e.appendChild(o),r(),e},pieGraph:()=>{const e=document.createElement("div");e.style.cssText="width: 100%; height: auto; min-height: 200px; padding: 14px; border-radius: 8px; position: relative;";const t=[{label:"Segment A",value:35,color:"#5D0BB5"},{label:"Segment B",value:15,color:"#027BD1"},{label:"Segment C",value:15,color:"#00CD67"},{label:"Segment D",value:35,color:"#F23A0C"}],n=["#5D0BB5","#027BD1","#00CD67","#F23A0C","#CE1590","#FF5722","#E0CE28","#84898B"],o=document.createElement("div");o.style.cssText="\n         display: none;\n         position: fixed;\n         top: 0;\n         left: 0;\n         width: 100%;\n         height: 100%;\n         background: rgba(0, 0, 0, 0.3);\n         z-index: 1000;\n         justify-content: center;\n         align-items: center;\n     ";const a=document.createElement("div");a.style.cssText="\n         background: var(--input-bg-color);\n         padding: 18px;\n         border-radius: 8px;\n         position: relative;\n         width: 90%;\n         max-width: 190px;\n     ";const i=document.createElement("button");i.innerHTML="×",i.style.cssText="\n         position: absolute;\n         right: 10px;\n         top: 10px;\n         background: none;\n         border: none;\n         font-size: 24px;\n         cursor: pointer;\n         color: var(--basic-txt-color);\n     ",i.onclick=()=>o.style.display="none";const r=document.createElement("div");r.id="segment-color-picker";const s=document.createElement("div");let l;function c(){if(o.style.display="flex",l){for(;l.colors.length>t.length;)l.removeColor(l.colors.length-1);for(;l.colors.length<t.length;)l.addColor(t[l.colors.length].color);t.forEach(((e,t)=>{l.colors[t].hexString=e.color}))}else l?l.colors=t.map((e=>e.color)):(l=new iro.ColorPicker("#segment-color-picker",{width:190,colors:t.map((e=>e.color)),handleRadius:7,borderWidth:1,activeHandleRadius:11,borderColor:"#fff",wheelAngle:90,sliderSize:22}),l.on(["mount","color:change"],(function(){s.innerHTML="",l.colors.forEach(((e,n)=>{if(n<t.length){const o=e.hexString,a=document.createElement("div");a.style.cssText="\n                            display: flex;\n                            align-items: center;\n                            gap: 10px;\n                            cursor: pointer;\n                        ",a.innerHTML=`\n                            <div style="\n                                width: 20px;\n                                height: 20px;\n                                background: ${o};\n                                border-radius: 4px;\n                            "></div>\n                            <span style="color: var(--basic-txt-color);">${t[n].label}</span>\n                            <span style="color: gray; font-size: smaller; margin-left: auto;">${o}</span>\n                        `,a.onclick=()=>l.setActiveColor(n),s.appendChild(a)}}))})),l.on("color:change",(function(e){e.index<t.length&&(t[e.index].color=e.hexString,u())})))}s.style.cssText="\n         margin-top: 20px;\n         display: flex;\n         flex-direction: column;\n         gap: 10px;\n     ",a.appendChild(i),a.appendChild(r),a.appendChild(s),o.appendChild(a),document.body.appendChild(o);const d=document.createElement("div");d.style.cssText="\n         width: 100%;\n         display: flex;\n         flex-wrap: wrap;\n         gap: 10px;\n         justify-content: center;\n     ";const p=200;function u(){d.innerHTML="";const e=t.reduce(((e,t)=>e+t.value),0),o=document.createElement("div");o.style.cssText=`\n            flex: 0 0 ${p}px;\n            height: ${p}px;\n            position: relative;\n        `;const a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg");i.setAttribute("width",p),i.setAttribute("height",p),i.setAttribute("viewBox","-100 -100 200 200");const r=document.createElementNS(a,"defs"),s=document.createElementNS(a,"filter");s.setAttribute("id","hover-shadow"),s.innerHTML='\n            <feDropShadow dx="0" dy="0" stdDeviation="3" flood-opacity="0.3"/>\n        ',r.appendChild(s),i.appendChild(r);let l=0;t.forEach(((t,o)=>{const r=t.value/e,s=360*r,c=l+s,d=(l-90)*Math.PI/180,p=(c-90)*Math.PI/180,m=100*Math.cos(d),h=100*Math.sin(d),y=100*Math.cos(p),x=100*Math.sin(p),v=document.createElementNS(a,"path"),g=`M 0 0 L ${m} ${h} A 100 100 0 ${s>180?1:0} 1 ${y} ${x} Z`;v.setAttribute("d",g),v.setAttribute("fill",t.color||n[o]),v.style.cursor="pointer",v.style.transition="filter 0.2s",v.addEventListener("mouseenter",(()=>{v.style.filter="url(#hover-shadow)",v.style.opacity="0.9"})),v.addEventListener("mouseleave",(()=>{v.style.filter="none",v.style.opacity="1"})),v.addEventListener("click",(()=>{const e=prompt(`Enter new value for ${t.label}:`,t.value);e&&!isNaN(e)&&(t.value=Number(e),u())})),i.appendChild(v);const b=(l+s/2-90)*Math.PI/180,f=70*Math.cos(b),E=70*Math.sin(b),C=document.createElementNS(a,"g");C.setAttribute("transform",`translate(${f} ${E})`);const w=document.createElementNS(a,"text");w.textContent=`${Math.round(100*r)}%`,w.setAttribute("text-anchor","middle"),w.setAttribute("fill","white"),C.appendChild(w),i.appendChild(C),l=c})),o.appendChild(i),d.appendChild(o);const m=document.createElement("div");m.style.cssText="\n            flex: 1;\n            display: flex;\n            flex-wrap: wrap;\n            gap: 8px;\n            padding: 8px;\n            min-width: 180px;\n            max-width: 300px;\n        ",t.forEach(((e,t)=>{const o=document.createElement("div");o.style.cssText="\n                display: flex;\n                align-items: center;\n                gap: 6px;\n            ";const a=document.createElement("div");a.style.cssText=`\n                width: 16px;\n                height: 16px;\n                background: ${e.color||n[t]};\n                flex-shrink: 0;\n                position: relative;\n                cursor: pointer;\n            `,a.addEventListener("click",c);const i=document.createElement("input");i.value=e.label,i.style.cssText="\n                border: none;\n                background: transparent;\n                color: var(--basic-txt-color);\n                font-size: 14px;\n                flex: 1;\n                min-width: 0;\n                cursor: pointer;\n            ",i.addEventListener("change",(()=>{e.label=i.value,u()})),o.appendChild(a),o.appendChild(i),m.appendChild(o)})),d.appendChild(m)}const m=document.createElement("div");m.style.cssText="\n        position: absolute;\n        top: -28px;\n        left: 50%;\n        transform: translateX(-50%);\n        display: flex;\n        gap: 8px;\n        padding: 4px;\n        background: var(--interface-color);\n        border-radius: 4px;\n        opacity: 0;\n        transition: opacity 0.3s;\n        z-index: 8989898;\n    ";const h=document.createElement("button");h.innerHTML='<i class="fas fa-plus"></i>',h.style.cssText="\n        padding: 4px 8px;\n        border: none;\n        border-radius: 4px;\n        background: none;\n        color: white;\n        cursor: pointer;\n    ";const y=document.createElement("button");return y.innerHTML='<i class="fas fa-minus"></i>',y.style.cssText=h.style.cssText,h.onclick=()=>{t.length<8&&(t.push({label:`Segment ${String.fromCharCode(65+t.length)}`,value:Math.floor(30*Math.random())+10,color:n[t.length]}),u(),l&&l.addColor(n[t.length-1]))},y.onclick=()=>{t.length>2&&(t.pop(),u(),l&&l.removeColor(l.colors.length-1))},e.addEventListener("mouseenter",(()=>m.style.opacity="1")),e.addEventListener("mouseleave",(()=>m.style.opacity="0")),m.appendChild(y),m.appendChild(h),e.appendChild(m),e.appendChild(d),u(),e},leftChat:()=>{const e=document.createElement("div");e.style.cssText="width: 100%; display: flex; align-items: flex-start; gap: 10px; margin-bottom: 12px; position: relative;";const t=document.createElement("div");t.innerHTML="AV",t.style.cssText="width: 40px; height: 40px; background-color: var(--color-primary); color: #ffffff; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; flex-shrink: 0;",t.setAttribute("contentEditable","true");const n=document.createElement("div");n.style.cssText="flex-grow: 1; max-width: 80%;";const o=document.createElement("div");o.classList="leftChat",o.style.cssText="background-color: var(--neutral-gray); padding: 12px 16px; border-radius: 18px; border-top-left-radius: 4px; width: fit-content; word-wrap: break-word;";const a=document.createElement("div");a.className="chat-content",a.innerHTML="Click to edit this message.",a.setAttribute("contentEditable","true");const i=document.createElement("div");i.className="chat-image-container",i.style.cssText="margin-top: 8px; cursor: pointer; display: none;",o.addEventListener("mouseenter",(()=>{i.style.display="block"})),o.addEventListener("mouseleave",(()=>{const e=i.querySelector("img");e&&"none"!==e.style.display||(i.style.display="none")}));const r=document.createElement("img");r.style.cssText="max-width: 200px; max-height: 200px; border-radius: 12px; display: none;",r.alt="Chat image";const s=document.createElement("div");s.className="image-placeholder",s.style.cssText="display: flex; align-items: center; justify-content: center; color: #666; padding: 8px; border: 0.12rem dashed #ccc; border-radius: 8px;";const l=document.createElement("i");l.className="fas fa-image",l.style.marginRight="8px",s.appendChild(l),s.appendChild(document.createTextNode("Add Image"));const c=document.createElement("div");return c.textContent="1 minute ago",c.style.cssText="font-size: 12px; color: #666; margin-top: 4px;",c.setAttribute("contentEditable","true"),i.addEventListener("click",(()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{r.src=e.target.result,r.style.display="block",s.style.display="none",i.style.display="block"},e.readAsDataURL(t)}},e.click()})),i.appendChild(r),i.appendChild(s),o.appendChild(a),o.appendChild(i),n.appendChild(o),n.appendChild(c),e.appendChild(t),e.appendChild(n),e},rightChat:()=>{const e=document.createElement("div");e.style.cssText="width: 100%; display: flex; flex-direction: row-reverse; align-items: flex-start; gap: 10px; margin-bottom: 12px;";const t=document.createElement("div");t.innerHTML="ME",t.style.cssText="width: 40px; height: 40px; background-color: var(--color-primary); color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; flex-shrink: 0;",t.setAttribute("contentEditable","true");const n=document.createElement("div");n.style.cssText="flex-grow: 1; display: flex; flex-direction: column; align-items: flex-end;";const o=document.createElement("div");o.classList="rightChat",o.style.cssText="background-color: var(--color-primary); color: white; padding: 12px 16px; border-radius: 18px; border-top-right-radius: 4px; max-width: 82%; display: inline-block; word-wrap: break-word;";const a=document.createElement("div");a.className="chat-content",a.innerHTML="Click to edit this message.",a.setAttribute("contentEditable","true");const i=document.createElement("div");i.className="chat-image-container",i.style.cssText="margin-top: 8px; cursor: pointer; display: none;",o.addEventListener("mouseenter",(()=>{i.style.display="block"})),o.addEventListener("mouseleave",(()=>{const e=i.querySelector("img");e&&"none"!==e.style.display||(i.style.display="none")}));const r=document.createElement("img");r.style.cssText="max-width: 200px; max-height: 200px; border-radius: 12px; display: none;",r.alt="Chat image";const s=document.createElement("div");s.className="image-placeholder",s.style.cssText="display: flex; align-items: center; justify-content: center; color: #eee; padding: 8px; border: 0.12rem dashed #ccc; border-radius: 8px;";const l=document.createElement("i");l.className="fas fa-image",l.style.marginRight="8px",s.appendChild(l),s.appendChild(document.createTextNode("Add Image"));const c=document.createElement("div");c.textContent="1 minute ago",c.style.cssText="font-size: 12px; color: #666; margin-top: 4px;";o.querySelector(".chat-content");return c.setAttribute("contentEditable","true"),i.addEventListener("click",(()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{r.src=e.target.result,r.style.display="block",s.style.display="none",i.style.display="block"},e.readAsDataURL(t)}},e.click()})),i.appendChild(r),i.appendChild(s),o.appendChild(a),o.appendChild(i),n.appendChild(o),n.appendChild(c),e.appendChild(t),e.appendChild(n),e},chatInput:()=>{const e=document.createElement("div");return e.style.cssText="width: 100%; padding: 10px 0;",e.innerHTML=setupVariants("chatInput")[0],e},notificationBanner:e=>{let t,n,o,a,i,r,s,l;return e?(t=e.cloneNode(!0),n=t.querySelector("div:first-child"),o=n.querySelector("i"),a=t.querySelector("div:nth-child(2)"),i=a.querySelector("div:nth-child(1)"),r=a.querySelector("div:nth-child(2)"),s=a.querySelector(".notification-action"),l=t.querySelector(".visibility-toggle"),o.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(o)})),t.addEventListener("mouseenter",(()=>{l.style.opacity="1"})),t.addEventListener("mouseleave",(()=>{l.style.opacity="0"})),l.addEventListener("click",(()=>{const e="true"===s.dataset.alwaysVisible;s.dataset.alwaysVisible=(!e).toString(),s.style.display=e?"none":"block",l.innerHTML=e?'<i class="fas fa-eye-slash"></i>':'<i class="fas fa-eye"></i>'}))):(t=document.createElement("div"),t.style.cssText="width: 100%; background-color: var(--neutral-gray); border-left: 4px solid var(--color-primary); padding: 12px 8px; margin: 6px 0; display: flex; align-items: flex-start; gap: 12px; border-radius: 4px; position: relative;",n=document.createElement("div"),n.style.cssText="flex-shrink: 0;",o=document.createElement("i"),o.className="fas fa-bell",o.style.cssText="font-size: 20px; color: var(--color-primary); cursor: pointer;",n.appendChild(o),o.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(o)})),a=document.createElement("div"),a.style.cssText="flex-grow: 1; display: flex; flex-direction: column; gap: 4px;",i=document.createElement("div"),i.textContent="Click to edit this important notification message.",i.style.cssText="font-weight: 500;",i.setAttribute("contentEditable","true"),r=document.createElement("div"),r.textContent="Additional details or instructions can go here.",r.style.cssText="font-size: 14px; color: #666;",r.setAttribute("contentEditable","true"),s=document.createElement("div"),s.className="notification-action",s.textContent="Action",s.style.cssText="\n        background-color: var(--color-primary);\n        color: white;\n        padding: 6px 8px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-weight: 500;\n        user-select: none;\n        display: block;\n        margin-top: 6px;\n        width: fit-content;\n        font-size: small;\n      ",s.setAttribute("contentEditable","true"),s.dataset.alwaysVisible="true",l=document.createElement("div"),l.className="visibility-toggle",l.innerHTML='<i class="fas fa-eye"></i>',l.style.cssText="\n        position: absolute;\n        bottom: 16px;\n        left: 6px;\n        cursor: pointer;\n        opacity: 0;\n        transition: opacity 0.2s ease;\n        background-color: rgba(0, 0, 0, 0.1);\n        padding: 4px;\n        border-radius: 4px;\n        font-size: 14px;\n      ",t.addEventListener("mouseenter",(()=>{l.style.opacity="1"})),t.addEventListener("mouseleave",(()=>{l.style.opacity="0"})),l.addEventListener("click",(()=>{const e="true"===s.dataset.alwaysVisible;s.dataset.alwaysVisible=(!e).toString(),s.style.display=e?"none":"block",l.innerHTML=e?'<i class="fas fa-eye-slash"></i>':'<i class="fas fa-eye"></i>',l.style.opacity="0"})),a.appendChild(i),a.appendChild(r),a.appendChild(s),t.appendChild(n),t.appendChild(a),t.appendChild(l)),t},progressTracker:()=>{const e=document.createElement("div");e.style.cssText="width: 100%; padding: 16px 0; display: flex; justify-content: space-around; align-items: center; position: relative;";const t=document.createElement("div");t.style.cssText="\n            position: absolute;\n            top: -10px;\n            right: calc(50% - 28px);\n            display: none;\n            gap: 6px;\n            z-index: 2223;\n        ";const n=document.createElement("button");n.innerHTML='<i class="fas fa-plus"></i>',n.style.cssText="\n            background-color: var(--interface-color);\n            color: white;\n            border: none;\n            border-radius: 4px;\n            width: 24px;\n            height: 24px;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        ";const o=document.createElement("button");function a(e){e.contentEditable="true",e.spellcheck=!1,e.style.cursor="text",e.addEventListener("keydown",(t=>{"Enter"===t.key&&(t.preventDefault(),e.blur())}))}function i(t,n){const o=document.createElement("div");o.style.cssText="display: flex; flex-direction: column; align-items: center; gap: 8px; z-index: 2; flex: 0 1 auto; text-align: center;";const i=document.createElement("div");i.style.cssText=`\n                width: 36px;\n                height: 36px;\n                border-radius: 50%;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                font-weight: bold;\n                margin: 0 6px;\n                ${0===t?"background-color: var(--color-primary); color: white;":"background-color: var(--neutral-gray); color: #666;"}\n            `,i.textContent=(t+1).toString(),a(i);const r=document.createElement("div");return r.textContent=`Step ${t+1}`,r.style.cssText="font-size: 14px; color: #666; font-weight: 500;",a(r),o.style.cursor="pointer",o.addEventListener("click",(t=>{!function(t){e.querySelectorAll("[data-step] div:first-child").forEach((e=>{e.style.backgroundColor="var(--neutral-gray)",e.style.color="#666"}));const n=t.querySelector("div:first-child");n.style.backgroundColor="var(--color-primary)",n.style.color="white"}(o)})),o.appendChild(i),o.appendChild(r),o}function r(){e.querySelectorAll(".connecting-line").forEach((e=>e.remove()));const t=e.querySelectorAll("[data-step]");t.forEach(((n,o)=>{o<t.length-1&&e.insertBefore(function(){const e=document.createElement("div");return e.style.cssText="height: 2px; background-color: #E0E0E0; flex: 1; margin: -22px 0 0 0; align-self: center; border-radius: 2px",e.classList.add("connecting-line"),e}(),t[o+1])}))}function s(){e.querySelectorAll("[data-step]").forEach(((e,t)=>{e.querySelector("div:first-child").textContent=(t+1).toString()})),r(),function(){const t=e.querySelectorAll("[data-step]");o.style.opacity=1===t.length?"0.5":"1",o.style.cursor=1===t.length?"default":"pointer",n.style.opacity=5===t.length?"0.5":"1",n.style.cursor=5===t.length?"default":"pointer"}()}o.innerHTML='<i class="fas fa-minus"></i>',o.style.cssText=n.style.cssText,o.style.opacity="0.5",t.appendChild(o),t.appendChild(n);const l=i(0);return l.setAttribute("data-step",""),n.onclick=()=>{const t=e.querySelectorAll("[data-step]");if(t.length<5){const n=i(t.length,t.length);n.setAttribute("data-step",""),e.appendChild(n),s()}},o.onclick=()=>{const t=e.querySelectorAll("[data-step]");t.length>1&&(t[t.length-1].remove(),s())},e.addEventListener("mouseenter",(()=>t.style.display="flex")),e.addEventListener("mouseleave",(()=>t.style.display="none")),e.appendChild(l),e.appendChild(t),e},featureComparisonCard:()=>{const e=document.createElement("div");e.style.cssText="width: 100%; border: 1px solid var(--neutral-gray); border-radius: var(--standard-radius); overflow: visible; position: relative;";const t=document.createElement("div");t.style.cssText="padding: 14px; background-color: var(--color-primary); color: white; border-radius: var(--standard-radius) var(--standard-radius) 0 0";const n=document.createElement("div");n.classList.add("heading-wrapper");const o=document.createElement("h4");o.textContent="Feature Comparison",o.style.cssText="margin: 0; font-size: 18px; font-weight: bold; color: var(--text-on-primary) !important",this.makeTextEditable(o),n.appendChild(o);const a=document.createElement("div");a.style.cssText="padding: 16px; background-color: var(--input-bg-color); border-radius: var(--standard-radius)";const i=document.createElement("div");i.style.cssText="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 12px; align-items: center;";const r=document.createElement("button");r.innerHTML='<i class="fas fa-plus"></i> Add Feature',r.style.cssText="\n            background-color: var(--interface-color);\n            color: white;\n            border: none;\n            border-radius: 4px;\n            padding: 6px 12px;\n            cursor: pointer;\n            display: none;\n            align-items: center;\n            gap: 4px;\n            font-size: 14px;\n            margin: 2px 0 12px 12px;\n        ";["Features","Basic","Pro"].map(((e,t)=>{const n=document.createElement("div");return n.textContent=e,n.style.cssText="font-weight: bold; color: #777; padding: 8px 0; "+(t>0?"text-align: center;":""),this.makeTextEditable(n),n})).forEach((e=>i.appendChild(e)));const s=(e="New Feature",t=!1)=>{const n=document.createElement("div");n.style.cssText="color: var(--basic-txt-color); display: flex; align-items: center; gap: 8px;";const o=document.createElement("button");o.innerHTML='<i class="fas fa-trash"></i>',o.style.cssText="\n                background: none;\n                border: none;\n                color: #ff4444;\n                cursor: pointer;\n                padding: 0px 4px;\n                display: none;\n                font-size: 12px;\n            ";const a=document.createElement("div");a.style.cssText="display: flex; align-items: center; gap: 8px; width: 100%;";const r=document.createElement("span");r.textContent=e,this.makeTextEditable(r),a.appendChild(r),a.appendChild(o),n.appendChild(a),n.addEventListener("mouseenter",(()=>o.style.display="block")),n.addEventListener("mouseleave",(()=>o.style.display="none"));const s=document.createElement("div");s.innerHTML=t?'<i class="fas fa-times" style="color: #999;"></i>':'<i class="fas fa-check" style="color: green;"></i>',s.style.cssText="text-align: center; cursor: pointer;";const l=document.createElement("div");l.innerHTML='<i class="fas fa-check" style="color: green;"></i>',l.style.cssText="text-align: center; cursor: pointer;",[s,l].forEach((e=>{e.onclick=()=>{const t=null!==e.querySelector(".fa-check");e.innerHTML=t?'<i class="fas fa-times" style="color: #999;"></i>':'<i class="fas fa-check" style="color: green;"></i>'}})),o.onclick=e=>{e.stopPropagation(),[n,s,l].forEach((e=>e.remove()))},i.appendChild(n),i.appendChild(s),i.appendChild(l)};return["Feature 1","Feature 2","Feature 3"].forEach((e=>{s(e)})),r.onclick=()=>{s("New Feature",!0)},t.appendChild(n),a.appendChild(i),e.appendChild(t),e.appendChild(a),e.appendChild(r),{container:e,setup:()=>{const t=e.closest(".component-container");t&&(t.addEventListener("mouseenter",(()=>{r.style.display="block"})),t.addEventListener("mouseleave",(()=>{r.style.display="none"})))}}},columns:()=>{const e=document.createElement("div");e.className="columns-wrapper";const t=document.createElement("div");t.style.cssText="\n        position: absolute;\n        top: -28px;\n        left: 50%;\n        transform: translateX(-50%);\n        display: none;\n        gap: 0px;\n        background: var(--interface-color);\n        padding: 2px;\n        border-radius: 4px;\n        z-index: 91000;\n    ";const n=document.createElement("div");n.style.cssText="\n        display: flex;\n        align-items: center;\n        gap: 6px;\n        padding-left: 8px;\n        margin-left: 1px;\n        border-left: 1px solid rgba(255, 255, 255, 0.2);\n    ";const o=document.createElement("input");o.type="range",o.min="2",o.max="42",o.value="2",o.style.cssText="\n        width: 60px;\n        height: 4px;\n        border-radius: 2px;\n        -webkit-appearance: none;\n        background: rgba(255, 255, 255, 0.2);\n    ";const a=document.createElement("style");a.textContent="\n        gapRange::-webkit-slider-thumb {\n            -webkit-appearance: none;\n            width: 12px;\n            height: 12px;\n            border-radius: 50%;\n            background: white;\n            cursor: pointer;\n            border: none;\n        }\n        gapRange::-moz-range-thumb {\n            width: 12px;\n            height: 12px;\n            border-radius: 50%;\n            background: white;\n            cursor: pointer;\n            border: none;\n        }\n    ",document.head.appendChild(a);const i=document.createElement("span");i.style.cssText="\n        color: white;\n        font-size: 12px;\n        min-width: 20px;\n    ",i.textContent="2",o.addEventListener("input",(t=>{const n=t.target.value;i.textContent=`${n}`,e.style.gap=`${n}px`})),n.appendChild(o),n.appendChild(i),e.style.cssText=`\n    width: 100%;\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));\n    gap: ${o.value}px;\n    min-height: 20px;\n    position: relative;\n    `;const r=document.createElement("button");r.innerHTML='<i class="fas fa-minus"></i>',r.style.cssText="\n        background: none;\n        border: none;\n        color: white;\n        cursor: pointer;\n        padding: 4px 8px;\n        border-radius: 3px;\n    ";const s=document.createElement("button");s.innerHTML='<i class="fas fa-plus"></i>',s.style.cssText=r.style.cssText;const l=document.createElement("span");l.style.cssText="\n        color: white;\n        padding: 4px 0;\n        min-width: 20px;\n        text-align: center;\n    ",l.textContent="2",t.appendChild(r),t.appendChild(l),t.appendChild(s),t.appendChild(n);const c=()=>{const n=document.createElement("div");n.className="column-container pulseAnim",n.style.cssText="\n            min-height: 60px;\n            max-height: 2000px;\n            border-radius: 4px;\n            transition: outline 0.2s;\n            padding: 2px;\n            min-width: min-content;\n        ",e.addEventListener("mouseover",(t=>{const n=t.target.closest(".component-container");if(!n)return;e.querySelectorAll(".component-container").forEach((e=>{e.classList.add("controls-hidden")})),n.classList.remove("controls-hidden")})),e.addEventListener("mouseleave",(()=>{e.querySelectorAll(".component-container").forEach((e=>{e.classList.remove("controls-hidden")}))}));const o=document.createElement("style");return o.textContent='\n    .component-container {\n        position: relative;\n        margin-bottom: 8px;\n        width: 100%;\n        display: flex;\n        justify-content: center;\n    }\n\n    [data-component-variant="columns-"] {\n        outline: none !important;\n    }\n\n    .component-handle {\n        position: absolute;\n        left: -35px;\n        top: 50%;\n        transform: translateY(-50%);\n        cursor: move;\n        padding: 5px;\n        background-color: var(--interface-color);\n        color: white;\n        border-radius: 3px;\n        font-size: 12px;\n        z-index: 10;\n        transition: left 0.3s ease, opacity 0.4s ease;\n        border: 1px solid #33333361;\n        box-shadow: 0 0 4px #13131397;\n        visibility: hidden;\n        opacity: 0;\n    }\n\n    /* Column-specific handle modifications */\n    [data-component-variant="columns-"] > .component-handle {\n        letter-spacing: 0;\n        border: 1px solid var(--basic-txt-color);\n        padding: 4px 2px;\n        z-index: 999;\n    }\n\n    [data-component-variant="columns-"] > .component-handle::before {\n        content: \'⋮\';\n        width: 1px;\n    }\n\n    .delete-btn {\n        position: absolute;\n        right: -38px;\n        top: 50%;\n        transform: translateY(-50%);\n        background-color: var(--error-danger-delete);\n        color: white;\n        border: none;\n        border-radius: 50%;\n        width: 26px;\n        height: 26px;\n        font-size: 16px;\n        cursor: pointer;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        transition: right 0.3s ease, background-color 0.3s, opacity 0.4s ease;\n        z-index: 10;\n        visibility: hidden;\n        opacity: 0;\n    }\n\n    /* Column-specific delete button modifications */\n    [data-component-variant="columns-"] > .delete-btn {\n        top: 16px;\n        border: 1px solid var(--basic-txt-color);\n        border-radius: 5px !important;\n        width: 24px !important;\n        height: 24px !important;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;\n    }\n\n    .component-container:hover > .component-handle,\n    .component-container:hover > .delete-btn,\n    .component-container:hover > .duplicate-btn,\n    .component-container:hover > .color-swatch-container {\n        visibility: visible !important;\n        opacity: 1 !important;\n    }\n\n    /* Column-specific hover states */\n    [data-component-variant="columns-"]:hover > .component-handle,\n    [data-component-variant="columns-"]:hover > .delete-btn,\n    [data-component-variant="columns-"]:hover > .duplicate-btn,\n    [data-component-variant="columns-"]:hover > .color-swatch-container {\n        visibility: visible !important;\n        opacity: 1 !important;\n    }\n\n    /* Controls hidden state */\n    .controls-hidden > .component-handle,\n    .controls-hidden > .delete-btn,\n    .controls-hidden > .duplicate-btn,\n    .controls-hidden > .color-swatch-container,\n    .controls-hidden > .controls {\n        visibility: hidden !important;\n        opacity: 0 !important;\n    }\n\n    .controls-hidden {\n        outline: none !important;\n    }\n',document.head.appendChild(o),new Sortable(n,{group:{name:"shared-components",pull:!0,put:!0},swapThreshold:.85,animation:150,handle:".component-handle",ghostClass:"sortable-ghost",scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,onAdd:function(e){e.item.style.width="100%"},onEnd:function(e){const n=e=>{e.querySelectorAll(".color-swatch-container").forEach((e=>{e.style.visibility="hidden",e.style.opacity="0"}));const n=e.querySelector(".prev-btn"),o=e.querySelector(".next-btn"),a=e.querySelector(".variant-number"),i=e.querySelector(".add-image-button"),r=e.querySelector(".size-control"),s=e.querySelector(".left-arrow"),l=e.querySelector(".right-arrow");[e.querySelector(".resize-handle"),i,r,s,l,e.querySelector(".alignment-controls")].forEach((e=>{e&&(e.style.display="none")})),[t,n,o,a].forEach((e=>{e&&(e.style.opacity="0")}))};n(e.from),n(e.to),e.item.classList.remove("controls-hidden")},onMove:function(e){return!e.related.classList.contains("navbar-spacer")}}),n};e.innerHTML="",e.appendChild(c()),e.appendChild(c());const d=t=>{const n=e.querySelectorAll(".column-container"),o=n.length;if(t!==o){if(e.style.gridTemplateColumns="repeat(auto-fit, minmax(90px, 1fr))",l.textContent=t,t>o)for(let n=o;n<t;n++)e.appendChild(c());else{const e=n[0];for(let a=o-1;a>=t;a--){const t=n[a];for(;t.firstChild;)e.appendChild(t.firstChild);t.remove()}}r.disabled=t<=1,s.disabled=t>=5}};r.addEventListener("click",(()=>{const e=parseInt(l.textContent);e>1&&d(e-1)})),s.addEventListener("click",(()=>{const e=parseInt(l.textContent);e<5&&d(e+1)})),e.addEventListener("mouseenter",(()=>{t.style.display="flex"})),e.addEventListener("mouseleave",(()=>{t.style.display="none"})),e.appendChild(t);return new MutationObserver((()=>{(()=>{const t=e.querySelectorAll(".column-container");let n=50;t.forEach((e=>{const t=e.cloneNode(!0);t.style.position="absolute",t.style.visibility="hidden",t.style.width="min-content",document.body.appendChild(t);const o=t.offsetWidth;n=Math.max(n,o),document.body.removeChild(t)})),e.style.gridTemplateColumns=`repeat(auto-fit, minmax(${n}px, 1fr))`})()})).observe(e,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),e},chipGroup:()=>{const e=document.createElement("div");e.style.cssText="\n        display: flex;\n        flex-flow: row wrap;\n        gap: 6px;\n        padding: 6px 0;\n        width: 100%;\n        min-height: 48px;\n        border-radius: 8px;\n    ";const t=(t="New Chip")=>{const o=document.createElement("div");o.style.cssText="\n            display: inline-flex;\n            align-items: center;\n            height: 32px;\n            padding: 0 12px;\n            background-color: var(--neutral-gray);\n            border-radius: 16px;\n            cursor: pointer;\n            user-select: none;\n            transition: all 0.2s ease;\n        ";const a=document.createElement("span");a.textContent=t,a.style.cssText="\n            font-size: 14px;\n            color: var(--text-color);\n        ",a.setAttribute("contentEditable","true");const i=document.createElement("i");i.className="fas fa-times",i.style.cssText="\n            font-size: 12px;\n            color: var(--interface-color);\n            margin-left: 8px;\n            padding: 2px;\n            cursor: pointer;\n            display: none;\n        ",o.addEventListener("mouseenter",(()=>{i.style.display="inline-block"})),o.addEventListener("mouseleave",(()=>{i.style.display="none"})),o.addEventListener("click",(e=>{if(e.target!==i&&e.target!==a){"true"===o.getAttribute("data-selected")?(o.style.backgroundColor="var(--neutral-gray)",a.style.color="#333",i.style.color="#333",o.setAttribute("data-selected","false")):(o.style.backgroundColor="var(--color-primary)",a.style.color="#fff",i.style.color="#fff",o.setAttribute("data-selected","true"))}})),i.addEventListener("click",(t=>{t.stopPropagation(),o.remove(),1===e.children.length&&(n.style.display="flex")})),o.appendChild(a),o.appendChild(i),e.insertBefore(o,n)},n=document.createElement("div");n.style.cssText="\n        display: none;\n        align-items: center;\n        justify-content: center;\n        height: 32px;\n        padding: 0 12px;\n        background-color: transparent;\n        border: 0.12rem dashed var(--neutral-gray);\n        border-radius: 16px;\n        cursor: pointer;\n        transition: all 0.2s ease;\n    ";const o=document.createElement("i");o.className="fas fa-plus",o.style.cssText="\n        font-size: 12px;\n        color: var(--interface-color);\n        margin-right: 4px;\n    ";const a=document.createElement("span");return a.textContent="Add Chip",a.style.cssText="\n        font-size: 14px;\n        color: var(--interface-color);\n    ",n.appendChild(o),n.appendChild(a),n.addEventListener("mouseenter",(()=>{n.style.borderColor="var(--color-primary)",o.style.color="var(--color-primary)",a.style.color="var(--color-primary)"})),n.addEventListener("mouseleave",(()=>{n.style.borderColor="var(--neutral-gray)",o.style.color="var(--interface-color)",a.style.color="var(--interface-color)"})),n.addEventListener("click",(()=>{t(),e.children.length>15&&(n.style.display="none")})),e.appendChild(n),t("Design"),t("Development"),t("Marketing"),{container:e,setup:()=>{const t=e.closest(".component-container");t&&(t.addEventListener("mouseenter",(()=>{n.style.display="flex"})),t.addEventListener("mouseleave",(()=>{n.style.display="none"})))}}},floatingActionButton:()=>{const e=document.createElement("div");e.classList.add("fab"),e.style.cssText="\n      position: absolute;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 46px;\n      height: 46px;\n      background-color: var(--color-primary);\n      border-radius: 50%;\n      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n      cursor: pointer;\n      transition: all 0.2s ease;\n      bottom: 27px;\n      right: 17px;\n      z-index: 3847;\n    ";const t=document.createElement("i");return t.className="fas fa-plus",t.style.cssText="\n      font-size: 18px;\n      color: #fff;\n    ",e.appendChild(t),e.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(t)})),e.addEventListener("mouseenter",(()=>{e.style.transform="scale(1.1)",e.style.boxShadow="0 6px 12px rgba(0, 0, 0, 0.2)"})),e.addEventListener("mouseleave",(()=>{e.style.transform="scale(1)",e.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)"})),e.addEventListener("click",(()=>{})),e},bulletedList:()=>{const e=document.createElement("div");e.style.cssText="\n        display: flex;\n        flex-direction: column;\n        gap: 6px;\n        padding: 12px;\n        width: 100%;\n        min-height: 48px;\n    ";const t=(t="New item")=>{const o=document.createElement("div");o.style.cssText="\n            display: flex;\n            align-items: flex-start;\n            margin-left: 0px;\n            transition: margin-left 0.2s ease;\n        ";const a=document.createElement("div");a.style.cssText="\n            display: flex;\n            align-items: center;\n            padding: 4px 8px;\n            cursor: pointer;\n        ";const i=document.createElement("i");i.className="fas fa-circle",i.style.cssText="\n            font-size: 12px;\n            margin-top: 1px;\n            color: var(--text-color);\n        ",a.appendChild(i),a.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(i)}));const r=document.createElement("div");r.style.cssText="\n            flex-grow: 1;\n            color: var(--text-color);\n            min-height: 24px;\n            padding: 2px 0;\n        ",r.setAttribute("contenteditable","true"),r.textContent=t;const s=document.createElement("div");s.style.cssText="\n            display: none;\n            gap: 8px;\n            padding: 0 4px;\n        ";const l=document.createElement("i");l.className="fas fa-indent",l.style.cssText="\n            font-size: 14px;\n            color: var(--interface-color);\n            cursor: pointer;\n            padding: 4px;\n        ";const c=document.createElement("i");c.className="fas fa-outdent",c.style.cssText="\n            font-size: 14px;\n            color: var(--interface-color);\n            cursor: pointer;\n            padding: 4px;\n        ";const d=document.createElement("i");return d.className="fas fa-times",d.style.cssText="\n            font-size: 14px;\n            color: var(--interface-color);\n            cursor: pointer;\n            padding: 4px;\n        ",s.appendChild(l),s.appendChild(c),s.appendChild(d),o.appendChild(a),o.appendChild(r),o.appendChild(s),o.addEventListener("mouseenter",(()=>{s.style.display="flex"})),o.addEventListener("mouseleave",(()=>{s.style.display="none"})),l.addEventListener("click",(()=>{const e=parseInt(o.style.marginLeft||"0");e<160&&(o.style.marginLeft=`${e+40}px`)})),c.addEventListener("click",(()=>{const e=parseInt(o.style.marginLeft||"0");e>=40&&(o.style.marginLeft=e-40+"px")})),d.addEventListener("click",(()=>{o.remove(),1===e.children.length&&(n.style.display="flex")})),o},n=document.createElement("div");n.style.cssText="\n        display: flex;\n        align-items: center;\n        padding: 8px;\n        cursor: pointer;\n        border-radius: 4px;\n        transition: background-color 0.2s ease;\n    ";const o=document.createElement("i");o.className="fas fa-plus",o.style.cssText="\n        font-size: 12px;\n        color: var(--interface-color);\n        margin-right: 8px;\n    ";const a=document.createElement("span");return a.textContent="Add item",a.style.cssText="\n        font-size: 14px;\n        color: var(--interface-color);\n    ",n.appendChild(o),n.appendChild(a),n.addEventListener("mouseenter",(()=>{n.style.backgroundColor="var(--neutral-gray)"})),n.addEventListener("mouseleave",(()=>{n.style.backgroundColor="transparent"})),n.addEventListener("click",(()=>{const o=t();e.insertBefore(o,n),e.children.length>20&&(n.style.display="none")})),e.appendChild(n),e.insertBefore(t("First item"),n),e.insertBefore(t("Second item"),n),{container:e,setup:()=>{const t=e.closest(".component-container");t&&(t.addEventListener("mouseenter",(()=>{n.style.display="flex"})),t.addEventListener("mouseleave",(()=>{e.children.length>1&&(n.style.display="none")})))}}},table:()=>{const e=document.createElement("div");e.style.cssText="\n        width: min-content;\n        overflow-x: auto;\n        position: relative;\n    ";const t=document.createElement("div");t.style.cssText="\n        margin-top: 6px;\n        display: inline-block; \n        min-width: min-content;\n        position: relative;\n        width: max-content;\n        min-width: 100%;\n    ";const n=document.createElement("table");n.style.cssText="\n        border-collapse: collapse;\n        font-size: 14px;\n        table-layout: fixed;\n        position: relative;\n        z-index: 2;\n        width: max-content;\n        min-width: 100%; \n    ";const o={CHECKBOX:"checkbox",TEXT:"text",LINK:"link",ACTION:"action"},a={hasCheckboxColumn:!1,columns:[],rows:[],activeControls:null,isResizing:!1,currentResizer:null,startX:0,startWidth:0,initialRightEdge:0},i=(e="New Column",t=o.TEXT)=>{const n=document.createElement("th");n.style.cssText="\n            padding: 12px 0;\n            text-align: left;\n            font-weight: 600;\n            color: var(--text-on-primary);\n            border-bottom: 1px solid var(--neutral-gray);\n            position: relative;\n            min-width: 36px;\n            width: 128px;\n            border-right: 1px solid var(--neutral-gray);\n            white-space: nowrap;\n        ";const i=document.createElement("div");i.style.cssText="\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            pointer-events: none;\n            margin-left: 16px;\n        ";const r=document.createElement("span");r.textContent=e,r.setAttribute("contenteditable","true"),r.style.pointerEvents="all",i.appendChild(r);const s=document.createElement("i");s.className="fas fa-sort",s.style.cssText="\n            font-size: 12px;\n            color: var(--text-on-primary);\n            cursor: pointer;\n            pointer-events: all;\n            margin-right: 16px;\n        ",s.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(s)})),i.appendChild(s);const d=document.createElement("div");d.className="column-resizer",d.style.cssText="\n            position: absolute;\n            right: 0;\n            top: 0;\n            bottom: 0;\n            width: 4px;\n            background: transparent;\n            cursor: col-resize;\n            z-index: 550;\n            pointer-events: all;\n        ";d.addEventListener("mousedown",(e=>{a.isResizing=!0,a.currentResizer=d,a.startX=e.pageX,a.startWidth=n.offsetWidth;const t=n.getBoundingClientRect();a.initialRightEdge=t.right;const o=document.createElement("div");o.style.cssText="\n                position: fixed;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                z-index: 1000;\n                cursor: col-resize;\n            ",o.id="resize-overlay",document.body.appendChild(o);const i=document.createElement("div");i.style.cssText=`\n                position: fixed;\n                top: 0;\n                bottom: 0;\n                width: 2px;\n                background: var(--interface-color);\n                opacity: 0.5;\n                left: ${t.right}px;\n                pointer-events: none;\n                z-index: 1001;\n            `,i.id="resize-line",document.body.appendChild(i)})),d.addEventListener("mouseenter",(()=>{a.isResizing||(d.style.background="var(--interface-color)")})),d.addEventListener("mouseleave",(()=>{a.isResizing||(d.style.background="transparent")}));const p=document.createElement("div");p.className="column-controls",p.style.cssText="\n            display: none;\n            position: absolute;\n            left: -2px;\n            top: 136%;\n            border: 1px solid var(--neutral-gray);\n            transform: translateY(-50%);\n            background: var(--interface-color);\n            color: var(--basic-txt-color);\n            padding: 4px;\n            border-radius: 4px;\n            gap: 4px;\n            z-index: 108;\n            pointer-events: all;\n        ";const u=document.createElement("select");u.style.cssText="\n            padding: 2px 4px;\n            border: 1px solid var(--neutral-gray);\n            border-radius: 4px;\n            background: var(--input-bg-color);\n            color: var(--text-color);\n            font-size: 12px;\n        ",Object.values(o).forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e.charAt(0).toUpperCase()+e.slice(1),u.appendChild(t)})),u.value=t,u.addEventListener("mousedown",(e=>{e.stopPropagation(),p.style.display="flex",a.activeControls=p})),u.addEventListener("change",(e=>{e.stopPropagation(),l(n,u.value),setTimeout((()=>{a.activeControls===p&&(p.style.display="none",a.activeControls=null)}),200)})),u.addEventListener("blur",(()=>{setTimeout((()=>{a.activeControls===p&&(p.style.display="none",a.activeControls=null)}),200)})),p.appendChild(u);const m=document.createElement("i");return m.className="fas fa-times",m.setAttribute("title","delete column"),m.style.cssText="\n            font-size: 12px;\n            color: var(--error-danger-delete);\n            cursor: pointer;\n            padding: 4px;\n        ",m.addEventListener("click",(()=>{const e=Array.from(n.parentElement.children).indexOf(n);c(e)})),p.appendChild(m),n.appendChild(i),n.appendChild(p),n.appendChild(d),n.addEventListener("mouseenter",(()=>{a.activeControls||a.isResizing||(p.style.display="flex")})),n.addEventListener("mouseleave",(e=>{p.contains(e.relatedTarget)||a.activeControls===p||(p.style.display="none")})),n},r=(e=o.TEXT)=>{const t=document.createElement("td");switch(t.style.cssText="\n            padding: 12px 16px;\n            border-bottom: 1px solid var(--neutral-gray);\n            color: var(--basic-txt-color);\n            box-sizing: border-box;\n        ",e){case o.CHECKBOX:const e=document.createElement("div");e.className="fa-regular fa-square",e.style.cssText="\n                    margin: -2px 10px 0 10px;\n                    border-radius: 4px;\n                    cursor: pointer;\n                    position: relative;\n                    font-size: 18px;\n                    color: #a0a0a0;\n                ";const n=document.createElement("i");n.className="fa-solid fa-square-check",n.style.cssText="\n                    font-size: 18px;\n                    color: var(--primary-color);\n                    display: none; \n                    position: absolute;\n                    top: 0px;\n                    left: 0px;\n                    border: none;\n                ",e.appendChild(n),e.addEventListener("click",(()=>{const e="none"===n.style.display;n.style.display=e?"block":"none"})),t.appendChild(e);break;case o.LINK:const a=document.createElement("span");a.textContent="Link Text",a.style.cssText="\n                    color: #0d87d8;\n                    cursor: pointer;\n                ",a.setAttribute("contenteditable","true"),t.appendChild(a);break;case o.ACTION:const i=document.createElement("i");i.className="fas fa-bolt",i.style.cssText="\n                    font-size: 14px;\n                    color: var(--basic-txt-color);\n                    cursor: pointer;\n                ",i.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(i)})),t.appendChild(i);break;default:t.setAttribute("contenteditable","true"),t.textContent="Cell Text"}return t},s=e=>{const t=document.createElement("tr");t.style.cssText="\n            transition: background-color 0.2s ease;\n            position: relative;\n        ",t.addEventListener("mouseenter",(()=>{t.style.backgroundColor="var(--neutral-gray-light)",t.querySelector(".row-controls").style.display="flex"})),t.addEventListener("mouseleave",(()=>{t.style.backgroundColor="transparent",t.querySelector(".row-controls").style.display="none"}));const n=e.children;Array.from(n).forEach((e=>{const n=e.querySelector("select").value;t.appendChild(r(n))}));const o=document.createElement("i");return o.className="fas fa-trash row-controls",o.setAttribute("title","delete row"),o.style.cssText="\n            font-size: 12px;\n            color: var(--error-danger-delete);\n            cursor: pointer;\n            position: absolute;\n            right: 14px;\n            top: 8px;\n            display: none;\n        ",o.addEventListener("click",(()=>{t.remove(),E()})),t.appendChild(o),t},l=(e,t)=>{const o=Array.from(e.parentElement.children).indexOf(e);n.querySelectorAll("tbody tr").forEach((e=>{const n=e.children[o],a=r(t);e.replaceChild(a,n)}))},c=e=>{n.querySelectorAll("tr").forEach((t=>{t.deleteCell(e)}))},d=document.createElement("div");d.style.cssText="\n        display: flex;\n        gap: 8px;\n        margin-top: 8px;\n\n    ";const p=document.createElement("button");p.style.cssText="\n        padding: 8px 16px;\n        margin: 8px 0;\n        background: transparent;\n        border: 1px solid var(--neutral-gray);\n        border-radius: 4px;\n        color: var(--interface-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        transition: all 0.2s ease;\n    ";const u=document.createElement("i");u.className="fas fa-plus",p.appendChild(u);const m=document.createElement("span");m.textContent="Add Column",p.appendChild(m);const h=document.createElement("button");h.style.cssText=p.style.cssText;const y=document.createElement("i");y.className="fas fa-plus",h.appendChild(y);const x=document.createElement("span");x.textContent="Add Row",h.appendChild(x),d.appendChild(p),d.appendChild(h);const v=document.createElement("div");v.style.cssText="\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 43px;\n        background-color: var(--color-primary);\n        z-index: 1;\n    ";new ResizeObserver((()=>{const e=g.scrollWidth;v.style.width=`calc(${e} - 2px)`})).observe(n);const g=document.createElement("thead"),b=document.createElement("tr");b.appendChild(i("Check",o.CHECKBOX)),b.appendChild(i("ID",o.LINK)),b.appendChild(i("Name",o.TEXT)),b.appendChild(i("Action",o.ACTION)),g.appendChild(b);const f=document.createElement("tbody");f.appendChild(s(b)),f.appendChild(s(b)),f.appendChild(s(b)),n.appendChild(g),n.appendChild(f),t.appendChild(v),t.appendChild(n),e.appendChild(t),e.appendChild(d),p.addEventListener("click",(()=>{n.querySelector("thead tr").appendChild(i());n.querySelectorAll("tbody tr").forEach((e=>{e.insertBefore(r(),e.lastElementChild)}))})),h.addEventListener("click",(()=>{const e=n.querySelector("thead tr");f.appendChild(s(e)),E()}));const E=()=>{const e=f.children.length;h.style.display=e>=20?"none":"flex"};return[p,h].forEach((e=>{e.addEventListener("mouseenter",(()=>{e.style.backgroundColor="var(--neutral-gray)",e.style.borderColor="var(--basic-txt-color)",e.style.color="var(--basic-txt-color)"})),e.addEventListener("mouseleave",(()=>{e.style.backgroundColor="transparent",e.style.borderColor="var(--neutral-gray)",e.style.color="var(--interface-color)"}))})),{container:e,setup:()=>{const t=e.closest(".component-container");t&&(t.addEventListener("mouseenter",(()=>{d.style.display="flex"})),t.addEventListener("mouseleave",(()=>{d.style.display="none"}))),document.addEventListener("mousemove",(e=>{if(a.isResizing){document.querySelectorAll(".column-resizer").forEach((e=>{e.style.background="transparent"}));const t=e.pageX-a.startX,n=Math.max(60,a.startWidth+t);a.currentResizer.parentElement.style.width=`${n}px`;const o=document.getElementById("resize-line");if(o){a.initialRightEdge;o.style.transform=`translateX(${t}px)`}}})),document.addEventListener("mouseup",(()=>{if(a.isResizing){a.isResizing=!1,a.currentResizer=null,a.startX=0,a.startWidth=0;const e=document.getElementById("resize-overlay"),t=document.getElementById("resize-line");e&&e.remove(),t&&t.remove()}})),document.addEventListener("click",(e=>{a.activeControls&&!a.activeControls.contains(e.target)&&(a.activeControls.style.display="none",a.activeControls=null)}))}}},hzDivider:()=>{const e=document.createElement("div");e.className="hzRule",e.style.cssText="\n        width: 100%;\n        padding: 6px 0;\n        position: relative;\n    ";const t=document.createElement("div");t.style.cssText="\n        width: 100%;\n        min-height: 24px;\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        position: relative;\n    ";const n=document.createElement("div");n.style.cssText="\n        flex: 1;\n        border-width: 2px 0 0 0;\n        border-style: solid;\n        transition: all 0.3s ease;\n    ",n.style.borderColor="var(--color-transparent-blk)";const o=document.createElement("div");o.classList.add("hzRuleControls"),o.style.cssText="\n        position: absolute;\n        top: -32px;\n        left: 50%;\n        transform: translateX(-50%);\n        gap: 8px;\n        background: #f0f0f0;\n        padding: 2px 4px;\n        border-radius: 4px;\n        border: 1px solid rgba(225,225,225,.6);\n        z-index: 56100;\n    ";const a=[{icon:"minus",title:"Solid"},{icon:"ellipsis-h",title:"Dotted"},{icon:"grip-lines",title:"Double"}].map((({icon:e,title:t})=>{const n=document.createElement("i");return n.className=`fas fa-${e}`,n.title=t,n.style.cssText="\n            padding: 6px;\n            cursor: pointer;\n            color: var(--interface-color);\n            transition: color 0.2s ease;\n        ",n.addEventListener("mouseenter",(()=>{n.style.color="var(--color-primary)"})),n.addEventListener("mouseleave",(()=>{n.style.color="var(--interface-color)"})),n})),i=document.createElement("input");i.type="range",i.min="1",i.max="8",i.value="2",i.style.cssText="\n        width: 66px;\n        height: 14px;\n        margin-left: 6px;\n    ",a[0].addEventListener("click",(()=>{const e=i.value;n.style.borderStyle="solid",n.style.borderWidth=`${e}px 0 0 0`,n.style.borderColor="var(--color-transparent-blk)",n.style.background="none",n.style.height="0",t.style.flexDirection="row"})),a[1].addEventListener("click",(()=>{const e=i.value;n.style.borderStyle="dotted",n.style.background="none",n.style.height="0",n.style.borderWidth=`${e}px 0 0 0`,n.style.borderColor="var(--color-transparent-blk)",t.style.flexDirection="row"})),a[2].addEventListener("click",(()=>{const e=i.value;n.style.borderStyle="double",n.style.background="none",n.style.height="0",n.style.borderWidth=`${e}px 0 0 0`,n.style.borderColor="var(--color-transparent-blk)",t.style.flexDirection="row"})),i.addEventListener("input",(e=>{n.style.borderWidth=`${e.target.value}px 0 0 0`}));const r=document.createElement("div");r.style.cssText="\n        display: flex;\n        align-items: center;\n        gap: 8px;\n    ";const s=document.createElement("div");return s.style.cssText="\n        display: flex;\n        gap: 8px;\n    ",a.forEach((e=>s.appendChild(e))),r.appendChild(s),r.appendChild(i),o.appendChild(r),t.appendChild(n),e.appendChild(o),e.appendChild(t),e},colorBlock:()=>{const e=document.createElement("div");e.style.cssText="width: 100%; position: relative;",e.classList.add("colorBlock-container");const t=document.createElement("div");t.style.cssText="\n        width: 100%; \n        transform: translatex(-10px); \n        padding: 0px 10px 16px 10px; \n        min-height: 40px; \n        background-color: var(--color-secondary);\n        position: relative;\n    ",t.addEventListener("mouseover",(e=>{const n=e.target.closest(".component-container");if(!n)return;t.querySelectorAll(".component-container").forEach((e=>{e.classList.add("controls-hidden")})),n.classList.remove("controls-hidden")})),t.addEventListener("mouseleave",(()=>{t.querySelectorAll(".component-container").forEach((e=>{e.classList.remove("controls-hidden")}))}));const n=document.createElement("style");return n.textContent='\n        .colorBlock-container {\n            outline: none !important;\n        }\n        \n        [data-component-variant="colorBlock-"] > .component-handle {\n         letter-spacing: 0;\n         border: 1px solid var(--basic-txt-color);\n         padding: 4px 2px;\n         top: 16px;\n        }\n        \n        [data-component-variant="colorBlock-"] > .component-handle::before{\n        content: \'⋮\';\n        width: 1px;\n        }\n        \n        [data-component-variant="colorBlock-"] > .delete-btn {\n        top: 16px;\n        border: 1px solid var(--basic-txt-color);\n        border-radius: 5px !important;\n        width: 24px !important;\n        height: 24px !important;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;\n        }\n\n        .colorBlock-container > .component-handle,\n        .colorBlock-container > .delete-btn,\n        .colorBlock-container > .duplicate-btn,\n        .colorBlock-container > .color-swatch-container {\n            visibility: visible !important;\n            opacity: 1 !important;\n        }\n\n        .controls-hidden > .component-handle,\n        .controls-hidden > .delete-btn,\n        .controls-hidden > .duplicate-btn,\n        .controls-hidden > .color-swatch-container,\n        .controls-hidden > .controls {\n            visibility: hidden !important;\n            opacity: 0 !important;\n        }\n\n        .controls-hidden {\n            outline: none !important;\n        }\n    ',document.head.appendChild(n),t&&new Sortable(t,{animation:150,handle:".component-handle, .card-image",ghostClass:"sortable-ghost",group:"shared-components",swapThreshold:.85,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,onEnd:function(e){$(e.item).trigger("mouseleave");const t=e=>{e.querySelectorAll(".color-swatch-container").forEach((e=>{e.style.visibility="hidden",e.style.opacity="0"}));const t=e.querySelector(".prev-btn"),n=e.querySelector(".next-btn"),o=e.querySelector(".variant-number"),a=e.querySelector(".add-image-button"),i=e.querySelector(".size-control"),r=e.querySelector(".left-arrow"),s=e.querySelector(".right-arrow");[e.querySelector(".resize-handle"),a,i,r,s,e.querySelector(".alignment-controls")].forEach((e=>{e&&(e.style.display="none")})),[t,n,o].forEach((e=>{e&&(e.style.opacity="0")}))};t(e.from),t(e.to)},onMove:function(e){return!e.related.classList.contains("navbar-spacer")},onStart:function(e){e.item.querySelector(".space-range:active")&&e.preventDefault()}}),e.appendChild(t),resizer.makeResizable(t),e},footer:()=>{const e=document.createElement("footer");e.innerHTML='\n            <div style="width: 100%; background-color: var(--color-primary); position: absolute; top: 0; right: 0; left: -10; bottom: -12; z-index: 1; padding: 0 10px; "></div>\n            <div style="display: flex; justify-content: space-between; width: 100%; padding: 20px 0; z-index: 2; position: relative;">\n                <div style="text-align: left;">\n                    <div class="footer-image-container" style="margin-bottom: 10px; background-color: #f0f0f0;">\n                        <div onclick="this.querySelector(\'input\').click()" class="trash" style="width: 60px; height: 60px; display: flex; justify-content: center; align-items: center; cursor: pointer; margin-bottom: 10px;">\n                            <span style="color: #333;">Logo</span>\n                            <input type="file" accept="image/*" onchange="handleFooterImageUpload(this)" style="display: none;">\n                            <img style="display: none; max-width: 60px; height: auto;" class="footer-logo">\n                        </div>\n                    </div>\n                    <div>\n                    <h3 spellcheck="false" contenteditable style="margin: 0;">Brand</h3>\n                    </div>\n                </div>\n                <div style="display: flex; gap: 28px; font-size: 14px; padding: 2px 8px;">\n                    <ul style="list-style: none; padding: 0; margin: 0;">\n                        <li contenteditable style="margin-bottom: 8px;"><a href="#" style="color: inherit; text-decoration: none;">About Us</a></li>\n                        <li contenteditable style="margin-bottom: 8px;"><a href="#" style="color: inherit; text-decoration: none;">Contact</a></li>\n                        <li contenteditable style="margin-bottom: 8px;"><a href="#" style="color: inherit; text-decoration: none;">Careers</a></li>\n                    </ul>\n                    <ul style="list-style: none; padding: 0; margin: 0;">\n                        <li contenteditable style="margin-bottom: 8px;"><a href="#" style="color: inherit; text-decoration: none;">Support</a></li>\n                        <li contenteditable style="margin-bottom: 8px;"><a href="#" style="color: inherit; text-decoration: none;">Privacy Policy</a></li>\n                        <li contenteditable style="margin-bottom: 8px;"><a href="#" style="color: inherit; text-decoration: none;">Terms of Use</a></li>\n                    </ul>\n                </div>\n            </div>\n        ';const t=document.createElement("div");t.classList.add("socialFooter"),t.style.cssText="display: flex; justify-content: center; gap: 40px; padding: 24px 0 68px 0; border-top: 1px solid var(--neutral-gray); z-index: 2; position: relative; z-index: 3; color: #333;";return["fas fa-seedling","fas fa-bolt-lightning","fas fa-skull"].forEach((e=>{const n=document.createElement("div");n.style.cssText="flex-shrink: 0;";const o=document.createElement("i");o.className=e,o.style.cssText="font-size: 20px; cursor: pointer;",n.appendChild(o),o.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(o)})),t.appendChild(n)})),e.append(t),e.style.cssText="width: 100%; color: var(--text-on-primary); padding: 20px 0; margin-bottom: -68px; position: relative;",e}}}function handleFooterImageUpload(e){if(e.files&&e.files[0]){const t=new FileReader,n=e.parentElement,o=n.querySelector(".footer-logo"),a=n.closest(".footer-image-container"),i=n.querySelector("span");t.onload=function(e){o.src=e.target.result,o.style.display="block",i.style.display="none",a.style.backgroundColor="transparent"},t.readAsDataURL(e.files[0])}}document.addEventListener("DOMContentLoaded",(()=>{window.editor=new MobileUIEditor}));class Resizer{constructor(){this.isResizing=!1,this.currentElement=null,this.startY=0,this.startHeight=0,this.initialRightEdge=0,this.resizeOverlay=this.createOverlay(),this.setupListeners()}createOverlay(){const e=document.createElement("div");return e.style.cssText="\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: transparent;\n            display: none;\n            z-index: 1000;\n            cursor: ns-resize;\n          ",document.body.appendChild(e),e}createHandle(e){const t=document.createElement("div");t.className="resize-handle",t.style.cssText="\n            position: absolute;\n            right: 2px;\n            bottom: 2px;\n            width: 24px;\n            height: 24px;\n            cursor: ns-resize;\n            display: none;\n            pointer-events: all;\n            padding: 2px;\n            z-index: 20;\n          ";const n=document.createElement("div");return n.style.cssText="\n            width: 0;\n            height: 0;\n            box-shadow: 1px 1px 0px white;\n            border-style: solid;\n            border-width: 0 0 14px 14px;\n            border-color: transparent transparent #333 transparent;\n          ",t.appendChild(n),t.addEventListener("mousedown",(t=>this.startResize(t,e))),t.addEventListener("mouseenter",(()=>t.style.display="flex")),t}startResize(e,t){this.isResizing=!0,this.currentElement=t,this.startY=e.pageY,this.startHeight=parseInt(window.getComputedStyle(t).height);const n=t.getBoundingClientRect();this.initialRightEdge=n.right,this.resizeOverlay.style.display="block",e.preventDefault(),e.stopPropagation()}setupListeners(){document.addEventListener("mousemove",(e=>{if(!this.isResizing)return;const t=Math.max(0,this.startHeight+(e.pageY-this.startY));this.currentElement.style.height=`${t}px`})),document.addEventListener("mouseup",(()=>{this.isResizing&&(this.isResizing=!1,this.currentElement=null,this.resizeOverlay.style.display="none")}))}makeResizable(e,t=!0){const n=this.createHandle(e);return e.appendChild(n),t&&(e.addEventListener("mouseenter",(()=>{this.isResizing||(n.style.display="flex")})),e.addEventListener("mouseleave",(()=>{this.isResizing||(n.style.display="none")}))),n}}const resizer=new Resizer;