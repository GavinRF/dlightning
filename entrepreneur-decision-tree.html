<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dâš¡ | Interactive Entrepreneur Decision Tree with History</title>
        <meta name="description" content="Use the Entrepreneur's Decision Tree to guide your startup journey! Answer key questions to determine your readiness, validate ideas, explore funding options, and build a successful business." />
        <meta name="keywords" content="entrepreneur decision tree, startup guidance, business idea validation, startup roadmap, business planning, funding options, entrepreneur resources, small business tools, startup success, business decision-making" />
        <meta name="author" content="Dlightning">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/style.css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <style>
      body, html {
        min-height: 100vh;
        margin: 0;
        background: linear-gradient(135deg, #f6faff 0%, #c8d8f1 100%);
      }
      .container {
        margin: 0 auto;
        padding: 20px;
      }
      h1 {
        text-align: center;
        color: #2c3e50;
      }
      #decision-tree {
        background-color: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .node {
        margin-bottom: 20px;
        position: relative;
      }
      .question {
        font-weight: bold;
        margin-bottom: 10px;
        color: #34495e;
      }
      .options {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }
      .option {
        background-color: #0889e0;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
      }
      .option:hover {
        background-color: #03609e;
      }
      .option.selected {
        background-color: #0c9a47;
      }
      .option.selected.no {
        background-color: #ce3221;
      }
      #result {
        font-weight: 500;
        /* text-align: center; */
        color: #03441e;
      }
      #result:not(:empty) {
        margin-top: 20px;
        padding: 16px;
        background-color: #eff3f9;
        border-radius: 12px;
      }
      #reset {
        display: block;
        margin: 20px auto 0;
        background-color: #ce3221;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
      }
      #reset:hover {
        background-color: #b51f0f;
      }
      #expBld{
        display: none;
        justify-content: center;
        text-align: center;
        align-items: center;
        background-image: linear-gradient(to right, #100147 , #0b0a6c, #331691, #6744ff);
        border-radius: 8px;
        margin-top: 28px;
        padding: 16px 16px 22px 16px;
        transform: translateY(-20px);
        transition: opacity 0.8s ease, transform 0.8s ease allow-discrete;
    }
    #email-form-con {
      display: none;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    
    .text-yellow{
        color: gold;
    }
    i, .fa, .fa-brands {
        line-height: 2 !important;
    }
    .action-list {
    list-style: none;
    padding: 0;
    margin: 20px 0;
  }
  
  .action-list li {
    margin: 10px 0;
    padding: 10px;
    background-color: #f8f9fa;
    border-radius: 5px;
    display: flex;
    align-items: center;
  }
  
  .action-list li i {
    margin-right: 10px;
    color: #3498db;
  }
  
  .builder-prompt {
    margin-top: 20px;
    padding: 15px;
    background-color: #e8f4fd;
    border-radius: 8px;
    display: flex;
    align-items: center;
  }
  
  .builder-prompt i {
    font-size: 24px;
    color: #3498db;
    margin-right: 15px;
  }
  
  .builder-prompt p {
    margin: 0;
    color: #2c3e50;
  }
  
  #result h3 {
    color: #2c3e50;
    margin-bottom: 20px;
  }

  .custom-tooltip{
    position: relative;
    display: inline-block;
  }
  
  .custom-tooltip .tooltiptext {
    visibility: hidden;
    width: 280px;
    background-color: #484848;
    color: #fff;
    text-align: left;
    border-radius: 6px;
    padding: 10px;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    margin-left: -140px;
    opacity: 0;
    transition: opacity 0.3s;
    font-size: 14px;
    line-height: 1.4;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  }
  
  .custom-tooltip .tooltiptext::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: #484848 transparent transparent transparent;
  }
  
  .custom-tooltip:hover .tooltiptext {
    visibility: visible !important;
    opacity: 1 !important;
  }

  .score-display {
    background: #1f1d79;
    color: white;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    margin-bottom: 20px;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
  }
  
  .score-number {
    font-size: 42px;
    font-weight: bold;
    margin: 8px 0;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
  }
  
  .score-label {
    font-size: 18px;
    margin-bottom: 5px;
    opacity: 0.9;
  }
  
  .score-description {
    font-size: 14px;
    opacity: 0.8;
  }

  .link{
    color: #038de9;
  }
  .link:hover{
    color: #0b0a6c;
    text-decoration: underline;
  }
    </style>
    </head>
    <body>
    <header id='header'></header>
        <div class="bradcam_area bradcam_bg_1">
            <div class="container">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="bradcam_text">
                            <h1>Entrepreneur's Decision Tree</h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <div class="container" style="margin: 44px auto 222px auto; max-width: 800px;">
        <h2>Evaluate Your Business Readiness</h2>
        <p>This interactive decision tree will guide you through critical questions to determine your business readiness. Answer honestly to receive a readiness score and actionable next steps.</p>
        <br>
        <div id="decision-tree">
          <div id="history"></div>
          <div id="current-node"></div>
          <div id="result"></div>
          <div id="expBld" class="shadow-lg border-bottom">
            <a href="experience-builder.html">
                <div>
                <h3 class="text-white">Discover the Full Power of&nbsp;Your&nbsp;Product</h3>
                <button class="btn btn-primary">
                    Experience Builder&emsp; <i class="fa fa-bolt text-yellow" aria-hidden="true"></i>
                </button>
                </div>
            </a>
        </div>
        </div>
        <div id="email-form-con"><!-- Filled with email-capture.html --></div>

        <button id="reset" style="display: none;">Start Over</button>
    </div>

    <div id="footer"></div>

    <script>
      let userInteractionData = ""; 
      
      function updateInteractionData() {
        const pathSummary = history.map(step => `${step.question}: ${step.answer}`).join('\n');
        const finalScore = totalScore > 0 ? `\nScore: ${totalScore}/${maxPossibleScore}` : '';
        userInteractionData = `Decision Path:\n${pathSummary}${finalScore}`;
    }


    //Header + Footer
    $(document).ready(function() {
    $('#email-form-con').load("email-capture.html");
    $('#footer').load("footer.html");
    $('#header').load("header.html", function( response, status, xhr ) {
        if ( status == "error" ) {
            var msg = "Sorry but there was an error: ";
            $( "#error" ).html( msg + xhr.status + " " + xhr.statusText );
        } else {
            $('.business-gen').addClass('thisPage');
        }
    })
    });
    // Decision Tree
         const decisionTree = {
        question: "What's your experience level with business?",
        weight: 1,
        options: [
          {
            text: "Complete Beginner",
            points: 0,
            experienceLevel: "beginner",
            tooltip: "As a complete beginner, expect a steep learning curve but don't let that discourage you - every successful entrepreneur started somewhere!",
            next: {
              question: "Do you have a business idea?",
              weight: 1,
              options: [
                {
                  text: "Yes",
                  points: 2,
                  next: "businessStageTree"
                },
                {
                  text: "No",
                  points: 0,
                  next: "noIdeaTree"
                }
              ]
            }
          },
          {
            text: "Some Experience",
            points: 3,
            experienceLevel: "intermediate",
            tooltip: "With some business experience, you have an advantage - leverage your past learnings while staying open to new approaches.",
            next: {
              question: "Do you have a business idea?",
              weight: 1,
              options: [
                {
                  text: "Yes",
                  points: 2,
                  next: "businessStageTree"
                },
                {
                  text: "No",
                  points: 0,
                  next: "noIdeaTree"
                }
              ]
            }
          },
          {
            text: "Experienced Entrepreneur",
            points: 5,
            experienceLevel: "experienced",
            tooltip: "As an experienced entrepreneur, you know the challenges ahead - trust your instincts while staying adaptable to new market conditions.",
            next: {
              question: "Do you have a business idea?",
              weight: 1,
              options: [
                {
                  text: "Yes",
                  points: 2,
                  next: "businessStageTree"
                },
                {
                  text: "No",
                  points: 0,
                  next: "noIdeaTree"
                }
              ]
            }
          }
        ]
      };

      // Business stage tree - only for people with ideas
      const businessStageTree = {
        question: "What stage are you at in your business journey?",
        weight: 1,
        options: [
          {
            text: "Discovery & Research",
            points: 1,
            businessStage: "discovery",
            tooltip: "Focus on understanding your market, customers, and competition thoroughly.",
            next: "mainTree"
          },
          {
            text: "Prototyping & Testing",
            points: 3,
            businessStage: "prototyping",
            tooltip: "This is crucial for learning what works before full commitment.",
            next: "mainTree"
          },
          {
            text: "Launch Preparation",
            points: 4,
            businessStage: "prelaunch",
            tooltip: "Focus on finalizing your go-to-market strategy and operational readiness.",
            next: "mainTree"
          },
          {
            text: "Live & Iterating",
            points: 5,
            businessStage: "live",
            tooltip: "Focus on customer feedback, optimization, and sustainable growth.",
            next: "mainTree"
          },
          {
            text: "Scaling Operations",
            points: 6,
            businessStage: "scaling",
            tooltip: "Focus on systems, team building, and strategic expansion while maintaining quality.",
            next: "mainTree"
          }
        ]
      };

      // Main tree continues after experience/stage questions
      const mainTreeAffordability = {
        question: "Can you afford to go 12+ months without income from this business?",
        weight: 2,
        options: [
          {
            text: "Yes",
            points: 3,
            next: {
              question: "Are you looking to build a lifestyle business or a scalable startup?",
              weight: 1,
              options: [
                {
                  text: "Lifestyle Business",
                  points: 5,
                  tooltip: "Focused on steady income, work-life balance, and serving a local or niche market. Typically self-funded and grows at a manageable pace.",
                  next: {
                    question: "Have you validated your idea with potential customers?",
                    weight: 3,
                    options: [
                      {
                        text: "Yes",
                        points: 3,
                        next: {
                          question: "Do you have the necessary skills or team to execute the idea?",
                          weight: 2,
                          options: [
                            {
                              text: "Yes",
                              points: 4,
                              next: {
                                question: "Do you have access to initial funding or savings?",
                                weight: 1,
                                options: [
                                  {
                                    text: "Yes",
                                    points: 3,
                                    result: {
                                      message: "Perfect setup for a sustainable lifestyle business!",
                                      actions: [
                                        "Create a lean business plan focused on profitability",
                                        "Set up efficient operations and systems",
                                        "Build a strong local or niche customer base",
                                        "Focus on work-life balance and sustainable growth"
                                      ],
                                      useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to design sustainable business operations and customer acquisition.",
                                      scoreLabel: "Lifestyle Business Ready!",
                                      scoreDescription: "You're well-positioned to build a profitable, sustainable business that fits your lifestyle."
                                    }
                                  },
                                  {
                                    text: "No",
                                    points: 0,
                                    result: {
                                      message: "Build your financial foundation for your lifestyle business:",
                                      actions: [
                                        "Create a personal savings plan to fund initial operations",
                                        "Consider starting as a side business while employed",
                                        "Look into small business loans or microfinancing",
                                        "Explore revenue-generating activities while planning"
                                      ],
                                      useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to plan a financial runway and side-business strategy.",
                                      scoreLabel: "Lifestyle Business - Build Savings",
                                      scoreDescription: "Great lifestyle business potential. Focus on building financial runway first."
                                    }
                                  }
                                ]
                              }
                            },
                            {
                              text: "No",
                              points: 0,
                              result: {
                                message: "Develop your capabilities for lifestyle business success:",
                                actions: [
                                  "Identify and develop key skills needed for your business",
                                  "Consider hiring freelancers for specific tasks",
                                  "Join industry groups and find mentors",
                                  "Start small and learn as you grow"
                                ],
                                useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to map out skill development and resource needs.",
                                scoreLabel: "Lifestyle Business - Skill Building",
                                scoreDescription: "Validated idea with good financial runway. Focus on building execution skills."
                              }
                            }
                          ]
                        }
                      },
                      {
                        text: "No",
                        points: 0,
                        result: {
                          message: "Validate your lifestyle business idea:",
                          actions: [
                            "Talk to potential customers about their needs",
                            "Test your service/product with a small group",
                            "Research local market demand and competition",
                            "Create a simple MVP to gather feedback"
                          ],
                          useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to design customer validation experiments.",
                          scoreLabel: "Lifestyle Business - Validate Idea",
                          scoreDescription: "Good financial foundation. Now validate your business idea with real customers."
                        }
                      }
                    ]
                  }
                },
                {
                  text: "Scalable Startup",
                  points: 2,
                  tooltip: "Aimed at rapid growth, large market opportunities, and investor funding. Requires significant time investment and targets massive scale.",
                  next: {
                    question: "Have you validated your idea with potential customers?",
                    weight: 2,
                    options: [
                      {
                        text: "Yes",
                        points: 3,
                        next: {
                          question: "Is there significant competition in your market?",
                          weight: 1,
                          options: [
                            {
                              text: "Yes",
                              points: 1,
                              next: {
                                question: "Can you differentiate your product/service significantly?",
                                weight: 2,
                                options: [
                                  {
                                    text: "Yes",
                                    points: 3,
                                    next: {
                                      question: "Do you have the necessary skills or team to execute the idea?",
                                      weight: 2,
                                      options: [
                                        {
                                          text: "Yes",
                                          points: 3,
                                          next: {
                                            question: "Do you have access to significant funding (VC, angels, etc.)?",
                                            weight: 2,
                                            options: [
                                              {
                                                text: "Yes",
                                                points: 3,
                                                result: {
                                                  message: "Excellent! You're ready to build a scalable startup!",
                                                  actions: [
                                                    "Develop a comprehensive business plan with growth projections",
                                                    "Build your MVP and plan for rapid iteration",
                                                    "Assemble a strong founding team and advisory board",
                                                    "Create a go-to-market strategy for scale"
                                                  ],
                                                  useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to create detailed growth strategies and investor presentations.",
                                                  scoreLabel: "Startup Launch Ready!",
                                                  scoreDescription: "You have all elements for a successful scalable startup. Time to execute!"
                                                }
                                              },
                                              {
                                                text: "No",
                                                points: 0,
                                                result: {
                                                  message: "Secure funding to fuel your startup growth:",
                                                  actions: [
                                                    "Create a compelling pitch deck and financial model",
                                                    "Network with angel investors and VCs in your space",
                                                    "Consider startup accelerators and incubators",
                                                    "Build traction to attract investment interest"
                                                  ],
                                                  useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to create investor-ready materials and funding strategy.",
                                                  scoreLabel: "Startup Ready - Need Funding",
                                                  scoreDescription: "Strong startup foundation. Focus on securing growth capital to scale."
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        {
                                          text: "No",
                                          points: 0,
                                          result: {
                                            message: "Build your startup team and capabilities:",
                                            actions: [
                                              "Recruit co-founders with complementary skills",
                                              "Create an equity and hiring plan",
                                              "Build relationships with technical and business mentors",
                                              "Consider joining startup accelerators for support"
                                            ],
                                            useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to define team structure and recruitment strategy.",
                                            scoreLabel: "Startup Potential - Build Team",
                                            scoreDescription: "Validated startup idea with market opportunity. Focus on building execution team."
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  {
                                    text: "No",
                                    points: 0,
                                    result: {
                                      message: "Develop your startup's competitive advantage:",
                                      actions: [
                                        "Research competitor weaknesses and market gaps",
                                        "Innovate on product features, business model, or customer experience",
                                        "Consider targeting an underserved market segment",
                                        "Build proprietary technology or unique partnerships"
                                      ],
                                      useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to analyze competition and develop differentiation strategy.",
                                      scoreLabel: "Startup Challenge - Need Differentiation",
                                      scoreDescription: "Validated market but need stronger competitive positioning for startup success."
                                    }
                                  }
                                ]
                              }
                            },
                            {
                              text: "No",
                              points: 3,
                              next: {
                                question: "Do you have the necessary skills or team to execute the idea?",
                                weight: 2,
                                options: [
                                  {
                                    text: "Yes",
                                    points: 3,
                                    next: {
                                      question: "Do you have access to significant funding (VC, angels, etc.)?",
                                      weight: 2,
                                      options: [
                                        {
                                          text: "Yes",
                                          points: 3,
                                          result: {
                                            message: "Outstanding first-mover advantage opportunity!",
                                            actions: [
                                              "Move fast to establish market leadership",
                                              "Build intellectual property and competitive moats",
                                              "Scale team and operations rapidly",
                                              "Plan for market expansion and competition response"
                                            ],
                                            useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to create rapid scaling and market domination strategy.",
                                            scoreLabel: "First-Mover Startup Advantage!",
                                            scoreDescription: "Perfect storm: validated idea, no competition, funding, and team. Move fast!"
                                          }
                                        },
                                        {
                                          text: "No",
                                          points: 0,
                                          result: {
                                            message: "Secure funding quickly to capitalize on first-mover advantage:",
                                            actions: [
                                              "Create urgency-focused pitch highlighting market timing",
                                              "Target investors who specialize in your industry",
                                              "Consider strategic partnerships for faster funding",
                                              "Bootstrap initially while raising to maintain momentum"
                                            ],
                                            useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to create time-sensitive funding strategy.",
                                            scoreLabel: "First-Mover - Get Funding Fast",
                                            scoreDescription: "Exceptional opportunity with validated idea and no competition. Secure funding quickly!"
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  {
                                    text: "No",
                                    points: 0,
                                    result: {
                                      message: "Rapidly build capabilities to capture first-mover advantage:",
                                      actions: [
                                        "Recruit experienced co-founders immediately",
                                        "Consider strategic partnerships to accelerate development",
                                        "Join accelerators with strong networks and resources",
                                        "Hire key talent and consultants to fill critical gaps"
                                      ],
                                      useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to create rapid team building and partnership strategy.",
                                      scoreLabel: "First-Mover - Build Team Fast",
                                      scoreDescription: "Huge market opportunity with no competition. Build execution capabilities quickly!"
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      },
                      {
                        text: "No",
                        points: 0,
                        result: {
                          message: "Validate your startup idea for scalable growth:",
                          actions: [
                            "Conduct customer development interviews",
                            "Build and test MVP with target users",
                            "Analyze total addressable market (TAM)",
                            "Study successful companies in adjacent markets"
                          ],
                          useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to design comprehensive validation experiments.",
                          scoreLabel: "Startup Idea - Validate for Scale",
                          scoreDescription: "Good startup ambition and financial runway. Validate your idea for scalable growth."
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            text: "No",
            points: 0,
            next: {
              question: "Have you validated your idea with potential customers?",
              weight: 2,
              options: [
                {
                  text: "Yes",
                  points: 3,
                  result: {
                    message: "Smart approach! Bootstrap your business while keeping income:",
                    actions: [
                      "Start as a side business to minimize risk",
                      "Focus on cash-flow positive activities first",
                      "Keep your day job until business generates steady income",
                      "Reinvest profits to gradually grow the business"
                    ],
                    useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to create a side-business transition plan.",
                    scoreLabel: "Bootstrap Business Ready",
                    scoreDescription: "Validated idea with smart risk management. Perfect for side-business approach."
                  }
                },
                {
                  text: "No",
                  points: 0,
                  result: {
                    message: "Validate your idea while maintaining financial security:",
                    actions: [
                      "Test your idea in evenings and weekends",
                      "Use low-cost validation methods (surveys, interviews)",
                      "Start with a simple version to test market demand",
                      "Keep your current income while exploring"
                    ],
                    useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to design low-risk validation experiments.",
                    scoreLabel: "Side Business - Validate First",
                    scoreDescription: "Good risk management approach. Validate your idea while maintaining income security."
                  }
                }
              ]
            }
          }
        ]
      };

      const noIdeaTree = {
        question: "Can you afford to go 12+ months without income?",
        weight: 2,
        options: [
          {
            text: "Yes",
            points: 2,
            next: {
              question: "Would you like to explore potential business ideas?",
              weight: 1,
              options: [
                {
                  text: "Yes",
                  points: 1,
                  result: {
                    message: "Great! You have financial freedom to explore opportunities:",
                    actions: [
                      "List your skills, interests, and experiences",
                      "Research trending markets and emerging opportunities",
                      "Identify problems you're passionate about solving",
                      "Network with entrepreneurs and potential mentors"
                    ],
                    useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to explore market opportunities and generate business ideas.",
                    scoreLabel: "Exploration Phase - Well Funded",
                    scoreDescription: "You have financial runway to explore. Take time to find the right opportunity."
                  }
                },
                {
                  text: "No",
                  points: 0,
                  result: {
                    message: "Consider these alternatives with your financial stability:",
                    actions: [
                      "Angel investing in other entrepreneurs",
                      "Joining innovative companies in leadership roles",
                      "Consulting or advising for startups",
                      "Building skills and network for future opportunities"
                    ],
                    useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to explore investment and leadership opportunities.",
                    scoreLabel: "Alternative Paths - Investor Track",
                    scoreDescription: "Strong financial position opens doors to investing, advising, and leadership roles."
                  }
                }
              ]
            }
          },
          {
            text: "No",
            points: 0,
            result: {
              message: "Build your foundation first before starting a business:",
              actions: [
                "Focus on building savings and reducing debt",
                "Develop valuable skills in your current role",
                "Start networking and learning about entrepreneurship",
                "Consider side hustles to increase income and experience"
              ],
              useBuilder: "Use our <a href='experience-builder.html' class='link'>Experience Builder</a> to create a financial and skill-building roadmap.",
              scoreLabel: "Foundation Building Phase",
              scoreDescription: "Focus on financial stability and skill building before entrepreneurship."
            }
          }
        ]
      };
    
    
let currentNode = decisionTree;
let history = [];
let totalScore = 0;
let maxPossibleScore = 0;
let userExperienceLevel = "";
let userBusinessStage = "";
let experienceNote = "";
let stageNote = "";

function calculateMaxScore(node, currentMax = 0) {
    if (!node || node.result) {
        return currentMax;
    }
    
    // Handle string references
    if (typeof node === 'string') {
        return currentMax;
    }
    
    if (!node.options) {
        return currentMax;
    }
    
    let maxFromOptions = currentMax;
    node.options.forEach(option => {
        let nextNode = option.next;
        
        // Handle string references to other trees
        if (nextNode === "businessStageTree") {
            nextNode = businessStageTree;
        } else if (nextNode === "mainTree") {
            nextNode = mainTreeAffordability;
        } else if (nextNode === "noIdeaTree") {
            nextNode = noIdeaTree;
        }
        
        if (nextNode) {
            const scoreFromThisPath = calculateMaxScore(nextNode, currentMax + (option.points || 0) * (node.weight || 1));
            maxFromOptions = Math.max(maxFromOptions, scoreFromThisPath);
        } else {
            // If no next node, just add the points from this option
            maxFromOptions = Math.max(maxFromOptions, currentMax + (option.points || 0) * (node.weight || 1));
        }
    });
    
    return maxFromOptions;
}

function handleOption(option) {
    // Add points weighted by the question importance
    const points = (option.points || 0) * (currentNode.weight || 1);
    totalScore += points;
    
    // Capture experience level and business stage
    if (option.experienceLevel) {
        userExperienceLevel = option.experienceLevel;
        experienceNote = option.experienceNote;
    }
    if (option.businessStage) {
        userBusinessStage = option.businessStage;
        stageNote = option.stageNote;
    }
    
    // Add the current selection to history
    history.push({ 
        question: currentNode.question, 
        answer: option.text,
        points: points
    });

    updateInteractionData();
    window.userInteractionData = userInteractionData;
    
    if (option.result) {
        showResult(option.result);
    } else {
        // Handle special navigation cases
        if (option.next === "businessStageTree") {
            currentNode = businessStageTree;
        } else if (option.next === "mainTree") {
            currentNode = mainTreeAffordability;
        } else if (option.next === "noIdeaTree") {
            currentNode = noIdeaTree;
        } else {
            currentNode = option.next;
        }
        renderHistory();
        renderNode(currentNode);
    }
}

function renderNode(node) {
    const currentNodeElement = document.getElementById('current-node');
    currentNodeElement.innerHTML = '';

    const questionElement = document.createElement('div');
    questionElement.className = 'question';
    questionElement.textContent = node.question;
    currentNodeElement.appendChild(questionElement);

    const optionsElement = document.createElement('div');
    optionsElement.className = 'options';
    
    node.options.forEach(option => {
        const button = document.createElement('button');
        button.className = 'option';
        const icon = option.text.toLowerCase() === 'no' ? 
            'fa-circle-xmark' : 'fa-check-circle';
        
        if (option.tooltip) {
            // Create tooltip wrapper
            const tooltipWrapper = document.createElement('div');
            tooltipWrapper.className = 'custom-tooltip';
            
            button.innerHTML = `<i class="fas ${icon}"></i>&nbsp; ${option.text}`;
            
            // Create tooltip text
            const tooltipText = document.createElement('span');
            tooltipText.className = 'tooltiptext';
            tooltipText.textContent = option.tooltip;
            
            tooltipWrapper.appendChild(button);
            tooltipWrapper.appendChild(tooltipText);
            
            button.addEventListener('click', () => handleOption(option));
            optionsElement.appendChild(tooltipWrapper);
        } else {
            button.innerHTML = `<i class="fas ${icon}"></i>&nbsp; ${option.text}`;
            button.addEventListener('click', () => handleOption(option));
            optionsElement.appendChild(button);
        }
    });

    currentNodeElement.appendChild(optionsElement);
}

function renderHistory() {
    const historyElement = document.getElementById('history');
    historyElement.innerHTML = '';

    history.forEach((step) => {
        const stepElement = document.createElement('div');
        stepElement.className = 'node';
        const icon = step.answer.toLowerCase() === 'no' ? 
            'fa-circle-xmark' : 'fa-check-circle';
        stepElement.innerHTML = `
            <div class="question">${step.question}</div>
            <div class="options">
                <button class="option selected ${step.answer.toLowerCase() === 'no' ? 'no' : ''}">
                    <i class="fas ${icon}"></i>&nbsp; ${step.answer}
                </button>
            </div>
        `;

        historyElement.appendChild(stepElement);
    });
}

function getExperienceMessage() {
    const levelMessages = {
        "beginner": "As a complete beginner, expect to learn through trial and error - every successful entrepreneur started somewhere!",
        "intermediate": "With some business experience, you have valuable insights to leverage while staying adaptable to new challenges.",
        "experienced": "Your entrepreneurial experience is a significant advantage - trust your instincts while remaining open to evolving markets."
    };
    
    const stageMessages = {
        "discovery": "Being in the research phase means you're building a solid foundation - take time to thoroughly understand your market before moving forward.",
        "prototyping": "Active prototyping puts you ahead of most entrepreneurs - use this phase to learn fast and fail cheap. Try our <a href='screen-builder.html' class='link'>Screen Builder</a> to quickly prototype your idea.",
        "prelaunch": "Launch preparation is critical - ensure you have strong fundamentals before going to market.",
        "live": "Being live in the market gives you real customer feedback - use this invaluable data to optimize and grow.",
        "scaling": "Operating in growth mode requires balancing expansion with operational excellence and team development."
    };
    
    let message = "";
    if (userExperienceLevel && levelMessages[userExperienceLevel]) {
        message += levelMessages[userExperienceLevel];
    }
    if (userBusinessStage && stageMessages[userBusinessStage]) {
        if (message) message += " ";
        message += stageMessages[userBusinessStage];
    }
    
    return message;
}

function showResult(result) {
    const currentNodeElement = document.getElementById('current-node');
    currentNodeElement.innerHTML = '';

    // Calculate percentage score
    const percentage = Math.round((totalScore / maxPossibleScore) * 100);
    
    const resultElement = document.getElementById('result');
    resultElement.innerHTML = `
        <div class="score-display">
            <div class="score-label">${result.scoreLabel}</div>
            <div class="score-number">${percentage}/100</div>
            <div class="score-description">${result.scoreDescription}</div>
        </div>
        <h3>${result.message}</h3>
        <ul class="action-list">
            ${result.actions.map(action => `<li><i class="fas fa-arrow-right"></i> ${action}</li>`).join('')}
        </ul>
        <div class="builder-prompt">
            <i class="fas fa-bolt"></i>
            <p>${result.useBuilder}</p>
        </div>
    `;

    renderHistory();

    document.getElementById('reset').style.display = 'block';
    document.getElementById('expBld').style.display = 'block';
    document.getElementById('email-form-con').style.display = 'block';
}

function resetTree() {
    currentNode = decisionTree;
    history = [];
    totalScore = 0;
    userExperienceLevel = "";
    userBusinessStage = "";
    experienceNote = "";
    stageNote = "";
    renderNode(currentNode);
    document.getElementById('history').innerHTML = '';
    document.getElementById('result').textContent = '';
    document.getElementById('reset').style.display = 'none';
    document.getElementById('expBld').style.display = 'none';
    document.getElementById('email-form-con').style.display = 'none';

   document.getElementById('header').scrollIntoView({ behavior: 'smooth' });
}

document.getElementById('reset').addEventListener('click', resetTree);

// Calculate max possible score on page load
maxPossibleScore = calculateMaxScore(decisionTree);
renderNode(currentNode);
    </script>
    
    </body></html>