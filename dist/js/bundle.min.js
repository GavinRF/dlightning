function setupImageGallery(e){if(!e)return;const t=null!==e.querySelector(".ig-left-column-con"),n=null!==e.querySelector(".img-gallery-slider"),a=null!==e.querySelector(".img-gallery-grid"),i=null!==e.querySelector(".img-gallery-strip");console.log("isStandardGallery:",t),t?setupStandardGallery(e):n?setupSliderGallery(e):a?setupGridGallery(e):i&&setupStripGallery(e)}function setupStandardGallery(e){const t=e.querySelector(".ig-left-column-con"),n=e.querySelector(".ig-right-column-con"),a=e.querySelector(".ig-add-btn");if(!t||!n)return;if(setupImageBoxes(e),a){const e=a.cloneNode(!0);a.parentNode&&a.parentNode.replaceChild(e,a),e.addEventListener("click",(()=>{const e=createImageBox();t.children.length<=n.children.length?(t.appendChild(e),editor.setupImageUpload(e)):(n.appendChild(e),editor.setupImageUpload(e))}))}const i=e.querySelectorAll(".ig-image-wrapper");if(i?i.forEach((e=>deleteBtnHoverEffect(e))):deleteBtnHoverEffect(i),"undefined"!=typeof Sortable){const e={animation:150,group:"imgGal",onEnd:function(){if(a){const e=t.children.length+n.children.length;a.style.display=e>=8?"none":"block"}}};new Sortable(t,e),new Sortable(n,e)}}function setupSliderGallery(e){const t=e.querySelector(".img-gallery-slider"),n=e.querySelector(".img-gallery-nav-left"),a=e.querySelector(".img-gallery-nav-right"),i=e.querySelectorAll(".img-gallery-dot"),o=e.querySelectorAll(".img-gallery-side-image, .img-gallery-center-image");if(!t)return;o.forEach((e=>editor.setupImageUpload(e)));let s=2;function r(){i.forEach(((e,t)=>{e.classList.toggle("active",t===s)}))}n&&n.addEventListener("click",(()=>{s=(s-1+5)%5,r()})),a&&a.addEventListener("click",(()=>{s=(s+1)%5,r()})),i.forEach(((e,t)=>{e.addEventListener("click",(()=>{s=t,r()}))}))}function setupGridGallery(e){e.querySelectorAll(".img-gallery-grid-item").forEach((e=>editor.setupImageUpload(e))),new Sortable(e,{animation:150})}function setupStripGallery(e){e.querySelectorAll(".img-gallery-strip-thumb").forEach((e=>editor.setupImageUpload(e))),new Sortable(e,{animation:150})}function createImageBox(){const e=document.createElement("div");e.className="ig-image-wrapper";const t=document.createElement("div");t.classList="card-image resizeable ig-img-box",t.innerHTML='\n        <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n        <span style="color: var(--basic-txt-color)" class="imgMsg non-editable">Click to add image</span>\n    ',void 0!==resizer&&resizer.makeResizable&&resizer.makeResizable(t),editor.setupImageUpload(t);const n=document.createElement("button");return n.innerHTML="Ã—",n.className="gallery-image-delete-btn",n.addEventListener("click",(()=>e.remove())),n.addEventListener("click",(e=>e.stopPropagation())),e.appendChild(n),e.appendChild(t),deleteBtnHoverEffect(e),e}function deleteBtnHoverEffect(e){const t=e.querySelector(".gallery-image-delete-btn");t.addEventListener("mouseenter",(()=>e.style.outline="1px solid var(--error-danger-delete)")),t.addEventListener("mouseleave",(()=>e.style.outline="none"))}function setupImageBoxes(e){e.querySelectorAll(".ig-img-box").forEach(editor.setupImageUpload);e.querySelectorAll(".gallery-image-delete-btn").forEach((e=>{const t=e.cloneNode(!0);e.parentNode&&e.parentNode.replaceChild(t,e),e.addEventListener("click",(e=>e.stopPropagation())),t.addEventListener("click",(e=>{e.stopPropagation();const n=t.closest(".ig-image-wrapper");n&&n.remove()}))}))}document.querySelectorAll(".sidebar-tab").forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-tab"),n=document.getElementById("search-container");n.style.display="theme"===t?"none":"block",document.querySelectorAll(".sidebar-tab").forEach((e=>{e.classList.remove("active")})),e.classList.add("active"),document.querySelectorAll(".sidebar-content").forEach((e=>{e.classList.remove("active")})),document.querySelector(`.sidebar-content[data-tab="${t}"]`).classList.add("active")}))}));let darkMode="true"===localStorage.getItem("darkMode"),darkModeToggle=document.getElementById("darkModeToggle");darkModeToggle&&(darkModeToggle.checked=darkMode),darkMode&&document.body.classList.add("dark-mode"),darkModeToggle&&darkModeToggle.addEventListener("change",(function(){darkMode=this.checked,localStorage.setItem("darkMode",darkMode),darkMode?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")}));const darkModeLabel=document.getElementById("darkModeLabel");function initializeComponentSearch(){const e=document.getElementById("componentSearch"),t=document.getElementById("clearSearch"),n=document.querySelectorAll(".component-btn"),a=document.getElementById("basic-count"),i=document.getElementById("components-count"),o=document.querySelectorAll('[data-tab="basic"] .component-btn'),s=document.querySelectorAll('[data-tab="components"] .component-btn'),r=document.querySelectorAll(".btn-class-group");function l(){const e=Array.from(o).filter((e=>"none"!==e.style.display)).length,t=Array.from(s).filter((e=>"none"!==e.style.display)).length;a.textContent=e,i.textContent=t}function c(){r.forEach((e=>{const t=e.querySelectorAll(".component-btn"),n=Array.from(t).some((e=>"none"!==e.style.display));e.style.display=n?"block":"none"}))}function d(){t.style.display=e.value?"block":"none"}l(),d(),e.addEventListener("input",(function(){const e=this.value.toLowerCase();n.forEach((t=>{const n=t.textContent.toLowerCase().includes(e);t.style.display=n?"block":"none";const a=t.closest(".comp-btn-wrap");a?a.style.display=n?"flex":"none":t.style.display=n?"flex":"none"})),l(),c(),d()})),t.addEventListener("click",(function(){e.value="",n.forEach((e=>{const t=e.closest(".comp-btn-wrap");t&&(t.style.display="flex"),e.style.display="block"})),l(),c(),d()}))}function createColorSwatches(e){if(e.closest(".color-swatch-container"))return;const t=e.closest(".component-container");if(t){const n=function(e){let t=e;for(;t&&!t.classList?.contains("component-container");){if(t.classList?.contains("component-content"))return t.parentElement;t=t.parentElement}return t}(e);if(n&&n!==t)return document.createElement("div")}if(e.closest(".bar-graph-wrapper")||e.closest('[data-component-type="graph"]'))return document.createElement("div");const n=e.closest('.progress-tracker-container, [data-component-type="progressTracker"]');if(n&&e!==n.querySelector(".selected-step .step-circle")&&e.closest(".step-circle")){const t=e.closest(".step-container")?.classList.contains("selected-step");if(!t)return document.createElement("div")}const a=(e=>e.style.cssText.split(";").filter((e=>e.includes("var(--color")||e.includes("gradient")&&e.includes("var(--color"))))(e);if(0===a.length)return document.createElement("div");const i=a.reduce(((e,t)=>((e=>{const t=e.match(/var\(--color-[^)]+\)/g)||[];return[...new Set(t.map((e=>e.match(/--color-[^)]+/)[0])))]})(t).forEach((n=>{e[n]||(e[n]=[]),e[n].includes(t)||e[n].push(t)})),e)),{}),o=Object.keys(i),s=[];return o.forEach(((t,n)=>{const a=document.createElement("div");a.className="color-swatch-container",n>0&&a.classList.add("secondary-swatch");const o=["--color-primary","--color-secondary","--color-accent"],r=e.closest(".component-container")?.querySelector(".colorBlock-container");r&&(o.push("--color-background","--color-transparent-blk"),a.classList.add("minusSix"));const l=e.closest(".component-container")?.querySelector(".blank-card-container");l&&o.push("--color-background");const c=e.closest(".component-container")?.querySelector(".error-container");c&&o.push("--error-danger-delete");const d=e.closest(".component-container")?.querySelector(".success-container");d&&o.push("--success-color"),e.style.backgroundColor?.includes("--color-transparent-blk")&&o.push("--color-transparent-blk"),o.forEach((n=>{const o=document.createElement("div");o.className="color-swatch",o.style.backgroundColor=`var(${n})`,o.dataset.color=n,o.title=n.replace("--color-",""),n===t&&o.classList.add("selected"),o.addEventListener("click",(()=>{i[t].forEach((a=>{const[i,o]=a.split(":").map((e=>e.trim()));if(o.includes("gradient")){const a=o.replace(new RegExp(`var\\(${t}\\)`,"g"),`var(${n})`);e.style[i]=a}else e.style[i]=o.replace(`var(${t})`,`var(${n})`);requestAnimationFrame((()=>{TextContrastAdjuster.updateElementContrast(e)}))}));const s=createColorSwatches(e),r=e.previousElementSibling;"color-swatch-container"===r?.className&&(Array.isArray(s)?s.forEach(((e,t)=>{const n=r.parentNode.children[t];"color-swatch-container"===n?.className?n.replaceWith(e):r.parentNode.appendChild(e)})):s&&s.children.length>0&&r.replaceWith(s)),updateSwatchesHighlight(a,o)})),a.appendChild(o)})),s.push(a)})),1===s.length?s[0]:s}function updateSwatchesHighlight(e,t){e.querySelectorAll(".color-swatch").forEach((e=>{e.classList.remove("selected")})),t.classList.add("selected")}function createGroupColorSwatch(e){e.querySelectorAll(".color-swatch-container").forEach((e=>e.remove()));const t=document.createElement("div");t.style.backgroundColor="var(--color-primary)";const n=createColorSwatches(t);if(n){const t=Array.isArray(n)?n[0]:n;if(t){t.querySelectorAll(".color-swatch").forEach((t=>{const n=t.onclick;t.onclick=a=>{n&&n.call(t,a);const i=t.dataset.color;e.querySelectorAll(".chip").forEach((e=>{const t=e.getAttribute("data-selected");"true"!==t&&null!==t||(e.style.backgroundColor=`var(${i})`,requestAnimationFrame((()=>{window.TextContrastAdjuster.updateElementContrast(e)})))}))}})),e.insertBefore(t,e.firstChild)}}}function createGraphColorSwatch(e){e.querySelectorAll(".color-swatch-container").forEach((e=>e.remove()));const t=document.createElement("div");t.style.backgroundColor="var(--color-primary)";const n=createColorSwatches(t);if(n){const t=Array.isArray(n)?n[0]:n;if(t){t.querySelectorAll(".color-swatch").forEach((t=>{const n=t.onclick;t.onclick=a=>{n&&n.call(t,a);const i=t.dataset.color;e.querySelectorAll(".bar-graph-bar").forEach((e=>{e.style.backgroundColor=`var(${i})`}))}})),e.insertBefore(t,e.firstChild)}}}darkModeLabel.addEventListener("click",(function(){darkModeToggle.click()})),initializeComponentSearch(),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("toggleCanvasBtn"),t=document.getElementById("bounding");let n=!1;e.addEventListener("click",(function(){n=!n;const a=document.querySelectorAll(".canvas"),i=document.querySelectorAll(".content"),o=document.querySelectorAll(".phoneScrollCon"),s=document.getElementById("addScreenBtnCon");a.forEach((e=>e.classList.toggle("canvas-expanded"))),i.forEach((e=>e.classList.toggle("content-expanded"))),t.classList.toggle("content-expanded"),o.forEach((e=>e.classList.toggle("scroll-expanded"))),s.classList.toggle("hideAddCanvasBtn"),e.innerHTML=n?'<i style="font-size: larger;" class="fa-solid fa-mobile-screen-button"></i>':'<i style="font-size: larger;" class="fa-solid fa-up-down"></i>',n||o.forEach((e=>e.scrollTo(0,0)))}))}));class TextAlignmentController{constructor(e=".canvas-content"){this.containerSelector=e,this.containers=new Set,this.currentElement=null,this.activeControls=null,this.elementControls=new WeakMap,this.mutationTimeout=null,this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleAlignment=this.handleAlignment.bind(this),this.initContainer=this.initContainer.bind(this),this.init(),this.setupMutationObserver()}init(){document.querySelectorAll(this.containerSelector).forEach((e=>{this.initContainer(e)}))}initContainer(e){this.containers.has(e)||(this.containers.add(e),e._mouseoverHandler&&e.removeEventListener("mouseover",e._mouseoverHandler),e._mouseoutHandler&&e.removeEventListener("mouseout",e._mouseoutHandler),e._mouseoverHandler=e=>{const t=e.target.closest("h1, h2, h3, h4, h5, h6, p, blockquote");t&&this.handleMouseEnter(t)},e._mouseoutHandler=e=>{const t=e.target.closest("h1, h2, h3, h4, h5, h6, p, blockquote");t&&this.handleMouseLeave(e,t)},e.addEventListener("mouseover",e._mouseoverHandler),e.addEventListener("mouseout",e._mouseoutHandler))}setupMutationObserver(){new MutationObserver((e=>{this.mutationTimeout&&clearTimeout(this.mutationTimeout),this.mutationTimeout=setTimeout((()=>{let t=!1;const n=new WeakSet;e.forEach((e=>{n.has(e.target)||(n.add(e.target),"childList"===e.type&&(e.addedNodes.forEach((e=>{if(e.nodeType===Node.ELEMENT_NODE&&(e.matches&&e.matches(this.containerSelector)&&(this.initContainer(e),t=!0),e.querySelectorAll)){e.querySelectorAll("h1, h2, h3, h4, h5, h6, p, blockquote").length>0&&(t=!0)}})),e.target.matches&&e.target.matches(this.containerSelector)&&(t=!0)))})),t&&this.refreshContainers()}),100)})).observe(document.body,{childList:!0,subtree:!0,attributes:!1})}refreshContainers(){document.querySelectorAll(this.containerSelector).forEach((e=>{this.initContainer(e)})),document.querySelectorAll(".text-alignment-controls").forEach((e=>{e.parentElement&&e.parentElement.closest(this.containerSelector)||e.remove()}))}createControls(e){this.elementControls.has(e)&&this.elementControls.get(e).remove();const t=document.createElement("div");return t.className="text-alignment-controls",t.innerHTML='\n            <button data-align="left"><i class="fas fa-align-left"></i></button>\n            <button data-align="center"><i class="fas fa-align-center"></i></button>\n            <button data-align="right"><i class="fas fa-align-right"></i></button>\n        ',t.addEventListener("click",this.handleAlignment),t.addEventListener("mouseenter",(()=>{clearTimeout(this.hideTimeout)})),t.addEventListener("mouseleave",(t=>{e.contains(t.relatedTarget)||this.hideControls()})),this.elementControls.set(e,t),t}handleMouseEnter(e){if(this.currentElement===e)return;this.currentElement&&this.hideControls();let t=this.elementControls.get(e);if(!t){const n=e.closest("div");if(!n)return;n.style.position="relative",t=this.createControls(e),n.appendChild(t),this.elementControls.set(e,t)}this.currentElement=e,this.activeControls=t;let n=e.style.textAlign||getComputedStyle(e).textAlign;n&&"start"!==n||(n="left"),t.querySelectorAll("button").forEach((e=>{e.classList.toggle("active",e.dataset.align===n)})),t.style.display="flex",clearTimeout(this.hideTimeout)}handleMouseLeave(e,t){const n=this.elementControls.get(t);n&&(e.relatedTarget&&(e.relatedTarget===n||n.contains(e.relatedTarget))||(this.hideTimeout=setTimeout((()=>{this.currentElement===t&&this.hideControls()}),100)))}hideControls(){this.activeControls&&(this.activeControls.style.display="none",this.activeControls=null),this.currentElement=null}handleAlignment(e){const t=e.target.closest("button");if(!t||!this.currentElement)return;e.stopPropagation();const n=t.dataset.align;t.classList.contains("active")&&"left"===n?this.currentElement.style.textAlign="":this.currentElement.style.textAlign=n;t.closest(".text-alignment-controls").querySelectorAll("button").forEach((e=>{e.classList.toggle("active",e.dataset.align===n)}))}destroy(){this.containers.forEach((e=>{e._mouseoverHandler&&e.removeEventListener("mouseover",e._mouseoverHandler),e._mouseoutHandler&&e.removeEventListener("mouseout",e._mouseoutHandler)})),this.containers.clear(),this.mutationTimeout&&clearTimeout(this.mutationTimeout)}}function showIconPicker(e){const t=document.querySelector(".icon-picker-backdrop"),n=document.querySelector(".icon-picker-modal"),a=n.querySelector(".icon-picker-grid"),i=n.querySelector(".icon-picker-search"),o=["home","search","plus","heart","user","cog","bell","envelope","envelope-circle-check","envelope-open","envelope-open-text","envelope-square","star","star-half","star-half-stroke","ranking-star","bookmark","calendar","calendar-day","calendar-days","video","camera","photo-film","crop","crop-simple","music","map","image","gear","trash","comments","comment","comment-dots","message","share","edit","database","shield","eye-dropper","thumbs-up","thumbs-down","paper-plane","shopping-cart","trophy","image-portrait","divide","equals","not-equal","notdef","folder","folder-open","folder-closed","folder-plus","folder-minus","folder-tree","file-circle-plus","file-signature","file-import","file-invoice","file-half-dashed","file-fragment","certificate","chart-bar","chart-line","chart-pie","clock","location-dot","location-crosshairs","landmark","landmark-dome","map-pin","flag","location-arrow","mosque","vihara","dungeon","monument","archway","torii-gate","store","school","bridge","bridge-water","building","building-columns","synagogue","city","tree-city","tower-observation","campground","tent","mountain","globe","earth-oceania","earth-americas","earth-europe","earth-africa","earth-asia","door-open","door-closed","language","download","upload","refresh","cloud-arrow-up","layer-group","hashtag","at","asterisk","check","times","inbox","ban","bars","expand","eye","eye-slash","maximize","link","blank","wifi","signal","battery-full","person-running","person-hiking","person-swimming","person-chalkboard","person-cane","people-pulling","id-badge","child-reaching","person-shelter","person-digging","person-falling","person-biking","people-carry-box","user-lock","user-pen","user-xmark","user-check","users","accessible-icon","universal-access","user-astronaut","play","stop","forward-step","backward-step","pause","eject","repeat","forward","backward","fast-forward","fast-backward","volume-xmark","volume-low","volume-off","volume-high","newspaper","film","book","record-vinyl","microphone","braille","camera-rotate","camera-retro","panorama","headphones","guitar","drum","laptop","laptop-file","desktop","mobile","tablet","mobile-screen","tablet-screen-button","tv","mobile-button","display","brain","hotel","wallet","award","faucet","water","fire-extinguisher","fire","fire-flame-simple","brush","gamepad","feather","mug-saucer","wrench","shirt","bag-shopping","crown","gift","mortar-pestle","microchip","calculator","glasses","ship","route","receipt","industry","umbrella-beach","dumbbell","toolbox","anchor","robot","gauge","tachometer-alt","passport","van-shuttle","car-side","helicopter","shuttle-space","sailboat","satellite","satellite-dish","plane","plane-up","plane-departure","plane-arrival","caravan","bus","truck-fast","bicycle","cable-car","cart-flatbed","cart-flatbed-suitcase","cart-plus","dolly","trailer","otter","kiwi-bird","horse-head","horse","spider","republican","democrat","paw","crow","cat","fish","shield-dog","shield-cat","locust","fish-fins","dog","frog","bugs","bug","tree","leaf","seedling","clover","holly-berry","canadian-maple-leaf","utensils","hotdog","wine-bottle","mug-hot","burger","bowl-rice","cookie-bite","wine-glass","champagne-glasses","pepper-hot","cheese","martini-glass","apple-whole","chart-pie","carrot","cake-candles","lemon","ice-cream","pizza-slice","bread-slice","glass-water","glass-water-droplet","plate-wheat","jar-wheat","jar","tooth","teeth","shoe-prints","stopwatch","splotch","skull-crossbones","skull","scissors","scale-balanced","soap","pen-clip","pen-nib","pen-fancy","address-book","paperclip","ticket","scroll","ring","peace","om","yin-yang","dove","infinity","hamsa","dharmachakra","bahai","recycle","parachute-box","microscope","lungs","hat-cowboy","hat-wizard","hourglass-half","highlighter","heart-pulse","bacterium","bacteria","virus","viruses","ghost","fill-drip","couch","computer-mouse","compass-drafting","screwdriver","screwdriver-wrench","clapperboard","key","thumbtack","wand-magic-sparkles","cannabis","joint","bullhorn","life-ring","box","box-open","box-archive","book-open","bone","bell-concierge","bomb","explosion","bowling-ball","futbol","baseball","baseball-bat-ball","hockey-puck","basketball","chess-rook","chess-knight","chess-queen","chess","chess-king","chess-bishop","chess-pawn","chess-board","binoculars","palette","font","align-left","align-center","align-right","align-justify","bold","quote-left","quote-right","question","1","2","3","4","5","6","7","8","9","0","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","xmark","shapes","copyright","circle","circle-play","circle-pause","circle-stop","circle-dot","circle-check","circle-radiation","spinner","circle-down","info-circle","question-circle","exclamation-circle","circle-user","circle-nodes","circle-notch","circle-xmark","diamond","square","square-plus","square-minus","square-poll-horizontal","square-check","square-xmark","square-up-right","piggy-bank","dollar-sign","stamp","percent","euro-sign","yen-sign","manat-sign","lira-sign","cent-sign","file-invoice-dollar","sterling-sign","franc-sign","ruble-sign","bitcoin-sign","indian-rupee-sign","turkish-lira-sign","shekel-sign","peso-sign","won-sign","indian-rupee-sign","money-bill-wave","money-bill-1","coins","credit-card","money-check-dollar","sack-dollar","vault","gem","circle-dollar-to-slot","plus-minus","less-than","greater-than","less-than-equal","greater-than-equal","dice-d20","dice","dice-one","dice-two","dice-three","dice-four","dice-five","dice-six","clipboard","bucket","stairs","rug","vest-patches","atom","toggle-off","toggle-on","spa","shuffle","share-nodes","hand-point-up","hand-point-left","hand-point-down","hand-peace","hand-fist","handshake","handshake-angle","hand-point-right","hands-clapping","hands-asl-interpreting","mitten","hand","hand-holding-heart","face-sad-tear","face-grin-hearts","face-dizzy","face-grimace","face-grin-wide","face-frown-open","face-surprise","face-laugh-wink","face-grin-tears","face-smile-wink","face-laugh","face-grin-stars","face-grin","face-angry","face-kiss-wink-heart","face-tired","bluesky","facebook","instagram","bandcamp","dribbble","linkedin","github","discord","youtube","codepen","kickstarter","android","apple","pinterest","soundcloud","google-play","meetup","twitch","yelp","vimeo-v","upwork","ups","unsplash","unity","steam","behance","patreon","signal-messenger","brave","arrow-down-a-z","arrow-up-a-z","arrow-down-1-9","arrow-up-1-9","sort","arrow-up-wide-short","arrow-up-short-wide","arrow-down-wide-short","arrow-down-short-wide","arrow-trend-up","arrow-trend-down","arrow-left","arrow-right","arrow-up","arrow-down","angle-right","angle-left","angle-down","angle-up","caret-right","caret-left","caret-down","caret-up","arrow-pointer","right-left","left-right","right-from-bracket","right-to-bracket","reply-all","arrows-spin","arrows-to-dot","rotate-right","rotate-left","rotate","down-long","grip-lines","grip-lines-vertical","arrows-up-down","arrows-up-down-left-right","arrows-left-right","code-branch","code-commit","code-compare","code-fork","code-merge","code-pull-request","burst","road-barrier","plug-circle-bolt","hill-rockslide","hill-avalanche","cubes-stacked","x-ray","bullseye","dna","lines-leaning","moon","cloud-moon","cloud-showers-heavy","cloud","droplet","sun","snowflake","snowman","snowplow","mountain-sun","wind","bolt","rainbow","cloud-showers-water","smog","meteor","cloud-sun","temperature-half","temperature-three-quarters","volcano","hurricane","cloud-bolt","icicles","tornado","bolt-lightning"],s=["bluesky","facebook","instagram","bandcamp","dribbble","linkedin","github","discord","youtube","codepen","kickstarter","android","apple","pinterest","soundcloud","google-play","meetup","twitch","yelp","vimeo-v","upwork","ups","unsplash","unity","steam","behance","patreon","signal-messenger","brave","accessible-icon","canadian-maple-leaf"];function r(i=""){a.innerHTML="",o.filter((e=>e.includes(i.toLowerCase()))).forEach((i=>{const o=document.createElement("i"),r=s.includes(i)?"fab":"fas";o.className=`${r} fa-${i}`,o.setAttribute("title",i),o.addEventListener("click",(()=>{e.className=`${r} fa-${i}`,n.style.display="none",t.style.display="none"})),a.appendChild(o)}))}i.value="",i.addEventListener("input",(e=>r(e.target.value))),r(),n.style.display="block",t.style.display="block",t.onclick=()=>{n.style.display="none",t.style.display="none"}}let scale=1;function updateZoomLevel(){const e=Math.round(100*scale);document.getElementById("zoom-level").textContent=`${e}%`}function setZoomScale(e){scale=e,document.getElementById("mockZone").style.transform=`scale(${scale})`,updateZoomLevel()}function updateHeadingVariable(e,t,n){document.documentElement.style.setProperty(`--${e}-${t}`,n)}function syncRangeInputs(e,t){const n=document.querySelector(`.heading-${t}-range[data-level="${e}"]`),a=document.querySelector(`.heading-${t}[data-level="${e}"]`);n.addEventListener("input",(n=>{a.value=n.target.value,updateHeadingVariable(e,t,"font-size"===t||"letter-spacing"===t?`${n.target.value}px`:n.target.value)})),a.addEventListener("input",(a=>{n.value=a.target.value,updateHeadingVariable(e,t,"font-size"===t||"letter-spacing"===t?`${a.target.value}px`:a.target.value)}))}function updateFontWeight(e,t){updateHeadingVariable(e,"font-weight",t)}function updateTextTransform(e,t){updateHeadingVariable(e,"text-transform",t)}function initHeadingStyleControls(e){syncRangeInputs(e,"font-size"),syncRangeInputs(e,"letter-spacing"),syncRangeInputs(e,"line-height");const t=document.querySelectorAll(`.font-level-btns button[data-level="${e}"]`);t.forEach((n=>{n.addEventListener("click",(()=>{t.forEach((e=>e.classList.remove("selected"))),n.classList.add("selected");const a=n.querySelectorAll("i")[1].classList.contains("fa-1")?"--primary-font":"--secondary-font";updateHeadingVariable(e,"font-family",`var(${a})`)}))}));const n=document.querySelectorAll(`.weight-level-btns button[data-level="${e}"]`);n.forEach((t=>{t.addEventListener("click",(()=>{n.forEach((e=>e.classList.remove("selected"))),t.classList.add("selected");const a=t.querySelector("i").classList.contains("fa-bold")?"700":"400";updateFontWeight(e,a)}))}));document.querySelector(`.heading-text-transform[data-level="${e}"]`).addEventListener("change",(t=>{updateTextTransform(e,t.target.value)}))}function initAllHeadingStyles(){["h1","h2","h3","h4","h5","h6"].forEach((e=>{initHeadingStyleControls(e),attachIndicatorTriggers()}))}function attachIndicatorTriggers(){let e;function t(){const e=document.querySelectorAll(".heading-controls");document.querySelectorAll(".level-indicator").forEach((e=>{e.classList.add("show")})),e.forEach((e=>{e.classList.add("show")}))}function n(){clearTimeout(e),e=setTimeout((()=>{const e=document.querySelectorAll(".heading-controls");document.querySelectorAll(".level-indicator").forEach((e=>{e.classList.remove("show")})),e.forEach((e=>{e.classList.remove("show")}))}),900)}document.querySelectorAll("[data-level]").forEach((a=>{if("range"===a.type){let i=!1;a.addEventListener("mousedown",(()=>{i=!0,t()})),a.addEventListener("mouseup",(()=>{i=!1,n()})),a.addEventListener("input",(()=>{i&&clearTimeout(e)}))}else["change","click"].forEach((e=>{a.addEventListener(e,(()=>{t(),n()}))}))}))}document.getElementById("zoom-in").addEventListener("click",(()=>{setZoomScale(scale+.05)})),document.getElementById("zoom-out").addEventListener("click",(()=>{setZoomScale(Math.max(.05,scale-.05))})),$(document).ready((function(){!function(){const e=$(".heading-settings");if(0===e.length)return;const t=e.find(".heading-level-section"),n=[];t.each((function(e){const t=$(this).attr("id").split("-")[0].toUpperCase();n.push(`<option value="${e}">${t}</option>`)}));const a=$(`\n        <div class="heading-navigation">\n          <button class="nav-prev-heading" title="Previous heading level">\n            <i class="fas fa-chevron-left"></i>\n          </button>\n          \n          <div class="dropdown-container">\n            <select class="heading-level-selector">\n              ${n.join("")}\n            </select>\n          </div>\n          \n          <button class="nav-next-heading" title="Next heading level">\n            <i class="fas fa-chevron-right"></i>\n          </button>\n        </div>\n      `);e.prepend(a),t.not(":first").hide();let i=0;const o=t.length-1;function s(e){$(t[i]).hide(),i=e,$(t[i]).show(),$(".heading-level-selector").val(i);const n=$(t[i]).find(".heading-settings-content"),a=$(t[i]).find(".toggle-settings-btn .toggle-icon");n.show(),a.css("transform","rotate(180deg)"),$("html, body").animate({scrollTop:$(t[i]).offset().top-100},300)}$(".heading-level-selector").val(i),$(".nav-prev-heading").on("click",(function(){s(i>0?i-1:o)})),$(".nav-next-heading").on("click",(function(){s(i<o?i+1:0)})),$(".heading-level-selector").on("change",(function(){s(parseInt($(this).val()))})),t.removeClass("active-heading-section"),$(t[i]).addClass("active-heading-section")}()})),document.addEventListener("DOMContentLoaded",initAllHeadingStyles),$(document).ready((function(){$(".toggle-settings-btn").on("click",(function(){const e=$(this),t=e.find(".toggle-icon"),n=e.parent().parent().children(".heading-settings-content");n.is(":visible")?(n.slideUp(300),t.addClass("rotated")):(n.slideDown(300),t.removeClass("rotated"))}))}));const radiusRange=document.querySelector('.border-radius-range[type="range"]'),radiusNumber=document.querySelector('.border-radius-range[type="number"]'),radiusPreview=document.getElementById("radius-preview");function updateBorderRadius(e){const t=Math.max(parseInt(radiusRange.min),Math.min(parseInt(radiusRange.max),e));radiusRange.value=t,radiusNumber.value=t,document.documentElement.style.setProperty("--standard-radius",`${t}px`),radiusPreview.style.borderRadius=`${t}px`}function createAlignmentControls(e){const t=e.style.justifyContent||"center",n=document.createElement("i"),a=document.createElement("i"),i={container:e,leftArrow:n,rightArrow:a,currentAlignment:t};n.className="fas fa-arrow-left alignment-arrow",a.className="fas fa-arrow-right alignment-arrow";const o="\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n      cursor: pointer;\n      color: var(--interface-color);\n      display: none;\n      font-size: 16px;\n      z-index: 10;\n      padding: 1px;\n    ";function s(){"center"===i.currentAlignment?(n.style.display="block",a.style.display="block"):"flex-start"===i.currentAlignment?(n.style.display="none",a.style.display="block"):"flex-end"===i.currentAlignment&&(n.style.display="block",a.style.display="none")}function r(t){i.currentAlignment=t,e.style.justifyContent=t,e.setAttribute("data-alignment",t),s()}function l(){n.style.display="none",a.style.display="none"}return n.style.cssText=o+"left: 26px; border-left: 2px solid var(--interface-color);",a.style.cssText=o+"right: 26px; border-right: 2px solid var(--interface-color);",n.addEventListener("click",(e=>{e.stopPropagation(),"center"===i.currentAlignment?r("flex-start"):"flex-end"===i.currentAlignment&&r("center")})),a.addEventListener("click",(e=>{e.stopPropagation(),"center"===i.currentAlignment?r("flex-end"):"flex-start"===i.currentAlignment&&r("center")})),e.addEventListener("mouseenter",(()=>{s(),a.style.visibility="visible",n.style.visibility="visible"})),e.addEventListener("mouseleave",(()=>{l()})),e.appendChild(n),e.appendChild(a),{setAlignment:r,updateArrowVisibility:s,hideArrows:l,reattachEventListeners(){s()}}}radiusRange.addEventListener("input",(e=>{updateBorderRadius(e.target.value)})),radiusNumber.addEventListener("change",(e=>{updateBorderRadius(e.target.value)})),updateBorderRadius(radiusRange.value);class AnimationController{constructor(){this.animatedElements=[]}disableAnimations(){document.querySelectorAll(".leftChat, .rightChat, .hzRule, .blankSpace, .column-container, .pulseAnim, .animate-in").forEach((e=>{if(this.animatedElements.push({element:e,animation:e.style.animation,transition:e.style.transition,transform:e.style.transform}),e.style.animation="none",e.style.transition="none",e.style.transform){const t=window.getComputedStyle(e);e.style.transform=t.getPropertyValue("transform")}}))}restoreAnimations(){this.animatedElements.forEach((({element:e,animation:t,transition:n,transform:a})=>{t&&(e.style.animation=t),n&&(e.style.transition=n),a&&(e.style.transform=a)})),this.animatedElements=[]}}function showMobileOverlay(){const e=document.createElement("div");e.className="modal-overlay",e.innerHTML='\n      <div class="mobile-warning-content">\n      <button id="close-mobile-modal">&times;</button>\n        <h2>Best Viewed on Desktop</h2>\n        <p>This tool is optimized for desktop use. Enter your email to receive a link to access it later.</p>\n        <form id="mobileEmailForm" class="mobile-email-form">\n          <input type="email" id="userEmail" placeholder="Enter your email" required>\n          <button type="submit">Send Me the Link</button>\n        </form>\n        <div id="formSuccess" style="display: none;">\n          <p>Thanks! Check your inbox soon.</p>\n        </div>\n      </div>\n    ',document.body.appendChild(e)}function isMobileDevice(){return window.innerWidth<=508||"ontouchstart"in window||navigator.maxTouchPoints>0}function hideMobileModal(){const e=document.querySelector(".modal-overlay");e&&(e.style.display="none")}if(isMobileDevice()&&(showMobileOverlay(),document.getElementById("close-mobile-modal").addEventListener("click",(()=>{hideMobileModal()}))),isMobileDevice()){function showError(e,t){clearError(e);const n=document.createElement("div");n.className="error-message",n.textContent=t,e.parentNode.appendChild(n),e.classList.add("error"),setTimeout((()=>clearError(e)),3e3)}function clearError(e){const t=e.parentNode.querySelector(".error-message");t&&t.remove(),e.classList.remove("error")}document.getElementById("mobileEmailForm").addEventListener("submit",(async e=>{e.preventDefault();const t=document.getElementById("userEmail"),n=t.value.trim();if(!n)return void showError(t,"Please enter an email address");if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(n))return void showError(t,"Please enter a valid email address");const a=new FormData;a.append("entry.1080010370",n);try{const t=e.target.querySelector('button[type="submit"]'),n=t.textContent;t.disabled=!0,t.textContent="Sending...",await fetch("https://docs.google.com/forms/d/e/1FAIpQLScrFav_0KASKCi79QjmIAUdrFXhQWpjL90sA97gT6DSx4FpbQ/formResponse",{method:"POST",mode:"no-cors",body:a}),e.target.reset(),document.getElementById("formSuccess").style.display="block",localStorage.setItem("emailSubmitted","true"),t.disabled=!1,t.textContent=n}catch(e){console.error("Error:",e),showError(t,"Something went wrong. Please try again."),submitButton.disabled=!1,submitButton.textContent=originalButtonText}})),document.getElementById("userEmail").addEventListener("input",(e=>{const t=e.target,n=t.value.trim();clearError(t),n&&!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(n)?t.classList.add("invalid"):t.classList.remove("invalid")}))}class NestedControlsHandler{constructor(e=".canvas-content"){this.containers=new Set,this.containerSelector=e,this.init()}init(){document.querySelectorAll(this.containerSelector).forEach((e=>{this.initContainer(e)})),this.setupMutationObserver()}initContainer(e){this.containers.has(e)||(this.containers.add(e),e.removeEventListener("mouseover",this._mouseoverHandler),e.removeEventListener("mouseleave",this._mouseleaveHandler),this._mouseoverHandler=t=>this.handleMouseOver(t,e),this._mouseleaveHandler=t=>this.handleMouseLeave(t,e),e.addEventListener("mouseover",this._mouseoverHandler),e.addEventListener("mouseleave",this._mouseleaveHandler))}handleMouseOver(e,t){const n=e.target.closest(".component-container");if(!n)return;const a=t.closest(".component-container"),i=t.querySelectorAll(".component-container");a&&(e.target===a.querySelector(".component-handle")||e.target===a.querySelector(".delete-btn")||e.target===a.querySelector(".duplicate-btn"))?i.forEach((e=>{e.classList.add("controls-hidden")})):(i.forEach((e=>{e.classList.add("controls-hidden")})),a&&a.classList.add("controls-hidden"),n.classList.remove("controls-hidden"))}handleMouseLeave(e,t){const n=t.closest(".component-container");t.querySelectorAll(".component-container").forEach((e=>{e.classList.remove("controls-hidden")})),n&&n.classList.remove("controls-hidden")}setupMutationObserver(){new MutationObserver((e=>{e.forEach((e=>{"childList"===e.type&&e.addedNodes.forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&(e.matches(this.containerSelector)&&this.initContainer(e),e.querySelectorAll(this.containerSelector).forEach((e=>{this.initContainer(e)})))}))}))})).observe(document.body,{childList:!0,subtree:!0})}}const nestedControls=new NestedControlsHandler;function initializeGapControls(){const e=document.querySelector('.gap-range[type="range"]'),t=document.querySelector('.gap-range[type="number"]');if(!e||!t)return void console.warn("Gap control inputs not found");let n;function a(n){e.value=n,t.value=n;document.querySelectorAll(".canvas.selected").forEach((e=>{const t=e.querySelector(".canvas-content");t&&(t.style.gap=`${n}px`)}));document.querySelector("#gap-preview-outer").style.gap=`${n}px`}function i(){document.querySelectorAll(".blankSpace").forEach((e=>{e.style.backgroundColor="rgba(52, 152, 219, 0)";const t=e.querySelector(".empty-placeholder");t&&(t.style.visibility="hidden")}))}e.addEventListener("input",(e=>{a(e.target.value),document.querySelectorAll(".blankSpace").forEach((e=>{e.style.backgroundColor="rgba(52, 152, 219, 0.2)";const t=e.querySelector(".empty-placeholder");t&&(t.style.visibility="visible")})),n&&clearTimeout(n),n=setTimeout(i,500)})),e.addEventListener("mouseup",(()=>{i()})),t.addEventListener("change",(t=>{a(Math.min(Math.max(t.target.value,e.min),e.max))})),a(e.value)}function initializePaddingControls(){const e=document.querySelector('.padding-range[type="range"]'),t=document.querySelector('.padding-range[type="number"]'),n=document.querySelector(".padding-preview-inner");if(!e||!t||!n)return void console.warn("Padding control elements not found");let a;function i(i){i=parseInt(i)||0,e.value=i,t.value=i;const s=Math.max(10,100-i);n.style.width=`${s}%`;document.querySelectorAll(".canvas.selected").forEach((e=>{const t=e.querySelector(".canvas-content");t&&(t.style.paddingLeft=`${i}px`,t.style.paddingRight=`${i}px`),function(e,t){[".colorBlock-inner",".footer-wrapper",".hero-image",".hero-gradient"].forEach((n=>{e.querySelectorAll(n).forEach((e=>{e.style.transform=`translateX(-${t}px)`,e.style.paddingLeft=`${t}px`,e.style.paddingRight=`${t}px`}))}))}(t,i)})),document.querySelectorAll(".canvas-content").forEach((e=>{e.closest(".canvas.selected")&&(e.style.outline="1px dashed var(--color-primary)",e.style.transition="padding 0.2s ease")})),a&&clearTimeout(a),a=setTimeout(o,500)}function o(){document.querySelectorAll(".canvas-content").forEach((e=>{e.style.outline="none"}))}e.addEventListener("input",(e=>{i(e.target.value)})),e.addEventListener("mouseup",(()=>{o()})),t.addEventListener("change",(t=>{i(Math.min(Math.max(parseInt(t.target.value)||0,parseInt(e.min)),parseInt(e.max)))})),i(e.value),document.addEventListener("click",(a=>{a.target.closest(".canvas")&&setTimeout((()=>{const a=document.querySelector(".canvas.selected");if(a){const i=a.querySelector(".canvas-content");if(i){const a=parseInt(window.getComputedStyle(i).paddingLeft)||0;e.value=a,t.value=a;const o=Math.max(10,100-a);n.style.width=`${o}%`}}}),100)}))}function makeSwatchesResponsive(e){const t=e.querySelectorAll(".color-swatch-container");function n(){const n=e.offsetWidth;t.forEach(((e,t)=>{if(n<200)switch(e.style.bottom="auto",t){case 0:case 1:e.style.top="100%",e.style.flexDirection="column",e.style.marginTop="-14px";break;case 2:case 3:e.style.top="-4px"}else switch(e.style.flexDirection="row",t){case 0:case 1:e.style.bottom="-12px",e.style.marginTop="0";break;case 2:case 3:e.style.top="-16px"}}))}const a=new ResizeObserver((t=>{for(const a of t)a.target===e&&n()}));return a.observe(e),n(),e.addEventListener("mouseenter",(()=>{n()})),()=>{a.disconnect()}}function initializeResponsiveSwatches(){document.querySelectorAll(".component-container").forEach((e=>{makeSwatchesResponsive(e)}));new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{if(1===e.nodeType){e.classList.contains("component-container")&&makeSwatchesResponsive(e);e.querySelectorAll(".component-container").forEach((e=>{makeSwatchesResponsive(e)}))}}))}))})).observe(document.body,{childList:!0,subtree:!0})}document.addEventListener("DOMContentLoaded",initializeGapControls),document.addEventListener("DOMContentLoaded",initializePaddingControls),document.addEventListener("DOMContentLoaded",initializeResponsiveSwatches),window.updateComponentSwatches=function(e){makeSwatchesResponsive(e)},$(document).ready((function(){const e=$("#sidebar-toggle-btn"),t=$(".sidebar"),n=$(".preview-trigger"),a=$(".component-btn"),i=$('.sidebar-tab[data-tab="theme"]'),o=$(".sidebar-tabs"),s=$(".user-profile-section"),r=$(".project-controls"),l=$("#titleBlock"),c=$("#mainH1"),d=$(".groupLabel"),p=$("#save-container"),u=$("#download-btn span");e.on("click",(function(){t.hasClass("collapsed")?function(){t.removeClass("collapsed"),t.css("width","284px"),n.show(),a.each((function(){const e=$(this);e.attr("data-original-text")&&e.html(e.attr("data-original-text")),e.css({"justify-content":"",padding:""})})),i.show(),o.css({"flex-direction":"",height:""}),firebase.auth().currentUser&&s.show();r.show(),d.show(),c.show(),u.show(),p.css("left","326px"),l.css({"justify-content":"",padding:""}),e.find("i").removeClass("fa-square-caret-right").addClass("fa-square-caret-left")}():(t.addClass("collapsed"),t.css("width","60px"),n.hide(),a.each((function(){const e=$(this);e.attr("data-original-text",e.html());const t=e.find("i").clone();e.html(t)})),i.hide(),d.hide(),c.hide(),u.hide(),p.css("left","88px"),e.find("i").removeClass("fa-square-caret-left").addClass("fa-square-caret-right"))}))})),window.updateComponentSwatches=function(e){makeSwatchesResponsive(e)},window.TextContrastAdjuster=class{static init(){this.updateTextColors();const e=document.getElementById("darkModeToggle");e&&e.addEventListener("change",this.debouncedUpdate.bind(this)),document.addEventListener("color:change",this.debouncedUpdate.bind(this))}static updateElementContrast(e){if(!e)return;const t=window.getComputedStyle(e).backgroundColor;if(!t||"transparent"===t||"rgba(0, 0, 0, 0)"===t)return;const n=t.match(/\d+/g);if(!n)return;const a=(.299*n[0]+.587*n[1]+.114*n[2])/255>.5?"#000000":"#FFFFFF";e.style.color=a}static debouncedUpdate(){this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((()=>{this.updateTextColors()}),100)}static updateTextColors(){document.querySelectorAll('.canvas [style*="background-color"]').forEach((e=>this.updateElementContrast(e)));document.querySelectorAll('.navbar [style*="background-color"]').forEach((e=>this.updateElementContrast(e)))}};class MobileUIEditor{modalAdded=!1;fabAdded=!1;constructor(){this.state={canvasCount:0,selectedCanvases:new Set,navbarStates:new Map,sidebarAdded:!1},this.topNavbarAdded=!1,this.bottomNavbarAdded=!1,this.setupCanvasReordering(),this.textAlignmentController=new TextAlignmentController(".canvas-content"),this.animationController=new AnimationController,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>this.init())):this.init(),this.specialComponents={navbar:{added:!1,content:null},bottomNav:{added:!1,content:null},sidebar:{added:!1,content:null},modal:{added:!1,content:null},floatingActionButton:{added:!1,content:null},keyboard:{added:!1,content:null},bottomSheet:{added:!1,content:null}},document.addEventListener("mouseover",(e=>{if(e.target.matches(".delete-btn")){const t=e.target.closest(".component-container");t&&(t.style.outline=".08rem solid var(--error-danger-delete)",t.style.transition="outline 0.2s ease")}if(e.target.matches(".duplicate-btn, .duplicate-btn .fa-clone")){const t=e.target.closest(".component-container");t&&(t.style.outline=".08rem solid var(--primary-color)",t.style.transition="outline 0.2s ease")}if(e.target.matches(".component-handle")){const t=e.target.closest(".component-container");t&&(t.style.outline=".08rem solid rgba(128, 128, 128, 0.68)",t.style.transition="outline 0.2s ease")}if(e.target.matches(".delete-canvas-btn")){const t=e.target.closest(".canvas-wrapper");t&&(t.style.outline=".08rem solid var(--error-danger-delete)",t.style.outlineOffset="8px",t.style.transition="outline 0.2s ease")}})),document.addEventListener("mouseout",(e=>{if(e.target.matches(".delete-btn, .duplicate-btn, .duplicate-btn .fa-clone, .component-handle")){const t=e.target.closest(".component-container");t&&(t.style.outline="")}if(e.target.matches(".delete-canvas-btn")){const t=e.target.closest(".canvas-wrapper");t&&(t.style.outline="",t.style.outlineOffset="")}}))}init(){this.initializeFirstCanvas(),this.setupEventListeners(),this.initPreviewSystem(),this.setupDownloadButton(),this.updateTime(),setInterval(this.updateTime,6e4),this.initOnboarding(),window.TextContrastAdjuster.init()}initializeFirstCanvas(){this.createNewCanvas();const e=document.querySelector(".canvas");e.classList="canvas selected",e&&(this.state.selectedCanvases.add(e),e.addEventListener("click",(e=>this.handleCanvasSelection(e))))}updateTime(){const e=new Date,t=e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0");document.querySelectorAll(".time").forEach((e=>{e.textContent=t}))}setupCanvasReordering(){const e=document.querySelector("#mockZone");e&&new Sortable(e,{animation:150,handle:".canvas-number-container",draggable:".canvas-wrapper",ghostClass:"canvas-ghost",chosenClass:"canvas-chosen",dragClass:"canvas-drag",forceFallback:!1,onStart:e=>{document.body.classList.add("canvas-dragging");const t=e.item,n=t.getBoundingClientRect();t.dataset.startX=n.left,t.dataset.startY=n.top,t.dataset.originalIndex=e.oldIndex},onEnd:e=>{document.body.classList.remove("canvas-dragging"),this.updateCanvasNumbers();const t=e.item;parseInt(t.dataset.originalIndex)!==e.newIndex&&(t.classList.add("canvas-drop-success"),setTimeout((()=>{t.classList.remove("canvas-drop-success")}),300),projectManager&&"function"==typeof projectManager.markAllCanvasesChanged&&projectManager.markAllCanvasesChanged("Canvas reordering"))}})}initializeSortable(e){return e._sortable&&e._sortable.destroy(),new Sortable(e,{multiDrag:!0,selectedClass:"selected-drag",animation:150,handle:".component-handle",ghostClass:"sortable-ghost",group:"shared-components",forceFallback:!0,fallbackTolerance:3,swapThreshold:.88,scroll:!0,scrollSensitivity:80,scrollSpeed:80,bubbleScroll:!0,setData:function(e,t){t.style.cssText=window.getComputedStyle(t).cssText},onStart:function(e){const t=e.item;t.classList.add("pulse-drag");const n=t.closest(".canvas-wrapper");if(n&&(t.setAttribute("data-source-canvas-id",n.getAttribute("data-canvas-id")),projectManager&&void 0!==projectManager.contentChanged)){projectManager.contentChanged=!0;const e=n.getAttribute("data-canvas-id");projectManager.getChangedCanvases&&e&&setTimeout((()=>{console.log(`%cMarking source canvas ${e} as changed due to component removal`,"color: #FF9800; font-weight: bold"),"function"==typeof projectManager.addCanvasToChanged&&projectManager.addCanvasToChanged(e,"Component removal")}),0)}document.querySelectorAll(".column-container").forEach((e=>{e.style.outline=".12rem dashed var(--interface-color)",e.style.outlineOffset="-1px"})),document.querySelectorAll(".blankSpace").forEach((e=>{e.style.backgroundColor="rgba(52, 152, 219, 0.2)";const t=e.querySelector(".empty-placeholder");t&&(t.style.visibility="visible")}));const a=()=>{t.classList.remove("pulse-drag"),t.removeEventListener("animationend",a)};t.addEventListener("animationend",a),e.item.querySelector(".space-range:active")&&e.preventDefault()},onEnd:function(e){document.querySelectorAll(".column-container").forEach((e=>{e.style.outline="none",e.style.outlineOffset="0"})),document.querySelectorAll(".blankSpace").forEach((e=>{e.style.backgroundColor="rgba(52, 152, 219, 0)";const t=e.querySelector(".empty-placeholder");t&&(t.style.visibility="hidden")})),$(e.item).trigger("mouseleave");const t=e.item,n=t.querySelector(".card-image");n&&n.classList.contains("with-image")&&(n.style.backgroundColor="transparent"),e.from===e.to&&e.oldIndex===e.newIndex||(t.classList.add("success-drop"),setTimeout((()=>{t.classList.remove("success-drop")}),300));[...e.from.querySelectorAll(".card-image"),...e.to.querySelectorAll(".card-image")].forEach((e=>{e.classList.contains("with-image")&&(e.style.backgroundColor="transparent")}));const a=e=>{e.querySelectorAll(".color-swatch-container").forEach((e=>{e.style.visibility="hidden",e.style.opacity="0"}));const t=e.querySelector(".add-image-button"),n=e.querySelector(".size-control"),a=e.querySelector(".left-arrow"),i=e.querySelector(".right-arrow"),o=e.querySelector(".resize-handle"),s=e.querySelector(".alignment-controls"),r=e.querySelector(".columns-controls"),l=e.querySelectorAll(".alignment-arrow");[o,t,n,a,i,s,r].forEach((e=>{e&&(e.style.display="none")})),l&&l.forEach((e=>{e.style.visibility="hidden"}))};a(e.from),a(e.to);const i=e.to.closest(".canvas-wrapper");if(i){const e=t.getAttribute("data-source-canvas-id"),n=i.getAttribute("data-canvas-id");e&&n&&e!==n&&(console.log(`%cComponent moved from canvas ${e} to ${n}`,"color: #4CAF50; font-weight: bold"),projectManager&&(projectManager.contentChanged=!0,t.removeAttribute("data-source-canvas-id")))}},onAdd:function(e){e.item.style.width="100%",window.TextContrastAdjuster&&setTimeout((()=>{window.TextContrastAdjuster.updateElementContrast(e.item),e.item.querySelectorAll('[style*="background-color"]').forEach((e=>{window.TextContrastAdjuster.updateElementContrast(e)}))}),0)},onMove:function(e){document.querySelectorAll(".column-container").forEach((e=>{e.style.outline=".12rem dashed var(--interface-color)",e.style.outlineOffset="-1px"}));const t=e.to.closest(".column-container");return t&&(t.style.outline=".12rem dashed var(--color-primary)",t.style.outlineOffset="-2px"),!e.related.classList.contains("navbar-spacer")}})}setupEventListeners(){document.querySelectorAll(".component-btn, .addHeadingButton").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),this.handleComponentAddition(e)}))}));const e=document.querySelector(".add-canvas-btn");e&&e.addEventListener("click",(e=>{e.preventDefault(),this.createNewCanvas()})),document.addEventListener("click",(e=>{e.target.classList.contains("delete-canvas-btn")&&this.handleCanvasDelete(e)}))}initPreviewSystem(){document.querySelectorAll(".preview-trigger").forEach((e=>{e.addEventListener("click",(e=>{this.handlePreviewTrigger(e)}))}))}handlePreviewTrigger(e){const t=e.currentTarget,n=t.closest(".comp-btn-wrap"),a=n.querySelector(".component-btn"),i=a.getAttribute("data-component"),o=n.querySelector(".preview-container"),s=t.querySelector(".toggle-icon");if(s.style.transition="transform 0.2s ease",o)return void("0px"!==o.style.maxHeight?(o.style.maxHeight="0",s.style.transform="rotate(0deg)",setTimeout((()=>{o.style.display="none"}),300)):(s.style.transform="rotate(180deg)",o.style.display="block",requestAnimationFrame((()=>{o.style.maxHeight=o.querySelector("div").scrollHeight+32+"px"}))));s.style.transform="rotate(180deg)";const r=document.createElement("div");r.className="preview-container",r.style.cssText="\n        border-radius: 4px;\n        overflow: hidden;\n        max-height: 0;\n        transition: max-height 0.2s ease-out;\n        flex-grow: 12;\n        margin-bottom: 2px;\n    ";const l=document.createElement("div");if(l.className="previewInnerCon",l.style.padding="22px 10px 12px 10px",l.style.display="flex",l.style.flexDirection="column",l.style.gap="12px",l.style.maxWidth="100%",l.style.overflow="hidden",this.components[i]){let e=this.components[i](),t=this.wrapComponentInContainer(e,i);t.classList.add("preview-component"),a.previewComponent=t,l.appendChild(t),r.appendChild(l),n.appendChild(r),requestAnimationFrame((()=>{t.querySelectorAll('[style*="background-color"]').forEach((e=>{window.TextContrastAdjuster.updateElementContrast(e)}))})),new Sortable(l,{group:{name:"shared-components",put:!1,pull:"clone"},sort:!1,handle:".component-handle",animation:150,forceFallback:!0,fallbackTolerance:3,onStart:e=>{const t=e.item;t.setAttribute("data-preview-state","true");t.querySelectorAll(".color-swatch-container").forEach((e=>{e.style.visibility="hidden"})),document.querySelectorAll(".column-container").forEach((e=>{e.style.outline=".12rem dashed var(--interface-color)",e.style.outlineOffset="-1px"})),document.querySelectorAll(".blankSpace").forEach((e=>{e.style.backgroundColor="rgba(52, 152, 219, 0.2)";const t=e.querySelector(".empty-placeholder");t&&(t.style.visibility="visible")}))},onEnd:e=>{document.querySelectorAll(".column-container").forEach((e=>{e.style.outline="none",e.style.outlineOffset="0"})),document.querySelectorAll(".blankSpace").forEach((e=>{e.style.backgroundColor="rgba(52, 152, 219, 0)";const t=e.querySelector(".empty-placeholder");t&&(t.style.visibility="hidden")})),$(e.item).trigger("mouseleave");const t=e.item.querySelector(".card-image");t&&t.classList.contains("with-image")&&(t.style.backgroundColor="transparent");const n=e.item;if(e.clone&&e.clone.remove(),e.to.classList.contains("canvas-content")||e.to.classList.contains("colorBlock-inner")||e.to.classList.contains("accordion-content")||e.to.classList.contains("blank-card-content")||e.to.classList.contains("bottom-sheet-content")||e.to.classList.contains("column-container")){this.duplicateComponent(n,i)&&(e.to.appendChild(n),"true"===n.getAttribute("data-preview-state")&&n.removeAttribute("data-preview-state"))}if("true"===n.getAttribute("data-preview-state")){n.removeAttribute("data-preview-state"),l.appendChild(n);n.querySelectorAll(".resize-handle").forEach((e=>e.style.display="none"));n.querySelectorAll(".alignment-arrow").forEach((e=>e.style.display="none"));n.querySelectorAll(".alignment-controls").forEach((e=>e.style.display="none"));n.querySelectorAll(".columns-controls").forEach((e=>e.style.display="none"));const e=n.querySelector(".component-handle");e.style.display="flex",e.style.opacity="1",e.style.visibility="visible"}},onMove:function(e){document.querySelectorAll(".column-container").forEach((e=>{e.style.outline=".12rem dashed var(--interface-color)",e.style.outlineOffset="-1px"}));const t=e.to.closest(".column-container");return t&&(t.style.outline=".12rem dashed var(--color-primary)",t.style.outlineOffset="-2px"),!e.related.classList.contains("navbar-spacer")}}),requestAnimationFrame((()=>{r.style.maxHeight=l.scrollHeight+32+"px"}))}}scrollSelectedScreenIntoView(){const e=document.getElementById("bounding"),t=Array.from(this.state.selectedCanvases)[0];if(!t)return;const n=t.closest(".canvas-wrapper");if(n&&e){const t=e.getBoundingClientRect(),a=n.getBoundingClientRect();(a.right<=t.left||a.left>=t.right)&&setTimeout((()=>{$(e).animate({scrollLeft:n.offsetLeft+240},180)}),30)}}async handleComponentAddition(e){const t=e.getAttribute("data-component"),n=Array.from(document.querySelectorAll(".canvas-content")).reduce(((e,t)=>e+t.querySelectorAll(".component-container").length),0),a=firebase.auth().currentUser;if(a){if(!await imageManager.checkProAccess(a.uid)&&n>=28)return void projectManager.showSubscriptionModal("Upgrade to Add More Components","Free accounts are limited to 28 components per project.")}const i=Array.from(this.state.selectedCanvases);if(this.isSpecialComponent(t)){if(Array.from(i).some((e=>(e.setAttribute(`data-has-${t}`,"true"),this.hasSpecialComponent(e,t)))))return this.removeSpecialComponent(t,i),void i.forEach((e=>e.removeAttribute(`data-has-${t}`)))}let o;if(e.previewComponent){const t=e.previewComponent.querySelector(".component-content");t&&t.dataset.currentVariant&&(o=parseInt(t.dataset.currentVariant))}0!==this.state.selectedCanvases.size?i.forEach((n=>{if(!n)return void console.error("No canvas found");let a,i,o;switch(t){case"navbar":a=this.components.navbar(),this.topNavbarAdded=!0,this.insertNavbar(n,a,"top");break;case"bottomNav":a=this.components.bottomNav(),this.bottomNavbarAdded=!0,this.insertNavbar(n,a,"bottom");break;case"sidebar":a=this.components.sidebar(),this.insertNavbar(n,a,"left");break;case"keyboard":a=this.components.keyboard(),this.insertNavbar(n,a,"bottom");break;case"bottomSheet":a=this.components.bottomSheet(),this.insertNavbar(n,a,"bottom");break;case"modal":if(this.modalAdded){const e=n.querySelector(".modal-wrapper");e&&e.remove()}else a=this.components.modal(),n.appendChild(a);break;case"floatingActionButton":this.fabAdded||(a=this.components.floatingActionButton(),n.appendChild(a));break;case"hero":if(a=this.components.hero(),i=this.wrapComponentInContainer(a,"hero"),o=n.querySelector(".canvas-content"),o){const e=o.firstChild;n.querySelector(".navbar-spacer")&&e?o.insertBefore(i,e.nextSibling):e?o.insertBefore(i,e):o.appendChild(i)}break;case"heading":const s=e.getAttribute("data-level");if(a=this.components.heading(null,s||"h1","Heading Text"),i=this.wrapComponentInContainer(a,"heading"),o=n.querySelector(".canvas-content"),o){const e=o.querySelector(".component-footer")?.closest(".component-container");e?o.insertBefore(i,e):o.appendChild(i)}break;case"blankCard":if(a=this.components.blankCard(),i=this.wrapComponentInContainer(a,"blankCard"),o=n.querySelector(".canvas-content"),e.previewComponent){const t=e.previewComponent.querySelector(".component-content");if(t&&t.dataset.currentVariant){const e=parseInt(t.dataset.currentVariant),n=i.querySelector(".component-content");if(n){const t=setupVariants("blankCard");if(t&&t[e]){n.dataset.currentVariant=e,n.dataset.cachedVariants=JSON.stringify(t);let a=n.querySelector(".blank-card-content");a||(a=document.createElement("div"),a.className="blank-card-content",n.appendChild(a));const i=document.createElement("div");i.innerHTML=t[e];const o=i.querySelector(".blank-card-content");o&&(a.className=o.className,a.style.cssText=o.style.cssText),this.initializeSortable(a),this.setupBlankCard(n)}}}}if(o){const e=o.querySelector(".component-footer")?.closest(".component-container");e?o.insertBefore(i,e):o.appendChild(i)}break;default:if(a=this.components[t]?.(),i=this.wrapComponentInContainer(a,t),o=n.querySelector(".canvas-content"),e.previewComponent){const n=e.previewComponent.querySelector(".component-content");if(n&&n.dataset.currentVariant){const e=parseInt(n.dataset.currentVariant),a=i.querySelector(".component-content");if(a){const n=setupVariants(t);if(n&&n[e]){a.dataset.currentVariant=e,a.dataset.cachedVariants=JSON.stringify(n),a.innerHTML=n[e];const t=i.querySelector(".variant-number");t&&(t.textContent=`${e+1}/${n.length}`),this.setupIconPicker(a),this.setupImageUpload(a),this.setupResize(i),createColorSwatches(a)}}}}if(o){const e=o.querySelector(".component-footer")?.closest(".component-container");e?o.insertBefore(i,e):o.appendChild(i)}requestAnimationFrame((()=>{i.querySelectorAll('[style*="background-color"]').forEach((e=>{window.TextContrastAdjuster.updateElementContrast(e)}))}))}if(!["navbar","bottomNav","modal","keyboard","floatingActionButton","sidebar"].includes(t)){const e=n.querySelector(".phoneScrollCon");e&&(e.scrollTop="hero"===t?0:e.scrollHeight)}this.scrollSelectedScreenIntoView(),!["navbar","bottomNav","modal","keyboard"].includes(t)&&i&&(i.classList.add("component-add-animation"),i.addEventListener("animationend",(()=>{i.classList.remove("component-add-animation")}),{once:!0})),this.scrollSelectedScreenIntoView()})):projectManager.showNotification("Select a screen to add a component","error")}isSpecialComponent(e){return Object.keys(this.specialComponents).includes(e)}hasSpecialComponent(e,t){let n=!1;switch(t){case"navbar":n=null!==e.querySelector(".navContain");break;case"bottomNav":n=null!==e.querySelector(".bottomNavContain");break;case"sidebar":n=null!==e.querySelector(".sidebar-container");break;case"modal":n=null!==e.querySelector(".modal-wrapper");break;case"floatingActionButton":n=null!==e.querySelector(".fab-container");break;case"keyboard":n=null!==e.querySelector(".keyboard-container");break;case"bottomSheet":n=null!==e.querySelector(".bottomSheet-container");break;default:n=!1}return"modal"===t&&(this.modalAdded=n),this.specialComponents[t]&&(this.specialComponents[t].added=n),n}insertSpecialComponent(e,t,n){const a=e.classList.contains("canvas")?e:e.querySelector(".canvas");if(!a)return void console.error("No canvas element found for inserting special component");const i=a.querySelector(".canvas-content");if(i||"modal"===n){switch(this.specialComponents[n].added=!0,t.outerHTML&&(this.specialComponents[n].content=t.outerHTML),n){case"navbar":a.insertBefore(t,a.firstChild);let e=i.querySelector(".navbar-spacer");e||(e=document.createElement("div"),e.className="navbar-spacer",e.style.height="54px",e.style.width="100%",i.insertBefore(e,i.firstChild)),t.style.cssText="position: absolute; left: 0; right: 0; top: 28px;",this.setupNavbar(t);break;case"bottomNav":a.appendChild(t),t.style.cssText="position: absolute; left: 0; right: 0; bottom: 0;",this.setupBottomNav(t);break;case"sidebar":a.appendChild(t),t.style.cssText="position: absolute; left: 0; top:0; bottom: 0; height:100%;";break;case"modal":a.appendChild(t),this.setupModal(t);break;case"floatingActionButton":case"keyboard":case"bottomSheet":a.appendChild(t)}this.setupImageUpload(t),this.setupIconPicker(t)}else console.error("No canvas content found in canvas")}removeSpecialComponent(e,t){t.forEach((t=>{const n=t.classList.contains("canvas")?t:t.querySelector(".canvas"),a=n?.querySelector(".canvas-content");switch(e){case"navbar":const e=n.querySelector(".navContain");if(e){e.remove();let t=a.querySelector(".navbar-spacer");t&&t.remove(),a.style.paddingTop="30px"}break;case"bottomNav":const t=n.querySelector(".bottomNavContain");t&&t.remove();break;case"sidebar":const i=n.querySelector(".sidebar-container");i&&i.remove();break;case"modal":const o=n.querySelector(".modal-wrapper");o&&o.remove();break;case"floatingActionButton":const s=n.querySelector(".fab-container");s&&s.remove();break;case"keyboard":const r=n.querySelector(".keyboard-container");r&&r.remove();break;case"bottomSheet":const l=n.querySelector(".bottomSheet-container");l&&l.remove()}this.specialComponents[e]&&(this.specialComponents[e].added=!1,this.specialComponents[e].content=null)}))}setupVariantControls(e,t,n){const a=setupVariants(n)||[],i=a.length||0;if(i<=1)return null;if(i>1){const o=document.createElement("div");o.classList="variant-controls";const s=document.createElement("button");s.innerHTML='<i class="fas fa-circle-left"></i>',s.className="nav-control prev-nav";const r=document.createElement("button");r.innerHTML='<i class="fas fa-circle-right"></i>',r.className="nav-control next-nav";const l=document.createElement("span");l.className="variant-number";const c=t.dataset.currentVariant?parseInt(t.dataset.currentVariant):0;l.textContent=`${c+1}/${i}`;const d=o=>{const s=parseInt(t.dataset.currentVariant,10)||0,r=(s+o+i)%i;if("blankCard"===n){const n=document.createElement("div");n.innerHTML=a[r];const i=n.firstChild,o=t.querySelector(".blank-card-content"),s=i.querySelector(".blank-card-content"),l=o.querySelector(".card-image");let c="";l&&(c=l.style.backgroundImage);const d=Array.from(o.children).filter((e=>!e.classList.contains("card-image")));if(o.style.cssText=s.style.cssText,o.className=s.className,s.classList.contains("hero")){const e=s.querySelector(".card-image").cloneNode(!0);c&&(e.style.backgroundImage=c,e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",e.innerHTML="",e.classList.add("with-image"),e.style.backgroundColor="transparent"),o.appendChild(e)}d.forEach((e=>o.appendChild(e)));const p=e.closest(".component-container");Array.from(p.children).filter((e=>e.classList.contains("color-swatch-container"))).forEach((e=>e.remove())),this.createColorSwatchesForVariant(e,t),window.updateComponentSwatches(e),t.dataset.currentVariant=r,this.setupImageUpload(t)}else{const i=t.dataset.variantCache?JSON.parse(t.dataset.variantCache):{};i[s]=t.innerHTML,t.dataset.variantCache=JSON.stringify(i),t.dataset.currentVariant=r;if(t.parentElement.querySelectorAll(".color-swatch-container").forEach((e=>e.remove())),t.querySelectorAll(".alignment-arrow").forEach((e=>e.remove())),i[r])t.innerHTML=i[r]||a[r];else{const e=document.createElement("div");e.innerHTML=a[r];const n=e.firstChild;t.innerHTML="",t.appendChild(n)}t.querySelectorAll("*").forEach((e=>{1!==e.childNodes.length||e.childNodes[0].nodeType!==Node.TEXT_NODE||e.classList.contains("non-editable")||e.setAttribute("contentEditable","true")})),this.setupInputListeners(t,n),"avatar"===n&&this.createAlignmentControlsForVariant(t,n),"progressBar"===n&&this.setupProgressBar(e,76),"blankCard"===n&&this.setupBlankCard(t),"keyboard"===n&&(t.querySelectorAll(".color-swatch-container").forEach((e=>e.remove())),this.setupKeyboard(e)),"imgGallery"===n&&setupImageGallery(t),"navbar"===n&&e.querySelectorAll(".color-swatch-container").forEach((e=>e.remove())),this.createColorSwatchesForVariant(e,t),window.updateComponentSwatches(e),this.setupIconPicker(t),this.setupImageUpload(t),this.setupResize(e);const o=e.querySelectorAll(".resizeable");o.length&&o.forEach((e=>{resizer.makeResizable(e)}))}l.textContent=`${r+1}/${i}`,requestAnimationFrame((()=>{t.querySelectorAll('[style*="background-color"]').forEach((e=>{e&&TextContrastAdjuster.updateElementContrast(e)}))}))};return s.addEventListener("click",(()=>d(-1))),r.addEventListener("click",(()=>d(1))),o.appendChild(s),o.appendChild(l),o.appendChild(r),e.appendChild(o),o}return null}createColorSwatchesForVariant(e,t){t.querySelectorAll('[style*="var(--color"]').forEach((n=>{if(n.closest(".component-container")!==t.closest(".component-container"))return;const a=n.closest('.progress-tracker-container, [data-component-type="progressTracker"]');if(a&&n!==a.querySelector(".selected-step .step-circle")&&n.closest(".step-circle")){const e=n.closest(".step-container")?.classList.contains("selected-step");if(!e)return}const i=createColorSwatches(n);Array.isArray(i)?i.forEach((t=>{t&&t.children.length>0&&e.insertBefore(t,e.firstChild)})):i&&i.children.length>0&&e.insertBefore(i,e.firstChild)}))}createAlignmentControlsForVariant(e,t){if(["avatar","icon","floatingActionButton","image"].includes(t)){const t=e.querySelector(".align-content");t.querySelectorAll(".alignment-arrow").forEach((e=>e.remove()));const n=t.style.justifyContent||"center";createAlignmentControls(t).setAlignment(n)}}setupInputListeners(e,t){if("input"===t||"searchBar"===t){e.querySelectorAll("[contenteditable=true]").forEach((e=>{e.addEventListener("input",(function(){""===this.textContent.trim()?this.classList.add("empty"):this.classList.remove("empty")})),e.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()})),e.addEventListener("paste",(e=>{e.preventDefault();const t=(e.clipboardData||window.clipboardData).getData("text/plain");document.execCommand("insertText",!1,t)}))}))}if("textarea"===t){e.querySelectorAll("[contenteditable=true]").forEach((e=>{e.addEventListener("input",(function(){""===this.textContent.trim()?this.classList.add("empty"):this.classList.remove("empty")}))}))}}setupNavbar(e){if(!e)return null;const t=e.classList.contains("navContain")?e:e.querySelector(".navContain");if(!t)return null;const n=t.querySelector(".navbar");return n?(this.topNavbarAdded=!0,this.setupVariantControls(t,n,"navbar"),this.setupInteractiveElements(n),this.setupDeleteHandler(t),window.TextContrastAdjuster.updateElementContrast(n),t):null}setupInteractiveElements(e){if(e)return e.querySelectorAll("span:not(.non-editable), a").forEach((e=>{e.addEventListener("keypress",(t=>{"Enter"===t.key&&(t.preventDefault(),e.blur())})),e.addEventListener("paste",(e=>{e.preventDefault();const t=(e.clipboardData||window.clipboardData).getData("text/plain");document.execCommand("insertText",!1,t)}))})),setTimeout((()=>{e.querySelectorAll('[style*="background-color"]').forEach((e=>{window.TextContrastAdjuster&&window.TextContrastAdjuster.updateElementContrast(e)}))}),10),e}setupBottomSheet(e){if(!e)return;e.style.height||(e.style.height="30px");const t=e.querySelector(".bottom-sheet-content"),n=e.querySelector(".bottom-sheet-drag-handle"),a=e.querySelector(".bottom-sheet-handle-container");if(!t||!n)return void console.error("Bottom sheet missing required elements");let i=t.querySelector(".empty-placeholder");i||(i=this.createPlaceholder(t));const o=()=>{const e=t.querySelectorAll(".component-container"),n=t.querySelector(".empty-placeholder");e.length>0&&n?n.style.display="none":n&&(n.style.display="block")};o();new MutationObserver((t=>{let n=!1;t.forEach((e=>{"childList"===e.type&&(o(),n=!0)})),n&&"expanded"===e.dataset.state&&setTimeout((()=>{s()}),160)})).observe(t,{childList:!0,subtree:!1}),this.initializeSortable(t);const s=()=>{if("expanded"===e.dataset.state){const n=(()=>{const e=t.cloneNode(!0);e.style.position="absolute",e.style.visibility="hidden",e.style.height="auto",e.style.maxHeight="none",document.body.appendChild(e);const n=e.offsetHeight;return document.body.removeChild(e),Math.max(86,n+38)})(),a=Math.min(n+38,.8*window.innerHeight);e.style.height=`${a}px`}};e.dataset.state="collapsed",a.addEventListener("click",(t=>{t.stopPropagation(),"collapsed"===e.dataset.state?(e.dataset.state="expanded",s()):(e.dataset.state="collapsed",e.style.height="30px")}));return new ResizeObserver((()=>{"expanded"===e.dataset.state&&setTimeout((()=>{s()}),160)})).observe(t),this.setupDeleteHandler(e),e}setupKeyboard(e){if(!e)return null;const t=e;this.keyboardAdded=!0;const n=this.setupVariantControls(e,t,"keyboard");return n&&(e._variantControls=n),this.setupDeleteHandler(t),t}updateHeadingLevel(e,t){const n=["h1","h2","h3","h4","h5","h6"];let a;const i=e.querySelector("h1, h2, h3, h4, h5, h6");if(!i)return;const o=i.tagName.toLowerCase();a=n.indexOf(o),a="string"==typeof t&&n.includes(t.toLowerCase())?n.indexOf(t.toLowerCase()):(t+n.length)%n.length;const s=n[a],r=document.createElement(s);r.textContent=i.textContent,r.style.cssText=i.style.cssText,r.setAttribute("contentEditable","true"),i.classList.contains("usa")&&r.classList.add("usa");const l=e.querySelector(".level-indicator");return l&&(l.textContent=s.toUpperCase()),i.parentNode.replaceChild(r,i),e.dataset.headingLevel=s,r}setupBottomNav(e){if(!e)return null;const t=e.querySelector(".bottomNav");if(!t)return null;this.bottomNavbarAdded=!0;t.querySelectorAll(".nav-item-container").forEach((n=>{const i=n.querySelector(".nav-delete-btn");if(i){const n=i.cloneNode(!0);i.parentNode.replaceChild(n,i),n.addEventListener("click",(function(){t.querySelectorAll(".nav-item-container").length>1&&(this.closest(".nav-item-container").remove(),a(e))}))}const o=n.querySelector("i");o&&(o.style.cursor="pointer",o.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(o)})));const s=n.querySelector("span");s&&this.makeTextEditable(s)}));const n=t.querySelector(".nav-add-btn");if(n){const i=n.cloneNode(!0);n.parentNode&&n.parentNode.contains(n)?(n.parentNode.replaceChild(i,n),i.addEventListener("click",(()=>{if(t.querySelectorAll(".nav-item-container").length<5){const n=document.createElement("div");n.className="nav-item-container",n.innerHTML='\n                            <button class="nav-delete-btn">Ã—</button>\n                            <a href="#" class="bottom-nav-item">\n                                <i class="fa-solid fa-bolt-lightning" ></i>\n                                <span contenteditable="true">New</span>\n                            </a>\n                        ',n.querySelector(".nav-delete-btn").addEventListener("click",(function(){t.querySelectorAll(".nav-item-container").length>1&&(this.closest(".nav-item-container").remove(),a(e))})),n.querySelector("i").addEventListener("click",(e=>{e.preventDefault(),showIconPicker(e.target)})),this.makeTextEditable(n.querySelector("span")),t.contains(i)?t.insertBefore(n,i):t.appendChild(n),a(e)}}))):t&&(t.appendChild(i),i.addEventListener("click",(()=>{if(t.querySelectorAll(".nav-item-container").length<5){const n=document.createElement("div");n.className="nav-item-container",n.innerHTML='\n                                <button class="nav-delete-btn">Ã—</button>\n                                <a href="#" class="bottom-nav-item">\n                                    <i class="fa-solid fa-bolt-lightning" ></i>\n                                    <span contenteditable="true">New</span>\n                                </a>\n                            ',n.querySelector(".nav-delete-btn").addEventListener("click",(function(){t.querySelectorAll(".nav-item-container").length>1&&(this.closest(".nav-item-container").remove(),a(e))})),n.querySelector("i").addEventListener("click",(e=>{e.preventDefault(),showIconPicker(e.target)})),this.makeTextEditable(n.querySelector("span")),t.appendChild(n),a(e)}})))}else{const n=document.createElement("button");n.className="nav-add-btn",n.innerHTML='<i class="fas fa-plus"></i>',n.addEventListener("click",(()=>{if(t.querySelectorAll(".nav-item-container").length<5){const n=document.createElement("div");n.className="nav-item-container",n.innerHTML='\n                        <button class="nav-delete-btn">Ã—</button>\n                        <a href="#" class="bottom-nav-item">\n                            <i class="fa-solid fa-bolt-lightning" ></i>\n                            <span contenteditable="true">New</span>\n                        </a>\n                    ',n.querySelector(".nav-delete-btn").addEventListener("click",(function(){t.querySelectorAll(".nav-item-container").length>1&&(this.closest(".nav-item-container").remove(),a(e))})),n.querySelector("i").addEventListener("click",(e=>{e.preventDefault(),showIconPicker(e.target)})),this.makeTextEditable(n.querySelector("span")),t.appendChild(n),a(e)}})),t.appendChild(n)}function a(e){try{if(!e)return;const t=e.querySelector(".bottomNav");if(!t)return;const n=t.querySelectorAll(".nav-item-container").length,a=t.querySelector(".nav-add-btn");a&&(n>=5?(e.classList.add("max-items"),a.style.display="none"):(e.classList.remove("max-items"),a.style.display="none"))}catch(e){console.error("Error in updateAddButtonVisibility:",e)}}return e.querySelectorAll('[style*="var(--color"]').forEach((t=>{const n=createColorSwatches(t);n&&e.appendChild(n)})),e.addEventListener("mouseenter",(()=>{const n=t.querySelector(".nav-add-btn");n&&!e.classList.contains("max-items")&&(n.style.display="block")})),e.addEventListener("mouseleave",(()=>{const e=t.querySelector(".nav-add-btn");e&&(e.style.display="none")})),e}setupSidebar(e){if(!e)return null;const t=e.querySelector(".sidebar-panel"),n=t?.querySelector(".sidebar-toggle"),a=t?.querySelector(".sidebar-nav"),i=t?.querySelector(".sidebar-add-btn");if(!t||!a)return null;const o=(e="bolt-lightning",t="New Item")=>{const n=document.createElement("div");n.className="icon-container";const a=document.createElement("div");a.className="sidebar-nav-item";const i=document.createElement("i");i.className=`fas fa-${e}`,i.style.cssText="\n            width: 20px;\n            text-align: center;\n            color: var(--color-primary);\n        ";const o=document.createElement("span");o.textContent=t,o.setAttribute("contenteditable","true"),o.style.flex="1";const s=document.createElement("button");return s.className="nav-item-delete",s.innerHTML="Ã—",a.addEventListener("mouseenter",(()=>{a.style.outline="2px solid var(--neutral-gray)",s.style.display="block",setTimeout((()=>s.style.opacity="1"),0)})),a.addEventListener("mouseleave",(()=>{a.style.outline="none",s.style.opacity="0"})),s.addEventListener("click",(e=>{e.stopPropagation(),a.classList.add("delete-animation"),setTimeout((()=>a.remove()),200)})),a.appendChild(i),a.appendChild(o),a.appendChild(s),n.appendChild(a),this.setupIconPicker(n),n};if(a.querySelectorAll(".sidebar-nav-item").forEach((e=>{const t=e.querySelector(".nav-item-delete");if(t){const n=t.cloneNode(!0);t.parentNode.replaceChild(n,t),n.addEventListener("click",(t=>{t.stopPropagation(),e.classList.add("delete-animation"),setTimeout((()=>e.remove()),200)}))}e.addEventListener("mouseenter",(()=>{e.style.outline="2px solid var(--neutral-gray)";const t=e.querySelector(".nav-item-delete");t&&(t.style.display="block",setTimeout((()=>t.style.opacity="1"),0))})),e.addEventListener("mouseleave",(()=>{e.style.outline="none";const t=e.querySelector(".nav-item-delete");t&&(t.style.opacity="0")}))})),i){const t=i.cloneNode(!0);i.parentNode&&i.parentNode.replaceChild(t,i),t.addEventListener("click",(()=>{const e=o();a.appendChild(e)})),e.addEventListener("mouseenter",(()=>{t.style.display="flex"})),e.addEventListener("mouseleave",(()=>{t.style.display="none"}))}if(n){const a=n.cloneNode(!0);n.parentNode.replaceChild(a,n);let i=!1;a.addEventListener("click",(()=>{i=!i,i?(t.style.transform="translateX(-170px)",a.style.transform="translateY(-50%) rotate(180deg)",e.style.width="8px"):(t.style.transform="translateX(0)",a.style.transform="translateY(-50%) rotate(0deg)",e.style.width="240px")}))}return e}setupFloatingActionButton(e){if(!e)return null;if(!e.querySelector(".fab-nav"))return null;e.querySelectorAll(".alignment-arrow").forEach((e=>e.remove()));const t=createAlignmentControls(e),n=e.style.justifyContent||"center";t.setAlignment(n),t.hideArrows();const a=e._eventHandlers||{};return a.mouseenter&&e.removeEventListener("mouseenter",a.mouseenter),a.mouseleave&&e.removeEventListener("mouseleave",a.mouseleave),a.mouseenter=()=>{e.style.pointerEvents="auto",t.updateArrowVisibility()},a.mouseleave=()=>{e.style.pointerEvents="none",t.hideArrows()},e.addEventListener("mouseenter",a.mouseenter),e.addEventListener("mouseleave",a.mouseleave),e._eventHandlers=a,e}setupModal(e){if(!e)return;const t=e.querySelector('div[style*="width: calc(100% - 46px)"]'),n=t?.querySelector("div");return n&&n.addEventListener("click",(()=>{this.modalAdded=!1,this.specialComponents.modal.added=!1;const t=e.closest(".canvas");t&&t.removeAttribute("data-has-modal"),e.remove()})),this.modalAdded=!0,e}setupNotificationBanner(e){const t=e.querySelector(".notification-action-btn"),n=e.querySelector(".noti-visibility-toggle");if(t&&n){n.replaceWith(n.cloneNode(!0));const a=e.querySelector(".noti-visibility-toggle");a.addEventListener("click",(()=>{const e="true"===t.dataset.alwaysVisible;t.dataset.alwaysVisible=(!e).toString(),t.style.display=e?"none":"block",a.innerHTML=e?'<i class="fas fa-eye-slash"></i>':'<i class="fas fa-eye"></i>'}))}}setupVideoEmbed(e){const t=e.querySelector(".video-embed-container");if(!t)return;const n=t.querySelector('input[type="text"]'),a=t.querySelector(".embed-video-btn"),i=t.querySelector(".video-placeholder"),o=t.querySelector(".embedded-video");if(a&&n){a.replaceWith(a.cloneNode(!0));t.querySelector(".embed-video-btn").addEventListener("click",(()=>{const e=n.value.trim();let t;e.includes("youtube.com")||e.includes("youtu.be")?(t=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/)?.[1],t&&(o.innerHTML=`\n                            <iframe \n                                width="100%" \n                                height="100%" \n                                src="https://www.youtube.com/embed/${t}" \n                                frameborder="0" \n                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" \n                                allowfullscreen>\n                            </iframe>`)):e.includes("vimeo.com")&&(t=e.match(/vimeo\.com\/(\d+)/)?.[1],t&&(o.innerHTML=`\n                            <iframe \n                                width="100%" \n                                height="100%" \n                                src="https://player.vimeo.com/video/${t}" \n                                frameborder="0" \n                                allow="autoplay; fullscreen; picture-in-picture" \n                                allowfullscreen>\n                            </iframe>`)),t?(i.style.display="none",o.style.display="block"):alert("Please enter a valid YouTube or Vimeo URL")}))}}setupAccordionContent=e=>{if(!e)return;const t=e.parentElement?.querySelector(".accordion-header");if(t){const e=t.cloneNode(!0);t.parentNode.replaceChild(e,t)}new MutationObserver((()=>{"0px"!==e.style.height&&""!==e.style.height?(e.style.padding="8px 12px 0 12px",e.style.height=e.scrollHeight-8+"px"):e.style.padding="0 12px";const t=e.querySelector(".component-container"),n=e.querySelector(".placeholder");t&&n?n.remove():t||n||(e.innerHTML='\n      <div class="placeholder" style="padding: 18px 0;">\n        <div>\n          <p class="non-editable" style="margin: 0 24px; color: #666;">drag & drop components here.</p>\n        </div>\n      </div>\n    ')})).observe(e,{childList:!0,subtree:!0,attributes:!0});const n=e.parentElement?.querySelector(".accordion-header"),a=n?.querySelector(".fa-chevron-down");n&&a&&n.addEventListener("click",(()=>{"0px"!==e.style.height&&""!==e.style.height?(e.style.height="0",a.style.transform="rotate(0)"):(e.style.height=e.scrollHeight+"px",a.style.transform="rotate(180deg)")})),this.initializeSortable(e)};setupFeatureComparisonCard(e){if(!e)return;const t=e.querySelector(".comparison-card-header"),n=e.querySelector(".comparison-card-grid"),a=e.querySelector(".comparison-add-row-btn");if(!n||!a)return void console.warn("Feature comparison card is missing required elements",{grid:n,addRowBtn:a});const i=(e="New Feature",t=!1)=>{const a=document.createElement("div");a.className="comparison-card-row";const i=document.createElement("button");i.innerHTML='<i class="fas fa-trash"></i>',i.className="delete-fc-row";const s=document.createElement("div");s.style.cssText="display: flex; align-items: center; gap: 8px; width: 100%;";const r=document.createElement("span");r.textContent=e,r.setAttribute("contenteditable","true"),s.appendChild(r),s.appendChild(i),a.appendChild(s),a.addEventListener("mouseenter",(()=>i.style.display="block")),a.addEventListener("mouseleave",(()=>i.style.display="none"));const l=document.createElement("div");l.innerHTML=t?'<i class="fas fa-times" style="color: #999;"></i>':'<i class="fas fa-check" style="color: green;"></i>',l.style.cssText="text-align: center; cursor: pointer;";const c=document.createElement("div");return c.innerHTML='<i class="fas fa-check" style="color: green;"></i>',c.style.cssText="text-align: center; cursor: pointer;",[l,c].forEach((e=>{e.onclick=()=>{const t=null!==e.querySelector(".fa-check");e.innerHTML=t?'<i class="fas fa-times" style="color: #999;"></i>':'<i class="fas fa-check" style="color: green;"></i>'}})),i.onclick=e=>{e.stopPropagation(),[a,l,c].forEach((e=>e.remove())),o()},n.appendChild(a),n.appendChild(l),n.appendChild(c),[a,l,c]},o=()=>{const e=Array.from(n.children).filter((e=>"Features"===e.textContent||"Basic"===e.textContent||"Pro"===e.textContent));(n.children.length-e.length)/3>=20?(a.style.opacity="0.5",a.style.cursor="not-allowed"):(a.style.opacity="1",a.style.cursor="pointer")};a.replaceWith(a.cloneNode(!0));const s=e.querySelector(".comparison-add-row-btn");s.addEventListener("click",(()=>{const e=Array.from(n.children).filter((e=>"Features"===e.textContent||"Basic"===e.textContent||"Pro"===e.textContent));(n.children.length-e.length)/3<20&&(i("New Feature",!0),o())})),e.addEventListener("mouseenter",(()=>{s.style.display="block"})),e.addEventListener("mouseleave",(()=>{s.style.display="none"})),t&&t.setAttribute("contenteditable","true");const r=[];Array.from(n.children).filter((e=>e.classList.contains("comparison-card-row"))).forEach(((e,t)=>{const a=n.children[3*t+1+3],i=n.children[3*t+2+3];if(a&&i){[a,i].forEach((e=>{e.onclick=()=>{const t=null!==e.querySelector(".fa-check");e.innerHTML=t?'<i class="fas fa-times" style="color: #999;"></i>':'<i class="fas fa-check" style="color: green;"></i>'}}));const t=e.querySelector(".delete-fc-row");t&&(t.onclick=t=>{t.stopPropagation(),[e,a,i].forEach((e=>e.remove())),o()}),e.addEventListener("mouseenter",(()=>{const t=e.querySelector(".delete-fc-row");t&&(t.style.display="block")})),e.addEventListener("mouseleave",(()=>{const t=e.querySelector(".delete-fc-row");t&&(t.style.display="none")})),r.push([e,a,i])}}));return Array.from(n.children).slice(0,3).forEach((e=>{e&&e.setAttribute("contenteditable","true")})),o(),{createFeatureRow:i,updateAddButtonState:o}}setupPagination(e){if(!e)return null;const t=e.querySelectorAll(".page-btn:not(.prev-page):not(.next-page)"),n=e.querySelector(".prev-page"),a=e.querySelector(".next-page");let i=null;if(t.forEach((e=>{e.classList.contains("selected")&&(i=e)})),!i&&t.length>0&&(i=t[0],i.classList.add("selected"),i.style.background="var(--color-primary)",i.style.color="var(--basic-txt-color)"),t.forEach((t=>{t.onclick=function(n){i&&(i.classList.remove("selected"),i.style.background="var(--neutral-gray)",i.style.color="var(--basic-txt-color)"),t.classList.add("selected"),t.style.background="var(--color-primary)",t.style.color="var(--basic-txt-color)",i=t;e.querySelectorAll(".color-swatch-container").forEach((e=>e.remove()));const a=createColorSwatches(t);a&&(Array.isArray(a)?a.forEach((t=>{t&&e.insertBefore(t,e.firstChild)})):e.insertBefore(a,e.firstChild)),n.preventDefault()},t.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),this.blur())}))})),n&&(n.onclick=function(e){if(!i)return;const n=Array.from(t),a=n.indexOf(i);a>0&&n[a-1].click(),e.preventDefault()}),a&&(a.onclick=function(e){if(!i)return;const n=Array.from(t),a=n.indexOf(i);a<n.length-1&&n[a+1].click(),e.preventDefault()}),i){const t=createColorSwatches(i);t&&(Array.isArray(t)?t.forEach((t=>{t&&e.insertBefore(t,e.firstChild)})):e.insertBefore(t,e.firstChild))}return{getSelectedButton:()=>i}}setupProgressTracker(e){if(!e)return;e.querySelectorAll(".color-swatch-container").forEach((e=>e.remove()));let t=e.querySelector(".steps-container");if(!t){t=document.createElement("div"),t.className="steps-container",t.style.cssText="display: flex; align-items: center; width: 100%; position: relative;";Array.from(e.querySelectorAll("[data-step]")).forEach((e=>t.appendChild(e)));const n=e.querySelector(".progress-tracker-controls");n?e.insertBefore(t,n):e.appendChild(t)}let n=null;const a=e.querySelector("[data-step].selected-step");function i(t){e.querySelectorAll("[data-step]").forEach((e=>{e.classList.remove("selected-step");const t=e.querySelector(".step-circle");t&&(t.style.backgroundColor="var(--neutral-gray)",t.style.color="#666")})),t.classList.add("selected-step");const a=t.querySelector(".step-circle");a&&(a.style.backgroundColor="var(--color-primary)",a.style.color="var(--basic-txt-color)"),n=t;e.querySelectorAll(".color-swatch-container").forEach((e=>e.remove())),function(t){if(!t)return;const n=t.querySelector(".step-circle");if(!n)return;const a=createColorSwatches(n);a&&a.children&&a.children.length>0&&e.insertBefore(a,e.firstChild);window.updateComponentSwatches(e)}(t)}function o(){t.querySelectorAll(".connecting-line").forEach((e=>e.remove()));const e=t.querySelectorAll("[data-step]");e.forEach(((n,a)=>{if(a<e.length-1){const n=function(){const e=document.createElement("div");return e.style.cssText="height: 2px; background-color: #E0E0E0; flex: 1; margin: 18px 0 0 0; align-self: flex-start; border-radius: 2px",e.classList.add("connecting-line"),e}();t.insertBefore(n,e[a+1])}}))}function s(){t.querySelectorAll("[data-step]").forEach(((e,t)=>{const n=e.querySelector(".step-circle");n&&(n.textContent=(t+1).toString())})),o(),function(){const n=e.querySelector(".progress-tracker-controls");if(!n)return;const a=t.querySelectorAll("[data-step]"),i=n.querySelector("button:first-child"),o=n.querySelector("button:last-child");i&&o&&(i.style.opacity=1===a.length?"0.5":"1",i.style.cursor=1===a.length?"default":"pointer",o.style.opacity=5===a.length?"0.5":"1",o.style.cursor=5===a.length?"default":"pointer")}()}a?n=a:(n=e.querySelector("[data-step]"),n&&n.classList.add("selected-step"));const r=e.querySelector(".progress-tracker-controls");if(r){const e=r.querySelector("button:last-child"),a=r.querySelector("button:first-child");if(e){const a=e.cloneNode(!0);e.parentNode&&e.parentNode.replaceChild(a,e),a.onclick=()=>{const e=t.querySelectorAll("[data-step]");if(e.length<7){const a=function(e){const t=document.createElement("div");t.className="step-container",t.style.cssText="display: flex; flex-direction: column; align-items: center; gap: 8px; z-index: 2; flex: 0 1 auto; text-align: center; cursor: pointer;",t.setAttribute("data-step","");const a=document.createElement("div");a.className="step-circle",a.style.cssText=`\n            width: 36px;\n            height: 36px;\n            border-radius: 50%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-weight: bold;\n            margin: 0 6px;\n            ${0===e?"background-color: var(--color-primary);":"background-color: var(--neutral-gray); color: #666;"}\n        `,a.textContent=(e+1).toString(),a.setAttribute("contentEditable","true");const o=document.createElement("div");return o.className="step-label",o.textContent=`Step ${e+1}`,o.style.cssText="font-size: 14px; color: #666; font-weight: 500;",o.setAttribute("contentEditable","true"),t.appendChild(a),t.appendChild(o),t.style.cursor="pointer",0!==e||n||(n=t,t.classList.add("selected-step")),t.addEventListener("click",(()=>{i(t)})),t}(e.length);t.appendChild(a),s()}}}if(a){const e=a.cloneNode(!0);a.parentNode&&a.parentNode.replaceChild(e,a),e.onclick=()=>{const e=t.querySelectorAll("[data-step]");if(e.length>1){const t=e[e.length-1];n===t&&(n=e[e.length-2],i(n)),t.remove(),s()}}}}e.querySelectorAll("[data-step]").forEach((e=>{const t=e.querySelector(".step-circle");t&&t.style.backgroundColor.includes("--color-primary")&&(n=e,e.classList.add("selected-step")),e.addEventListener("click",(()=>{i(e)}))}))}createPlaceholder(e){const t=document.createElement("div");return t.className="empty-placeholder",t.classList.add("non-editable"),t.textContent="drag & drop components here",t.style.cssText="position: absolute; top: 50%; left: 50%; font-style: italic; pointer-events: none;",e.appendChild(t),t}setupBlankCard(e){const t=e.querySelector(".blank-card-content");let n=t.querySelector(".empty-placeholder");n||(n=this.createPlaceholder(t));new MutationObserver((()=>{const e=Array.from(t.children).filter((e=>e.classList&&e.classList.contains("component-container")));e.length>0?n&&n.parentNode===t&&(n.style.display="none"):n&&n.parentNode===t?n.style.display="block":t.querySelector(".empty-placeholder")||(n=this.createPlaceholder(t),n.style.display="block"),e.forEach((e=>{const t=e.querySelector(".blank-card-content");if(t){const e=Array.from(t.children).filter((e=>e.classList&&e.classList.contains("component-container"))),n=t.querySelector(".empty-placeholder");e.length>0&&n?n.style.display="none":0===e.length&&(n?n.style.display="block":this.createPlaceholder(t))}}))})).observe(t,{childList:!0,subtree:!0}),this.initializeSortable(t)}setupChipGroup(e){if(!e)return;const t=e.querySelector(".chip-group-container"),n=e.querySelector(".add-chip-btn");if(!t||!n)return;n.replaceWith(n.cloneNode(!0));const a=e.querySelector(".add-chip-btn");new Sortable(t,{animation:150,ghostClass:"chip-ghost",chosenClass:"chip-chosen",dragClass:"chip-drag",onEnd:function(){t.querySelectorAll(".chip").forEach((e=>{e.classList.add("reorder-flash"),setTimeout((()=>e.classList.remove("reorder-flash")),300)}))}});const i=e=>{const n=e.cloneNode(!0);e.replaceWith(n);const a=n.querySelector("span"),i=n.querySelector(".remove-chip");a&&(a.setAttribute("contentEditable","true"),a.className="usa"),n.addEventListener("click",(e=>{if(e.target!==i&&e.target!==a){if("true"===n.getAttribute("data-selected"))n.style.backgroundColor="var(--neutral-gray)",n.setAttribute("data-selected","false");else{let e="var(--color-primary)";const a=t.querySelectorAll('.chip[data-selected="true"]');if(a.length>0){e=window.getComputedStyle(a[0]).backgroundColor}n.style.backgroundColor=e,n.setAttribute("data-selected","true")}requestAnimationFrame((()=>{window.TextContrastAdjuster.updateElementContrast(n)}))}})),i&&i.addEventListener("click",(e=>{e.stopPropagation(),n.remove()})),n.setAttribute("tabindex","0"),n.addEventListener("keydown",(e=>{"Enter"===e.key&&(n.click(),e.preventDefault())}))};a.addEventListener("click",(()=>{if(t.children.length<25){let e="var(--neutral-gray)";const n=t.querySelectorAll(".chip");if(n.length>0){const t=n[0],a=window.getComputedStyle(t).backgroundColor;e=a.includes("rgb")?"var(--neutral-gray)":a}const a=document.createElement("div");a.className="chip",a.style.backgroundColor=e;const o=document.createElement("span");o.textContent="New Pill",o.setAttribute("contentEditable","true"),a.setAttribute("data-selected","false");const s=document.createElement("i");s.className="fas fa-times remove-chip",a.appendChild(o),a.appendChild(s),t.appendChild(a),i(a),requestAnimationFrame((()=>{window.TextContrastAdjuster.updateElementContrast(a)}))}})),t.querySelectorAll(".chip").forEach(i)}setupDatePicker(e,t,n,a){t.addEventListener("input",(()=>{t.style.opacity="1"})),n.addEventListener("click",(()=>{a.style.display="none"===a.style.display?"block":"none"})),e.querySelectorAll(".date-picker-day-cell").forEach((n=>{n.addEventListener("click",(()=>{const i=e.querySelector(".date-picker-month-text").textContent,o=e.querySelector(".date-picker-year-text").textContent;t.textContent=`${i} ${n.textContent}, ${o}`,a.style.display="none",t.style.opacity="1"}))}))}setupBulletedList(e){if(!e)return;let t=e.querySelector(".bulleted-list-container");const n=e.querySelector(".bullet-list-add-btn");if(!t){t=document.createElement("div"),t.className="bulleted-list-container",t.style.cssText="display: flex; flex-direction: column; gap: 5px; width: 100%;";if(Array.from(e.querySelectorAll(".bullet-list-item")).forEach((e=>t.appendChild(e))),n){e.insertBefore(t,n);const a="bullet-list-sortable-styles";if(!document.getElementById(a)){const e=document.createElement("style");e.id=a,e.textContent="\n                .bullet-list-ghost {\n                    opacity: 0.5;\n                    background: var(--neutral-gray);\n                }\n                .bullet-list-chosen {\n                    background: var(--neutral-gray);\n                }\n                .bullet-list-drag {\n                    cursor: grabbing;\n                }\n                .success-drop {\n                    animation: success-animation 0.3s ease-out;\n                }\n                @keyframes success-animation {\n                    0% { background-color: rgba(52, 152, 219, 0.2); }\n                    100% { background-color: transparent; }\n                }\n            ",document.head.appendChild(e)}}else e.appendChild(t)}t._sortable&&t._sortable.destroy(),t._sortable=new Sortable(t,{animation:150,handle:".bullet-list-item",ghostClass:"bullet-list-ghost",chosenClass:"bullet-list-chosen",dragClass:"bullet-list-drag",group:"bulletList",onStart:function(e){const t=e.item;t.classList.add("pulse-drag"),t.style.zIndex="1000";const n=t.querySelector(".bullet-list-item-controls");n&&(n.style.display="none")},onEnd:function(e){const t=e.item;t.classList.remove("pulse-drag"),t.style.zIndex="",e.oldIndex!==e.newIndex&&(t.classList.add("success-drop"),setTimeout((()=>{t.classList.remove("success-drop")}),300));const n=parseInt(t.style.marginLeft||"0");n>0&&(t.style.marginLeft=`${n}px`)}});const a=e=>{let a=e.querySelector(".bullet-list-item-controls");if(!a){a=document.createElement("div"),a.className="bullet-list-item-controls";const t=document.createElement("i");t.className="fas fa-indent bullet-list-indent-btn";const n=document.createElement("i");n.className="fas fa-outdent bullet-list-outdent-btn";const i=document.createElement("i");i.className="fas fa-times bullet-list-delete-btn",a.appendChild(t),a.appendChild(n),a.appendChild(i),e.appendChild(a)}const i=a.querySelector(".bullet-list-indent-btn"),o=a.querySelector(".bullet-list-outdent-btn"),s=a.querySelector(".bullet-list-delete-btn");e.addEventListener("mouseenter",(()=>{a.style.display="flex"})),e.addEventListener("mouseleave",(()=>{a.style.display="none"})),i&&i.addEventListener("click",(()=>{const t=parseInt(e.style.marginLeft||"0");t<160&&(e.style.marginLeft=`${t+36}px`)})),o&&o.addEventListener("click",(()=>{const t=parseInt(e.style.marginLeft||"0");t>=36&&(e.style.marginLeft=t-36+"px")})),s&&s.addEventListener("click",(()=>{e.remove(),t.children.length<=20&&n&&(n.style.opacity="1",n.style.pointerEvents="all")}))};if(t.querySelectorAll(".bullet-list-item").forEach((e=>{if(e._handlers){e.removeEventListener("mouseenter",e._handlers.mouseEnter),e.removeEventListener("mouseleave",e._handlers.mouseLeave);const t=e.querySelector(".bullet-list-item-controls");if(t){const n=t.querySelector(".bullet-list-indent-btn"),a=t.querySelector(".bullet-list-outdent-btn"),i=t.querySelector(".bullet-list-delete-btn");n&&e._handlers.indent&&n.removeEventListener("click",e._handlers.indent),a&&e._handlers.unindent&&a.removeEventListener("click",e._handlers.unindent),i&&e._handlers.delete&&i.removeEventListener("click",e._handlers.delete)}delete e._handlers}})),t.querySelectorAll(".bullet-list-item").forEach(a),n){const e=n.cloneNode(!0);n.parentNode&&n.parentNode.replaceChild(e,n),e.addEventListener("click",(()=>{const n=document.createElement("div");n.className="bullet-list-item",n.innerHTML='\n                    <div class="bullet-icon icon-container">\n                        <i class="fas fa-circle" style="margin-top: 1px;"></i>\n                    </div>\n                    <div class="bullet-list-item-text" contenteditable="true">New item</div>\n                ';const i=n.querySelector(".icon-container"),o=i.querySelector("i");i.addEventListener("click",(()=>{showIconPicker(o)})),a(n),t.appendChild(n),t.children.length>20&&(e.style.opacity=".45",e.style.pointerEvents="none")}))}const i="bullet-list-sortable-styles";if(!document.getElementById(i)){const e=document.createElement("style");e.id=i,e.textContent="\n                .bullet-list-ghost {\n                    opacity: 0.5;\n                    background: var(--neutral-gray);\n                }\n                .bullet-list-chosen {\n                    background: var(--neutral-gray);\n                }\n                .bullet-list-drag {\n                    cursor: grabbing;\n                }\n                .success-drop {\n                    animation: success-animation 0.3s ease-out;\n                }\n                @keyframes success-animation {\n                    0% { background-color: rgba(52, 152, 219, 0.2); }\n                    100% { background-color: transparent; }\n                }\n            ",document.head.appendChild(e)}}setupTabs(e){if(!e)return;const t=e.querySelector(".tabs-wrapper"),n=e.querySelector(".tabs-controls"),a=n?.querySelector(".tabs-add-btn"),i=n?.querySelector(".tabs-remove-btn");if(!(t&&n&&a&&i))return;const o=n=>{t.querySelectorAll(".ui-tab").forEach((e=>{e.classList.remove("selected"),e.style.backgroundColor="var(--neutral-gray)",e.style.color="var(--basic-txt-color)"})),n.classList.add("selected"),n.style.backgroundColor="var(--color-primary)",n.style.color="var(--basic-txt-color)";const a=e.querySelectorAll('[style*="var(--color"]');if(a.length>0){e.querySelectorAll(".color-swatch-container").forEach((e=>e.remove())),a.forEach((t=>{try{const n=createColorSwatches(t);Array.isArray(n)?n.forEach((t=>{t&&t.children.length>0&&e.insertBefore(t,e.firstChild)})):n&&n.children.length>0&&e.insertBefore(n,e.firstChild)}catch(e){console.error("Error creating swatches:",e)}}))}else console.log("No color elements found in container")};t.querySelectorAll(".ui-tab").forEach((e=>{e.addEventListener("click",(()=>o(e))),e.classList.contains("selected")&&(o(e),window.TextContrastAdjuster.updateElementContrast(e))})),a.addEventListener("click",(()=>{if(t.children.length<5){const e=s(t.children.length+1);t.appendChild(e),o(e)}})),i.addEventListener("click",(()=>{if(t.children.length>1){t.removeChild(t.lastChild);const e=t.lastChild;e&&o(e)}}));const s=e=>{const t=document.createElement("div");return t.textContent=`Tab ${e}`,t.setAttribute("contentEditable","true"),t.className="ui-tab usa",t.style.cssText="\n                background-color: var(--neutral-gray);\n            ",t.addEventListener("click",(()=>o(t))),t}}preserveCellContent=()=>{table.querySelectorAll("tbody tr").forEach((e=>{Array.from(e.querySelectorAll("td.dt-cell-td")).forEach(((e,t)=>{if(!e||t>=columnTypes.length)return;switch(columnTypes[t]){case ColumnTypes.CHECKBOX:const t=e.querySelector(".fa-regular.fa-square");if(t){t.querySelector(".fa-square-check");const e=t.cloneNode(!0);t.parentNode.replaceChild(e,t);const n=e.querySelector(".fa-square-check");e.addEventListener("click",(()=>{const e="none"===n.style.display;n.style.display=e?"block":"none"}))}break;case ColumnTypes.LINK:const n=e.querySelector("span");if(n){n.textContent;const e=n.cloneNode(!0);e.setAttribute("contenteditable","true"),n.parentNode.replaceChild(e,n)}break;case ColumnTypes.ACTION:const a=e.querySelector("i");if(a){a.className;const e=a.cloneNode(!0);a.parentNode.replaceChild(e,a),e.addEventListener("click",(t=>{t.preventDefault(),showIconPicker(e)}))}break;case ColumnTypes.TEXT:default:e.hasAttribute("contenteditable")||e.setAttribute("contenteditable","true")}}))}))};setupTable=e=>{if(!e)return console.error("No content provided to setupTable"),null;const t=e.querySelector(".data-table-scroll-wrapper");if(!t)return console.error("No table wrapper found in content"),null;const n=t.querySelector(".data-table-main");if(!n)return console.error("No table found in wrapper"),null;let a=e.querySelector(".data-table-button-container");if(!a){a=document.createElement("div"),a.className="data-table-button-container";const t=document.createElement("button");t.className="data-table-add-column-btn",t.innerHTML='<i class="fas fa-plus"></i><span>Column</span>';const n=document.createElement("button");n.className="data-table-add-row-btn",n.innerHTML='<i class="fas fa-plus"></i><span>Row</span>',a.appendChild(n),a.appendChild(t),e.appendChild(a)}const i={CHECKBOX:"checkbox",TEXT:"text",LINK:"link",ACTION:"action (icon)"},o={hasCheckboxColumn:!1,columns:[],rows:[],activeControls:null,isResizing:!1,currentResizer:null,startX:0,startWidth:0,initialRightEdge:0},s=(e=i.TEXT)=>{const t=document.createElement("td");switch(t.className="dt-cell-td",e){case i.CHECKBOX:const e=document.createElement("div");e.className="fa-regular fa-square",e.style.cssText="\n                        margin: -2px 10px 0 10px;\n                        border-radius: 4px;\n                        cursor: pointer;\n                        position: relative;\n                        font-size: 18px;\n                        color: #a0a0a0;\n                    ";const n=document.createElement("i");n.className="fa-solid fa-square-check",n.style.cssText="\n                        font-size: 18px;\n                        color: var(--primary-color);\n                        display: none; \n                        position: absolute;\n                        top: 0px;\n                        left: 0px;\n                        border: none;\n                    ",e.appendChild(n),e.addEventListener("click",(()=>{const e="none"===n.style.display;n.style.display=e?"block":"none"})),t.appendChild(e);break;case i.LINK:const a=document.createElement("span");a.textContent="Link Text",a.style.cssText="\n                        color: #0d87d8;\n                        cursor: pointer;\n                    ",a.setAttribute("contenteditable","true"),t.appendChild(a);break;case i.ACTION:const o=document.createElement("i");o.className="fas fa-bolt",o.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(o)}));const s=document.createElement("span");s.setAttribute("contenteditable","true"),s.style.cssText="\n                        margin-left: 8px;\n                    ",s.textContent="Action",t.classList.add("icon-container"),t.appendChild(o),t.appendChild(s);break;default:t.setAttribute("contenteditable","true"),t.textContent="Cell Text"}return t};let r=n.querySelector("thead tr");if(!r){if(!n.querySelector("thead")){const e=document.createElement("thead");n.appendChild(e)}r=document.createElement("tr"),n.querySelector("thead").appendChild(r)}if(r)try{r._sortable&&r._sortable.destroy(),new Sortable(r,{animation:150,handle:".data-table-header-cell",filter:".td-column-resizer-line",preventOnFilter:!0,ghostClass:"sortable-ghost",onEnd:function(e){e.item.style.cursor="",n.querySelectorAll("td").forEach((e=>{e.style.backgroundColor="var(--input-bg-color)"}));const t=e.oldIndex,a=e.newIndex;if(t===a)return;Array.from(n.querySelectorAll("tbody tr")).forEach((e=>{const n=Array.from(e.children),[i]=n.splice(t,1);a>=n.length?e.appendChild(i):e.insertBefore(i,n[a])}))},onStart:function(e){if(o.isResizing)return e.preventDefault(),!1;e.item.style.cursor="grabbing";const t=e.oldIndex;n.querySelectorAll(`td:nth-child(${t+1})`).forEach((e=>{e.style.backgroundColor="rgba(37, 137, 203, 0.9)"}))},onMove:function(e){return!e.related.classList.contains("navbar-spacer")}})}catch(e){console.error("Error setting up Sortable for table header:",e)}const l=(e="New Column",t=i.TEXT)=>{const n=document.createElement("th");n.className="data-table-header-cell",n.addEventListener("mouseenter",(()=>{n.style.cursor="grab"})),n.addEventListener("mouseleave",(()=>{n.classList.contains("sortable-chosen")||(n.style.cursor="")}));const a=document.createElement("div");a.className="data-table-header-content";const s=document.createElement("span");s.textContent=e,s.setAttribute("contenteditable","true"),a.appendChild(s);const r=document.createElement("div");r.className="td-header-icon icon-container";const l=document.createElement("i");l.className="fas fa-sort",l.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(l)})),r.appendChild(l),a.appendChild(r);const c=document.createElement("div");c.className="td-column-resizer";c.addEventListener("mousedown",(e=>{e.preventDefault(),e.stopPropagation(),o.isResizing=!0,o.currentResizer=c,o.startX=e.pageX,o.startWidth=n.offsetWidth;const t=n.getBoundingClientRect();o.initialRightEdge=t.right;const a=document.createElement("div");a.id="resize-overlay",document.body.appendChild(a);const i=document.createElement("div");i.className="td-column-resizer-line",i.style.left=`${t.right}px`,i.id="resize-line",document.body.appendChild(i)}));const u=document.createElement("div");u.className="data-table-column-controls";const m=document.createElement("select");m.className="dt-col-type-selector",Object.values(i).forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e.charAt(0).toUpperCase()+e.slice(1),m.appendChild(t)})),m.value=t,m.addEventListener("mousedown",(e=>{e.stopPropagation(),u.style.display="flex",o.activeControls=u})),m.addEventListener("change",(e=>{e.stopPropagation(),d(n,m.value),n.setAttribute("data-column-type",m.value),setTimeout((()=>{o.activeControls===u&&(u.style.display="none",o.activeControls=null)}),200)})),u.appendChild(m);const h=document.createElement("i");return h.className="fas fa-trash delete-dt-col-btn",h.setAttribute("title","delete column"),h.addEventListener("click",(()=>{const e=Array.from(n.parentElement.children).indexOf(n);p(e)})),u.appendChild(h),n.appendChild(a),n.appendChild(u),n.appendChild(c),n.addEventListener("mouseenter",(()=>{o.activeControls||o.isResizing||(u.style.display="flex")})),n.addEventListener("mouseleave",(e=>{u.contains(e.relatedTarget)||o.activeControls===u||(u.style.display="none")})),n},c=e=>{const t=document.createElement("tr");t.className="data-table-row";const n=e.children;Array.from(n).forEach((e=>{const n=e.querySelector("select")?.value||i.TEXT;t.appendChild(s(n))}));const a=document.createElement("i");return a.className="fas fa-trash row-controls",a.setAttribute("title","delete row"),a.addEventListener("click",(()=>{const e=t.closest("tbody");t.remove(),u(e)})),t.appendChild(a),t.addEventListener("mouseenter",(()=>{t.style.position="relative",a.style.display="flex"})),t.addEventListener("mouseleave",(()=>{t.style.position="initial",a.style.display="none"})),t},d=(e,t)=>{const a=Array.from(e.parentElement.children).indexOf(e);n.querySelectorAll("tbody tr").forEach((e=>{const n=e.children[a],i=s(t);e.replaceChild(i,n)})),e.setAttribute("data-column-type",t)},p=e=>{n.querySelectorAll("tr").forEach((t=>{t.children.length>e&&t.deleteCell(e)}))},u=e=>{const t=e.children.length;if(a){const e=a.querySelector(".data-table-add-row-btn");e&&(e.style.display=t>=20?"none":"flex")}};if(!n.querySelector("tbody")){const e=document.createElement("tbody");n.appendChild(e)}const m=a.querySelector(".data-table-add-column-btn");if(m){const e=m.cloneNode(!0);m.parentNode.replaceChild(e,m),e.addEventListener("click",(()=>{const e=n.querySelector("thead tr"),t=l("New Column",i.TEXT);t.setAttribute("data-column-type",i.TEXT),e.appendChild(t);n.querySelectorAll("tbody tr").forEach((e=>{const t=e.lastElementChild;t&&t.classList.contains("row-controls")?e.insertBefore(s(i.TEXT),t):e.appendChild(s(i.TEXT))}))}))}const h=a.querySelector(".data-table-add-row-btn");if(h){const e=h.cloneNode(!0);h.parentNode.replaceChild(e,h),e.addEventListener("click",(()=>{const e=n.querySelector("thead tr"),t=n.querySelector("tbody");e&&t&&(t.appendChild(c(e)),u(t))}))}document.addEventListener("mousemove",(e=>{if(o.isResizing){document.querySelectorAll(".td-column-resizer").forEach((e=>{e.style.background="transparent"}));const t=e.pageX-o.startX,n=Math.max(60,o.startWidth+t);o.currentResizer.parentElement.style.width=`${n}px`;const a=document.getElementById("resize-line");a&&(a.style.transform=`translateX(${t}px)`)}})),document.addEventListener("mouseup",(()=>{if(o.isResizing){o.isResizing=!1,o.currentResizer=null,o.startX=0,o.startWidth=0;const e=document.getElementById("resize-overlay"),t=document.getElementById("resize-line");e&&e.remove(),t&&t.remove()}})),document.addEventListener("click",(e=>{o.activeControls&&!o.activeControls.contains(e.target)&&(o.activeControls.style.display="none",o.activeControls=null)}));const v=()=>{a.style.display="flex"},g=e=>{const n=e.relatedTarget;t.contains(n)||a.contains(n)||(a.style.display="none")};if(t.addEventListener("mouseenter",v),t.addEventListener("mouseleave",g),a.addEventListener("mouseenter",v),a.addEventListener("mouseleave",g),0===r.children.length){[{text:"Check",type:i.CHECKBOX},{text:"ID",type:i.LINK},{text:"Name",type:i.TEXT},{text:"Action",type:i.ACTION}].forEach((({text:e,type:t})=>{const n=l(e,t);n.setAttribute("data-column-type",t),r.appendChild(n)}));const e=n.querySelector("tbody");if(e)for(let t=0;t<3;t++)e.appendChild(c(r))}return{createRow:c,createHeaderCell:l,updateColumnType:d,deleteColumn:p}};setupChatComponent(e){if(!e)return;const t=e.querySelector(".chat-image-container");if(t){const e=t.cloneNode(!0);t.parentNode&&t.parentNode.replaceChild(e,t);const n=e.querySelector(".chat-image"),a=e.querySelector(".chat-image-placeholder"),i=e.closest(".leftChat, .rightChat");i&&(i.addEventListener("mouseenter",(()=>{e.style.display="block"})),i.addEventListener("mouseleave",(()=>{n&&"none"!==n.style.display||(e.style.display="none")}))),e.addEventListener("click",(()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=t=>{const i=t.target.files[0];if(i){const t=new FileReader;t.onload=t=>{let i=n;i||(i=document.createElement("img"),i.className="chat-image",e.appendChild(i)),i.src=t.target.result,i.style.display="block",a&&(a.style.display="none"),e.style.display="block"},t.readAsDataURL(i)}},t.click()}))}return e}setupProgressBar(e,t=76){t=Math.min(100,Math.max(0,Math.round(t)));const n=e.querySelector(".progress-bar"),a=n.querySelector("svg"),i=n.querySelector('svg path[fill="var(--color-primary)"]'),o=n.querySelectorAll("path[stroke-dasharray]"),s=n.querySelector("div > div"),r=e.querySelector('[contenteditable="true"]');function l(e){if(i){const t=e/100*2*Math.PI,n=Math.cos(t),a=Math.sin(t),o=`M 0 0 L 1 0 A 1 1 0 ${e>50?1:0} 1 ${n} ${a} L 0 0`;i.setAttribute("d",o)}else o.length?o.forEach((t=>{t.setAttribute("stroke-dasharray",`${e}, 100`)})):s&&(s.style.width=e+"%");r.textContent=e+"%"}n&&(i||o.length||s)&&r&&(l(t),n.addEventListener("click",(e=>{if(e.target===r||r.contains(e.target))return;const t=n.getBoundingClientRect();if(a){const n=t.left+t.width/2,a=t.top+t.height/2;let i=Math.atan2(e.clientY-a,e.clientX-n);i+=Math.PI/2,i<0&&(i+=2*Math.PI);let o=i/(2*Math.PI)*100;l(Math.round(o))}else{const n=e.clientX-t.left,a=t.width;l(Math.round(n/a*100))}})),r.addEventListener("input",(()=>{let e=r.textContent;e=e.replace(/[^\d%]/g,""),e=e.replace(/%/g,"")+"%";let t=parseInt(e);isNaN(t)||(t=Math.min(100,Math.max(0,t)),l(t))})),r.addEventListener("blur",(()=>{let e=parseInt(r.textContent);isNaN(e)&&(e=0),e=Math.min(100,Math.max(0,e)),l(e)})),r.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),r.blur())})))}setupAdjustableSpace(e){const t=e.closest(".component-container");t&&(t.addEventListener("mouseenter",(()=>{e.style.outline="1px dashed var(--neutral-gray)"})),t.addEventListener("mouseleave",(()=>{e.style.outline="none"})))}setupIcon(e){const t=e.querySelector(".iconContainerClass"),n=t?.querySelector("i");if(!n)return;let a=e.querySelector("input.iconControls");a||(a=document.createElement("input"),a.classList.add("iconControls"),a.type="number",a.min="12",a.max="96",a.value="24",t.appendChild(a));const i=a._resizeListener;i&&a.removeEventListener("input",i);const o=e=>{n.style.fontSize=`${e.target.value}px`};a._resizeListener=o,a.addEventListener("input",o);let s=getComputedStyle(n).fontSize||n.style.fontSize;const r=parseInt(s,10)||24;a.value=r,n.style.fontSize=`${r}px`,n.getAttribute("data-listeners-attached")||(n.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(n)})),n.setAttribute("data-listeners-attached","true"));return createAlignmentControls(t)}setupColumns(e){if(!e)return void console.error("Attempted to setup columns with null container");if(e._isSetup)return;e._isSetup=!0;const t=e.querySelector(".columns-controls"),n=t.querySelector('input[type="range"]'),a=t.querySelector("button:first-child");a.setAttribute("title","remove column");const i=t.querySelector("button:nth-child(3)");i.setAttribute("title","add column");const o=t.querySelector("span:nth-child(2)");o.setAttribute("title","column count");const s=t.querySelector("span:last-child"),r=e.closest(".component-container");r&&r.querySelectorAll(":scope > .color-swatch-container").forEach((e=>{e.remove()}));const l=()=>{const e=document.createElement("div");e.className="column-container pulseAnim";const t=document.createElement("div");return t.classList.add("empty-placeholder"),t.innerHTML='<i class="fas fa-table-columns"></i>',e.appendChild(t),this.initializeSortable(e),e},c=()=>{e.querySelectorAll(".column-resize-handle").forEach((e=>e.remove()));const t=e.querySelectorAll(".column-container");t.length<=1||Array.from(t).slice(0,-1).forEach(((n,a)=>{const i=document.createElement("div");i.className="column-resize-handle",i.style.cssText="\n                width: 8px;\n                height: 100%;\n                cursor: col-resize;\n                z-index: 10;\n                position: absolute;\n                top: 0;\n                right: -4px;\n                background: transparent;\n            ";const o=document.createElement("div");o.className="handle-indicator",o.style.cssText="\n                position: absolute;\n                top: 0;\n                bottom: 0;\n                left: 3px;\n                width: 2px;\n                background: transparent;\n                border-radius: 1px;\n                transition: background 0.2s ease;\n            ",i.appendChild(o),i.addEventListener("mouseenter",(()=>{o.style.background="rgba(52, 152, 219, 0.7)"})),i.addEventListener("mouseleave",(()=>{i.classList.contains("dragging")||(o.style.background="transparent")})),i.addEventListener("mousedown",(s=>{s.preventDefault(),s.stopPropagation(),i.classList.add("dragging"),o.style.background="rgba(52, 152, 219, 0.9)";const r=n,l=t[a+1];if(!r||!l)return;const c=parseFloat(r.style.flexGrow)||1,d=parseFloat(l.style.flexGrow)||1,p=c+d,u=s.clientX,m=(e.getBoundingClientRect().width,r.getBoundingClientRect().width+l.getBoundingClientRect().width),h=document.createElement("div");h.style.cssText="\n                    position: fixed;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: 100%;\n                    z-index: 1000;\n                    cursor: col-resize;\n                ",document.body.appendChild(h);const v=document.createElement("div");v.style.cssText=`\n                    position: fixed;\n                    top: ${r.getBoundingClientRect().top}px;\n                    left: ${r.getBoundingClientRect().right}px;\n                    width: 2px;\n                    height: ${Math.max(r.getBoundingClientRect().height,l.getBoundingClientRect().height)}px;\n                    background-color: var(--color-primary);\n                    z-index: 1001;\n                    pointer-events: none;\n                `,document.body.appendChild(v);const g=e=>{const t=(e.clientX-u)/m;let n=c+t*p,a=d-t*p;const i=.1;n<i?(n=i,a=p-i):a<i&&(a=i,n=p-i),r.style.flex=`${n} 1 min-content`,l.style.flex=`${a} 1 min-content`,r.style.flexGrow=n,l.style.flexGrow=a;const o=r.getBoundingClientRect().right;v.style.left=`${o}px`},y=()=>{if(document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),i.classList.remove("dragging"),o.style.background="transparent",h.remove(),v.remove(),projectManager&&void 0!==projectManager.contentChanged){projectManager.contentChanged=!0;const t=e.closest(".canvas-wrapper");if(t&&projectManager.addCanvasToChanged){const e=t.getAttribute("data-canvas-id");e&&projectManager.addCanvasToChanged(e,"Column resize")}}};document.addEventListener("mousemove",g),document.addEventListener("mouseup",y)})),n.style.position="relative",n.appendChild(i)}))},d=t=>{const n=e.querySelectorAll(".column-container"),s=n.length;if(t!==s){if(o.textContent=t,t>s){let a=0;n.forEach((e=>{const t=parseFloat(e.style.flexGrow)||1;a+=t}));for(let n=s;n<t;n++){const t=l();t.style.flex="1 1 min-content",t.style.flexGrow=1,e.appendChild(t)}}else{const a=n[0];let i=0;for(let e=t;e<s;e++){const t=n[e];for(i+=parseFloat(t.style.flexGrow)||1;t.firstChild;)a.appendChild(t.firstChild);t.remove()}if(i>0){const t=e.querySelectorAll(".column-container"),n=i/t.length;t.forEach((e=>{const t=(parseFloat(e.style.flexGrow)||1)+n;e.style.flex=`${t} 1 min-content`,e.style.flexGrow=t}))}}a.style.opacity=t<=1?"0.5":"1",a.style.cursor=t<=1?"default":"pointer",i.style.opacity=t>=6?"0.5":"1",i.style.cursor=t>=6?"default":"pointer",c()}};n.addEventListener("input",(t=>{const n=t.target.value;s.textContent=n,e.style.gap=`${n}px`})),a.addEventListener("click",(()=>{const e=parseInt(o.textContent);e>1&&d(e-1)})),i.addEventListener("click",(()=>{const e=parseInt(o.textContent);e<6&&d(e+1)})),e.addEventListener("mouseenter",(()=>{t.style.display="flex"})),e.addEventListener("mouseleave",(()=>{t.style.display="none"}));if(new MutationObserver((t=>{const n=e.querySelectorAll(".column-container");t.some((e=>Array.from(e.addedNodes).some((e=>e.classList&&e.classList.contains("column-container")))||Array.from(e.removedNodes).some((e=>e.classList&&e.classList.contains("column-container")))))&&c(),n.forEach((e=>{const t=e.querySelector(":scope > .empty-placeholder"),n=e.querySelector(".component-container");if(t){e.querySelector(":scope > .component-container");t.style.display=n?"none":"block"}}))})).observe(e,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),0===e.querySelectorAll(".column-container").length)d(2);else{e.querySelectorAll(".column-container").forEach((e=>{e.style.flex="1 1 min-content",e.style.flexGrow=1})),c()}e.querySelectorAll(".column-container").forEach((e=>{this.initializeSortable(e,{group:{name:"shared-components",pull:!0,put:function(e,t,n){return!n.classList.contains("columns-wrapper")}},filter:".columns-wrapper",onMove:function(e){return!e.dragged.classList.contains("columns-wrapper")||!e.to.closest(".column-container")}})}))}setupDividerState(e){const t=e.querySelector(".divider-line"),n=e.querySelector('input[type="range"]'),a=e.querySelectorAll(".hzRuleControls i");t&&n&&a&&(n.addEventListener("input",(e=>{t.style.borderWidth=`${e.target.value}px 0 0 0`})),a.forEach((e=>{e.addEventListener("click",(()=>{const a=e.title.toLowerCase(),i=n.value;t.style.borderStyle="dotted"===a?"dotted":"double"===a?"double":"solid",t.style.borderWidth=`${i}px 0 0 0`}))})))}copyDividerState(e,t){this.setupDividerState(t)}setupCheckboxes(e){const t=e.querySelector(".checkbox-square-icon"),n=t?.querySelector(".checkbox-check-icon"),a=e.querySelector("span");t&&(t.removeEventListener("click",this._checkboxClickHandler),this._checkboxClickHandler=()=>{n&&n.classList.toggle("checked")},t.addEventListener("click",this._checkboxClickHandler)),a&&this.makeTextEditable(a)}setupDropdown(e){const t=e.querySelector(".dropdown-header"),n=e.querySelector(".selected-text"),a=e.querySelector(".fa-chevron-down, .fa-chevron-up"),i=e.querySelector(".options-container"),o=e.querySelector(".add-option-wrapper"),s=o.querySelector(".add-button");t.addEventListener("click",(()=>{i.classList.toggle("active"),a.classList.toggle("fa-chevron-up"),a.classList.toggle("fa-chevron-down")})),s.addEventListener("click",(()=>{const e=document.createElement("div");e.className="option-wrapper";const t=document.createElement("div");t.className="option",t.setAttribute("contenteditable","true"),t.textContent="New Option";const n=document.createElement("button");n.className="delete-button",n.innerHTML='<i class="fas fa-times"></i>',e.appendChild(t),e.appendChild(n),i.insertBefore(e,o),t.focus(),n.addEventListener("click",(t=>{t.stopPropagation(),e.remove()}))})),i.addEventListener("click",(e=>{const t=e.target.closest(".option");t&&(n.textContent=t.textContent)}))}setupRadios(e){let t=e.querySelector(".custom-radio"),n=t.querySelector("span"),a=e.querySelector("span:not(.radio-dot)");t.addEventListener("click",(()=>{document.querySelectorAll(".custom-radio").forEach((e=>{e.querySelector("span").style.display="none",e.style.borderColor="#e0e0e0"})),n.style.display="block",t.style.borderColor="var(--color-primary)"})),a&&(this.makeTextEditable(a),a.addEventListener("click",(e=>{e.stopPropagation()})))}resetCanvasCount(){this.state.canvasCount=0}wrapComponentInContainer(e,t,n=!1){const a=document.createElement("div");a.className="component-container",a.setAttribute("data-component-type",t);const i=document.createElement("div");i.className="selected-overlay",a.appendChild(i);const o=document.createElement("div");o.className="component-handle",o.textContent="â‹®";const s=document.createElement("button");s.className="delete-btn",s.textContent="Ã—";const r=document.createElement("button");r.className="duplicate-btn",r.setAttribute("title","clone"),r.innerHTML='<i class="fa-solid fa-clone"></i>';const l=document.createElement("div");if(l.className="component-content",l.addEventListener("mouseleave",(()=>{l.style.outline="none"})),e.closest(".component-container")){const t=e.querySelector(".component-content")?.firstElementChild;t&&l.appendChild(t.cloneNode(!0))}else e.container&&"function"==typeof e.setup?(l.appendChild(e.container),e.setup()):l.appendChild(e);if(a.append(o,s,r,l),this.setupComponentHandlers(this,a,t),this.setupImageUpload(l),this.setupIconPicker(l),this.setupInputListeners(l,t),this.setupVariantControls(a,l,t),this.setupResize(a),!n&&l.querySelector('[style*="var(--color"]')){Array.from(l.querySelectorAll('[style*="var(--color"]')).filter((e=>{const t=e.closest(".component-container");return!t||t===a})).forEach((e=>{const t=createColorSwatches(e);Array.isArray(t)?t.forEach((e=>{e&&e.children&&e.children.length>0&&a.insertBefore(e,a.firstChild)})):t&&t.children&&t.children.length>0&&a.insertBefore(t,a.firstChild)}))}return a.querySelectorAll(".resizeable").forEach((e=>resizer.makeResizable(e))),a}setupDeleteHandler(e){const t=e.querySelector(".delete-btn");t&&t.addEventListener("click",(()=>{e.classList.add("delete-animation"),setTimeout((()=>{e.remove()}),200)}))}setupComponentHandlers(e,t,n){const a=[];switch(this.setupDeleteHandler(t),this.setupDuplicateHandler(e,t,n),n){case"adjustableSpace":this.setupAdjustableSpace(t);break;case"progressBar":this.setupProgressBar(t)}t._cleanup=()=>a.forEach((e=>e()))}setupIconPicker=e=>{e.querySelectorAll(".icon-container i").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),showIconPicker(e)}))}))};setupResize(e){const t=e.querySelector("[data-placeholder]"),n=e.querySelector(".resize-handle");if(!n||!t)return;let a,i;function o(e){const n=i+(e.clientY-a);n>=80&&(t.style.height=`${n}px`)}function s(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s)}n.addEventListener("mousedown",(e=>{a=e.clientY,i=parseInt(window.getComputedStyle(t).height),document.addEventListener("mousemove",o),document.addEventListener("mouseup",s),e.preventDefault()}))}setupImageUpload(e){e.querySelectorAll(".card-image, .nav-image, .hero .card-image").forEach((t=>{const n=null!==t.closest(".hero");async function a(e){const t=e.target?.files?.[0]||e.dataTransfer?.files?.[0];if(!t||!t.type.startsWith("image/"))return;const n=new FileReader;n.onload=async e=>{i(e.target.result);try{const e=firebase.auth().currentUser;if(!e)return;const n=await firebase.firestore().collection("users").doc(e.uid).get();if(n.exists&&n.data().pro_account){const n=new ProImageStorageManager,a=projectManager.currentProject?.id;if(a){i((await n.handleImageUpload(t,a,e.uid)).url)}}}catch(e){console.error("Error handling pro image upload:",e)}},n.readAsDataURL(t)}function i(a){n?(t.style.backgroundImage=`url(${a})`,t.style.backgroundSize="cover",t.style.backgroundPosition="center",t.style.backgroundColor="transparent",t.classList.add("with-image"),t.textContent=""):(t.style.backgroundImage=`url(${a})`,t.style.position="relative",t.style.backgroundSize="cover",t.style.backgroundPosition="center",t.style.backgroundColor="transparent",t.classList.add("with-image"),t.innerHTML="");const i=e.querySelectorAll(".resizeable");i.length&&i.forEach((e=>{resizer.makeResizable(e)}))}t.addEventListener("click",(()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=a,e.click()})),["dragenter","dragover","dragleave","drop"].forEach((e=>{t.addEventListener(e,(e=>{e.dataTransfer&&e.dataTransfer.types.includes("Files")&&(e.preventDefault(),e.stopPropagation())}))})),t.addEventListener("dragenter",(e=>{if(e.dataTransfer&&e.dataTransfer.types.includes("Files")){const n=e.dataTransfer.items;Array.from(n).some((e=>"file"===e.kind&&e.type.startsWith("image/")))&&(t.style.outline="2px dashed var(--color-primary)",t.style.outlineOffset="-8px",t.style.backgroundColor="rgba(52, 152, 219, 0.1)")}})),t.addEventListener("dragleave",(()=>{t.style.outline="none",t.style.outlineOffset="0",t.style.backgroundColor="var(--neutral-gray)"})),t.addEventListener("drop",(function(e){if(function(e){e.preventDefault(),e.stopPropagation()}(e),t.style.outline="none",t.style.outlineOffset="0",t.style.backgroundColor="var(--neutral-gray)",e.dataTransfer.types.includes("Files")){const t=e.dataTransfer.items;Array.from(t).some((e=>"file"===e.kind&&e.type.startsWith("image/")))&&a(e)}}))}))}setupDuplicateHandler(e,t,n){const a=t.querySelector(".duplicate-btn");a&&a.addEventListener("click",(()=>{e.duplicateComponent(t,n)}))}duplicateComponent(e,t){const n=e.querySelector(".component-content > *"),a=this.createDuplicate(n,t,!1);if(a){e.parentNode.insertBefore(a,e.nextSibling);const n=a.querySelector(".component-content > *");n.classList.add("duplicate-animation"),setTimeout((()=>{n.classList.remove("duplicate-animation")}),200);if(a.querySelectorAll(".resize-handle").forEach((e=>e.style.display="none")),"columns"===t){const e=a.querySelector(".columns-wrapper");console.log("Columns container for setup:",{columnsContainer:e,wrappedDuplicateChildren:Array.from(a.children).map((e=>e.className))});e.querySelector(".columns-controls").style.display="none",e?this.setupColumns(e):console.error("Could not find columns-wrapper in duplicate")}}}createDuplicate(e,t,n=!1){e._cleanup&&e._cleanup();const a=n?e.cloneNode(!0).firstElementChild:this.components[t]?.(e);if(!a)return null;const i="chipGroup"===t||"graph"===t;a.querySelectorAll(".variant-controls, .color-swatch-container, .delete-btn, .duplicate-btn, .component-handle, .alignment-arrow").forEach((e=>e.remove()));const o=this.wrapComponentInContainer(a,t,i),s=o.querySelector(".component-content > *");this.copyUserModifications(e,s),"columns"===t&&this.setupColumns(o.querySelector(".columns-wrapper"));const r=o.querySelector(".align-content");if(r&&["avatar","icon"].includes(t)){const t=e.querySelector(".align-content"),n=t?.style.justifyContent||"center",a=createAlignmentControls(r);a.setAlignment(n),a.hideArrows()}if(s.querySelectorAll('[contenteditable="true"]').forEach((e=>{e.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()})),e.addEventListener("paste",(e=>{e.preventDefault();const t=(e.clipboardData||window.clipboardData).getData("text/plain");document.execCommand("insertText",!1,t)}))})),this.components[t]?.setup){this.components[t].setup(s);const n=e.querySelector(".component-content");this.setupVariantControls(e,n,t),this.setupComponentHandlers(this,n,t),this.showIconPicker(s)}const l={progressTracker:()=>this.setupProgressTracker(o),imgGallery:()=>setupImageGallery(o),chipGroup:()=>{this.setupChipGroup(o),createGroupColorSwatch(o)},tabs:()=>this.setupTabs(o),notificationBanner:()=>this.setupNotificationBanner(o),progressBar:()=>this.setupProgressBar(o),blankCard:()=>this.setupBlankCard(o),checkbox:()=>this.setupCheckboxes(o),radio:()=>this.setupRadios(o),graph:()=>{createGraphColorSwatch(o)},hzDivider:()=>this.setupDividerState(o),icon:()=>{this.setupIcon(o)},adjustableSpace:()=>{try{this.copyAdjustableSpaceState(e,o)}catch(e){console.error("Error in adjustableSpace special setup:",e)}},accordion:()=>{const e=o.querySelector(".accordion-content");e&&requestAnimationFrame((()=>{this.setupAccordionContent(e)}))}};if(l[t])try{l[t]()}catch(e){console.error(`Error in specialized setup for ${t}:`,e)}return o}specializedSetups2={bulletedList:e=>this.setupBulletedList(e)};copyUserModifications(e,t){const n=Array.from(e.querySelectorAll("[data-component-type]")),a=Array.from(t.querySelectorAll("[data-component-type]"));n.forEach(((e,t)=>{const n=e.dataset.componentType,i=a[t];if(i){const t=this.createDuplicate(e,n);i.replaceWith(t),t.closest(".component-content")&&this.specializedSetups2[n]&&this.specializedSetups2[n](t)}}))}copyAdjustableSpaceState(e,t){const n=t.querySelector(".space-range"),a=t.querySelector(".height-display"),i=e.offsetHeight;n.value=i,a.value=i,n&&a&&(n.addEventListener("input",(()=>{const e=n.value;t.style.height=`${e}px`,a.value=e})),a.addEventListener("change",(()=>{const e=a.value;t.style.height=`${e}px`,n.value=e})))}async createNewCanvas(){if(!firebase.auth().currentUser&&this.state.canvasCount>=2)return void showAuthModal("Sign In to create more screens","Signed-in designers can save projects and add more screens!");if(firebase.auth().currentUser&&this.state.canvasCount>=3){const e=async e=>{try{const t=await firebase.firestore().collection("users").doc(e.uid).get();return t.data()?.pro_account||!1}catch(e){return console.error("Error checking subscription status:",e),!1}};if(!await e(firebase.auth().currentUser))return void projectManager.showSubscriptionModal("Upgrade to Create Unlimited Screens","You've reached the limit for free screens.")}this.state.canvasCount++;const e=document.createElement("div");e.className="canvas-wrapper animate-in";const t=`canvas-${this.state.canvasCount}`,n=new Date,a=n.getHours().toString().padStart(2,"0")+":"+n.getMinutes().toString().padStart(2,"0");e.innerHTML=`\n        <div class="canvas-number-container">\n            <div class="dimension-indicator">\n                <div>\n                    <i class="fa-solid fa-mobile-screen"></i>\n                    <span class="dimensions"></span>\n                </div>\n            </div>\n            <div class="spaceHolder"></div>\n            <div class="canvas-number" >Screen ${this.state.canvasCount}</div>\n            <div>\n                <button class="delete-canvas-btn">Ã—</button>\n            </div>\n        </div>\n\n        <div class="canvas" id="${t}">\n\n            <div class="status-bar">\n                <div class="mobile-status">\n                    <span class="time">${a}</span>\n                    <div class="camera"></div>\n                    <div class="iphone-notch" style="display: none"></div>\n                    <div class="dynamic-island" style="display: none"></div>\n                    <div class="icons">\n                        <div class="icon-container">\n                        <i class="fa-solid fa-signal"></i>\n                        </div>\n                        <div class="icon-container">\n                        <i class="fa-solid fa-wifi"></i>\n                        </div>\n                        <div class="icon-container">\n                        <i style="font-size: 14px;" class="fa-solid fa-battery-full"></i>\n                        </div>\n                    </div>\n                    <div class="status-overlay" style="width: 100%; height: 28px; background-color: rgba(51, 51, 51, 0.48); z-index: -1; position: absolute; top: 0; left: 0;"></div>\n                </div>\n        \n                <div class="desktop-status" style="display: none">\n                    <div class="browser-actions">\n                        <span class="browser-dot"></span>\n                        <span class="browser-dot"></span>\n                        <span class="browser-dot"></span>\n                    </div>\n                    <div class="browser-address">\n                        <div class="icon-container">\n                        <i class="fa-solid fa-lock"></i>\n                        </div>\n                        <span contenteditable="true">dlightning.org</span>\n                    </div>\n                    <div class="icon-container" style="display: flex; gap: 8; margin-right: 28px;">\n                    <i class="fa-solid fa-circle-user"></i>\n                    </div>\n                    <div style="width: 100%; height: 28px; background-color: rgba(51, 51, 51, 0.48); z-index: -1; position: absolute; top: 0; left: 0;"></div>\n                </div>\n            </div>\n\n            <div class="phoneScrollCon">\n                <div class="canvas-content"></div>\n            </div>\n        </div>\n        \n    `;const i=e.querySelector(".canvas"),o=e.querySelector(".dimensions"),s=e.querySelector(".dimension-indicator i"),r=()=>{const{offsetWidth:t,offsetHeight:n}=i,a=i.querySelector(".status-bar"),r=a.querySelector(".mobile-status"),l=a.querySelector(".status-overlay"),c=a.querySelector(".desktop-status"),d=a.querySelector(".iphone-notch"),p=a.querySelector(".dynamic-island"),u=a.querySelector(".camera"),m=e.querySelector(".canvas-content");if(!o.matches(":focus")){o.textContent=`${t-6} Ã— ${n-6}`;const e=i.closest(".canvas-wrapper");if(e){const a=e.getAttribute("data-canvas-id");a&&projectManager&&"function"==typeof projectManager.addCanvasToChanged&&(projectManager.addCanvasToChanged(a,`Dimensions changed to ${t}x${n}`),projectManager.contentChanged=!0)}}t<480?(s.className="fa-solid fa-mobile-screen",r.style.backgroundColor="var(--color-primary)",l.style.backgroundColor="rgba(51, 51, 51, 0.48)",p.style.display="none",d.style.display="none",m.style.paddingTop="26px",m.style.minHeight="calc(100% - 100px)",i.style.borderRadius="26px",u.style.display="block",396===t&&850===n?p.style.display="block":(381===t&&673===n||420===t&&902===n||434===t&&932===n)&&(d.style.display="block")):t<1024?(s.className="fa-solid fa-tablet-screen-button",r.style.backgroundColor="transparent",l.style.backgroundColor="rgba(31, 31, 31, 0.28)",r.style.display="flex",c.style.display="none",p.style.display="none",d.style.display="none",m.style.paddingTop="0",m.style.minHeight="calc(100% - 74px)",m.firstChild.style.marginTop="-6px",i.style.borderRadius="22px",u&&(u.style.display="none")):(s.className="fa-solid fa-desktop",r.style.display="none",c.style.display="flex",p.style.display="none",d.style.display="none",m.style.paddingTop="26px",m.style.minHeight="calc(100% - 100px)",i.style.borderRadius="2px",u&&(u.style.display="none"))};o.contentEditable=!0,o.spellcheck=!1;o.addEventListener("focus",(()=>{o.dataset.original=o.textContent})),o.addEventListener("blur",(()=>{const e=(e=>{const t=e.match(/(\d+)\s*Ã—\s*(\d+)/);return t?{width:parseInt(t[1],10),height:parseInt(t[2],10)}:null})(o.textContent);if(e){const t=Math.max(160,e.width),n=Math.max(142,e.height);i.style.width=`${t}px`,i.style.height=`${n}px`,o.textContent=`${t} Ã— ${n}`}else o.textContent=o.dataset.original})),o.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),o.blur()),"Escape"===e.key&&(e.preventDefault(),o.textContent=o.dataset.original,o.blur())})),o.addEventListener("mousedown",(e=>{e.target===o&&e.stopPropagation()}));new ResizeObserver(r).observe(i),r();const l=e.querySelector(".dimension-indicator i"),c=this.createScreenSizeModal();l.addEventListener("click",(e=>{e.stopPropagation(),c.style.display="flex";c.querySelectorAll(".screen-size-option").forEach((e=>{e.onclick=()=>{const t=parseInt(e.dataset.width),n=parseInt(e.dataset.height);i.style.width=`${t}px`,i.style.height=`${n}px`,i.style.transition="height 200ms, width 200ms";const a=t-6,r=n-6;o.textContent=`${a} Ã— ${r}`,s.className=t<480?"fa-solid fa-mobile-screen":t<1024?"fa-solid fa-tablet-screen-button":"fa-solid fa-desktop",c.style.display="none",setTimeout((()=>{i.style.transition="none"}),200)}}))}));const d=document.querySelector(".add-screen-btn-con");d&&d.parentElement?d.parentElement.insertBefore(e,d):document.querySelector(".canvas-container").appendChild(e);const p=e.querySelector(".canvas");p.addEventListener("click",(e=>this.handleCanvasSelection(e)));const u=p.querySelector(".canvas-content");u&&this.initializeSortable(u),this.updateCanvasNumbers()}createScreenSizeModal(){const e=document.createElement("div");e.className="screen-size-modal",e.style.display="none";e.innerHTML=`\n        <div class="screen-size-modal-content">\n            <div class="screen-size-modal-header">\n                <h3>Standard Screen Sizes</h3>\n                <button class="screen-size-modal-close">Ã—</button>\n            </div>\n            <div class="screen-size-modal-body">\n                ${[{name:"Galaxy Z Flip",width:320,height:746,icon:"mobile-screen"},{name:"Android Small",width:360,height:640,icon:"mobile-screen"},{name:"Pixel 4",width:360,height:740,icon:"mobile-screen"},{name:"Android Average",width:360,height:800,icon:"mobile-screen"},{name:"iPhone SE",width:375,height:667,icon:"mobile-screen"},{name:"Pixel 3",width:380,height:780,icon:"mobile-screen"},{name:"iPhone 12/13/14",width:390,height:844,icon:"mobile-screen"},{name:"Pixel 6",width:412,height:915,icon:"mobile-screen"},{name:"iPhone XR/11",width:414,height:896,icon:"mobile-screen"},{name:"Pixel 7",width:420,height:933,icon:"mobile-screen"},{name:"iPhone 12/13/14 Pro Max",width:428,height:926,icon:"mobile-screen"},{name:"Galaxy Z Fold",width:468,height:832,icon:"mobile-screen"},{name:"Galaxy Tab S7",width:712,height:1138,icon:"tablet-screen-button"},{name:"iPad Mini",width:768,height:1024,icon:"tablet-screen-button"},{name:"Galaxy Tab S8",width:800,height:1280,icon:"tablet-screen-button"},{name:"iPad Air",width:820,height:1180,icon:"tablet-screen-button"},{name:'iPad Pro 11"',width:834,height:1194,icon:"tablet-screen-button"},{name:"Galaxy Tab S8+",width:880,height:1440,icon:"tablet-screen-button"},{name:'iPad Pro 12.9"',width:1024,height:1366,icon:"tablet-screen-button"},{name:"Small Desktop",width:1280,height:720,icon:"desktop"},{name:"HD Desktop",width:1366,height:768,icon:"desktop"},{name:"Full HD",width:1920,height:1080,icon:"desktop"}].map((e=>`\n                    <div class="screen-size-option" data-width="${e.width}" data-height="${e.height}">\n                        <i class="fa-solid fa-${e.icon}"></i>\n                        <div class="screen-size-info">\n                            <div class="screen-size-name">${e.name}</div>\n                            <div class="screen-size-dimensions">${e.width} Ã— ${e.height}</div>\n                        </div>\n                    </div>\n                `)).join("")}\n            </div>\n        </div>\n    `,document.body.appendChild(e),e.addEventListener("click",(t=>{t.target===e&&(e.style.display="none")}));return e.querySelector(".screen-size-modal-close").addEventListener("click",(()=>{e.style.display="none"})),e}async handleCanvasDelete(e){const t=e.target.closest(".canvas-wrapper");if(!t)return;const n=t.querySelector(".canvas"),a=Array.from(document.querySelectorAll(".canvas-wrapper")).indexOf(t)+1;if(await showConfirmDialog("Are you sure you want to delete this screen?",{heading:"Delete Current Screen",confirmText:"Delete",cancelText:"Nevermind"})){if(this.state.canvasCount--,this.state.selectedCanvases.has(n)){this.state.selectedCanvases.delete(n);const e=t.previousElementSibling?.querySelector(".canvas");e&&this.handleSingleSelect(e)}t.classList.add("delete-animation"),setTimeout((()=>{t.remove(),this.updateCanvasNumbers(),projectManager.currentProject?.id&&projectManager.handleCanvasDelete(a)}),200)}}makeTextEditable(e){e.addEventListener("click",(function(){if(e.querySelector("input"))return;const t=this.textContent,n=document.createElement("input");n.value=t,n.style.width="100%",n.style.boxSizing="border-box",n.style.font=window.getComputedStyle(this).font,e.dataset.originalText=t,this.textContent="",this.appendChild(n),n.focus(),n.select(),n.addEventListener("blur",(function(){const t=this.value||e.dataset.originalText;this.remove(),e.textContent=t})),n.addEventListener("keypress",(function(e){"Enter"===e.key&&this.blur()}))}))}insertNavbar(e,t,n){if(!(e.classList.contains("canvas")?e:e.querySelector(".canvas")))return void console.error("No canvas element found in insertNavbar");const a=e.querySelector(".canvas-content");if("top"===n){e.insertBefore(t,e.firstChild);let n=a.querySelector(".navbar-spacer");n||(n=document.createElement("div"),n.className="navbar-spacer",n.style.height="46px",n.style.width="100%",a.insertBefore(n,a.firstChild)),t.style.cssText="position: absolute; left: 0; right: 0; top: 28px;"}else"bottom"===n?(e.appendChild(t),t.style.cssText="position: absolute; left: 0; right: 0; bottom: 0;"):"left"===n?(e.appendChild(t),t.style.cssText="position: absolute; left: 0; top:0; bottom: 0; height:100%;"):e.appendChild(t)}handleCanvasSelection(e){const t=e.currentTarget;e.shiftKey?this.handleMultiSelect(t):this.handleSingleSelect(t),this.updateCanvasNumbers(),this.updateGapControls()}handleMultiSelect(e){this.state.selectedCanvases.has(e)?this.state.selectedCanvases.size>1&&(this.state.selectedCanvases.delete(e),e.classList.remove("selected")):(this.state.selectedCanvases.add(e),e.classList.add("selected"))}handleSingleSelect(e){this.state.selectedCanvases.forEach((e=>{e.classList.remove("selected")})),this.state.selectedCanvases.clear(),this.state.selectedCanvases.add(e),e.classList.add("selected")}updateGapControls(){const e=Array.from(this.state.selectedCanvases)[0];if(e){const t=e.querySelector(".canvas-content");if(t){const e=t.style.gap,n=parseInt(e)||0,a=document.querySelector('.gap-range[type="range"]'),i=document.querySelector('.gap-range[type="number"]');a&&i&&(a.value=n,i.value=n)}}}updateCanvasNumbers(){document.querySelectorAll(".canvas-number").forEach(((e,t)=>{const n=e.closest(".canvas-wrapper").querySelector(".canvas"),a=this.state.selectedCanvases.has(n);e.textContent=`Screen ${t+1}${a?" (Selected)":""}`}))}replaceRangeSliders(e){e.querySelectorAll(".custom-range-slider").forEach((e=>{const t=document.createElement("div");t.style.cssText="\n            width: 100%;\n            height: 8px;\n            border-radius: 4px;\n            background: var(--neutral-gray);\n            position: relative;\n            padding: 0 4px;\n        ";const n=document.createElement("div"),a=(e.value-e.min)/(e.max-e.min)*100;n.style.cssText=`\n            position: absolute;\n            left: 4px;\n            top: 28%;\n            height: 40%;\n            width: ${a}%;\n            background: var(--color-primary);\n            border-radius: 4px;\n        `;const i=document.createElement("div");i.style.cssText=`\n            position: absolute;\n            left: calc(${a}% - 10px);\n            top: 50%;\n            transform: translateY(-50%);\n            width: 20px;\n            height: 20px;\n            border-radius: 50%;\n            background: var(--color-primary);\n        `,t.appendChild(n),t.appendChild(i),e.parentNode.replaceChild(t,e)}))}updateButtonState(e){const t=document.getElementById("download-btn");t&&(e?(t.innerHTML='<i class="fas fa-spinner fa-spin"></i> Generating...',t.disabled=!0,t.classList.add("loading")):(t.innerHTML='<i class="fas fa-circle-down"></i>&emsp; Download PNG Image',t.disabled=!1,t.classList.remove("loading")))}async captureScreenshot(){this.animationController.disableAnimations(),this.updateButtonState(!0);const e=scale;setZoomScale(1);try{const e=Array.from(this.state.selectedCanvases).map((async(e,t)=>{const n=e.querySelector(".phoneScrollCon");if(!n)return void console.error("Phone scroll container not found");const a=n.scrollTop,i=n.scrollLeft,o=e.cloneNode(!0),s=document.createDocumentFragment(),r=document.createElement("div");r.style.cssText=`\n          position: absolute;\n          top: -9999px;\n          left: -9999px;\n          width: ${e.clientWidth+12}px;\n          height: ${e.clientHeight+12}px;\n          overflow: hidden;\n          padding: 6px;\n        `,r.appendChild(o),s.appendChild(r),document.body.appendChild(s);const l=o.querySelector(".phoneScrollCon");if(l){l.scrollTop=0,l.scrollLeft=0;const e=l.firstElementChild;e&&(e.style.transform=`translate(${-i}px, ${-a}px)`)}Object.assign(o.style,{height:`${e.clientHeight}px`,width:`${e.clientWidth}px`,overflow:"hidden",margin:"0"}),this.replaceRangeSliders(o),await new Promise((e=>requestAnimationFrame(e)));const c=await html2canvas(o,{backgroundColor:null,logging:!1,useCORS:!0,scale:window.devicePixelRatio,width:e.clientWidth+12,height:e.clientHeight+12,scrollX:-6,scrollY:-6,windowWidth:e.clientWidth+12,windowHeight:e.clientHeight+12,imageTimeout:6e4,onclone:e=>new Promise((t=>{requestAnimationFrame((()=>{const n=e.querySelector(o.tagName);if(n){const e=n.querySelector(".phoneScrollCon");if(e){e.scrollTop=0,e.scrollLeft=0;const t=e.firstElementChild;t&&(t.style.transform=`translate(${-i}px, ${-a}px)`)}}t()}))}))});if(document.body.removeChild(r),0===c.width||0===c.height)return void console.error("Rendered screen has zero dimensions");const d=document.createElement("a"),p=this.state.selectedCanvases.size>1?`Dlightning-mockup-${t+1}.png`:"Dlightning-mockup.png";d.download=p,d.href=c.toDataURL("image/png",1),d.click()}));await Promise.all(e)}catch(e){console.error("Screenshot error:",e)}finally{this.animationController.restoreAnimations(),setZoomScale(e),this.updateButtonState(!1)}}setupDownloadButton(){document.getElementById("download-btn").addEventListener("click",(()=>this.captureScreenshot()))}initOnboarding(){if(localStorage.getItem("onboardingComplete"))return;if(window.innerWidth<=768||"ontouchstart"in window||navigator.maxTouchPoints>0)return;const e=document.createElement("div");e.className="onboarding-overlay";const t=document.createElement("div");t.className="onboarding-modal";const n=[{title:'Welcome to the <span style="letter-spacing: .2rem;;">Dlightning <i style="color: var(--color-accent)" class="fas fa-bolt-lightning"></i></span> <br> Screen Builder!',content:"Create beautiful wireframes<br> in minutes",gif:null,highlight:null},{title:"Add Components",content:"Select a component from the menu-bar to add it to&nbsp;the&nbsp;screen.<br><br>",gif:"img/gifs/add-comps.gif",highlight:".component-btn"},{title:"Component Peview",content:"Preview the component before you add it to the screen. Update the component's properties and drag it to the screen.",gif:"img/gifs/drag-preview.gif",highlight:".preview-trigger"},{title:"3 Menu Tabs",content:"Switch between common interface elements, pre-built components, and the overall theme!",gif:"img/gifs/sidebar-tabs.gif",highlight:".sidebar-tabs"},{title:"View Content Full-Height",content:"Toggle the mock screen's height to show all components.<br>Click this before export to download the screen at <i>full height</i>.",gif:"img/gifs/full-height.gif",highlight:"#toggleCanvasBtn"},{title:"Add A New Screen",content:"Create multiple screens using the + button.<br>Screens can be dragged and resized or deleted.",gif:"img/gifs/add-screen.gif",highlight:".add-canvas-btn"},{title:"Export Screens",content:"When you're ready to share your work, export an image. <br> <i>Use (shift + click) to select multiple screens at once</i>",gif:"img/gifs/export-screens.gif",highlight:"#download-btn"},{title:"Choose A Starting Template",content:" ",highlight:null,isTemplateStep:!0}];let a=localStorage.getItem("onboardingComplete")?n.length-1:0;function i(e){if(n[e].isTemplateStep?t.innerHTML=`\n                <h2 style="color: var(--basic-txt-color); margin-top: 0;">${n[e].title}</h2>\n                <p style="color: #475152; font-size: 16px;">${n[e].content}</p>\n                <div class="templates" style="display: flex; gap: 16px; margin: 20px 0;">\n                    <button onclick="selectTemplate('template1')">\n                        <h3 style="margin-top: 0;">Profile Template</h3>\n                        <hr>\n                        <p style="color: var(--basic-txt-color)">Image, Avatar, Pills, and Paragraph <br><br></p>\n                    </button>\n                    <button onclick="selectTemplate('template2')">\n                        <h3 style="margin-top: 0;">Content Template</h3>\n                        <hr>\n                        <p style="color: var(--basic-txt-color)">Hero, Heading, Accordion, and Footer</p>\n                    </button>\n                    <button onclick="selectTemplate('template3')">\n                        <h3 style="margin-top: 0;">Form Template</h3>\n                        <hr>\n                        <p style="color: var(--basic-txt-color)">Heading, Form Elements, Submit Button</p>\n                    </button>\n                    <button onclick="selectTemplate('blank')">\n                        <h3 style="margin-top: 0;">Blank Screen</h3>\n                        <br><br><br><br><br><br><br>\n                    </button>\n                </div>\n                <div class="onboarding-nav" >\n                    <button onclick="prevStep()" style="padding: 10px 14px; background: #ecf0f1; border: none; border-radius: 5px; cursor: pointer; margin-right: 45px;"><i class="fas fa-arrow-left"></i></button>\n                     <button onclick="${e===n.length-1?"completeOnboarding()":"nextStep()"}" style="padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer;">\n                            ${e===n.length-1?"Skip":"Next"}\n                        </button>\n                </div>\n            `:t.innerHTML=`\n                <div style="display: flex; gap: 24px;">\n                    <div>\n                    <h2 style="color: var(--basic-txt-color); margin-top: 0;">${n[e].title}</h2>\n                    <p style="color: #7f8c8d; font-size: 16px;">${n[e].content}</p>\n                    ${n[e].gif?`<img loading="lazy" src="${n[e].gif}" style="width: 100%; border-radius: 5px; border: 1px solid #e1e8ea;">`:""}\n                    </div>\n                    ${e>0?"":" \n                    <div>\n                        <img width=\"140px\" src='img/products/BHandH.png'>\n                    </div>"}\n                </div>\n                <div class="onboarding-nav">\n                    ${e>0?'\n                        <button onclick="prevStep()" style="padding: 10px 14px; background: #ecf0f1; border: none; border-radius: 5px; cursor: pointer;"><i class="fas fa-arrow-left"></i></button>\n                    ':'<button onclick="prevStep()" style="padding: 10px 14px; background: var(--neutral-gray); border: none; opacity: 0.46; border-radius: 5px; cursor: not-allowed;" disabled><i class="fas fa-arrow-left"></i></button>'}\n                    <div style="display: flex; align-items: center;">\n                        ${n.map(((t,n)=>`\n                            <div class="onboarding-dot ${n===e?"active":""}" onclick="goToStep(${n})"></div>\n                        `)).join("")}\n                    </div>\n                    <div style="display: flex; gap: 10px;">\n                        <button onclick="completeOnboarding()" style="padding: 10px 20px; background: #95a5a6; color: white; border: none; border-radius: 5px; cursor: pointer;">\n                            Skip Tutorial\n                        </button>\n                        <button onclick="${e===n.length-1?"completeOnboarding()":"nextStep()"}" style="padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer;">\n                            ${e===n.length-1?"Get Started":"Next"}\n                        </button>\n                    </div>\n                </div>\n            `,document.querySelectorAll(".highlight-element").forEach((e=>e.remove())),n[e].highlight){const t=document.querySelector(n[e].highlight);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((()=>{const e=t.getBoundingClientRect(),n=document.createElement("div");n.className="highlight-element",n.style.cssText=`\n                        position: fixed;\n                        top: ${e.top-6}px;\n                        left: ${e.left-6}px;\n                        width: ${e.width+8}px;\n                        height: ${e.height+8}px;\n                        border: 2px solid #3498db;\n                        border-radius: 4px;\n                        pointer-events: none;\n                        z-index: 10000;\n                        animation: pulse .8s 2;\n                    `,document.body.appendChild(n)}),500))}}window.nextStep=function(){a<n.length-1&&(a++,i(a))},window.prevStep=function(){a>0&&(a--,i(a))},window.goToStep=function(e){a=e,i(a)},window.completeOnboarding=function(){localStorage.setItem("onboardingComplete","true"),e.remove(),document.querySelectorAll(".highlight-element").forEach((e=>e.remove()))};const o="This is a paragraph, click to edit it directly.",s="Hover over any component to reveal customization options. Use the â‹® handle on the left to drag components into a new order or to another screen. The red 'x' on the right deletes the component, and the button at the bottom duplicates them. Each element has unique features to explore!";window.selectTemplate=e=>{const t=document.querySelector(".canvas-content");t.innerHTML="","template1"===e?[{component:this.components.adjustableSpace(),type:"adjustableSpace"},{component:this.components.image(),type:"image"},{component:this.components.avatar(),type:"avatar"},{component:this.components.chipGroup(),type:"chipGroup"},{component:this.components.heading(),type:"heading"},{component:this.components.paragraph(null,o),type:"paragraph"},{component:this.components.paragraph(null,s),type:"paragraph"}].forEach((({component:e,type:n})=>{t.appendChild(this.wrapComponentInContainer(e,n))})):"template2"===e?[{component:this.components.hero(),type:"hero"},{component:this.components.heading(),type:"heading"},{component:this.components.paragraph(null,o),type:"paragraph"},{component:this.components.paragraph(null,s),type:"paragraph"},{component:this.components.icon(),type:"icon"},{component:this.components.accordion(),type:"accordion"},{component:this.components.adjustableSpace(),type:"adjustableSpace"},{component:this.components.footer(),type:"footer"}].forEach((({component:e,type:n})=>{t.appendChild(this.wrapComponentInContainer(e,n))})):"template3"===e&&[{component:this.components.heading(),type:"heading"},{component:this.components.paragraph(null,o),type:"paragraph"},{component:this.components.label(),type:"label"},{component:this.components.input(),type:"input"},{component:this.components.label(),type:"label"},{component:this.components.textarea(),type:"textarea"},{component:this.components.label(),type:"label"},{component:this.components.dropdown(),type:"dropdown"},{component:this.components.label(),type:"label"},{component:this.components.checkbox(),type:"checkbox"},{component:this.components.checkbox(),type:"checkbox"},{component:this.components.checkbox(),type:"checkbox"},{component:this.components.adjustableSpace(),type:"adjustableSpace"},{component:this.components.button(),type:"button"}].forEach((({component:e,type:n})=>{t.appendChild(this.wrapComponentInContainer(e,n))})),localStorage.setItem("onboardingComplete","true"),document.querySelector(".onboarding-overlay").remove();const n=document.querySelector(".sidebar");n&&n.scrollTo({top:0,behavior:"smooth"})},e.appendChild(t),document.body.appendChild(e),setTimeout((()=>{e.classList.add("visible"),i(a)}),100)}components={hero:e=>{let t;return e?(t=e.cloneNode(!0),t):(t=document.createElement("div"),t.className="fw",t.innerHTML=setupVariants("hero")[0],t)},sidebar:e=>{const t=(e="bolt-lightning",t="New Item")=>{const n=document.createElement("div");n.className="sidebar-nav-item";const a=document.createElement("i");a.className=`fas fa-${e} icon-container`,a.style.cssText="\n                width: 20px;\n                text-align: center;\n                color: var(--color-primary);\n            ";const i=document.createElement("span");i.textContent=t,i.setAttribute("contenteditable","true"),i.style.flex="1";const o=document.createElement("button");return o.className="nav-item-delete",o.innerHTML="Ã—",n.addEventListener("mouseenter",(()=>{n.style.outline="2px solid var(--neutral-gray)",o.style.display="block",setTimeout((()=>o.style.opacity="1"),0)})),n.addEventListener("mouseleave",(()=>{n.style.outline="none",o.style.opacity="0"})),o.addEventListener("click",(e=>{e.stopPropagation(),n.classList.add("delete-animation"),setTimeout((()=>n.remove()),200)})),a.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),showIconPicker(a)})),n.appendChild(a),n.appendChild(i),n.appendChild(o),n};let n;if(e)return n=e.cloneNode(!0),n;n=document.createElement("div"),n.className="sidebar-container";const a=document.createElement("div");a.className="sidebar-panel";const i=document.createElement("button");i.className="sidebar-toggle",i.innerHTML='<i class="fas fa-chevron-left"></i>';const o=document.createElement("div");o.className="sidebar-header";const s=document.createElement("div");s.className="card-image ui-sidebar-avatar",s.innerHTML='<i class="fas fa-image" style="color: var(--placeholder-color);"></i>';const r=document.createElement("button");r.className="delete-btn",r.textContent="Ã—",n.appendChild(r),this.setupDeleteHandler(n);const l=document.createElement("h3");l.textContent="Sidebar Title",l.style.cssText="\n            margin: 0;\n            color: var(--basic-txt-color);\n        ",l.setAttribute("contenteditable","true"),o.appendChild(s),o.appendChild(l);const c=document.createElement("div");c.className="sidebar-nav";[{icon:"home",text:"Home"},{icon:"user",text:"Profile"},{icon:"cog",text:"Settings"},{icon:"envelope",text:"Messages"}].forEach((e=>{const n=document.createElement("div");n.className="icon-container",n.appendChild(t(e.icon,e.text)),c.appendChild(n)}));const d=document.createElement("div");d.className="sidebar-add-btn",d.innerHTML='<i class="fas fa-plus"></i> Add Item',n.addEventListener("mouseenter",(()=>{d.style.display="flex"})),n.addEventListener("mouseleave",(()=>{d.style.display="none"})),d.addEventListener("click",(()=>{c.appendChild(t())}));const p=document.createElement("div");p.className="sidebar-footer";const u=document.createElement("div");u.className="card-image ui-sidebar-user",u.innerHTML='<i class="fas fa-user" style="color: var(--placeholder-color);"></i>';const m=document.createElement("div");m.style.flex="1";const h=document.createElement("div");h.textContent="Display Name",h.style.fontWeight="500",h.style.color="var(--basic-txt-color)",h.setAttribute("contenteditable","true");const v=document.createElement("div");v.textContent="Role",v.style.cssText="font-size: 12px; color: #666;",v.setAttribute("contenteditable","true"),m.appendChild(h),m.appendChild(v);const g=document.createElement("div");g.className="icon-container";const y=document.createElement("i");y.className="fas fa-ellipsis-v",y.style.cssText="\n            color: var(--color-primary);\n            cursor: pointer;\n            padding: 8px;\n        ",g.appendChild(y),p.appendChild(u),p.appendChild(m),p.appendChild(g),a.appendChild(i),a.appendChild(o),a.appendChild(c),a.appendChild(d),a.appendChild(p);let b=!1;return i.addEventListener("click",(()=>{b=!b,b?(a.style.transform="translateX(-182px)",i.style.transform="translateY(-50%) rotate(180deg)",n.style.width="8px"):(a.style.transform="translateX(0)",i.style.transform="translateY(-50%) rotate(0deg)",n.style.width="240px")})),n.appendChild(a),this.setupImageUpload(n),n},button(e){let t;return e?t=e.cloneNode(!0):(t=document.createElement("div"),t.style.cssText="width: 100%; display: flex; justify-content: space-between; gap: 14px;",t.innerHTML=setupVariants("button")[0],t.classList.add("componentButton")),t.querySelectorAll(".button").forEach((e=>{e.setAttribute("contentEditable","true"),e.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()})),e.addEventListener("paste",(e=>{e.preventDefault();const t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)}))})),t},blankCard:e=>{let t;return e?(t=e.cloneNode(!0),this.setupBlankCard(t)):(t=document.createElement("div"),t.className="blank-card-container",t.style.cssText="width: 100%; position: relative;",t.innerHTML=setupVariants("blankCard")[0],t.classList.add("blankCard")),this.setupBlankCard(t),t},input(e){let t;if(e){t=e.cloneNode(!0);const n=t.querySelector('[contenteditable="true"]');return n&&(n.addEventListener("input",(function(){""===this.textContent.trim()?this.classList.add("empty"):this.classList.remove("empty")})),n.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()})),n.addEventListener("paste",(e=>{e.preventDefault();const t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)}))),t}t=document.createElement("div"),t.style.cssText="width: 100%;",t.innerHTML=setupVariants("input")[0];const n=t.querySelector('[contenteditable="true"]');if(n&&n.addEventListener("input",(function(){""===this.textContent.trim()?this.classList.add("empty"):this.classList.remove("empty")})),!document.querySelector("style[data-input-placeholder]")){const e=document.createElement("style");e.setAttribute("data-input-placeholder","true"),e.textContent="\n            [contenteditable=true].empty:before {\n            content: attr(data-placeholder);\n            color: #999;\n            cursor: text;\n            padding-left: 4px;\n            }\n        ",document.head.appendChild(e)}return t.classList.add("empty"),t.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()})),t.addEventListener("paste",(e=>{e.preventDefault();const t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)})),t},searchBar(e){let t;if(e&&(t=e.cloneNode(!0)),t=document.createElement("div"),t.style.cssText="width: 100%;",t.innerHTML=setupVariants("searchBar")[0],!document.querySelector("style[data-search-placeholder]")){const e=document.createElement("style");e.setAttribute("data-search-placeholder","true"),e.textContent="\n                [contenteditable=true].empty:before {\n                    content: attr(data-placeholder);\n                    color: #999;\n                    cursor: text;\n                    padding-left: 4px;\n                }\n            ",document.head.appendChild(e)}const n=t.querySelector('[contenteditable="true"]');return n&&(n.classList.add("empty"),n.addEventListener("input",(function(){""===this.textContent.trim()?this.classList.add("empty"):this.classList.remove("empty")})),n.addEventListener("keypress",(e=>{"Enter"===e.key&&e.preventDefault()})),n.addEventListener("paste",(e=>{e.preventDefault();const t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)}))),t},textarea(e){let t;if(e){t=e.cloneNode(!0);t.querySelector('[contenteditable="true"]'),t.querySelector(".resize-handle");return t}t=document.createElement("div"),t.style.cssText="width: 100%; position: relative;";const n=document.createElement("div");if(n.innerHTML=setupVariants("textarea")[0],!document.querySelector("style[data-textarea-placeholder]")){const e=document.createElement("style");e.setAttribute("data-textarea-placeholder","true"),e.textContent="\n            [contenteditable=true].empty:before {\n            content: attr(data-placeholder);\n            color: #999;\n            cursor: text;\n            }\n        ",document.head.appendChild(e)}return n.querySelector('[contenteditable="true"]').addEventListener("input",(function(){""===this.textContent.trim()?this.classList.add("empty"):this.classList.remove("empty")})),n.addEventListener("paste",(e=>{e.preventDefault();const t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)})),t.appendChild(n),t},checkbox:e=>{let t,n,a,i;return e?(t=e.cloneNode(!0),n=t.querySelector(".checkbox-square-icon"),a=n.querySelector(".checkbox-check-icon"),i=t.querySelector("span"),this.setupCheckboxes(t),t):(t=document.createElement("div"),t.className="custom-checkbox-wrapper",n=document.createElement("div"),n.className="fa-regular fa-square checkbox-square-icon",a=document.createElement("i"),a.className="fa-solid fa-square-check checkbox-check-icon",a.style.color="var(--color-primary)",n.appendChild(a),i=document.createElement("span"),i.textContent="click to edit",i.style.cssText="font-size: 16px; color: var(--basic-txt-color)",t.appendChild(n),t.appendChild(i),this.setupCheckboxes(t),t)},radio:e=>{let t,n,a,i,o;return e?(t=e.cloneNode(!0),this.setupRadios(t),t):(t=document.createElement("div"),t.className="radio-wrapper",n=document.createElement("label"),n.className="radio-label",a=document.createElement("div"),a.className="radio-outer-circle",a.classList.add("custom-radio"),i=document.createElement("span"),i.className="radio-dot",i.style.cssText="\n            background-color: var(--color-primary);\n        ",a.appendChild(i),o=document.createElement("span"),o.textContent="click to edit",o.style.cssText="color: var(--basic-txt-color);",t.appendChild(n),n.appendChild(a),t.appendChild(o),this.setupRadios(t),t)},dropdown:e=>{let t;if(e)t=e.cloneNode(!0);else{t=document.createElement("div"),t.className="custom-dropdown-container";const e=document.createElement("div");e.className="dropdown-header";const n=document.createElement("div");n.className="selected-text",n.textContent="Dropdown";const a=document.createElement("i");a.className="fas fa-chevron-down";const i=document.createElement("div");i.className="options-container";const o=document.createElement("div");o.className="add-option-wrapper";const s=document.createElement("button");s.className="add-button",s.innerHTML='<i class="fas fa-plus"></i> Add Option',o.appendChild(s),["Option 1","Option 2"].forEach((e=>{i.appendChild((e=>{const t=document.createElement("div");t.className="option-wrapper";const n=document.createElement("div");n.className="option",n.setAttribute("contenteditable","true"),n.textContent=e;const a=document.createElement("button");return a.className="delete-button",a.innerHTML='<i class="fas fa-times"></i>',t.appendChild(n),t.appendChild(a),t})(e))})),e.appendChild(n),e.appendChild(a),t.appendChild(e),t.appendChild(i),i.appendChild(o)}return this.setupDropdown(t),t},icon(e){let t;if(e)t=e.cloneNode(!0);else{t=document.createElement("div"),t.classList="iconContainerClass align-content";const e=document.createElement("i");e.className="fa-solid fa-bolt-lightning icon-container",e.style.cssText="\n                color: var(--color-accent);\n                font-size: 24px;\n            ",t.appendChild(e)}const n=t.querySelector("i")||t.firstChild,a=createAlignmentControls(t);t.iconAlignment=a;let i=t.querySelector("input.iconControls");if(i||(i=document.createElement("input"),i.classList.add("iconControls"),i.type="number",i.min="12",i.max="96",i.value="24",t.appendChild(i)),n){try{let e=window.getComputedStyle(n).fontSize||n.style.fontSize;const t=parseInt(e,10)||24;i.value=t}catch(e){console.warn("Could not get font size from icon element:",e),i.value=24}i.addEventListener("input",(e=>{n.style.fontSize=`${e.target.value}px`})),n.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(n)}))}else console.warn("No icon element found in iconContainer");return t},card(e){let t;return e?t=e.cloneNode(!0):(t=document.createElement("div"),t.innerHTML=setupVariants("card")[0],t.classList.add("componentCard")),t.querySelectorAll("h3, p").forEach((e=>{e.setAttribute("contentEditable","true")})),t},card2(e){let t;return e?t=e.cloneNode(!0):(t=document.createElement("div"),t.innerHTML=setupVariants("card2")[0],t.classList.add("componentCard")),t.querySelectorAll("h3, p").forEach((e=>{e.setAttribute("contentEditable","true")})),t},listItem:e=>{let t;return e?t=e.cloneNode(!0):(t=document.createElement("div"),t.style.cssText="width: 100%;",t.innerHTML=setupVariants("listItem")[0]),t},adjustableSpace:e=>{let t;if(e){t=e.cloneNode(!0);const n=t.querySelector(".space-range"),a=t.querySelector(".height-display");n&&a&&(n.addEventListener("input",(()=>{const e=n.value;t.style.height=`${e}px`,a.value=e})),a.addEventListener("change",(()=>{const e=a.value;t.style.height=`${e}px`,n.value=e})))}else{t=document.createElement("div"),t.classList.add("blankSpace"),t.style.height="28px";const e=document.createElement("input");e.type="number",e.classList.add("height-display"),e.value="28",e.min="1",e.style.fontSize="16px",e.style.zIndex="99999";const n=document.createElement("input");n.className="space-range",n.type="range",n.min="4",n.max="300",n.value="28",n.style.width="100%";const a=document.createElement("div");a.classList="empty-placeholder fa-solid fa-arrows-alt-v",n.addEventListener("input",(()=>{const a=n.value;t.style.height=`${a}px`,e.value=a})),e.addEventListener("change",(()=>{const a=e.value;t.style.height=`${a}px`,n.value=a})),t.appendChild(e),t.appendChild(n),t.appendChild(a)}return t},image(e){let t;return e?t=e.cloneNode(!0):(t=document.createElement("div"),t.classList.add("non-editable"),t.className="ui-image-con",t.innerHTML=setupVariants("image")[0]),t},imgGallery(e){let t;if(e)return t=e.cloneNode(!0),t;t=document.createElement("div"),t.className="image-gallery-con";const n=document.createElement("div");n.className="ig-left-column-con";const a=document.createElement("div");a.className="ig-right-column-con";const i=()=>{const e=document.createElement("div");e.className="ig-image-wrapper";const t=document.createElement("div");t.classList="card-image resizeable ig-img-box",t.innerHTML='\n                <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                <span style="color: var(--basic-txt-color)" class="imgMsg non-editable">Click to add image</span>\n                ',resizer.makeResizable(t);const n=document.createElement("button");return n.innerHTML="Ã—",n.className="gallery-image-delete-btn",n.classList.add("non-editable"),n.onclick=()=>e.remove(),n.addEventListener("click",(e=>e.stopPropagation())),e.appendChild(n),n.addEventListener("mouseenter",(()=>e.style.outline="1px solid var(--error-danger-delete)")),n.addEventListener("mouseleave",(()=>e.style.outline="none")),e.appendChild(t),e};n.appendChild(i()),a.appendChild(i()),n.appendChild(i()),a.appendChild(i()),t.appendChild(n),t.appendChild(a),new Sortable(n,{animation:150,group:"imgGal"}),new Sortable(a,{animation:150,group:"imgGal"});const o=(()=>{const e=document.createElement("button");return e.classList="fa fa-plus ig-add-btn",e})();return t.appendChild(o),setupImageGallery(t),t},navbar:e=>{const t=document.createElement("div");t.className="navContain",t.innerHTML=setupVariants("navbar")[0];const n=document.createElement("button");return n.className="delete-btn",n.textContent="Ã—",t.appendChild(n),this.setupNavbar(t),t},alert:e=>{let t;return e?(t=e.cloneNode(!0),t.querySelectorAll("span").forEach((e=>{e.setAttribute("contentEditable","true")}))):(t=document.createElement("div"),t.style.cssText="width: 100%",t.innerHTML=setupVariants("alert")[0],t.querySelectorAll("span").forEach((e=>{e.setAttribute("contentEditable","true")}))),t},modal:()=>{const e=document.createElement("div");e.className="modal-wrapper",e.style.cssText="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.6); display: flex; justify-content: center; align-items: center; z-index: 991; height: 100%; flex-direction: column;";const t=document.createElement("div");t.style.cssText="width: calc(100% - 46px); max-width: 400px; display: flex; justify-content: flex-end; padding: 8px;";const n=document.createElement("div");n.innerHTML="&times;",n.style.cssText="font-size: 30px; color: white; cursor: pointer;",t.appendChild(n);const a=document.createElement("div");return a.className="ui-modal",a.innerHTML='\n                <h2 contenteditable="true" style="margin-top: 0; color: var(--basic-txt-color);">Modal Title</h2>\n                <p contenteditable="true" style="color: #7f8c8d;">This is the modal content. You can add any information here.</p>\n                <div style="text-align: right;">\n                    <div contenteditable="true" class="modal-ok-btn">OK</div>\n                </div>\n            ',e.appendChild(t),e.appendChild(a),this.setupModal(e),e},toggleSwitch:()=>{const e=document.createElement("div");e.className="toggle-switch-container";const t=document.createElement("span");t.textContent="Off",t.style.cssText="margin-right: 10px; cursor: pointer;",t.setAttribute("contenteditable","true");const n=document.createElement("div");n.className="toggle-switch";const a=document.createElement("div");a.className="toggle-slider round",a.style.cssText="background-color: var(--color-primary);";const i=document.createElement("div");i.className="toggle-thumb round";const o=document.createElement("span");o.textContent="On",o.style.cssText="margin-left: 10px; cursor: pointer;",o.setAttribute("contenteditable","true");let s=!0;const r=()=>{s=!s,s?(a.style.backgroundColor="var(--color-primary)",i.style.left="30px"):(a.style.backgroundColor="var(--neutral-gray)",i.style.left="4px")};return a.appendChild(i),n.appendChild(a),n.addEventListener("click",r),t.addEventListener("click",(()=>{s=!0,r()})),o.addEventListener("click",(()=>{s=!1,r()})),e.appendChild(t),e.appendChild(n),e.appendChild(o),e},progressBar:e=>{let t;return e?t=e.cloneNode(!0):(t=document.createElement("div"),t.className="fw",t.style.textAlign="center",t.innerHTML=setupVariants("progressBar")[0]),this.setupProgressBar(t),t},avatar(e){const t=document.createElement("div");t.className="avatar-container align-content",t.innerHTML=e?e.innerHTML:setupVariants("avatar")[0];const n=createAlignmentControls(t);return t.alignmentControls=n,t},tabs:e=>{let t;if(e)return t=e.cloneNode(!0),this.setupTabs(t),t;{t=document.createElement("div"),t.className="tabs-container";const e=document.createElement("div");e.className="tabs-wrapper",e.style.cssText="display: flex; width: 100%;";const n=document.createElement("div");n.className="tabs-controls";const a=document.createElement("button");a.textContent="+",a.className="tabs-add-btn";const i=document.createElement("button");i.textContent="-",i.className="tabs-remove-btn";for(let t=1;t<=2;t++){const n=document.createElement("div");n.textContent=`Tab ${t}`,n.setAttribute("contentEditable","true"),n.className="ui-tab usa",n.style.cssText=`\n                    background-color: ${1===t?"var(--color-primary)":"var(--neutral-gray)"};\n                    color: ${1===t?"white":"var(--basic-txt-color)"};\n                `,1===t&&n.classList.add("selected"),e.appendChild(n)}n.appendChild(i),n.appendChild(a),t.appendChild(e),t.appendChild(n)}return this.setupTabs(t),t},accordion:e=>{if(e){const t=e.cloneNode(!0),n=t.querySelector(".accordion-content");return requestAnimationFrame((()=>{this.setupAccordionContent(n)})),t}const t=document.createElement("div");t.className="accordion-container",t.style.cssText="border: .12rem solid var(--color-primary)",t.innerHTML='\n        <button class="accordion-header" style="background-color: var(--color-primary);">\n            <span contenteditable="true" class="usa">Section Title</span>\n            <i class="fas fa-chevron-down" style="transition: transform 0.2s ease;"></i>\n        </button>\n        <div class="accordion-content">\n            <div class="placeholder" style="padding: 18px 0;">\n                <div>\n                    <span class="non-editable" style="margin: 0 24px; color: #666; text-align: center;">drag & drop components here.</span>\n                </div>\n            </div>\n        </div>\n    ';const n=t.querySelector(".accordion-content");return this.setupAccordionContent(n),t},slider:e=>{if(e){const t=e.cloneNode(!0),n=t.querySelector("input"),a=t.querySelector(".range-value");return n.addEventListener("input",(()=>{a.textContent=n.value})),t}const t=document.createElement("div");t.className="range-slider-container";const n=document.createElement("input");n.type="range",n.min="0",n.max="100",n.value="50",n.className="custom-range-slider",n.style.flex="1";const a=document.createElement("span");return a.className="range-value",a.textContent="50",t.appendChild(n),t.appendChild(a),n.addEventListener("input",(()=>{a.textContent=n.value})),t},datePicker:e=>{let t,n,a,i;if(e)return t=e.cloneNode(!0),n=t.querySelector("span"),a=t.querySelector("i"),i=t.querySelector(".date-picker-calendar-con"),this.setupDatePicker(t,n,a,i),t;t=document.createElement("div"),t.className="date-picker-wrapper",n=document.createElement("span"),n.textContent="DD/MM/YYYY",n.style.cssText="opacity: 0.7;",n.setAttribute("contenteditable","true"),n.setAttribute("spellcheck","false"),a=document.createElement("i"),a.className="fas fa-calendar-alt date-picker-icon",a.style.color="var(--color-primary)",i=document.createElement("div"),i.className="date-picker-calendar-con";const o=document.createElement("div");o.className="date-picker-month-text",o.textContent="January",o.setAttribute("contenteditable","true");const s=document.createElement("div");s.className="date-picker-year-text",s.textContent="2025",s.setAttribute("contenteditable","true");const r=document.createElement("div");r.className="date-picker-days-grid";for(let e=1;e<=31;e++){const t=document.createElement("span");t.textContent=e,t.className="date-picker-day-cell",r.appendChild(t)}return i.append(o,s,r),t.append(n,a,i),this.setupDatePicker(t,n,a,i),t},fileUpload:e=>{let t,n,a,i;if(e)return t=e.cloneNode(!0),n=t.querySelector('input[type="file"]'),a=t.querySelector("label"),i=t.querySelector(".file-preview-container"),o(),t;function o(){const e=["image/jpeg","image/png","image/gif","image/webp"];function t(t){const n=document.createElement("div");n.className="file-upload-preview-card";const a=document.createElement("div");if(a.className="file-upload-preview-card-content",e.includes(t.type)){const e=document.createElement("img");e.className="file-upload-preview-img";const n=new FileReader;n.onload=t=>e.src=t.target.result,n.readAsDataURL(t),a.appendChild(e)}else{const e=document.createElement("i");e.className="fas fa-file",e.style.cssText="\n                        font-size: 40px;\n                        color: var(--color-primary);\n                    ",a.appendChild(e)}const i=document.createElement("div");i.textContent=t.name.length>15?t.name.substring(0,12)+"...":t.name,i.className="file-upload-preview-filename",a.appendChild(i);const o=document.createElement("div");o.textContent=(t.size/1048576).toFixed(2)+" MB",o.style.cssText="\n                    font-size: 9px;\n                    color: #666;\n                ",a.appendChild(o);const s=document.createElement("button");return s.innerHTML="Ã—",s.className="file-upload-preview-delete-btn",s.onclick=()=>n.remove(),n.appendChild(a),n.appendChild(s),n.addEventListener("mouseenter",(()=>s.style.display="block")),n.addEventListener("mouseleave",(()=>s.style.display="none")),n}n.addEventListener("change",(()=>{i.innerHTML="",Array.from(n.files).forEach((e=>{i.appendChild(t(e))}))})),a.addEventListener("click",(()=>{n.click()})),["dragenter","dragover","dragleave","drop"].forEach((e=>{a.addEventListener(e,(e=>{e.preventDefault(),e.stopPropagation()}))})),a.addEventListener("dragenter",(()=>{a.style.backgroundColor="rgba(0, 0, 0, 0.02)",a.style.borderColor="var(--color-primary)",a.innerHTML='<i class="fas fa-cloud-upload-alt"><br><br></i>'})),a.addEventListener("dragleave",(()=>{a.style.backgroundColor="var(--input-bg-color)",a.style.borderColor="var(--neutral-gray)",a.innerHTML='<span><i class="fas fa-cloud-upload-alt"></i> Drop files here or click to upload</span>'})),a.addEventListener("drop",(e=>{a.style.backgroundColor="var(--input-bg-color)",a.style.borderColor="var(--neutral-gray)";const o=e.dataTransfer.files;n.files=o,i.innerHTML="",Array.from(o).forEach((e=>{i.appendChild(t(e))}))}))}return t=document.createElement("div"),t.className="file-upload-container",n=document.createElement("input"),n.type="file",n.class="file-upload-input",n.multiple=!0,a=document.createElement("label"),a.htmlFor="file-upload",a.className="file-upload-label",a.innerHTML='<span><i class="fas fa-cloud-upload-alt"></i> Drop files here or click to upload</span>',i=document.createElement("div"),i.className="file-preview-container",t.appendChild(n),t.appendChild(a),t.appendChild(i),o(),t},bottomNav:()=>{const e=document.createElement("nav");e.className="bottomNavContain max-items";const t=document.createElement("div");t.className="shadow-div";const n=document.createElement("div");n.className="bottomNav bottom-navbar",n.innerHTML='\n                <div class="nav-item-container">\n                    <button class="nav-delete-btn">Ã—</button>\n                    <div class="bottom-nav-item">\n                        <i class="fas fa-home" ></i>\n                        <span class="usa" contenteditable="true">Home</span>\n                    </div>\n                </div>\n                <div class="nav-item-container">\n                    <button class="nav-delete-btn">Ã—</button>\n                    <div class="bottom-nav-item">\n                        <i class="fas fa-search"></i>\n                        <span class="usa" contenteditable="true">Search</span>\n                    </div>\n                </div>\n                <div class="nav-item-container">\n                    <button class="nav-delete-btn">Ã—</button>\n                    <div class="bottom-nav-item">\n                        <i class="fas fa-plus"></i>\n                        <span class="usa" contenteditable="true">Add</span>\n                    </div>\n                </div>\n                <div class="nav-item-container">\n                    <button class="nav-delete-btn">Ã—</button>\n                    <div class="bottom-nav-item">\n                        <i class="fas fa-heart"></i>\n                        <span class="usa" contenteditable="true">Like</span>\n                    </div>\n                </div>\n                <div class="nav-item-container">\n                    <button class="nav-delete-btn">Ã—</button>\n                    <div class="bottom-nav-item">\n                        <i class="fas fa-user"></i>\n                        <span class="usa" contenteditable="true">Profile</span>\n                    </div>\n                </div>\n                <button class="nav-add-btn"><i class="fas fa-plus"></i>&nbsp; Nav Item</button>\n            ',n.querySelectorAll(".nav-delete-btn").forEach((t=>{t.addEventListener("click",(function(){n.querySelectorAll(".nav-item-container").length>1&&(this.closest(".nav-item-container").remove(),i(e))}))}));const a=n.querySelector(".nav-add-btn");function i(e){e.querySelectorAll(".nav-item-container").length>=5?e.classList.add("max-items"):e.classList.remove("max-items")}a.addEventListener("click",(()=>{if(n.querySelectorAll(".nav-item-container").length<5){const t=document.createElement("div");t.className="nav-item-container",t.innerHTML='\n                        <button class="nav-delete-btn">Ã—</button>\n                        <div class="bottom-nav-item">\n                            <i class="fa-solid fa-bolt-lightning"></i>\n                            <span class="usa" contenteditable="true">New</span>\n                        </div>\n                    ',t.querySelector(".nav-delete-btn").addEventListener("click",(function(){n.querySelectorAll(".nav-item-container").length>1&&(this.closest(".nav-item-container").remove(),i(e))})),t.querySelector("i").addEventListener("click",(e=>{e.preventDefault(),showIconPicker(e.target)}));const o=t.querySelector(".nav-delete-btn");o.addEventListener("mouseenter",(()=>{o.closest(".nav-item-container").style.outline="1px solid #aa2d1f"})),o.addEventListener("mouseleave",(()=>{o.closest(".nav-item-container").style.outline="none"})),n.insertBefore(t,a),i(e)}}));const o=document.createElement("button");return o.className="delete-btn",o.textContent="Ã—",e.appendChild(o),this.setupDeleteHandler(e),n.querySelectorAll(".nav-item-container i").forEach((e=>{e.style.cursor="pointer",e.addEventListener("click",(t=>{t.preventDefault(),showIconPicker(e)}))})),e.appendChild(t),e.appendChild(n),e},heading(e,t="h1",n="Heading"){const a=["h1","h2","h3","h4","h5","h6"];let i=a.indexOf(t.toLowerCase());-1===i&&(i=0);const o=document.createElement("div");o.className="heading-wrapper";const s=document.createElement("div");s.className="heading-controls",s.style.display="none",s.style.opacity="0",s.style.transition="opacity 0.2s ease";const r=document.createElement("span");r.className="level-indicator",r.style.opacity="0",r.style.transition="opacity 0.2s ease";const l=document.createElement("button");l.className="heading-increment-btn",l.style.opacity="0",l.style.transition="opacity 0.2s ease";const c=document.createElement("i");let d;if(c.className="fas fa-angle-right",l.appendChild(c),e){const t=e.querySelector("h1, h2, h3, h4, h5, h6");if(t){const e=t.tagName.toLowerCase();i=a.indexOf(e),-1===i&&(i=0),d=document.createElement(e),d.textContent=t.textContent,d.style.cssText=t.style.cssText||"margin: 0;",t.style.textAlign&&(d.style.textAlign=t.style.textAlign),d.setAttribute("contentEditable","true"),t.classList.contains("usa")&&d.classList.add("usa")}else d=document.createElement(a[i]),d.textContent=n,d.className="usa",d.setAttribute("contentEditable","true"),d.style.cssText="margin: 0;"}else d=document.createElement(a[i]),d.textContent=n,d.className="usa",d.setAttribute("contentEditable","true"),d.style.cssText="margin: 0;";return l.addEventListener("click",(()=>{(e=>{i=(e+a.length)%a.length;const t=a[i],n=document.createElement(t);n.textContent=d.textContent,n.style.cssText=d.style.cssText,n.setAttribute("contentEditable","true"),d.classList.contains("usa")&&n.classList.add("usa"),r.textContent=t.toUpperCase(),d.replaceWith(n),d=n,o.dataset.headingLevel=t})(i+1)})),o.addEventListener("mouseenter",(()=>{s.style.display="flex",setTimeout((()=>{s.style.opacity="1",l.style.opacity="1",r.style.opacity="1"}),0)})),o.addEventListener("mouseleave",(()=>{s.style.opacity="0",l.style.opacity="0",r.style.opacity="0",setTimeout((()=>{s.style.display="none"}),200)})),r.textContent=a[i].toUpperCase(),o.dataset.headingLevel=a[i],s.appendChild(r),s.appendChild(l),o.appendChild(s),o.appendChild(d),o},paragraph(e,t="This is a paragraph. Click to edit."){const n=document.createElement("div");n.style.cssText="width: 100%;";const a=document.createElement("div");let i;return e?i=e.cloneNode(!0):(i=document.createElement("p"),i.textContent=t,i.className="paragraph-element",i.classList.add("usa"),i.setAttribute("contentEditable","true"),i.addEventListener("input",(()=>{n.dataset.paragraphText=i.textContent}))),a.appendChild(i),n.appendChild(a),n},blockquote(e){const t=document.createElement("div");t.className="component-wrapper",t.style.cssText="width: 100%;";const n=document.createElement("div");let a;return e?a=e.cloneNode(!0):(a=document.createElement("blockquote"),a.className="blockquote-element",a.classList.add("usa"),a.textContent="This is a block-quote. Click to edit.",a.style.cssText="border-left: 5px solid var(--color-primary);",a.setAttribute("contentEditable","true"),a.addEventListener("input",(()=>{t.dataset.blockquoteText=a.textContent}))),n.appendChild(a),t.appendChild(n),t},label(e){let t;return e?t=e.cloneNode(!0):(t=document.createElement("label"),t.className="field-label-element",t.textContent="Label Text",t.setAttribute("contentEditable","true")),t},video:e=>{let t;return e?(t=e.cloneNode(!0),this.setupVideoEmbed(t)):(t=document.createElement("div"),t.className="fw",t.innerHTML=setupVariants("video")[0],this.setupVideoEmbed(t)),t},graph:()=>{const e=document.createElement("div");e.className="bar-graph-wrapper",e.classList.add("resizeable");const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=[{label:"Jan",value:30},{label:"Feb",value:45},{label:"Mar",value:25},{label:"Apr",value:60},{label:"May",value:40}],a=document.createElement("div");a.className="bar-graph-container";const i=document.createElement("div");i.className="bar-graph-grid-lines";const o=document.createElement("div");function s(){o.innerHTML="";const t=Math.max(...n.map((e=>e.value)),1);i.innerHTML="";let a="var(--color-primary)";const r=e.querySelectorAll(".bar-graph-bar");if(r.length>0){const e=window.getComputedStyle(r[0]);e.backgroundColor.includes("rgb(")||(a=e.backgroundColor)}for(let e=0;e<=5;e++){const n=document.createElement("div");n.className="bar-graph-grid-line";const a=document.createElement("div");a.className="bar-graph-grid-line-label",a.textContent=Math.round(t*(1-e/5)),n.appendChild(a),i.appendChild(n)}n.forEach(((e,i)=>{const r=document.createElement("div");r.className="bar-graph-bar-wrapper";const l=document.createElement("div");l.className="bar-graph-bar";const c=e.value/t*100;l.style.cssText=`\n                    height: ${c}%;\n                    background: ${a};\n                `;const d=document.createElement("div");d.className="bar-graph-bar-value",d.textContent=e.value,d.style.cssText=`\n                    bottom: ${c}%;   \n                `;const p=document.createElement("div");p.setAttribute("contentEditable","true"),p.className="bar-graph-month-label",p.textContent=e.label;let u=!1;l.addEventListener("mousedown",(()=>{u=!0,l.style.backgroundColor="var(--interface-color)"})),document.addEventListener("mousemove",(e=>{if(!u)return;const a=o.getBoundingClientRect(),s=Math.max(0,Math.min(a.height,a.bottom-e.clientY)),r=Math.round(s/a.height*t);r!==n[i].value&&(n[i].value=r,d.textContent=r,l.style.height=r/t*100+"%")})),document.addEventListener("mouseup",(()=>{u&&(u=!1,l.style.backgroundColor=a,s())})),r.appendChild(d),r.appendChild(l),r.appendChild(p),o.appendChild(r)}))}o.className="bar-graph-bars-container";const r=document.createElement("div");r.className="bar-graph-controls";const l=document.createElement("button");l.className="bar-graph-add-btn",l.innerHTML='<i class="fas fa-plus"></i>';const c=document.createElement("button");return c.className="bar-graph-add-btn",c.innerHTML='<i class="fas fa-minus"></i>',l.onclick=()=>{n.length<12&&(n.push({label:t[n.length],value:Math.floor(80*Math.random())+10}),s())},c.onclick=()=>{n.length>2&&(n.pop(),s())},e.addEventListener("mouseenter",(()=>r.style.opacity="1")),e.addEventListener("mouseleave",(()=>r.style.opacity="0")),r.appendChild(c),r.appendChild(l),e.appendChild(r),a.appendChild(i),a.appendChild(o),e.appendChild(a),s(),createGraphColorSwatch(e),e},pieGraph:()=>{const e=document.createElement("div");e.className="pie-graph-wrapper";const t=[{label:"Segment A",value:35,color:"#5D0BB5"},{label:"Segment B",value:15,color:"#027BD1"},{label:"Segment C",value:15,color:"#00CD67"},{label:"Segment D",value:35,color:"#F23A0C"}],n=["#5D0BB5","#027BD1","#00CD67","#F23A0C","#CE1590","#FF5722","#E0CE28","#84898B"],a=document.createElement("div");a.className="color-picker-modal-overlay";const i=document.createElement("div");i.className="color-picker-modal-content";const o=document.createElement("button");o.className="close-color-modal",o.innerHTML="Ã—",o.onclick=()=>a.style.display="none";const s=document.createElement("div");s.id="segment-color-picker";const r=document.createElement("div");let l;function c(){if(a.style.display="flex",l){for(;l.colors.length>t.length;)l.removeColor(l.colors.length-1);for(;l.colors.length<t.length;)l.addColor(t[l.colors.length].color);t.forEach(((e,t)=>{l.colors[t].hexString=e.color}))}else l?l.colors=t.map((e=>e.color)):(l=new iro.ColorPicker("#segment-color-picker",{width:190,colors:t.map((e=>e.color)),handleRadius:7,borderWidth:1,activeHandleRadius:11,borderColor:"#fff",wheelAngle:90,sliderSize:22}),l.on(["mount","color:change"],(function(){r.innerHTML="",l.colors.forEach(((e,n)=>{if(n<t.length){const a=e.hexString,i=document.createElement("div");i.style.cssText="\n                                display: flex;\n                                align-items: center;\n                                gap: 10px;\n                                cursor: pointer;\n                            ",i.innerHTML=`\n                                <div style="\n                                    width: 20px;\n                                    height: 20px;\n                                    background: ${a};\n                                    border-radius: 4px;\n                                "></div>\n                                <span style="color: var(--basic-txt-color);">${t[n].label}</span>\n                                <span style="color: gray; font-size: smaller; margin-left: auto;">${a}</span>\n                            `,i.onclick=()=>l.setActiveColor(n),r.appendChild(i)}}))})),l.on("color:change",(function(e){e.index<t.length&&(t[e.index].color=e.hexString,u())})))}r.className="modal-color-list-con",i.appendChild(o),i.appendChild(s),i.appendChild(r),a.appendChild(i),document.body.appendChild(a);const d=document.createElement("div");d.className="pie-graph-container";const p=200;function u(){d.innerHTML="";const e=t.reduce(((e,t)=>e+t.value),0),a=document.createElement("div");a.style.cssText=`\n                flex: 0 0 ${p}px;\n                height: ${p}px;\n                position: relative;\n            `;const i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg");o.setAttribute("width",p),o.setAttribute("height",p),o.setAttribute("viewBox","-100 -100 200 200");const s=document.createElementNS(i,"defs"),r=document.createElementNS(i,"filter");r.setAttribute("id","hover-shadow"),r.innerHTML='\n                <feDropShadow dx="0" dy="0" stdDeviation="3" flood-opacity="0.3"/>\n            ',s.appendChild(r),o.appendChild(s);let l=0;t.forEach(((t,a)=>{const s=t.value/e,r=360*s,c=l+r,d=(l-90)*Math.PI/180,p=(c-90)*Math.PI/180,m=100*Math.cos(d),h=100*Math.sin(d),v=100*Math.cos(p),g=100*Math.sin(p),y=document.createElementNS(i,"path"),b=`M 0 0 L ${m} ${h} A 100 100 0 ${r>180?1:0} 1 ${v} ${g} Z`;y.setAttribute("d",b),y.setAttribute("fill",t.color||n[a]),y.style.cursor="pointer",y.style.transition="filter 0.2s",y.addEventListener("mouseenter",(()=>{y.style.filter="url(#hover-shadow)",y.style.opacity="0.9"})),y.addEventListener("mouseleave",(()=>{y.style.filter="none",y.style.opacity="1"})),y.addEventListener("click",(()=>{const e=prompt(`Enter new value for ${t.label}:`,t.value);e&&!isNaN(e)&&(t.value=Number(e),u())})),o.appendChild(y);const f=(l+r/2-90)*Math.PI/180,x=70*Math.cos(f),w=70*Math.sin(f),k=document.createElementNS(i,"g");k.setAttribute("transform",`translate(${x} ${w})`);const S=document.createElementNS(i,"text");S.textContent=`${Math.round(100*s)}%`,S.setAttribute("text-anchor","middle"),S.setAttribute("fill","var(--basic-txt-color)"),k.appendChild(S),o.appendChild(k),l=c})),a.appendChild(o),d.appendChild(a);const m=document.createElement("div");m.className="pie-graph-legend",t.forEach(((e,t)=>{const a=document.createElement("div");a.className="pie-graph-legend-item";const i=document.createElement("div");i.className="pie-graph-legend-color-box",i.style.cssText=`\n                    background: ${e.color||n[t]};\n                `,i.addEventListener("click",c);const o=document.createElement("input");o.className="pie-graph-legend-label",o.value=e.label,o.addEventListener("change",(()=>{e.label=o.value,u()})),a.appendChild(i),a.appendChild(o),m.appendChild(a)})),d.appendChild(m)}const m=document.createElement("div");m.className="pie-graph-controls";const h=document.createElement("button");h.className="pie-graph-add-btn",h.innerHTML='<i class="fas fa-plus"></i>';const v=document.createElement("button");return v.className="pie-graph-add-btn",v.innerHTML='<i class="fas fa-minus"></i>',h.onclick=()=>{t.length<8&&(t.push({label:`Segment ${String.fromCharCode(65+t.length)}`,value:Math.floor(30*Math.random())+10,color:n[t.length]}),u(),l&&l.addColor(n[t.length-1]))},v.onclick=()=>{t.length>2&&(t.pop(),u(),l&&l.removeColor(l.colors.length-1))},e.addEventListener("mouseenter",(()=>m.style.opacity="1")),e.addEventListener("mouseleave",(()=>m.style.opacity="0")),m.appendChild(v),m.appendChild(h),e.appendChild(m),e.appendChild(d),u(),e},pagination:e=>{let t;return e?t=e.cloneNode(!0):(t=document.createElement("div"),t.className="pagination-container",t.innerHTML='\n            <div class="pagination-wrapper">\n                \x3c!-- Previous page --\x3e\n                <button class="page-btn prev-page icon-container">\n                    <i style="color: var(--basic-txt-color);" class="fas fa-angle-left"></i>\n                </button>\n                \n                \x3c!-- Page numbers --\x3e\n                <button class="page-btn" contenteditable="true">1</button>\n                <button class="page-btn" contenteditable="true">2</button>\n                <button class="page-btn" contenteditable="true">3</button>\n                <button class="page-btn" contenteditable="true">...</button>\n                <button class="page-btn" contenteditable="true">45</button>\n                \n                \x3c!-- Next page --\x3e\n                <button class="page-btn next-page icon-container">\n                    <i style="color: var(--basic-txt-color);" class="fas fa-angle-right"></i>\n                </button>\n            </div>\n        '),this.setupPagination(t),t},leftChat:e=>{let t;if(e)return t=e.cloneNode(!0),this.setupChatComponent(t),t;t=document.createElement("div"),t.className="chat-container",t.style.cssText="flex-direction: row;";const n=document.createElement("div");n.innerHTML="AV",n.className="chat-avatar",n.style.cssText="background-color: var(--color-primary);",n.setAttribute("contentEditable","true");const a=document.createElement("div");a.style.cssText="flex-grow: 1; max-width: 80%;";const i=document.createElement("div");i.classList="leftChat";const o=document.createElement("div");o.className="chat-content",o.innerHTML="Click to edit this message.",o.setAttribute("contentEditable","true");const s=document.createElement("div");s.className="chat-image-container",s.style.cssText="margin-top: 8px; cursor: pointer; display: none;";const r=document.createElement("img");r.className="chat-image",r.style.cssText="display: none;",r.alt="Chat image";const l=document.createElement("div");l.className="chat-image-placeholder",l.style.cssText="color: #666; border: 0.12rem dashed #ccc;";const c=document.createElement("i");c.className="fas fa-image",c.style.marginRight="8px",l.appendChild(c),l.appendChild(document.createTextNode("Add Image"));const d=document.createElement("div");return d.textContent="1 minute ago",d.className="chat-timestamp",d.setAttribute("contentEditable","true"),s.appendChild(r),s.appendChild(l),i.appendChild(o),i.appendChild(s),a.appendChild(i),a.appendChild(d),t.appendChild(n),t.appendChild(a),this.setupChatComponent(t),t},rightChat:e=>{let t;if(e)return t=e.cloneNode(!0),this.setupChatComponent(t),t;t=document.createElement("div"),t.className="chat-container";const n=document.createElement("div");n.innerHTML="ME",n.className="chat-avatar",n.style.cssText="background-color: var(--color-primary);",n.setAttribute("contentEditable","true");const a=document.createElement("div");a.className="chat-content-wrapper";const i=document.createElement("div");i.classList="rightChat",i.style.cssText="background-color: var(--color-primary);";const o=document.createElement("div");o.className="chat-content",o.innerHTML="Click to edit this message.",o.setAttribute("contentEditable","true");const s=document.createElement("div");s.className="chat-image-container",s.style.cssText="margin-top: 8px; cursor: pointer; display: none;";const r=document.createElement("img");r.className="chat-image",r.style.cssText="display: none;",r.alt="Chat image";const l=document.createElement("div");l.className="chat-image-placeholder";const c=document.createElement("i");c.className="fas fa-image",c.style.marginRight="8px",l.appendChild(c),l.appendChild(document.createTextNode("Add Image"));const d=document.createElement("div");return d.textContent="1 minute ago",d.className="chat-timestamp",d.setAttribute("contentEditable","true"),s.appendChild(r),s.appendChild(l),i.appendChild(o),i.appendChild(s),a.appendChild(i),a.appendChild(d),t.appendChild(n),t.appendChild(a),this.setupChatComponent(t),t},chatInput:e=>{let t;return e?t=e.cloneNode(!0):(t=document.createElement("div"),t.style.cssText="width: 100%; padding: 4px 0;",t.innerHTML=setupVariants("chatInput")[0]),t},bottomSheet:e=>{let t;if(e)t=e.cloneNode(!0);else{t=document.createElement("div"),t.className="bottomSheet-container";const e=document.createElement("div");e.className="bottom-sheet-handle-container";const n=document.createElement("div");n.className="bottom-sheet-drag-handle";const a=document.createElement("div");a.className="bottom-sheet-content";const i=document.createElement("button");i.className="delete-btn",i.textContent="Ã—",e.appendChild(n),t.appendChild(e),t.appendChild(a),t.appendChild(i)}return t.setAttribute("data-component-type","bottomSheet"),this.setupBottomSheet(t),t},keyboard:e=>{let t;if(e)return t=e.cloneNode(!0),t;t=document.createElement("div"),t.className="keyboard-container",t.innerHTML=setupVariants("keyboard")[0];const n=document.createElement("button");return n.className="delete-btn",n.textContent="Ã—",t.appendChild(n),this.setupKeyboard(t),t},notificationBanner:e=>{let t,n,a,i,o,s,r,l;return e?(t=e.cloneNode(!0),n=t.querySelector("div:first-child"),a=n.querySelector("i"),i=t.querySelector("div:nth-child(2)"),o=i.querySelector("div:nth-child(1)"),s=i.querySelector("div:nth-child(2)"),r=i.querySelector(".notification-action-btn"),l=t.querySelector(".noti-visibility-toggle")):(t=document.createElement("div"),t.classList.add("notification-banner"),t.style.cssText="border-left: 4px solid var(--color-primary);",n=document.createElement("div"),n.classList.add("icon-container"),n.style.cssText="flex-shrink: 0;",a=document.createElement("i"),a.className="fas fa-bell",a.style.cssText="font-size: 20px; color: var(--color-accent);",n.appendChild(a),i=document.createElement("div"),i.style.cssText="flex-grow: 1; display: flex; flex-direction: column; gap: 4px;",o=document.createElement("div"),o.textContent="Click to edit this important notification message.",o.style.cssText="font-weight: 500; color: var(--basic-txt-color);",o.setAttribute("contentEditable","true"),s=document.createElement("div"),s.textContent="Additional details can go here.",s.style.cssText="font-size: 14px; color: #666;",s.setAttribute("contentEditable","true"),r=document.createElement("div"),r.className="notification-action-btn",r.textContent="Action",r.style.cssText="\n            background-color: var(--color-primary);\n        ",r.setAttribute("contentEditable","true"),r.dataset.alwaysVisible="true",l=document.createElement("div"),l.className="noti-visibility-toggle",l.innerHTML='<i class="fas fa-eye"></i>',i.appendChild(o),i.appendChild(s),i.appendChild(r),t.appendChild(n),t.appendChild(i),t.appendChild(l)),this.setupNotificationBanner(t),t},progressTracker:e=>{let t;if(e)return t=e.cloneNode(!0),this.setupProgressTracker(t),t;{t=document.createElement("div"),t.className="progress-tracker-container";const e=document.createElement("div");e.className="progress-tracker-controls";const n=document.createElement("button");n.className="pt-count-btn",n.innerHTML='<i class="fas fa-plus pt-add-step"></i>';const a=document.createElement("button");a.className="pt-count-btn",a.innerHTML='<i class="fas fa-minus pt-remove-step"></i>',a.style.opacity="0.5",e.appendChild(a),e.appendChild(n);const i=document.createElement("div");i.className="pt-initial-step-con",i.setAttribute("data-step","");const o=document.createElement("div");o.className="step-circle",o.style.cssText="background-color: var(--color-primary);",o.textContent="1",o.setAttribute("contentEditable","true");const s=document.createElement("div");s.className="pt-step-label",s.textContent="Step 1",s.setAttribute("contentEditable","true"),i.appendChild(o),i.appendChild(s);const r=document.createElement("div");r.className="steps-container",r.appendChild(i),t.appendChild(r),t.appendChild(e)}return this.setupProgressTracker(t),t},featureComparisonCard:e=>{let t;if(e)t=e.cloneNode(!0);else{t=document.createElement("div"),t.className="feature-comparison-card",t.style.cssText="border: .12rem solid var(--color-primary);";const e=document.createElement("div");e.contentEditable="true",e.className="comparison-card-header",e.textContent="Feature Comparison",e.style.cssText="background-color: var(--color-primary);";const n=document.createElement("div");n.className="comparison-card-content";const a=document.createElement("div");a.className="comparison-card-grid";const i=document.createElement("button");i.className="comparison-add-row-btn",i.innerHTML='<i class="fas fa-plus"></i> Add Feature';["Features","Basic","Pro"].forEach(((e,t)=>{const n=document.createElement("div");n.textContent=e,n.style.cssText=`\n            font-weight: bold; \n            color: #777; \n            padding: 8px 0; \n            ${t>0?"text-align: center;":""}\n            `,n.setAttribute("contenteditable","true"),a.appendChild(n)}));const o=e=>{const t=document.createElement("div");t.className="comparison-card-row";const n=document.createElement("button");n.innerHTML='<i class="fas fa-trash"></i>',n.className="delete-fc-row",n.style.display="none";const o=document.createElement("div");o.style.cssText="display: flex; align-items: center; gap: 8px; width: 100%;";const s=document.createElement("span");s.textContent=e,s.setAttribute("contenteditable","true"),o.appendChild(s),o.appendChild(n),t.appendChild(o);const r=document.createElement("div");r.innerHTML='<i class="fas fa-check" style="color: green;"></i>',r.style.cssText="text-align: center; cursor: pointer;";const l=document.createElement("div");l.innerHTML='<i class="fas fa-check" style="color: green;"></i>',l.style.cssText="text-align: center; cursor: pointer;",[r,l].forEach((e=>{e.onclick=()=>{const t=null!==e.querySelector(".fa-check");e.innerHTML=t?'<i class="fas fa-times" style="color: #999;"></i>':'<i class="fas fa-check" style="color: green;"></i>'}})),n.onclick=e=>{e.stopPropagation(),[t,r,l].forEach((e=>e.remove()));a.children.length/3-1<20&&(i.style.opacity="1",i.style.cursor="pointer")},t.addEventListener("mouseenter",(()=>{n.style.display="block"})),t.addEventListener("mouseleave",(()=>{n.style.display="none"})),a.appendChild(t),a.appendChild(r),a.appendChild(l)};o("Feature 1"),o("Feature 2"),o("Feature 3"),n.appendChild(a),t.appendChild(e),t.appendChild(n),t.appendChild(i)}return this.setupFeatureComparisonCard(t),t},columns:e=>{let t;if(e)t=e.cloneNode(!0);else{t=document.createElement("div"),t.className="columns-wrapper";const e=document.createElement("div");e.className="columns-controls";const n=document.createElement("div");n.className="columns-gap-control";const a=document.createElement("input");a.setAttribute("title","Gap between columns"),a.className="columns-gap-range",a.type="range",a.min="0",a.max="46",a.value="6";const i=document.createElement("span");i.className="columns-gap-value",i.textContent="6";const o=document.createElement("button");o.className="column-count-btn",o.innerHTML='<i class="fas fa-minus"></i>';const s=document.createElement("button");s.className="column-count-btn",s.innerHTML='<i class="fas fa-plus"></i>';const r=document.createElement("span");r.className="column-count-value",r.textContent="2",n.appendChild(a),n.appendChild(i),e.appendChild(o),e.appendChild(r),e.appendChild(s),e.appendChild(n),t.appendChild(e)}return this.setupColumns(t),t},chipGroup:e=>{let t;if(e)return t=e.cloneNode(!0),this.setupChipGroup(t),t;{t=document.createElement("div"),t.className="chip-group-wrapper";const e=document.createElement("div");e.className="chip-group-container";const n=document.createElement("button");n.className="add-chip-btn",n.innerHTML='<i class="fas fa-plus"></i>&nbsp; add pill',["Design","Development","Marketing"].forEach((t=>{const n=document.createElement("div");n.className="chip",n.setAttribute("data-selected","false");const a=document.createElement("span");a.textContent=t;const i=document.createElement("i");i.className="fas fa-times remove-chip",n.appendChild(a),n.appendChild(i),e.appendChild(n)})),t.appendChild(n),t.appendChild(e)}return this.setupChipGroup(t),createGroupColorSwatch(t),t},floatingActionButton:()=>{const e=document.createElement("div");e.classList.add("fab-container");const t=document.createElement("div");t.classList="fab-nav icon-container",t.style.cssText="\n        background-color: var(--color-primary);\n        ";const n=document.createElement("button");n.className="delete-btn",n.textContent="Ã—",e.appendChild(n);const a=document.createElement("i");a.className="fas fa-plus fab-icon",t.appendChild(a),t.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(a)})),e.addEventListener("mouseenter",(()=>{e.style.pointerEvents="auto"})),e.addEventListener("mouseleave",(()=>{e.style.pointerEvents="none"})),e.appendChild(t);const i=createAlignmentControls(e);return i.setAlignment("center"),i.hideArrows(),this.setupDeleteHandler(e),e},bulletedList:e=>{const t=document.createElement("div");if(t.className="bullet-list-container",e){const t=e.cloneNode(!0);return this.setupBulletedList(t),t}const n=(e="New item")=>{const t=document.createElement("div");t.className="bullet-list-item";const n=document.createElement("div");n.className="bullet-list-item-icon icon-container bullet-icon";const a=document.createElement("i");a.className="fas fa-circle",n.appendChild(a),n.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(a)}));const i=document.createElement("div");i.className="bullet-list-item-text",i.setAttribute("contenteditable","true"),i.textContent=e;const o=document.createElement("div");o.className="bullet-list-item-controls";const s=document.createElement("i");s.className="fas fa-indent bullet-list-indent-btn";const r=document.createElement("i");r.className="fas fa-outdent bullet-list-outdent-btn";const l=document.createElement("i");return l.className="fas fa-times bullet-list-delete-btn",o.appendChild(s),o.appendChild(r),o.appendChild(l),t.appendChild(n),t.appendChild(i),t.appendChild(o),t.addEventListener("mouseenter",(()=>{o.style.display="flex"})),t.addEventListener("mouseleave",(()=>{o.style.display="none"})),t},a=document.createElement("div");a.className="bullet-list-add-btn",a.setAttribute("spellcheck","false");const i=document.createElement("i");i.className="fas fa-plus add-bullet-icon";const o=document.createElement("span");return o.className="add-bullet-text",o.textContent="AddÂ Item",a.appendChild(i),a.appendChild(o),t.appendChild(n("First item"),a),t.appendChild(n("Second item"),a),t.appendChild(a),this.setupBulletedList(t),t},table:()=>{const e=document.createElement("div");e.className="data-table-scroll-wrapper";const t=document.createElement("div");t.className="data-table-button-container";const n=document.createElement("button");n.className="data-table-add-column-btn",n.innerHTML='<i class="fas fa-plus"></i><span>Column</span>';const a=document.createElement("button");a.className="data-table-add-row-btn",a.innerHTML='<i class="fas fa-plus"></i><span>Row</span>',t.appendChild(a),t.appendChild(n);const i=document.createElement("div");i.className="data-table-container";const o=document.createElement("div");o.className="data-table-header-bg",o.style.backgroundColor="var(--color-primary)";const s=document.createElement("table");s.className="data-table-main";const r=document.createElement("thead"),l=document.createElement("tr"),c=document.createElement("tbody");e.appendChild(i),i.appendChild(o),i.appendChild(s),s.appendChild(r),r.appendChild(l),s.appendChild(c),e.buttonContainer=t;const d=this;return setTimeout((function(){try{const n=e.closest(".component-container");if(!n)return void console.error("Component container not found");const a=n.querySelector(".component-content");if(!a)return void console.error("Component content not found");a.appendChild(t);if(!a.querySelector(".data-table-scroll-wrapper"))return void console.error("Table wrapper not found in new context");console.log("Content children:",Array.from(a.children).map((e=>e.className))),d.setupTable(a)}catch(e){console.error("Error in setupAfterWrap:",e)}}),100),e},hzDivider:e=>{let t,n,a;e?(t=e.cloneNode(!0),n=t.querySelector("div:nth-child(2)"),a=n.querySelector(".divider-line")):(t=document.createElement("div"),t.className="hzRule",n=document.createElement("div"),n.className="hzRule-container",a=document.createElement("div"),a.classList.add("divider-line"),a.style.cssText="\n            border-color: var(--color-transparent-blk);\n        ",n.appendChild(a));const i=document.createElement("div");i.classList.add("hzRuleControls");const o=[{icon:"minus",title:"Solid"},{icon:"ellipsis-h",title:"Dotted"},{icon:"grip-lines",title:"Double"}].map((({icon:e,title:t})=>{const n=document.createElement("i");return n.className=`fas fa-${e} hzRule-control-btn`,n.title=t,n})),s=document.createElement("input");s.setAttribute("title","thickness"),s.className="hzRule-thickness-control",s.type="range",s.min="1",s.max="8",s.value="2",o[0].addEventListener("click",(()=>{const e=s.value;a.style.borderStyle="solid",a.style.borderWidth=`${e}px 0 0 0`,a.style.borderColor="var(--color-transparent-blk)",a.style.background="none",a.style.height="0",n.style.flexDirection="row"})),o[1].addEventListener("click",(()=>{const e=s.value;a.style.borderStyle="dotted",a.style.background="none",a.style.height="0",a.style.borderWidth=`${e}px 0 0 0`,a.style.borderColor="var(--color-transparent-blk)",n.style.flexDirection="row"})),o[2].addEventListener("click",(()=>{const e=s.value;a.style.borderStyle="double",a.style.background="none",a.style.height="0",a.style.borderWidth=`${e}px 0 0 0`,a.style.borderColor="var(--color-transparent-blk)",n.style.flexDirection="row"})),s.addEventListener("input",(e=>{a.style.borderWidth=`${e.target.value}px 0 0 0`}));const r=document.createElement("div");r.className="hzRule-controls-container";const l=document.createElement("div");return l.className="hzRule-btns-container",o.forEach((e=>l.appendChild(e))),r.appendChild(l),r.appendChild(s),i.appendChild(r),t.appendChild(i),t.appendChild(n),t},colorBlock:e=>{let t,n;return e?(t=e.cloneNode(!0),n=t.querySelector(".colorBlock-inner")):(t=document.createElement("div"),t.style.cssText="width: 100%; position: relative;",t.classList.add("colorBlock-container"),n=document.createElement("div"),n.classList.add("colorBlock-inner"),n.style.cssText="\n            background-color: var(--color-secondary);\n        "),this.initializeSortable(n),t.appendChild(n),resizer.makeResizable(n),t},musicPlayer:e=>{let t;if(e)t=e.cloneNode(!0);else{t=document.createElement("div"),t.classList.add("music-player-container");const e=document.createElement("div");e.className="resizeable",e.style.cssText="\n                display: flex;\n                align-items: center;\n                gap: 16px;\n                margin-bottom: 16px;\n            ";const n=document.createElement("div");n.classList="card-image",n.style.cssText="\n                width: 80px;\n                height: 80px;\n                background-color: var(--neutral-gray);\n                border-radius: 4px;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                flex-shrink: 0;\n            ",n.innerHTML='<i class="fas fa-music" style="font-size: 24px;"></i>';const a=document.createElement("div");a.style.cssText="\n                flex-grow: 1;\n            ";const i=document.createElement("div");i.textContent="Song Title",i.style.cssText="\n                font-size: 18px;\n                font-weight: bold;\n                margin-bottom: 4px;\n            ",i.setAttribute("contenteditable","true");const o=document.createElement("div");o.textContent="Artist Name",o.style.cssText="\n                font-size: 14px;\n                opacity: 0.8;\n            ",o.setAttribute("contenteditable","true"),a.appendChild(i),a.appendChild(o);const s=document.createElement("div");s.style.cssText="\n                margin-bottom: 16px;\n            ";const r=document.createElement("div");r.style.cssText="\n                width: 100%;\n                height: 4px;\n                background-color: var(--neutral-gray);\n                border-radius: 2px;\n                margin-bottom: 8px;\n                position: relative;\n            ";const l=document.createElement("div");l.style.cssText="\n                width: 45%;\n                height: 100%;\n                background-color: var(--color-accent);\n                border-radius: 2px;\n                position: relative;\n            ";const c=document.createElement("div");c.style.cssText="\n                width: 12px;\n                height: 12px;\n                background-color: var(--color-accent);\n                border-radius: 50%;\n                position: absolute;\n                right: -6px;\n                top: 50%;\n                transform: translateY(-50%);\n            ";const d=document.createElement("div");d.style.cssText="\n                display: flex;\n                justify-content: space-between;\n                font-size: 12px;\n            ";const p=document.createElement("div");p.setAttribute("contenteditable","true"),p.textContent="1:45";const u=document.createElement("div");u.setAttribute("contenteditable","true"),u.textContent="3:30";const m=document.createElement("div");m.className="player-controls icon-container",m.style.cssText="\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                gap: 24px;\n            ";const h=(e,t="16px")=>{const n=document.createElement("i");return n.className=`fas ${e}`,n.style.cssText=`\n                    font-size: ${t};\n                    cursor: pointer;\n                    opacity: 0.8;\n                    transition: opacity 0.2s;\n                `,n.addEventListener("mouseenter",(()=>n.style.opacity="1")),n.addEventListener("mouseleave",(()=>n.style.opacity="0.8")),n};l.appendChild(c),r.appendChild(l),d.appendChild(p),d.appendChild(u),s.appendChild(r),s.appendChild(d),m.appendChild(h("fa-backward-step")),m.appendChild(h("fa-play","24px")),m.appendChild(h("fa-forward-step")),e.appendChild(n),e.appendChild(a),t.appendChild(e),t.appendChild(s),t.appendChild(m)}return t},footer:e=>{let t;return e?t=e.cloneNode(!0):(t=document.createElement("div"),t.style.cssText="width: 100%; position: relative;",t.innerHTML=setupVariants("footer")[0],t.classList.add("component-footer")),t}}}const editor=window.editor||new MobileUIEditor;class Resizer{constructor(){this.isResizing=!1,this.resizeTimeout=null,this.currentElement=null,this.startY=0,this.startHeight=0,this.initialRightEdge=0,this.resizeOverlay=this.createOverlay(),this.setupListeners()}createOverlay(){const e=document.createElement("div");return e.className="resize-overlay",document.body.appendChild(e),e}createHandle(e){const t=document.createElement("div");t.className="resize-handle";const n=document.createElement("div");return n.className="reszie-icon",t.appendChild(n),t.addEventListener("mousedown",(t=>this.startResize(t,e))),t.addEventListener("mouseenter",(()=>t.style.display="flex")),t}startResize(e,t){this.isResizing=!0,this.currentElement=t,this.startY=e.pageY,this.startHeight=parseInt(window.getComputedStyle(t).height),this.startWidth=parseInt(window.getComputedStyle(t).width);const n=t.getBoundingClientRect();this.initialRightEdge=n.right,this.resizeOverlay.style.display="block",e.preventDefault(),e.stopPropagation()}setupListeners(){document.addEventListener("mousemove",(e=>{if(!this.isResizing)return;const t=this.currentElement.dataset.aspectRatio;if(t){const n=Math.max(0,this.startHeight+(e.pageY-this.startY)),a=n*parseFloat(t);this.currentElement.style.height=`${n}px`,this.currentElement.style.width=`${a}px`}else{const t=Math.max(0,this.startHeight+(e.pageY-this.startY));this.currentElement.style.height=`${t}px`}})),document.addEventListener("mouseup",(()=>{this.isResizing&&(this.isResizing=!1,this.currentElement=null,this.resizeOverlay.style.display="none")}))}makeResizable(e,t=!0){const n=e.querySelector(".resize-handle");n&&n.remove();const a=this.createHandle(e);return e.appendChild(a),t&&(e.addEventListener("mouseenter",(()=>{this.isResizing||(a.style.display="flex")})),e.addEventListener("mouseleave",(()=>{this.isResizing||(a.style.display="none")}))),a}}const resizer=new Resizer;function setupVariants(e){switch(e){case"alert":return['<div class="alert-con">\n            <div style="background-color: #3498db;" class="alert-body">\n                <div style="display: flex;">\n                    <div class="icon-container alert-icon">\n                        <i class="fas fa-info-circle"></i>\n                    </div>\n                        <span class="usa" contenteditable="true"> Info message.</span>\n                </div>\n                <i class="fas fa-close"></i>\n            </div>\n        </div>','<div class="alert-con">\n            <div style="background-color: #27ae60;" class="alert-body">\n                <div style="display: flex;">\n                    <div class="icon-container alert-icon">\n                        <i class="fas fa-circle-check"></i>\n                    </div>\n                    <span class="fw usa" contenteditable="true">Success message!</span>\n                </div>\n                <i class="fas fa-close"></i>\n            </div>\n        </div>','<div class="alert-con">\n            <div style="background-color: #f39c12;" class="alert-body">\n                <div style="display: flex;">\n                    <div class="icon-container alert-icon">\n                        <i class="fas fa-triangle-exclamation"></i>\n                    </div>\n                    <span class="fw usa" contenteditable="true">Warning message!</span>\n                </div>\n                <i class="fas fa-close"></i>\n            </div>\n        </div>','<div class="alert-con">\n            <div style="background-color: var(--error-danger-delete);" class="alert-body">\n                <div style="display: flex;">\n                    <div class="icon-container alert-icon">\n                        <i class="fas fa-circle-exclamation"></i>\n                    </div>\n                    <span class="fw usa" contenteditable="true">Error message.</span>\n                </div>\n                <i class="fas fa-close"></i>\n            </div>\n        </div>','<div class="alert-con">\n            <div style="background-color: var(--color-primary);" class="alert-body">\n                <div style="display: flex;">\n                    <div class="icon-container alert-icon">\n                        <i class="fas fa-bolt-lightning"></i>\n                    </div>\n                    <span class="fw usa" contenteditable="true">Theme color background!</span>\n                </div>\n                <i class="fas fa-close"></i>\n            </div>\n        </div>','<div class="alert-con">\n            <div style="background-color: #34495e;" class="alert-body">\n                <span class="fw usa" contenteditable="true">Dark message.</span>\n                <i class="fas fa-close"></i>\n            </div>\n        </div>'];case"avatar":return['<div class="usa" spellcheck="false" contenteditable="true" style="margin: 2px 0; width: 40px; height: 40px; background-color: var(--color-primary); color: var(--basic-txt-color); border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; text-align: center;">\n                AV\n            </div>\n            <div class="avatar-column">\n                <span contenteditable="true" class="usa avatar-text">Display Name</span>\n                <span contenteditable="true" class="usa avatar-sub-txt">location</span>\n            </div>','<div class="fw">\n        <div class="align-content avatar-inner">\n            <div class="avatar-small avatar-base usa" style="background-color: var(--color-primary);">\n                A\n            </div>\n            <div class="avatar-column">\n                <span class="avatar-text usa">Display Name</span>\n            </div>\n        </div>\n        </div>','<div class="fw">\n         <div class="align-content avatar-inner">\n            <div class="nav-image avatar-img-small">\n                <i style="color: var(--placeholder-color); font-size: smaller; pointer-events: none;" class="fa-solid fa-image non-editable"></i>\n            </div>\n            <div class="avatar-column">\n                <span contenteditable="true" class="avatar-text usa">Display Name</span>\n            </div>\n        </div>\n        </div>','<div class="fw">\n        <div class="align-content avatar-inner">\n            <div class="avatar-squareish avatar-base" style="background-color: var(--color-primary);">\n                AV\n            </div>\n            <div class="avatar-column">\n                <span contenteditable="true" class="avatar-text usa">Display Name</span>\n                <span contenteditable="true" class="avatar-sub-txt usa">location</span>\n            </div>\n        </div>\n        </div>','<div class="fw">\n        <div class="align-content avatar-inner">\n            <div class="icon-container avatar-base avatar-icon" style="background-color: var(--color-primary);">\n                <i class="fas fa-user"></i>\n            </div>\n            <div class="avatar-column">\n                <span contenteditable="true" class="avatar-text usa">Display Name</span>\n            </div>\n        </div>\n        </div>','<div class="fw">\n        <div class="align-content avatar-inner">\n            <div class="avatar-base avatar-outline" style="color: var(--color-primary); border: .12rem solid var(--color-primary);">\n                AV\n            </div>\n            <div class="avatar-column">\n                <span contenteditable="true" class="avatar-text usa">Display Name</span>\n                <span contenteditable="true" class="avatar-sub-txt usa">location</span>\n            </div>\n        </div>\n        </div>','<div class="fw">\n            <div class="align-content avatar-inner">\n                <div class="nav-image avatar-img avatar-base">\n                <i class="fa-solid fa-image image-ph non-editable"></i>\n                </div>\n                <div class="avatar-column">\n                <span contenteditable="true" class="avatar-text usa">Display Name</span>\n                <span contenteditable="true" class="avatar-sub-txt usa">@username</span>\n                </div>\n            </div>\n        </div>','<div class="success-container fw">\n            <div class="align-content avatar-inner">\n                <div style="position: relative;">\n                <div class="nav-image avatar-img avatar-base">\n                    <i class="fa-solid fa-image image-ph non-editable"></i>\n                </div>\n                <div class="icon-container avatar-checkmark" style="background-color: var(--color-primary);">\n                    <i class="fas fa-check" style="color: var(--basic-txt-color); font-size: 10px;"></i>\n                </div>\n                </div>\n                <div class="avatar-column">\n                <span contenteditable="true" class="avatar-text usa">Display Name</span>\n                </div>\n            </div>\n        </div>','<div class="error-container fw">\n            <div class="align-content avatar-inner">\n                <div style="position: relative;">\n                <div class="nav-image avatar-img avatar-base">\n                    <i class="fa-solid fa-image image-ph non-editable"></i>\n                </div>\n                <div class="icon-container avatar-badge" style="background-color: var(--color-primary);">\n                    <i class="fa-solid fa-3"style="color: var(--basic-txt-color); font-size: 11px;"></i>\n                </div>\n                </div>\n                <div class="avatar-column">\n                <span contenteditable="true" class="avatar-text usa">Display Name</span>\n                </div>\n            </div>\n        </div>','<div class="fw success-container">\n        <div class="align-content hero avatar-inner">\n        <div class="avatar-group-con">\n            <div class="card-image avatar-group-image">\n            <i class="fa-solid fa-image image-ph non-editable"></i>\n            </div>\n            <div class="card-image avatar-group-image">\n            <i class="fa-solid fa-image image-ph non-editable"></i>\n            </div>\n            <div class="card-image avatar-group-image">\n            <i class="fa-solid fa-image image-ph non-editable"></i>\n            </div>\n            <div class="card-image avatar-group-image">\n            <i class="fa-solid fa-image image-ph non-editable"></i>\n            </div>\n            <div class="avatar-group-number" style="background-color: var(--color-primary);">\n            <span class="avatar-text">+3</span>\n            </div>\n        </div>\n        <div>\n            <span contenteditable="true" class="avatar-text usa">Group</span>\n        </div>\n        </div>\n        </div>'];case"button":return['<div class="ui-button-container">\n            <div class="ui-button">\n                <div role="button" class="ui-button usa" contenteditable="true" style="background-color: var(--color-primary);">\n                    BUTTON\n                </div>\n            </div>\n        </div>','<div class="ui-button-container">\n            <div class="ui-button">\n                <div role="button" class="ui-button" style="background-color: var(--color-primary);">\n                <div contenteditable="false" class="icon-container" style="display: inline; margin: 0 6px 0 0;">\n                    <i  contenteditable="false" class="fas fa-hand-point-right" style="font-size: 18px;"></i>\n                </div>\n                <div class="usa" contenteditable="true" style="display: inline; margin: 0 0 0 6px;">\n                    BUTTON\n                </div>\n                </div>\n            </div>\n        </div>','<div class="ui-button-container">\n            <div class="ui-button">\n                <div role="button" class="ui-button usa" style="background-color: var(--color-primary);">\n                <div class="usa" contenteditable="true" style="display: inline; margin: 0 6px 0 0;">\n                    BUTTON\n                </div>\n                <div contenteditable="false" class="icon-container" style="display: inline; margin: 0 0 0 6px;">\n                    <i  contenteditable="false" class="fas fa-hand-point-left" style="font-size: 18px;"></i>\n                </div>\n                </div>\n            </div>\n        </div>','<div class="ui-button-container">\n            <div class="ui-button">\n                <div role="button" class="ui-button usa" contenteditable="true" style="background-color: transparent; color: var(--color-primary); border: 2px solid var(--color-primary);">\n                    GHOST BUTTON\n                </div>\n            </div>\n        </div>','<div class="ui-button-container">\n            <div class="ui-button">\n            <div role="button" class="ui-button usa" contenteditable="true" style="background-color: transparent; color: var(--color-primary); border: 2px solid var(--color-primary);">\n                CANCEL\n            </div>\n            <div role="button" class="ui-button usa" contenteditable="true" style="background-color: var(--color-primary);">\n                ACCEPT\n            </div>\n            </div>\n        </div>','<div class="circle-button-container">\n        <button class="circle-button icon-container" style="background-color: var(--color-primary);">\n            <i class="fas fa-plus"></i>\n        </button>\n        <span class="circle-button-label usa">Label</span>\n        </div>','<div class="ui-button-container">\n            <div class="ui-button">\n                <div role="button" class="ui-button usa" contenteditable="true" style="background-color: var(--color-primary); opacity: 0.5;">\n                    DISABLED BUTTON\n                </div>\n            </div>\n        </div>','<div class="ui-button-container">\n            <div style="display: flex;">\n                <div role="button" class="ui-button usa" contenteditable="true" style="background-color: var(--color-primary); border-radius: 24px 0 0 24px;">\n                    Left\n                </div>\n                <div role="button" class="ui-button usa button-group-middle" contenteditable="true" style="background-color: var(--color-primary);">\n                    Middle\n                </div>\n                <div role="button" class="ui-button usa" contenteditable="true" style="background-color: var(--color-primary); border-radius: 0 24px 24px 0;">\n                    Right\n                </div>\n            </div>\n        </div>','<div class="ui-button-container">\n            <div class="ui-button">\n                <div role="button" class="ui-button usa" contenteditable="true" style="background: linear-gradient(45deg, var(--color-primary), var(--color-accent)); color: var(--text-on-primary);">\n                    GRADIENT BUTTON\n                </div>\n            </div>\n        </div>','<div class="ui-button-container">\n            <div class="ui-button">\n                <div role="button" class="ui-button usa" contenteditable="true" style="background-color: var(--color-primary); border-radius: var(--standard-radius);">\n                    Theme Radius\n                </div>\n            </div>\n        </div>'];case"blankCard":return['<div class="fw">\n            <div class="blank-card-content" style="border-bottom: 0.12rem solid var(--neutral-gray);background-color: var(--input-bg-color);"></div>\n        </div>','<div class="fw">\n            <div class="blank-card-content" style="background-color: var(--color-transparent-blk);"></div>\n        </div>','<div class="fw">\n            <div class="blank-card-content border-card" style="border: 0.12rem solid var(--color-primary);"></div>\n        </div>','<div class="fw">\n            <div class="blank-card-content" style="background: linear-gradient(45deg, var(--color-primary), var(--color-accent)); "></div>\n        </div>','<div class="fw">\n            <div class="blank-card-content hero" style="position: relative; background-color: var(--input-bg-color); z-index: 4;">\n            <div class="card-image non-editable blank-w-image">\n            <span class="non-editable" style="color: gray;">Click to add image</span>\n            <i style="color: var(--placeholder-color);" class="fa-solid fa-image"></i>\n            </div>\n            </div>\n        </div>'];case"card":return['<div class="card-con">\n            <div class="card-image card-img-placeholder resizeable">\n                <i class="fa-solid fa-image image-ph non-editable"></i>\n                <span class="non-editable">click to add image</span>\n            </div>\n            <div class="card-content">\n                <div>\n                <h3 class="card-title usa">Card Title</h3>\n                </div>\n                <div>\n                <p class="card-text usa">Card content goes here. This is a brief description.</p>\n                </div>\n            </div>\n            </div>','<div class="card-con">\n            <div class="card-image card-img-placeholder resizeable" style="height: 146px;">\n                <i class="fa-solid fa-image image-ph non-editable"></i>\n                <span class="non-editable">Click to add image</span>\n            </div>\n            <div class="card-content">\n                <span class="card-featured-tag" style="color: var(--color-primary);">Featured</span>\n                <div>\n                <h3 class="card-title usa">Featured Card</h3>\n                </div>\n                <div>\n                <p class="card-text usa">A more detailed card description, perfect for highlighting important content.</p>\n                </div>\n                <div class="card-button usa" style="background-color: var(--color-primary); color: var(--basic-txt-color);">Read More</div>\n            </div>\n            </div>','<div class="card-con card-hz">\n            <div class="card-image card-hz-img-lft">\n                <i class="fa-solid fa-image image-ph non-editable"></i>\n            </div>\n            <div class="card-hz-content">\n                <div>\n                <h3 class="card-title usa">Horizontal Card</h3>\n                </div>\n                <div>\n                <p class="card-text usa">Perfect for list views and compact layouts.</p>\n                </div>\n            </div>\n            </div>','<div class="card-con card-hz">\n            <div class="card-hz-content">\n                <div>\n                <h3 class="card-title usa">Horizontal Card</h3>\n                </div>\n                <div>\n                <p class="card-text usa">Perfect for list views and compact layouts.</p>\n                </div>\n            </div>\n            <div class="card-image card-hz-img-rgt">\n                <i class="fa-solid fa-image image-ph non-editable"></i>\n            </div>\n            </div>','<div class="card-con">\n            <div class="card-image card-img-placeholder resizeable" style="height: 166px;">\n                <i class="fa-solid fa-image image-ph non-editable"></i>\n                <span class="non-editable">Click to add image</span>\n            </div>\n            <div class="card-content">\n                <div class="card-social-header">\n                <div class="nav-image card-avatar">\n                    <i class="fa-solid fa-image non-editable" style="font-size: smaller;"></i>\n                </div>\n                <div>\n                    <div class="card-social-name usa" style="color: var(--color-secondary);">Display Name</div>\n                    <div class="card-social-time usa">2 hours ago</div>\n                </div>\n                </div>\n                <div>\n                <p class="card-text usa">A social media style card with user avatar and timestamp.</p>\n                </div>\n                <div class="card-social-actions">\n                <span class="icon-container"><i class="fas fa-heart"></i>&emsp;<div class="usa" style="display: inline;">24</div></span>\n                <span class="icon-container"><i class="fas fa-comment"></i>&emsp;<div class="usa" style="display: inline;">3</div></span>\n                <span class="icon-container"><i class="fas fa-share-nodes"></i></span>\n                </div>\n            </div>\n            </div>','<div class="card-con">\n            <div class="card-image card-img-placeholder resizeable">\n                <i class="fa-solid fa-image image-ph non-editable"></i>\n                <span class="non-editable">Click to add image</span>\n            </div>\n            <div class="card-content">\n                <div style="display: flex; justify-content: space-between; align-items: start;">\n                <div>\n                    <div>\n                    <h3 class="card-title usa">Product Name</h3>\n                    </div>\n                    <div>\n                    <p class="card-text usa">Brief product description highlighting key features.</p>\n                    </div>\n                </div>\n                <div style="color: var(--color-primary); font-size: 20px; font-weight: bold;">$99</div>\n                </div>\n                <div style="display: flex; gap: 8px;">\n                <div class="card-button usa" style="flex: 1; background-color: var(--color-primary);">Add to Cart</div>\n                <div class="card-button" style="flex: 0 0 auto; background-color: var(--neutral-gray);"><i style="color: var(--error-danger-delete);" class="fas fa-heart"></i></div>\n                </div>\n            </div>\n            </div>','<div class="card-con">\n            <div style="position: relative;">\n            <div class="card-image card-img-placeholder resizeable">\n                <i class="fa-solid fa-image image-ph non-editable"></i>\n                <span class="non-editable">Click to add image</span>\n            </div>\n            <div style="position: absolute; top: 12px; right: 12px; background-color: var(--color-primary); padding: 8px; border-radius: 8px; text-align: center;">\n                <div class="usa" style="color: var(--basic-txt-color); font-size: 20px; font-weight: bold;">15</div>\n                <div class="usa" style="color: var(--basic-txt-color); font-size: 14px;">MAR</div>\n            </div>\n            </div>\n            <div class="card-content">\n            <div>\n            <h3 class="card-title usa">Event Title</h3>\n            </div>\n            <div style="display: flex; gap: 12px; margin: 8px 0; color: var(--basic-txt-color);">\n                <span class="icon-container"><i class="fas fa-clock"></i><div class="usa" style="display: inline;"> 7:00 PM</div></span>\n                <span class="icon-container"><i class="fas fa-location-dot"></i><div class="usa" style="display: inline;"> Location Name</div></span>\n            </div>\n            <div>\n            <p class="card-text usa">Brief description of the event and what attendees can expect.</p>\n            </div>\n            <div style="display: flex; gap: 8px;">\n                <div class="card-button usa" style="flex: 1; background-color: var(--color-primary); color: var(--basic-txt-color);">Register Now</div>\n                <div class="card-button usa" style="flex: 1; background-color: var(--neutral-gray); color: var(--basic-txt-color);">Learn More</div>\n            </div>\n            </div>\n            </div>','<div class="card-con card-stacked">\n                <div class="card-image card-img-placeholder card-stacked-img resizeable bb">\n                    <i class="fa-solid fa-image image-ph non-editable"></i>\n                    <span class="non-editable">Click to add image</span>\n                </div>\n                <div class="card-content card-stacked-content">\n                <div>\n                    <h3 class="card-title usa">Elevated Design</h3>\n                    </div>\n                    <div>\n                    <p class="card-text usa">Layout with an elevated image.</p>\n                    </div>\n                    <div class="card-actions error-container">\n                        <div class="card-social-actions">\n                        <span class="icon-container"><i class="fas fa-heart" style="color: var(--color-primary);"></i><div class="usa" style="display: inline;"> 42</div></span>\n                        <span class="icon-container"><i class="fas fa-bookmark"></i></span>\n                        </div>\n                    </div>\n                </div>\n            </div>','<div class="card-con">\n                <div class="card-content">\n                <div>\n                <h3 class="card-title usa">Bottom Image Design</h3>\n                </div>\n                <div>\n                <p class="card-text usa">Layout with the image placed at the bottom, perfect for when you want the text to grab attention first.</p>\n                </div>\n                <div class="card-metrics">\n                    <span class="icon-container"><i class="fas fa-star" style="color: var(--color-primary);"></i>&emsp;&nbsp;<div class="usa" style="display: inline;">4.8</div></span>\n                    <span class="icon-container"><i class="fas fa-eye" style="color: var(--color-primary);"></i>&emsp;&nbsp;<div class="usa" style="display: inline;">1.2k</div></span>\n                </div>\n                </div>\n                <div class="card-image card-img-placeholder resizeable card-image-bottom">\n                    <i class="fa-solid fa-image image-ph non-editable"></i>\n                    <span class="non-editable">Click to add image</span>\n                </div>\n            </div>'];case"card2":return['<div class="card-con">\n            <div class="card-simple">\n            <div class="card-icon-header">\n                <div class="icon-container card-icon-large" style="color: var(--color-primary);">\n                <i class="fas fa-bolt"></i>\n                </div>\n                <div style="width: 100%;">\n                <h3 class="card-title usa">Simple Card</h3>\n                </div>\n            </div>\n            <div>\n            <p class="card-text usa">A minimalist card with icon.</p>\n            </div>\n            </div>\n            </div>','<div class="card-con" style="background-color: var(--color-accent); border: none;">\n                <div class="card-simple" style="display: flex; justify-content: space-between;">\n                    <div style="width: 100%; margin-right: 14px;">\n                        <div>\n                        <h3 class="card-title usa">Color Card</h3>\n                        </div>\n                        <div>\n                        <p class="card-text usa">A minimalist card with icon.</p>\n                        </div>\n                    </div>\n                    <div class="icon-container card-icon-large" style="color: var(--color-primary);">\n                        <i class="fas fa-bolt"></i>\n                    </div>\n                </div>\n            </div>','<div class="card-con">\n                <div class="card-simple">\n                  <div>\n                  <h3 class="card-title usa card-centered">Action Card</h3>\n                  </div>\n                  <div>\n                  <p class="card-text usa card-centered">A card with multiple action buttons.</p>\n                  </div>\n                    <div class="card-action-buttons">\n                        <div class="card-action-btn usa" style="background-color: var(--color-primary);">\n                        <span>Accept</span>\n                        </div>\n                        <div class="card-action-btn usa" style="border: 1px solid var(--color-primary); color: var(--color-primary);">\n                        <span>Decline</span>\n                        </div>\n                    </div>\n                </div>\n            </div>','<div style="background-color: var(--secondary-color);">\n                <div class="card-con" style="background-color: var(--neutral-gray);">\n                    <div class="card-simple">\n                        <div>\n                        <h4 class="card-title usa">Informational Card</h4>\n                        </div>\n                        <div>\n                        <p class="card-text usa" style="font-size: 14px;">\n                        Use this card to display detailed information in an organized manner.\n                        </p>\n                        </div>\n                    </div>\n                </div>\n            </div>','<div class="card-con">\n                <div class="card-quote">\n                    <div class="card-quote-text heading-wrapper">\n                        <h4 contenteditable="true">\n                        <span style="margin-left: -12px;">"&hairsp;</span><span class="usa">Quote card, designed to display text with impact.</span>&hairsp;"\n                        </h4>\n                    </div>\n                    <div class="card-quote-author">\n                        <p class="usa">â€” Author Name</p>\n                    </div>\n                </div>\n            </div>','<div class="card-con">\n                <div class="card-simple">\n                    <div>\n                    <h3 class="card-title usa">List Card</h3>\n                    </div>\n                    <ol class="card-list">\n                        <li class="usa">Task or goal</li>\n                        <li class="usa">Task or goal</li>\n                        <li class="usa">Task or goal</li>\n                    </ol>\n                </div>\n            </div>','<div class="card-stats">\n                <div class="card-stat-header">\n                    <div class="icon-container">\n                      <i class="fa-solid fa-chart-line" style="color: var(--color-primary)"></i>\n                    </div>\n                    <div>\n                    <h1>95%</h1>\n                    </div>\n                </div>\n                <div>\n                <p class="card-text">User Satisfaction</p>\n                </div>\n            </div>','<div class="card-con card-simple">\n                <div style="display: flex; justify-content: space-between; align-items: flex-start;">\n                    <div>\n                        <div>\n                        <h3 class="card-title usa">Project Status</h3>\n                        </div>\n                        <div>\n                        <p class="card-text usa">Current sprint progress</p>\n                        </div>\n                    </div>\n                    <span style="color: var(--color-primary);">75%</span>\n                </div>\n            </div>','<div class="card-con" style="background-color: var(--color-primary)">\n                <div class="card-centered">\n                <div class="achievement-con">\n                    <div class="achievement-layer-1"></div>\n                    <div class="achievement-layer-2"></div>\n                    <div class="achievement-content">\n                    <div class="icon-container card-icon-large" style="margin: 6px 0 10px 0;">\n                        <i class="fas fa-trophy" style="color: var(--color-accent);"></i>\n                    </div>\n                    <div>\n                    <h3 class="card-title usa">Level Achieved!</h3>\n                    </div>\n                    <div>\n                    <p class="card-text usa">You\'ve reached Level 5</p>\n                    </div>\n                    <div>\n                    <p class="usa" style="font-size: 12px; margin-top: 8px;">75/100 XP to next level</p>\n                    </div>\n                    </div>\n                </div>\n                </div>\n            </div>'];case"listItem":return['<div class="li-base li-padding-x" style="background-color: var(--input-bg-color);">\n                    <div class="icon-container li-icon">\n                        <i class="fas fa-bolt-lightning" style="color: var(--color-primary);"></i>\n                    </div>\n                    <span class="usa" contenteditable="true">List item text</span>\n                </div>','<div class="li-base li-padding-x li-border-top">\n                    <div class="icon-container li-icon">\n                        <i class="fas fa-bolt-lightning" style="color: var(--color-primary);"></i>\n                    </div>\n                    <span class="usa" contenteditable="true">List item text</span>\n                </div>','<div class="li-base li-padding-x" style="background-color: var(--input-bg-color);">\n                    <div class="icon-container li-icon">\n                        <i class="fas fa-bolt-lightning" style="color: var(--color-primary);"></i>\n                    </div>\n                    <div class="li-content">\n                        <span class="usa" contenteditable="true">List item text</span>\n                        <span contenteditable="true" class="li-subtitle usa">Subtitle text</span>\n                    </div>\n                </div>','<div class="li-base li-padding-x li-space-between" style="background-color: var(--input-bg-color);">\n                    <div class="icon-container li-icon" style="display: flex; align-items: center; gap: 12px;">\n                        <i class="fas fa-check" style="color: var(--color-primary);"></i>\n                        <span class="usa" contenteditable="true">List item text</span>\n                    </div>\n                    <div class="icon-container li-chevron">\n                        <i class="fas fa-chevron-right" style="color: var(--color-primary);"></i>\n                    </div>\n                </div>','<div class="li-base li-padding-x li-space-between" style="background-color: var(--input-bg-color);">\n                    <div style="display: flex; align-items: center; gap: 12px; margin-left: 12px;">\n                        <div class="icon-container">\n                            <i class="fas fa-check" style="color: var(--color-primary);"></i>\n                        </div>\n                        <span class="usa" contenteditable="true">List item text</span>\n                    </div>\n                    <span class="usa" contenteditable="true" style="color: var(--color-primary); margin-right: 12px; font-size: 20px;">Big text</span>\n                </div>','<div class="li-base li-padding-x" style="background-color: var(--input-bg-color);">\n                    <div class="nav-image li-avatar">\n                        <i class="fa-solid fa-image image-ph non-editable"></i>\n                    </div>\n                    <div class="li-content">\n                        <span class="usa" contenteditable="true">List item text</span>\n                        <span contenteditable="true" class="li-subtitle usa">Subtitle text</span>\n                    </div>\n                </div>','<div class="li-base li-padding-x li-space-between li-border-bottom" style="background-color: var(--input-bg-color);">\n                    <div style="display: flex; align-items: center; gap: 8px;">\n                        <div class="nav-image li-avatar li-small-avatar">\n                            <i class="fa-solid fa-image image-ph non-editable"></i>\n                        </div>\n                        <div>\n                            <div class="usa" contenteditable="true" style="color: var(--color-primary);">Display Name</div>\n                            <div class="usa" contenteditable="true" style="font-size: 12px; opacity: 0.7;">2m ago</div>\n                        </div>\n                    </div>\n                    <div style="display: flex; gap: 8px; margin-right: 6px;">\n                        <div class="li-action" style="background-color: var(--color-primary);"><span>Action</span></div>  \n                    </div>  \n                </div>','<div class="li-base li-padding li-border-bottom" style="background-color: var(--color-primary);">\n                    <div class="icon-container li-feature-icon-con">\n                        <i class="fas fa-star" style="font-size: 16px;"></i>\n                    </div>\n                    <span class="usa" contenteditable="true" style="font-weight: 500;">Featured list item</span>\n                </div>','<div class="li-base li-padding-x" style="border: 2px solid; color: var(--color-primary);">\n                    <div class="icon-container li-icon">\n                        <i class="fas fa-arrow-right" style="color: var(--color-primary); font-size: 16px;"></i>\n                    </div>\n                    <span class="usa" contenteditable="true">Outlined list item</span>\n                </div>','<div class="li-base li-pill" style="background: linear-gradient(45deg, var(--color-primary), var(--color-secondary));">\n                    <div class="icon-container">\n                        <i class="fas fa-bolt" style="color: white; font-size: 16px;"></i>\n                    </div>\n                    <span class="usa" contenteditable="true" style="color: white;">Pill-shaped item</span>\n                </div>','<div class="error-container li-slide-con">\n                    <div class="li-slide-btn-con">\n                        <div class="icon-container">\n                            <button class="li-slide-btn" style="background-color: var(--color-secondary);">\n                                <i class="fas fa-trash"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="li-base li-padding-x li-slide-content">\n                        <span class="usa" contenteditable="true">Slide to reveal button</span>\n                        <div class="icon-container li-icon">\n                            <i class="fas fa-grip-lines-vertical slide-reveal-grip"></i>\n                        </div>\n                    </div>\n                </div>','<div class="card-timeline">\n                <div class="card-timeline-dot" style="background-color: var(--color-primary);"></div>\n                <div class="card-timeline-line"></div>\n                <div class="usa tl-title">Timeline Item</div>\n                <span class="card-text usa" style="font-size: 14px;">New features released to production</span>\n                <br>\n                <span class="usa card-time">2 hours ago</span>\n            </div>'];case"navbar":return['<div class="navContain">\n            <div class="fw navbar top-navbar">\n                <div>\n                    <span spellcheck="false" class="nav-brand-text ml-16" contenteditable="true">Brand</span>\n                </div>\n                \n                <div class="icon-container nav-icon mr-16">\n                    <i class="fas fa-bars"></i>\n                </div>\n            </div>\n            <div class="top-shadow-div"></div>\n        </div>','<div class="navContain">\n            <div class="fw navbar top-navbar">\n                <div class="ml-8" style="width: 21px"></div>\n                <div class="nav-avatar nav-image">\n                    <span class="non-editable"><i class="fas fa-image"></i></span>\n                </div>\n                <div class="icon-container nav-icon mr-16">\n                    <i class="fas fa-bars"></i>\n                </div>\n            </div>\n        </div>','<div class="navContain">\n            <div class="fw navbar nav-brand" style="background-color: var(--color-primary);">\n                <div class="icon-container ml-16 nav-icon nav-icon-light mr-8">\n                    <i class="fas fa-arrow-left"></i>\n                </div>\n                <div class="nav-center-content">\n                    <span spellcheck="false" class="nav-title-text" contenteditable="true">Brand</span>\n                </div>\n                <div class="icon-container nav-icon nav-icon-light mr-16">\n                    <i class="fas fa-bars"></i>\n                </div>\n            </div>\n        </div>','<div class="navContain">\n            <div class="fw navbar top-navbar">\n                <div class="icon-container nav-icon mr-16 ml-8">\n                    <i class="fas fa-arrow-left"></i>\n                </div>\n                <div class="nav-avatar nav-image mr-16">\n                    <span class="non-editable"><i class="fas fa-image"></i></span>\n                </div>\n                <div class="nav-flex-grow">\n                    <span contenteditable="true" class="nav-username">Username</span>\n                    <span contenteditable="true" class="nav-status">Online</span>\n                </div>\n                <div class="nav-icon-group">\n                    <div class="icon-container nav-icon">\n                        <i class="fas fa-phone"></i>\n                    </div>\n                    <div class="icon-container nav-icon mr-8">\n                        <i class="fas fa-ellipsis-vertical"></i>\n                    </div>\n                </div>\n            </div>\n        </div>','<div class="navContain">\n        <div class="fw navbar top-navbar">\n        <div class="icon-container ml-8 nav-icon mr-16">\n            <i class="fas fa-arrow-left"></i>\n        </div>\n        <div class="nav-flex-grow mr-8" style="background-color: var(--input-bg-color); border-radius: 20px; padding: 6px 12px; display: flex; align-items: center;">\n            <div class="icon-container nav-icon">\n            <i class="fas fa-search"></i>\n            </div>\n            <span contenteditable="true" style="margin-left: 10px; color: var(--basic-txt-color);">Search...</span>\n        </div>\n        <div class="icon-container mr-16 nav-icon">\n            <i class="fas fa-microphone"></i>\n        </div>\n        </div>\n        </div>','<div class="navContain">\n        <div class="fw navbar top-navbar" style="overflow: auto;">\n        <div style="width: 100%; display: flex; justify-content: space-between; align-items: center;">\n            <div class="icon-container mr-16 ml-16 nav-icon">\n            <i class="fas fa-sliders"></i>\n            </div>\n            <div class="nav-pill" style="background-color: var(--color-primary);">\n            <span contenteditable="true">All</span>\n            </div>\n            <div class="nav-pill">\n            <span contenteditable="true">Popular</span>\n            </div>\n            <div class="nav-pill">\n            <span contenteditable="true">New</span>\n            </div>\n            <div class="nav-pill">\n            <span contenteditable="true">Trending</span>\n            </div>\n        </div>\n        </div>\n        </div>','<div class="navContain">\n            <div class="fw navbar top-navbar">\n            <div class="nav-flex-grow">\n                <span contenteditable="true" class="nav-brand-text ml-16">Profile</span>\n            </div>\n            <div class="nav-icon-group mr-8">\n                <div class="icon-container nav-icon">\n                <i class="fas fa-bell"></i>\n                </div>\n                <div class="icon-container nav-icon">\n                <i class="fas fa-gear"></i>\n                </div>\n                <div class="nav-avatar nav-image">\n                    <span class="non-editable"><i class="fas fa-user"></i></span>\n                </div>\n            </div>\n            </div>\n        </div>','<div class="navContain">\n            <div class="fw navbar top-navbar">\n                <div class="icon-container ml-8 nav-icon">\n                    <i class="fas fa-bars"></i>\n                </div>\n                <div class="nav-center-content">\n                    <div>\n                    <span class="nav-brand-text" contenteditable="true">SHOP</span>\n                    </div>\n                </div>\n                <div class="nav-icon-group mr-8">\n                    <div class="icon-container nav-icon">\n                    <i class="fas fa-search"></i>\n                    </div>\n                    <div class="icon-container nav-icon">\n                    <i class="fas fa-heart"></i>\n                    </div>\n                    <div class="icon-container nav-icon">\n                    <i class="fas fa-shopping-cart"></i>\n                    </div>\n                </div>\n            </div>\n        </div>','<div class="navContain">\n            <div class="fw navbar top-navbar" style="justify-content: center; position: relative;">\n                <div class="nav-avatar icon-container" style="background-color: var(--color-primary); position: absolute; left: 10px;">\n                    <span class="non-editable"><i class="fas fa-bolt"></i></span>\n                </div>\n                <div class="nav-center-content">\n                    <span class="nav-title-text" contenteditable="true">App Name</span>\n                </div>\n            </div>\n        </div>'];case"chatInput":return['<div class="chat-input-con">\n                <input type="text" placeholder="Type a message..." class="chat-input">\n                <button class="chat-send-btn icon-container" style="background-color: var(--color-primary); color: white;">\n                    <i class="fas fa-paper-plane chat-send-icon"></i>\n                </button>\n            </div>','<div class="chat-input-wrapper">\n                <div class="chat-input-con">\n                    <button class="chat-icon-btn icon-container">\n                        <i class="far fa-smile"></i>\n                    </button>\n                    <input type="text" placeholder="Type a message..." class="chat-input">\n                    <button class="chat-send-btn icon-container" style="background-color: var(--color-primary); color: white;">\n                        <i class="fas fa-paper-plane chat-send-icon"></i>\n                    </button>\n                </div>\n            </div>','<div class="chat-input-wrapper">\n                <div class="chat-input-con">\n                    <button class="chat-icon-btn icon-container" style="padding-left: 4px;">\n                        <i class="far fa-smile"></i>\n                    </button>\n                    <button class="chat-icon-btn icon-container" style="padding-left: 0;">\n                        <i class="far fa-image"></i>\n                    </button>\n                    <input type="text" placeholder="Type a message..." class="chat-input" style="padding: 8px 4px;">\n                    <button class="chat-send-btn icon-container" style="background-color: var(--color-primary); color: white;">\n                        <i class="fas fa-paper-plane chat-send-icon"></i>\n                    </button>\n                </div>\n            </div>','<div class="chat-input-wrapper">\n              <div class="chat-stream-container">\n                <div class="chat-stream-input">\n                    <div class="icon-container">\n                        <i class="fas fa-face-smile"></i>\n                    </div>\n                    <div contenteditable="true" class="chat-stream-placeholder usa">Type a message...</div>\n                </div>\n                <button class="chat-send-btn" style="background-color: var(--color-primary);">\n                    <div class="icon-container">\n                        <i class="fas fa-message"></i>\n                    </div>\n                </button>\n              </div>\n            </div>','<div class="chat-input-wrapper">\n              <div class="chat-input-con">\n                <div class="nav-image" style="width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background-color: var(--input-bg-color);">\n                    <span class="non-editable fas fa-image"></span>\n                </div>\n                <input type="text" placeholder="Write a comment..." class="chat-input">\n                <button class="chat-icon-btn icon-container" style="padding: 8px;">\n                    <i class="far fa-paper-plane"></i>\n                </button>\n              </div>\n            </div>'];case"hero":return['<div class="resizeable hero hero-base justify-end">\n                <div class="hero-image card-image non-editable"><span class="non-editable">click to add image</span></div>\n                <div class="hero-gradient" style="background: linear-gradient(transparent 28%, var(--color-primary) 78%, var(--color-primary) 92%);"></div>\n                <div class="hero-content">\n                    <div class="heading-wrapper">\n                        <h2 contenteditable="true" class="hero-heading">Welcome</h2>\n                    </div>\n                    <div>\n                        <p contenteditable="true" class="hero-paragraph">This is a hero section with a beautiful gradient background</p>\n                    </div>\n                </div>\n            </div>','<div class="resizeable hero hero-base justify-end">\n                <div class="hero-image card-image non-editable"><span class="non-editable">click to add image</span></div>\n                <div class="hero-gradient gradient-dark"></div>\n                <div class="hero-content text-left">\n                    <div class="heading-wrapper">\n                        <h2 contenteditable="true" class="hero-heading">Dark Gradient Hero</h2>\n                    </div>\n                    <div>\n                        <p contenteditable="true" class="hero-paragraph">A hero section with left-aligned text and gradient overlay.</p>\n                    </div>\n                </div>\n            </div>','<div class="resizeable hero hero-base justify-center">\n                <div class="hero-image card-image"><span class="non-editable">click to add image</span></div>\n                <div class="hero-gradient" style="background: linear-gradient(135deg, var(--color-primary) 0%, transparent 90%);"></div>\n                <div class="hero-content">\n                    <div class="heading-wrapper">\n                        <h2 contenteditable="true" class="hero-heading" style="font-size: 32px;">Hero with Button</h2>\n                    </div>\n                    <div>\n                        <p contenteditable="true" class="hero-paragraph">A centered hero section with a call-to-action button.</p>\n                    </div>\n                    <div contenteditable="true" class="hero-button">Get Started</div>\n                </div>\n            </div>','<div class="resizeable hero hero-base justify-end" style="transform: translateX(-10px);">\n                <div class="hero-split">\n                    <div class="hero-split-content" style="background-color: var(--color-primary);">\n                        <div>\n                            <h1 contenteditable="true" class="hero-heading" style="text-align: center;">Welcome to Our Site</h1>\n                        </div>\n                        <div>\n                            <p contenteditable="true" style="margin: 5px 0 0; font-size: 16px; color: white; text-align: center;">A split-screen hero layout.</p>\n                        </div>\n                    </div>\n                    <div class="hero-split-image card-image" style="background-color: var(--neutral-gray);">\n                        <span class="non-editable">click to add image</span>\n                        <i style="color: var(--placeholder-color); position: absolute; top: 46%; left: 76%; pointer-events: none;" class="fa-solid fa-image"></i>\n                    </div>\n                </div>\n            </div>','<div class="resizeable hero hero-base" style="transform: translateX(-10px);">\n                <div class="hero-image card-image" style="width: calc(100% + 20px);">\n                    <i class="pe-none" style="color: var(--placeholder-color); position: absolute; top: 66%; left: 80%;" class="fa-solid fa-image"></i>\n                    <span class="non-editable">click to add image</span>\n                </div>\n                <div class="hero-diagonal" style="background: linear-gradient(135deg, var(--color-primary) 62%, transparent 62%);"></div>\n                <div style="position: relative; z-index: 3; text-align: left; padding: 4%;">\n                    <div class="heading-wrapper">\n                        <h2 contenteditable="true">Diagonal Split Hero</h2>\n                    </div>\n                    <div>\n                        <p contenteditable="true">Add flair to your hero with<br>diagonal design.</p>\n                    </div>\n                </div>\n            </div>','<div class="resizeable hero hero-base justify-center" style="transform: translateX(-10px);">\n                <div class="hero-split" style="background-color: var(--color-primary);">\n                    <div class="hero-image card-image"><span class="non-editable">click to add image</span></div>\n                    <div class="hero-card">\n                        <div>\n                            <h2 contenteditable="true" style="margin: 0; font-size: 28px; color: var(--color-primary);">Floating Card Hero</h2>\n                        </div>\n                        <div>\n                            <p contenteditable="true" style="margin: 10px 0; font-size: 16px; color: gray;">A modern hero with a floating card design.</p>\n                        </div>\n                    </div>\n                </div>\n            </div>','<div class="resizeable hero hero-base blob-con">\n                <div class="hero-blob card-image" style="background-color: var(--color-primary);">\n                    <span class="hero-blob-text non-editable">click to add image</span>\n                </div>\n                <div class="hero-blob card-image" style="background-color: var(--color-secondary);">\n                    <span class="hero-blob-text non-editable">click to add image</span>\n                </div>\n                <div class="hero-blob card-image" style="background-color: var(--color-accent);">\n                    <span class="hero-blob-text non-editable">click to add image</span>\n                </div>\n                <div class="blob-content">\n                    <div>\n                        <h1 contenteditable="true" style="margin: 0 0 10px 0; font-size: 28px;">Multi-Image Blobs</h1>\n                    </div>\n                    <div>\n                        <p contenteditable="true" style="margin: 0; font-size: 16px;">This hero section features playful overlapping image blobs.</p>\n                    </div>\n                </div>\n            </div>'];case"image":return['<div class="fw">\n                <div class="card-image ui-image resizeable">\n                    <i class="fa-solid fa-image image-ph"></i>    \n                    <span class="non-editable">Click to add image</span>\n                </div>\n            </div>','<div class="fw up-card">\n                <div class="card-image ui-image-full resizeable">\n                    <i class="fa-solid fa-image image-ph"></i>\n                    <span class="non-editable">Click to add full-width image</span>\n                </div>\n            </div>','<div class="ui-image-double resizeable">\n                <div class="card-image ui-image-double-item">\n                    <i class="fa-solid fa-image image-ph"></i>\n                    <span class="non-editable">Click to add image</span>\n                </div>\n                <div class="card-image ui-image-double-item">\n                    <i class="fa-solid fa-image image-ph"></i>\n                    <span class="non-editable">Click to add image</span>\n                </div>\n            </div>','<div class="ui-image-triple resizeable">\n                <div class="card-image ui-image-triple-item">\n                    <i class="fa-solid fa-image image-ph non-editable"></i>\n                </div>\n                <div class="card-image ui-image-triple-item">\n                    <i class="fa-solid fa-image image-ph non-editable"></i>\n                </div>\n                <div class="card-image ui-image-triple-item">\n                    <i class="fa-solid fa-image image-ph non-editable"></i>\n                </div>\n            </div>','<div class="ui-image-overlay fw">\n                <div class="card-image ui-image-overlay-base resizeable">\n                    <i class="fa-solid fa-image non-editable ui-image-placeholder-icon pe-none"></i>\n                </div>\n                <div class="ui-image-overlay-text">\n                    <div class="heading-wrapper">\n                        <h2 class="ui-image-title">Image Title</h2>\n                    </div>\n                    <div>\n                        <p class="ui-image-text">Click to edit text</p>\n                    </div>\n                </div>\n            </div>','<div class="ui-image-circle-con resizeable hero" data-aspect-ratio="1">\n                <div class="ui-image-circle-wrapper align-content">\n                    <div class="card-image ui-image-circle">\n                        <i class="fa-solid fa-image image-ph non-editable"></i>\n                    </div>\n                </div>\n            </div>'];case"imgGallery":return['<div class="image-gallery-wrapper" style="width: 100%; position: relative;">\n                <div class="image-gallery-con">\n                    <div class="ig-left-column-con">\n                        <div class="ig-image-wrapper">\n                            <div class="card-image resizeable ig-img-box">\n                                <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                                <span style="color: var(--basic-txt-color)" class="imgMsg non-editable">Click to add image</span>\n                            </div>\n                        </div>\n                        <div class="ig-image-wrapper">\n                            <div class="card-image resizeable ig-img-box">\n                                <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                                <span style="color: var(--basic-txt-color)" class="imgMsg non-editable">Click to add image</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="ig-right-column-con">\n                        <div class="ig-image-wrapper">\n                            <div class="card-image resizeable ig-img-box">\n                                <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                                <span style="color: var(--basic-txt-color)" class="imgMsg non-editable">Click to add image</span>\n                            </div>\n                        </div>\n                        <div class="ig-image-wrapper">\n                            <div class="card-image resizeable ig-img-box">\n                                <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                                <span style="color: var(--basic-txt-color)" class="imgMsg non-editable">Click to add image</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <button class="fa fa-plus ig-add-btn" style="display: none;"></button>\n            </div>','<div class="img-gallery-slider resizeable">\n                <div class="img-gallery-slider-row">\n                    <div class="card-image img-gallery-side-image">\n                        <i class="fa fa-image img-gallery-ph"></i>\n                    </div>\n\n                    <div class="img-gallery-center-overlay"></div>\n                    <div class="card-image img-gallery-center-image">\n                        <i class="fa fa-image img-gallery-ph"></i>\n                    </div>\n\n                    <div class="card-image img-gallery-side-image">\n                        <i class="fa fa-image img-gallery-ph"></i>\n                    </div>\n                </div>\n                <i class="fas fa-caret-left img-gallery-nav img-gallery-nav-left"></i>\n                <i class="fas fa-caret-right img-gallery-nav img-gallery-nav-right"></i>\n\n                <div class="img-gallery-dots">\n                    <div class="img-gallery-dot"></div>\n                    <div class="img-gallery-dot"></div>\n                    <div class="img-gallery-dot active"></div>\n                    <div class="img-gallery-dot"></div>\n                    <div class="img-gallery-dot"></div>\n                </div>\n            </div>','<div class="img-gallery-grid resizeable">\n                <div class="card-image img-gallery-grid-item">\n                    <i class="fa fa-image img-gallery-ph"></i>\n                </div>\n                <div class="card-image img-gallery-grid-item">\n                    <i class="fa fa-image img-gallery-ph"></i>\n                </div>\n                <div class="card-image img-gallery-grid-item">\n                    <i class="fa fa-image img-gallery-ph"></i>\n                </div>\n                <div class="card-image img-gallery-grid-item">\n                    <i class="fa fa-image img-gallery-ph"></i>\n                </div>\n                <div class="card-image img-gallery-grid-item">\n                    <i class="fa fa-image img-gallery-ph"></i>\n                </div>\n                <div class="card-image img-gallery-grid-item">\n                    <i class="fa fa-image img-gallery-ph"></i>\n                </div>\n            </div>','<div class="img-gallery-strip resizeable">\n                <div class="card-image img-gallery-strip-thumb">\n                    <i class="fa fa-image img-gallery-ph"></i>\n                </div>\n                <div class="card-image img-gallery-strip-thumb">\n                    <i class="fa fa-image img-gallery-ph"></i>\n                </div>\n                <div class="card-image img-gallery-strip-thumb">\n                    <i class="fa fa-image img-gallery-ph"></i>\n                </div>\n                <div class="card-image img-gallery-strip-thumb">\n                    <i class="fa fa-image img-gallery-ph"></i>\n                </div>\n                <div class="card-image img-gallery-strip-thumb">\n                    <i class="fa fa-image img-gallery-ph"></i>\n                </div>\n            </div>'];case"input":return['<div class="ui-input-wrapper">\n                <div contenteditable="true" class="ui-input-base empty" data-placeholder="Text Input Field" spellcheck="false" style="border-bottom: 2px solid var(--color-primary);">\n                </div>\n            </div>','<div class="ui-input-wrapper">\n                <div class="ui-input-label">Label</div>\n                <div contenteditable="true" spellcheck="false" class="ui-input-base empty" data-placeholder="Placeholder" style="border-bottom: 2px solid var(--color-primary);">\n                </div>\n            </div>','<div class="ui-input-wrapper">\n                <div class="ui-input-required-label">\n                <div class="ui-input-required-asterisk">*</div>\n                    <div class="ui-input-label">Required</div>\n                    \n                </div>\n                <div contenteditable="true" spellcheck="false" class="ui-input-base empty" data-placeholder="Placeholder" style="border-bottom: 2px solid var(--color-primary);">\n                </div>\n            </div>','<div class="fw">\n                <div class="ui-input-label">Label</div>\n                <div class="ui-input-focused-wrapper" style="border-color: var(--color-primary);">\n                    <div class="ui-input-wrapper">\n                        <div contenteditable="true" spellcheck="false" class="ui-input-base empty" data-placeholder="Selected Field" style="border: 3px solid var(--neutral-gray);">\n                        </div>\n                    </div>\n                </div>\n            </div>','<div class="ui-input-wrapper">\n                <div class="ui-input-label">Label</div>\n                <div contenteditable="true" spellcheck="false" class="ui-input-base ui-input-outlined empty" data-placeholder="Outlined Input" style="border: 2px solid var(--color-primary);">\n                </div>\n            </div>','<div class="ui-input-wrapper">\n                <div class="ui-input-label">Label</div>\n                <div class="ui-input-password-wrapper">\n                    <div contenteditable="true" spellcheck="false" class="ui-input-base empty password-input" data-placeholder="Password" style="border-bottom: 2px solid var(--color-primary);">\n                    </div>\n                    <div class="icon-container ui-input-password-icon">\n                        <i class="fas fa-eye"></i>\n                    </div>\n                    <div class="ui-input-password-hint">\n                        Must be at least 8 characters long\n                    </div>\n                </div>\n            </div>','<div class="ui-input-wrapper">\n                <div class="ui-input-label">Label</div>\n                <div contenteditable="true" spellcheck="false" class="ui-input-base ui-input-error empty" data-placeholder="Input Field">\n                </div>\n                <div class="ui-input-error-message">\n                    <i class="fas fa-exclamation-triangle ui-input-error-icon"></i>\n                    <div contenteditable="true">Please enter a valid value</div>\n                </div>\n            </div>','<div class="ui-input-wrapper">\n                <div class="ui-input-label">Label</div>\n                <div contenteditable="true" spellcheck="false" class="ui-input-base ui-input-disabled empty" data-placeholder="Disabled" style="border-color: var(--color-secondary);">\n                </div>\n            </div>','<div class="ui-input-wrapper">\n                <div class="ui-input-label">Label</div>\n                <div class="ui-input-password-wrapper">\n                    <div contenteditable="true" spellcheck="false" class="ui-input-base ui-input-success empty" data-placeholder="Success">\n                    </div>\n                    <div class="icon-container ui-input-success-icon">\n                        <i class="fas fa-check-circle"></i>\n                    </div>\n                </div>\n                <div class="ui-input-success-message">Success message</div>\n            </div>','<div class="ui-input-wrapper">\n                <div class="ui-input-label">Label</div>\n                <div class="ui-input-prefix-wrapper" style="border-bottom: 2px solid var(--color-accent);">\n                    <div class="icon-container ui-input-prefix">\n                        <i class="fa-solid fa-dollar-sign"></i>\n                    </div>\n                    <div contenteditable="true" spellcheck="false" class="ui-input-base ui-input-with-prefix empty" data-placeholder="0.00">\n                    </div>\n                </div>\n            </div>'];case"progressBar":return['<div class="progress-group" class="fw">\n                <div class="progress-bar" style="width: 100%; height: 6px; background-color: var(--neutral-gray); border-radius: 5px; overflow: hidden;">\n                    <div style="width: 76%; height: 100%; background-color: var(--color-primary); transition: width 0.3s ease;"></div>\n                </div>\n                <div contenteditable="true" style="margin-top: 5px; font-weight: bold; color: var(--basic-txt-color);">76%</div>\n            </div>','<div class="progress-group fw">\n                <div class="progress-bar progress-bar-medium" style="background-color: var(--neutral-gray);">\n                    <div class="progress-bar-inner" style="width: 76%; background-color: var(--color-primary);"></div>\n                </div>\n                <div class="progress-label">76%</div>\n            </div>','<div class="progress-group fw">\n                <div class="progress-bar progress-bar-labeled" style="background-color: var(--neutral-gray); border-radius: 15px;">\n                    <div class="progress-bar-inner" style="width: 76%; background-color: var(--color-secondary);">\n                        <span>76%</span>\n                    </div>\n                </div>\n            </div>','<div class="progress-group fw">\n                <div class="progress-bar progress-bar-medium" style="background-color: var(--neutral-gray);">\n                    <div class="progress-bar-inner" style="width: 76%; background: linear-gradient(45deg, var(--color-primary), var(--color-accent));"></div>\n                </div>\n                <div class="progress-value" style="margin: 5px 0 0 12px;">76%</div>\n            </div>','<div class="progress-group" style="width: 100%; display: flex; flex-direction: column; align-items: center;">\n            <div class="progress-bar resizeable" style="width: 100%; max-width: 350px; height: 66px; aspect-ratio: 1; position: relative;">\n                <svg viewBox="0 0 36 36" style="width: 100%; height: 100%;">\n                    <path d="M18 2.0845\n                        a 15.9155 15.9155 0 0 1 0 31.831\n                        a 15.9155 15.9155 0 0 1 0 -31.831"\n                        fill="none"\n                        stroke="var(--neutral-gray)"\n                        stroke-width="2"\n                        stroke-linecap="round"\n                    />\n                    <path d="M18 2.0845\n                        a 15.9155 15.9155 0 0 1 0 31.831\n                        a 15.9155 15.9155 0 0 1 0 -31.831"\n                        fill="none"\n                        stroke="var(--color-primary)"\n                        stroke-width="2"\n                        stroke-linecap="round"\n                        stroke-dasharray="76, 100"\n                        style="transition: stroke-dasharray 0.3s ease;"\n                    />\n                </svg>\n                <div contenteditable="true" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: bold; font-size: calc(0.15 * var(--progress-size, 100px)); color: var(--basic-txt-color);">76%</div>\n            </div>\n        </div>','<div class="progress-group" style="width: 100%; display: flex; flex-direction: column; align-items: center;">\n            <div class="progress-bar resizeable" style="width: 100%; height: 120px; position: relative;">\n                <svg viewBox="0 0 36 36" style="width: 100%; height: 100%;">\n                    <defs>\n                        <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="100%">\n                            <stop offset="0%" style="stop-color: var(--color-primary)"/>\n                            <stop offset="100%" style="stop-color: var(--color-accent)"/>\n                        </linearGradient>\n                    </defs>\n                    <path d="M18 2.0845\n                        a 15.9155 15.9155 0 0 1 0 31.831\n                        a 15.9155 15.9155 0 0 1 0 -31.831"\n                        fill="none"\n                        stroke="var(--neutral-gray)"\n                        stroke-width="4"\n                        stroke-linecap="round"\n                    />\n                    <path d="M18 2.0845\n                        a 15.9155 15.9155 0 0 1 0 31.831\n                        a 15.9155 15.9155 0 0 1 0 -31.831"\n                        fill="none"\n                        stroke="url(#progressGradient)"\n                        stroke-width="4"\n                        stroke-linecap="round"\n                        stroke-dasharray="76, 100"\n                        style="transition: stroke-dasharray 0.3s ease;"\n                    />\n                </svg>\n                <div contenteditable="true" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; font-size: 24px; font-weight: bold; color: var(--basic-txt-color);">76%</div>\n            </div>\n        </div>','<div class="progress-group" style="width: 100%; display: flex; flex-direction: column; align-items: center;">\n            <div class="progress-bar resizeable" style="width: 100%; height: 80px; position: relative; overflow: hidden; box-sizing: border-box;">\n                <svg viewBox="-1 -1 2 2" style="transform: rotate(-90deg); width: 100%; height: 100%; display: block;">\n                    \x3c!-- Background Circle --\x3e\n                    <circle cx="0" cy="0" r="1"\n                        fill="var(--neutral-gray)"\n                    />\n                    \x3c!-- Progress Pie Slice --\x3e\n                    <path d="M 0 0 L 1 0 A 1 1 0 0 1 0.866 0.5 L 0 0"\n                        fill="var(--color-primary)"\n                        stroke="none"\n                        transform="scale(0.99)"\n                        style="transform-origin: center; transition: transform 0.3s ease-in-out, d 0.3s ease-in-out;"\n                    />\n                </svg>\n                <div contenteditable="true" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: bold; color: var(--basic-txt-color); pointer-events: all;">76%</div>\n            </div>\n        </div>'];case"footer":return['<div class="footer-wrapper" style="background-color: var(--color-primary);">\n                <div class="footer-container footer-standard">\n                    <div class="footer-brand-section">\n                        <div class="card-image footer-logo">\n                            <i class="fa-solid fa-image non-editable" style="color: var(--placeholder-color);"></i>\n                        </div>\n                        <div>\n                            <h3 contenteditable="true" spellcheck="false" class="footer-heading usa">Brand</h3>\n                        </div>\n                    </div>\n                    <div class="footer-links-section">\n                        <ul class="footer-link-column">\n                            <li contenteditable="true"><a href="#" class="footer-link usa">About Us</a></li>\n                            <li contenteditable="true"><a href="#" class="footer-link usa">Contact</a></li>\n                            <li contenteditable="true"><a href="#" class="footer-link usa">Careers</a></li>\n                        </ul>\n                        <ul class="footer-link-column">\n                            <li contenteditable="true"><a href="#" class="footer-link usa">Support</a></li>\n                            <li contenteditable="true"><a href="#" class="footer-link usa">Privacy Policy</a></li>\n                            <li contenteditable="true"><a href="#" class="footer-link usa">Terms of Use</a></li>\n                        </ul>\n                    </div>\n                </div>\n                <div class="footer-bottom-section">\n                    <div class="footer-social-icons">\n                        <div class="icon-container">\n                            <i class="fas fa-seedling"></i>\n                        </div>\n                        <div class="icon-container">\n                            <i class="fas fa-bolt-lightning"></i>\n                        </div>\n                        <div class="icon-container">\n                            <i class="fas fa-skull"></i>\n                        </div>\n                    </div>\n                </div>\n                <br>\n            </div>','<div class="component-footer">\n            <div class="footer-wrapper" style="background-color: var(--color-primary);">\n                <div class="footer-container footer-centered">\n                    <div class="card-image footer-logo footer-logo-centered">\n                        <i class="fa-solid fa-image non-editable" style="color: var(--placeholder-color);"></i>\n                    </div>\n                    <div>\n                    <h3 contenteditable="true" spellcheck="false" class="footer-heading usa">Brand Name</h3>\n                    </div>\n                    <div class="footer-links-horizontal">\n                        <a href="#" contenteditable="true" class="footer-link usa">About</a>\n                        <a href="#" contenteditable="true" class="footer-link usa">Contact</a>\n                        <a href="#" contenteditable="true" class="footer-link usa">Terms</a>\n                        <a href="#" contenteditable="true" class="footer-link usa">Privacy</a>\n                    </div>\n                    <div class="footer-social-icons footer-social-compact">\n                        <div class="icon-container">\n                            <i class="fab fa-twitter"></i>\n                        </div>\n                        <div class="icon-container">\n                            <i class="fab fa-facebook"></i>\n                        </div>\n                        <div class="icon-container">\n                            <i class="fab fa-instagram"></i>\n                        </div>\n                        <div class="icon-container">\n                            <i class="fab fa-linkedin"></i>\n                        </div>\n                    </div>\n                    <div>\n                    <p contenteditable="true" class="footer-copyright-text usa">Â© 2025 Brand Name. All rights reserved.</p>\n                    </div>\n                </div>\n                </div>\n            </div>','<div class="component-footer">\n            <div class="footer-wrapper" style="background-color: var(--color-primary);">\n                <div class="footer-container footer-app">\n                    <div class="footer-flex-row">\n                        <div class="footer-newsletter">\n                            <div>\n                            <h3 contenteditable="true" class="footer-heading usa">Stay Updated</h3>\n                            </div>\n                            <div>\n                            <p contenteditable="true" class="footer-text usa">Subscribe to our newsletter for the latest updates and offers.</p>\n                            </div>\n                            <div class="footer-newsletter-form">\n                                <input type="text" placeholder="Your email" class="footer-input">\n                                <button style="background-color: var(--color-accent);" class="footer-button usa">Subscribe</button>\n                            </div>\n                        </div>\n                        <div class="footer-columns">\n                            <div class="footer-column">\n                                <div>\n                                <h4 contenteditable="true" class="footer-subheading usa">Product</h4>\n                                </div>\n                                <ul class="footer-link-column">\n                                    <li contenteditable="true"><a href="#" class="footer-link usa">Features</a></li>\n                                    <li contenteditable="true"><a href="#" class="footer-link usa">Pricing</a></li>\n                                    <li contenteditable="true"><a href="#" class="footer-link usa">Tutorials</a></li>\n                                </ul>\n                            </div>\n                            <div class="footer-column">\n                                <div>\n                                <h4 contenteditable="true" class="footer-subheading usa">Company</h4>\n                                </div>\n                                <ul class="footer-link-column">\n                                    <li contenteditable="true"><a href="#" class="footer-link usa">About</a></li>\n                                    <li contenteditable="true"><a href="#" class="footer-link usa">Blog</a></li>\n                                    <li contenteditable="true"><a href="#" class="footer-link usa">Careers</a></li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="footer-bottom-bar">\n                        <div class="footer-copyright">\n                            <div class="card-image footer-logo footer-logo-small">\n                                <i class="fa-solid fa-image non-editable" style="color: var(--placeholder-color);"></i>\n                            </div>\n                            <span contenteditable="true" class="footer-text usa">Â© 2025 Brand Inc.</span>\n                        </div>\n                        <div class="footer-social-icons footer-social-compact">\n                            <div class="icon-container">\n                                <i class="fab fa-facebook"></i>\n                            </div>\n                            <div class="icon-container">\n                                <i class="fab fa-twitter"></i>\n                            </div>\n                            <div class="icon-container">\n                                <i class="fab fa-instagram"></i>\n                            </div>\n                        </div>\n                    </div>\n                    <br>\n                    <div>\n                    <p contenteditable="true" class="footer-legal usa">All rights reserved. <a href="#" class="footer-link usa">Privacy Policy</a> â€¢ <a href="#" class="footer-link usa">Terms of Service</a></p>\n                    </div>\n                </div>\n                </div>\n            </div>','<div class="component-footer">\n                <div class="footer-wrapper" style="background-color: var(--color-primary);">\n                    <div class="footer-container footer-modern">\n                        <div class="footer-grid">\n                            <div class="footer-brand-block">\n                                <div class="card-image footer-logo footer-logo-large">\n                                    <i class="fa-solid fa-image non-editable" style="color: var(--placeholder-color);"></i>\n                                </div>\n                                <div>\n                                <h3 contenteditable="true" spellcheck="false" class="footer-heading usa">Design Studio</h3>\n                                </div>\n                                <div>\n                                <p contenteditable="true" class="footer-tagline usa">Creating exceptional experiences through thoughtful design</p>\n                                </div>\n                            </div>\n                            \n                            <div class="footer-nav-block">\n                                <div>\n                                <h4 contenteditable="true" class="footer-subheading usa">Navigation</h4>\n                                </div>\n                                <div class="footer-nav-grid">\n                                    <a href="#" contenteditable="true" class="footer-link footer-nav-item usa">Home</a>\n                                    <a href="#" contenteditable="true" class="footer-link footer-nav-item usa">Portfolio</a>\n                                    <a href="#" contenteditable="true" class="footer-link footer-nav-item usa">Services</a>\n                                    <a href="#" contenteditable="true" class="footer-link footer-nav-item usa">About</a>\n                                    <a href="#" contenteditable="true" class="footer-link footer-nav-item usa">Blog</a>\n                                    <a href="#" contenteditable="true" class="footer-link footer-nav-item usa">Contact</a>\n                                </div>\n                            </div>\n                            \n                            <div class="footer-contact-block">\n                                <div>\n                                <h4 contenteditable="true" class="footer-subheading usa">Contact Us</h4>\n                                </div>\n                                <address class="footer-address">\n                                    <div>\n                                    <p contenteditable="true" class="footer-text usa">123 Design Avenue</p>\n                                    </div>\n                                    <div>\n                                    <p contenteditable="true" class="footer-text usa">Creative District, CA 94103</p>\n                                    </div>\n                                    <i class="footer-contact-link fas fa-envelope"></i>\n                                    <div>\n                                    <p contenteditable="true" class="footer-text footer-contact-link usa">hello@designstudio.com</p>\n                                    </div>\n                                    <i class="footer-contact-link fas fa-phone"></i>\n                                    <div>\n                                    <p contenteditable="true" class="footer-text footer-contact-link usa">(555) 123-4567</p>\n                                    </div>\n                                </address>\n                            </div>\n                            \n                            <div class="footer-social-block">\n                                <div>\n                                <h4 contenteditable="true" class="footer-subheading usa">Follow Us</h4>\n                                </div>\n                                <div class="footer-social-grid">\n                                    <div class="footer-social-item">\n                                        <div class="icon-container footer-icon-container">\n                                            <i class="fab fa-instagram"></i>\n                                        </div>\n                                        <span contenteditable="true" class="footer-social-label usa">Instagram</span>\n                                    </div>\n                                    <div class="footer-social-item">\n                                        <div class="icon-container footer-icon-container">\n                                            <i class="fab fa-behance"></i>\n                                        </div>\n                                        <span contenteditable="true" class="footer-social-label usa">Behance</span>\n                                    </div>\n                                    <div class="footer-social-item">\n                                        <div class="icon-container footer-icon-container">\n                                            <i class="fab fa-dribbble"></i>\n                                        </div>\n                                        <span contenteditable="true" class="footer-social-label usa">Dribbble</span>\n                                    </div>\n                                    <div class="footer-social-item">\n                                        <div class="icon-container footer-icon-container">\n                                            <i class="fab fa-pinterest"></i>\n                                        </div>\n                                        <span contenteditable="true" class="footer-social-label usa">Pinterest</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class="footer-bottom-band">\n                            <div class="footer-bottom-content">\n                                <div>\n                                <p contenteditable="true" class="footer-copyright usa">Â© 2025 Design Studio. All rights reserved.</p>\n                                </div>\n                                <div class="footer-legal-links">\n                                    <a href="#" contenteditable="true" class="footer-link footer-legal-link usa">Privacy</a>\n                                    <a href="#" contenteditable="true" class="footer-link footer-legal-link usa">Terms</a>\n                                    <a href="#" contenteditable="true" class="footer-link footer-legal-link usa">Cookies</a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>'];case"video":return['<div class="fw">\n                <div class="video-container">\n                    <div class="card-image resizeable video-thumbnail">\n                        <span class="non-editable">Click to add image</span>\n                    </div>\n                    <div class="video-play-button">\n                        <div class="icon-container video-play-icon">\n                            <i class="fas fa-play"></i>\n                        </div>\n                    </div>\n                    <div contenteditable="true" class="video-title usa">Video Title</div>\n                    <div contenteditable="true" class="video-duration usa">60:00</div>\n                </div>\n            </div>','<div class="video-container">\n                <div class="card-image resizeable video-thumbnail">\n                    <span class="non-editable">Click to add video thumbnail</span>\n                    <i class="fa-solid fa-image image-ph non-editable"></i>\n                </div>\n                <div class="video-gradient-overlay"></div>\n                <div class="video-controls">\n                    <div class="video-progress-bar">\n                        <div class="video-progress">\n                            <div class="video-progress-handle"></div>\n                        </div>\n                    </div>\n                    <div class="video-control-buttons">\n                        <div class="video-control-left">\n                            <div class="icon-container video-control-icon">\n                                <i class="fas fa-pause"></i>\n                            </div>\n                            <div class="icon-container video-control-icon">\n                                <i class="fas fa-volume-high"></i>\n                            </div>\n                            <span contenteditable="true" class="video-time usa">1:15 / 5:00</span>\n                        </div>\n                        <div class="video-control-right">\n                            <div class="icon-container video-control-icon">\n                                <i class="fas fa-closed-captioning"></i>\n                            </div>\n                            <div class="icon-container video-control-icon">\n                                <i class="fas fa-gear"></i>\n                            </div>\n                            <div class="icon-container video-control-icon">\n                                <i class="fas fa-expand"></i>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>','<div class="video-queue-item">\n                <div class="video-queue-thumbnail-wrapper">\n                    <div class="card-image video-queue-thumbnail">\n                        <span class="non-editable">Add thumbnail</span>\n                        <i class="fa-solid fa-image image-ph non-editable"></i>\n                    </div>\n                    <span contenteditable="true" class="video-queue-duration usa">5:20</span>\n                </div>\n                <div class="video-queue-content">\n                    <div contenteditable="true" class="video-queue-title usa">Video Title Here</div>\n                    <div contenteditable="true" class="video-queue-channel usa">Channel Name</div>\n                </div>\n            </div>','<div class="video-queue-item">\n                <div class="video-queue-thumbnail-wrapper">\n                    <div class="card-image video-queue-thumbnail compact">\n                        <span class="non-editable">Add thumbnail</span>\n                        <i class="fa-solid fa-image image-ph non-editable"></i>\n                    </div>\n                    <span contenteditable="true" class="video-queue-duration usa">3:45</span>\n                </div>\n                <div class="video-queue-content">\n                    <div contenteditable="true" class="video-queue-title single-line usa">Video Title Here</div>\n                    <div class="video-queue-metadata">\n                        <div class="icon-container">\n                            <i class="fas fa-eye"></i>\n                        </div>\n                        <span contenteditable="true" class="usa">1.2K views</span>\n                        <span>â€¢</span>\n                        <span contenteditable="true" class="usa">2 days ago</span>\n                    </div>\n                </div>\n            </div>','<div class="video-card">\n                <div class="video-card-thumbnail card-image resizeable">\n                    <span class="non-editable">Click to add thumbnail</span>\n                    <i class="fa-solid fa-image image-ph non-editable"></i>\n                </div>\n                <div class="video-card-overlay">\n                    <div class="video-play-button vc-btn">\n                        <div class="icon-container  video-play-icon">\n                            <i class="fas fa-play"></i>\n                        </div>\n                    </div>\n                </div>\n                <div class="video-card-content">\n                    <div contenteditable="true" class="video-card-title usa">\n                        Video Title\n                    </div>\n                    <div contenteditable="true" class="video-card-description usa">\n                        Add a description for your video here. This can include details about the content, duration, or any other relevant information.\n                    </div>\n                    <div class="video-card-stats">\n                        <div class="video-stat-item">\n                            <div class="icon-container">\n                                <i class="fas fa-eye"></i>\n                            </div>\n                            <span contenteditable="true" class="usa">100 views</span>\n                        </div>\n                        <div class="video-stat-item">\n                            <div class="icon-container">\n                                <i class="fas fa-clock"></i>\n                            </div>\n                            <span contenteditable="true" class="usa">6:00</span>\n                        </div>\n                    </div>\n                </div>\n            </div>','<div class="livestream-container">\n                <div class="livestream-video resizeable">\n                    <div class="livestream-badge">\n                        <div class="icon-container">\n                            <i class="fas fa-circle livestream-badge-icon"></i>\n                        </div>\n                        <span contenteditable="true" class="usa">LIVE</span>\n                    </div>\n                    <div class="livestream-status">\n                        <div class="livestream-status-pill">\n                            <div class="icon-container">\n                                <i class="fas fa-users"></i>\n                            </div>\n                            <span contenteditable="true" class="usa">1.2K watching</span>\n                        </div>\n                        <div class="livestream-status-pill">\n                            <div class="icon-container">\n                                <i class="fas fa-message"></i>\n                            </div>\n                            <span contenteditable="true" class="usa">Chat</span>\n                        </div>\n                    </div>\n                    <div class="card-image video-thumbnail">\n                        <span class="non-editable">Click to add thumbnail</span>\n                        <i class="fa-solid fa-image image-ph non-editable"></i>\n                    </div>\n                    <div class="livestream-controls">\n                        <div class="icon-container livestream-control-icon">\n                            <i class="fas fa-gear"></i>\n                        </div>\n                        <div class="livestream-progress"></div>\n                        <div class="livestream-status-pill">\n                            <div class="icon-container">\n                                <i class="fas fa-volume-high"></i>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="livestream-info">\n                    <div class="livestream-header">\n                        <div class="nav-image livestream-channel-image">\n                            <i class="fa-solid fa-image image-ph non-editable"></i>\n                        </div>\n                        <div class="livestream-channel-info">\n                            <div contenteditable="true" class="livestream-title usa">Stream Title</div>\n                            <div contenteditable="true" class="livestream-channel-name usa">Channel Name</div>\n                        </div>\n                    </div>\n                    <div class="livestream-actions">\n                        <div class="livestream-button livestream-button-primary">\n                            <div class="icon-container">\n                                <i class="fas fa-heart"></i>\n                            </div>\n                            <span contenteditable="true" class="usa">Follow</span>\n                        </div>\n                        <div class="livestream-button livestream-button-secondary">\n                            <div class="icon-container">\n                                <i class="fas fa-share"></i>\n                            </div>\n                            <span contenteditable="true" class="usa">Share</span>\n                        </div>\n                    </div>\n                </div>\n            </div>','<div class="video-container">\n                <div class="video-offline resizeable">\n                    <div class="video-offline-badge">\n                        <div class="icon-container">\n                            <i class="fas fa-slash" style="margin-bottom: 4px; font-size: 8px;"></i>\n                        </div>\n                        <span contenteditable="true" class="usa">Offline</span>\n                    </div>\n                    <div class="icon-container video-offline-icon">\n                        <i class="fas fa-video-slash"></i>\n                    </div>\n                    <div contenteditable="true" class="video-offline-text usa">\n                        Stream Starting Soon\n                    </div>\n                    <div class="video-viewer-count">\n                        <div class="icon-container">\n                            <i class="fas fa-users"></i>\n                        </div>\n                        <span contenteditable="true" class="usa">1,000 watching</span>\n                    </div>\n                </div>\n            </div>'];case"textarea":return['<div class="fw ta">\n                    <div contenteditable="true" spellcheck="false" class="ui-input-base ta-base empty" data-placeholder="Enter your text here..." style="border-bottom: 2px solid var(--color-primary);">\n                    </div>\n                    <div class="resize-handle">\n                        <div class="resize-indicator"></div>\n                    </div>\n                </div>','<div class="fw ta">\n                    <div class="ui-input-label usa">Label</div>\n                    <div contenteditable="true" spellcheck="false" class="ui-input-base ta-base empty" data-placeholder="Enter your text here..." style="border-bottom: 2px solid var(--color-primary);">\n                    </div>\n                    <div class="resize-handle rh-mod">\n                        <div class="resize-indicator"></div>\n                    </div>\n                    <div class="ui-input-character-count usa">0/500 characters</div>\n                </div>','<div class="fw ta">\n                    <div class="ui-input-required-label">\n                        <div class="ui-input-required-asterisk">*</div>\n                        <div class="ui-input-label usa">Required</div>\n                    </div>\n                    <div contenteditable="true" spellcheck="false" class="ui-input-base ta-base empty" data-placeholder="Enter your text here..." style="border-bottom: 2px solid var(--color-primary);">\n                    </div>\n                    <div class="resize-handle">\n                        <div class="resize-indicator"></div>\n                    </div>\n                </div>','<div class="fw ta">\n                    <div class="ui-input-label usa">Label</div>\n                    <div class="ui-input-focused-wrapper">\n                        <div contenteditable="true" spellcheck="false" class="ui-input-base ta-base empty" data-placeholder="Selected Field" style="border: 2px solid var(--color-primary);">\n                        </div>\n                        <div class="resize-handle">\n                            <div class="resize-indicator"></div>\n                        </div>\n                    </div>\n                </div>','<div class="fw ta">\n                    <div class="ui-input-label usa">Label</div>\n                    <div contenteditable="true" spellcheck="false" class="ui-input-base ta-base ui-input-outlined empty" data-placeholder="Enter your text here..." style="border: 2px solid var(--color-primary);">\n                    </div>\n                    <div class="resize-handle rh-mod">\n                        <div class="resize-indicator"></div>\n                    </div>\n                    <div class="ui-input-character-count usa">0/500 characters</div>\n                </div>','<div class="fw ta">\n                    <div class="ui-input-label usa">Label</div>\n                    <div contenteditable="true" spellcheck="false" class="ui-input-base ta-base ui-input-error empty" data-placeholder="Enter your text here...">\n                    </div>\n                    <div class="resize-handle rh-mod">\n                        <div class="resize-indicator"></div>\n                    </div>\n                    <div class="ui-input-error-message">\n                        <i class="fas fa-exclamation-triangle ui-input-error-icon"></i>\n                        <div contenteditable="true" class="usa">Please enter a valid value</div>\n                    </div>\n                </div>','<div class="fw ta">\n                    <div class="ui-input-label usa">Label</div>\n                    <div contenteditable="true" spellcheck="false" class="ui-input-base ta-base ui-input-disabled empty" data-placeholder="Disabled" style="border-color: var(--color-secondary);">\n                    </div>\n                </div>','<div class="fw ta">\n                    <div class="ui-input-label usa">Label</div>\n                    <div class="ui-input-password-wrapper">\n                        <div contenteditable="true" spellcheck="false" class="ui-input-base ta-base ui-input-success empty" data-placeholder="Success">\n                        </div>\n                        <div class="icon-container ui-input-success-icon">\n                            <i class="fas fa-check-circle"></i>\n                        </div>\n                    </div>\n                    <div class="resize-handle rh-mod">\n                        <div class="resize-indicator"></div>\n                    </div>\n                    <div class="ui-input-success-message usa">Success message</div>\n                </div>','<div class="rich-text-editor">\n                    <div class="rich-text-toolbar">\n                        <div class="rich-text-group">\n                            <button class="rich-text-btn icon-container">\n                                <i class="fas fa-bold"></i>\n                            </button>\n                            <button class="rich-text-btn icon-container">\n                                <i class="fas fa-italic"></i>\n                            </button>\n                            <button class="rich-text-btn icon-container">\n                                <i class="fas fa-underline"></i>\n                            </button>\n                            <div class="rich-text-divider"></div>\n                        </div>\n                        <div class="rich-text-group">\n                            <button class="rich-text-btn icon-container">\n                                <i class="fas fa-align-left"></i>\n                            </button>\n                            <button class="rich-text-btn icon-container">\n                                <i class="fas fa-align-center"></i>\n                            </button>\n                            <button class="rich-text-btn icon-container">\n                                <i class="fas fa-align-right"></i>\n                            </button>\n                            <div class="rich-text-divider"></div>\n                        </div>\n                        <div class="rich-text-group">\n                            <button class="rich-text-btn icon-container">\n                                <i class="fas fa-list-ul"></i>\n                            </button>\n                            <button class="rich-text-btn icon-container">\n                                <i class="fas fa-list-ol"></i>\n                            </button>\n                            <div class="rich-text-divider"></div>\n                        </div>\n                        <div class="rich-text-group">\n                            <button class="rich-text-btn icon-container">\n                                <i class="fas fa-link"></i>\n                            </button>\n                            <button class="rich-text-btn icon-container">\n                                <i class="fas fa-image"></i>\n                            </button>\n                            <button class="rich-text-btn icon-container">\n                                <i class="fas fa-code"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div contenteditable="true" spellcheck="false" class="rich-text-content empty" data-placeholder="Start typing...">\n                    </div>\n                    <div class="resize-handle">\n                        <div class="resize-indicator"></div>\n                    </div>\n                </div>'];case"keyboard":return[`<div class="keyboard-layout keyboard-layout-qwerty">\n                    <div class="keyboard-row">\n                    ${["q","w","e","r","t","y","u","i","o","p"].map((e=>`<div class="keyboard-key">${e}</div>`)).join("")}\n                    </div>\n                    \n                    <div class="keyboard-row" style="width: calc(100% - 24px); padding-left: 12px; padding-right: 12px;">\n                    ${["a","s","d","f","g","h","j","k","l"].map((e=>`<div class="keyboard-key">${e}</div>`)).join("")}\n                    </div>\n\n                    <div class="keyboard-row">\n                    <div class="keyboard-key key-shift" style="flex: 1.2; min-width: 26px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"><i class="fas fa-arrow-up"></i></div>\n                    ${["z","x","c","v","b","n","m"].map((e=>`<div class="keyboard-key">${e}</div>`)).join("")}\n                    <div class="keyboard-key key-delete" style="flex: 1.2; min-width: 26px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"><i class="fas fa-backspace"></i></div>\n                    </div>\n    \n                    <div class="keyboard-row">\n                    <div class="keyboard-key key-numbers" style="flex: 1.5; min-width: 33px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">123</div>\n                    <div class="keyboard-key key-globe" style="flex: 1; min-width: 22px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"><i class="fas fa-globe"></i></div>\n                    <div class="keyboard-key key-space" style="flex: 5; min-width: 110px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">space</div>\n                    <div class="keyboard-key key-return" style="flex: 1.5; min-width: 33px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">return</div>\n                    </div>\n\n                </div>`,`<div class="keyboard-layout keyboard-layout-numeric">\n\n                    <div class="keyboard-row">\n                    ${["1","2","3","4","5","6","7","8","9","0"].map((e=>`<div class="keyboard-key">${e}</div>`)).join("")}\n                    </div>\n                    \n                    <div class="keyboard-row">\n                    ${["-","/",":",";","(",")","$","&","@",'"'].map((e=>`<div class="keyboard-key">${e}</div>`)).join("")}\n                    </div>\n                    \n                    <div class="keyboard-row">\n                    <div class="keyboard-key key-symbols" style="flex: 1.5; background-color: var(--color-background); min-width: 33px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">#+=</div>\n                    ${[".",",","?","!","'","`"].map((e=>`<div class="keyboard-key">${e}</div>`)).join("")}\n                    <div class="keyboard-key key-delete" style="flex: 1.5; background-color: var(--color-background); min-width: 33px;"><i class="fas fa-backspace"></i></div>\n                    </div>\n                    \n                    <div class="keyboard-row">\n                    <div class="keyboard-key key-abc" style="flex: 1.5; background-color: var(--color-background); min-width: 33px;">ABC</div>\n                    <div class="keyboard-key key-emoji" style="flex: 1; background-color: var(--color-background); min-width: 22px;"><i class="far fa-smile"></i></div>\n                    <div class="keyboard-key key-space" style="flex: 5; background-color: var(--color-background); min-width: 110px;">space</div>\n                    <div class="keyboard-key key-return" style="flex: 1.5; background-color: var(--color-background); min-width: 33px;">return</div>\n                    </div>\n\n                    <button class="delete-btn" contenteditable="true">Ã—</button>\n                </div>`,'<div class="keyboard-layout keyboard-layout-compact-numeric">\n                    <div class="keyboard-row">\n                    <div class="keyboard-key">1</div>\n                    <div class="keyboard-key">2</div>\n                    <div class="keyboard-key">3</div>\n                    </div>\n                    <div class="keyboard-row">\n                    <div class="keyboard-key">4</div>\n                    <div class="keyboard-key">5</div>\n                    <div class="keyboard-key">6</div>\n                    </div>\n                    <div class="keyboard-row">\n                    <div class="keyboard-key">7</div>\n                    <div class="keyboard-key">8</div>\n                    <div class="keyboard-key">9</div>\n                    </div>\n                    <div class="keyboard-row">\n                    <div class="keyboard-key">.</div>\n                    <div class="keyboard-key">0</div>\n                    <div class="keyboard-key key-delete" ><i class="fas fa-backspace"></i></div>\n                    </div>\n                    <button class="delete-btn" contenteditable="true">Ã—</button>\n                </div>','<div class="keyboard-layout keyboard-layout-emoji">\n                \x3c!-- Tabs for emoji categories --\x3e\n                <div class="emoji-categories">\n                    <div class="emoji-category active">\n                        <i class="far fa-smile" style="color: var(--color-primary);"></i>\n                    </div>\n                    <div class="emoji-category">\n                        <i class="fas fa-paw"></i>\n                    </div>\n                    <div class="emoji-category">\n                        <i class="fas fa-hamburger"></i>\n                    </div>\n                    <div class="emoji-category">\n                        <i class="fas fa-futbol"></i>\n                    </div>\n                    <div class="emoji-category">\n                        <i class="fas fa-car"></i>\n                    </div>\n                    <div class="emoji-category">\n                        <i class="fas fa-lightbulb"></i>\n                    </div>\n                    <div class="emoji-category">\n                        <i class="fas fa-flag"></i>\n                    </div>\n                </div>\n                \x3c!-- Emoji grid - Faces/Emotions --\x3e\n                <div class="emoji-grid">\n                    <div class="emoji-item">ðŸ˜€</div>\n                    <div class="emoji-item">ðŸ˜‚</div>\n                    <div class="emoji-item">ðŸ˜Š</div>\n                    <div class="emoji-item">ðŸ¥°</div>\n                    <div class="emoji-item">ðŸ˜</div>\n                    <div class="emoji-item">ðŸ¤©</div>\n                    <div class="emoji-item">ðŸ™„</div>\n                    <div class="emoji-item">ðŸ˜®</div>\n                    <div class="emoji-item">ðŸ¥³</div>\n                    <div class="emoji-item">ðŸ˜­</div>\n                    <div class="emoji-item">ðŸ˜¡</div>\n                    <div class="emoji-item">ðŸ¥º</div>\n                    <div class="emoji-item">ðŸ˜´</div>\n                    <div class="emoji-item">ðŸ¤”</div>\n                    <div class="emoji-item">ðŸ˜‘</div>\n                    <div class="emoji-item">ðŸ¤—</div>\n                    <div class="emoji-item">ðŸ˜Ž</div>\n                    <div class="emoji-item">ðŸ¤¯</div>\n                    <div class="emoji-item">ðŸ˜˜</div>\n                    <div class="emoji-item">ðŸ˜</div>\n                    <div class="emoji-item">ðŸ™‚</div>\n                    <div class="emoji-item">ðŸ¤ª</div>\n                    <div class="emoji-item">ðŸ˜‹</div>\n                    <div class="emoji-item">ðŸ¤®</div>\n                </div>\n                \x3c!-- Search and navigation row --\x3e\n                <div style="display: flex; gap: 8px; margin-bottom: 8px;">\n                    <div class="keyboard-key emoji-search">\n                        <i class="fas fa-search" style="font-size: 12px;"></i>\n                        <span>Search emoji</span>\n                    </div>\n                    <div class="keyboard-key emoji-recent" style="flex: 1; background-color: var(--color-background); color: var(--basic-txt-color); border-radius: 6px; padding: 8px 4px; display: flex; align-items: center; justify-content: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">\n                        <i class="fas fa-clock"></i>\n                    </div>\n                </div>\n                \x3c!-- Keyboard Controls --\x3e\n                <div class="keyboard-row">\n                    <div class="keyboard-key key-abc" style="flex: 1.5; min-width: 33px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">ABC</div>\n                    <div class="keyboard-key key-numbers" style="flex: 1.5; min-width: 33px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">123</div>\n                    <div class="keyboard-key key-space" style="flex: 4; min-width: 100px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">space</div>\n                    <div class="keyboard-key key-return" style="flex: 1.5; min-width: 33px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">return</div>\n                </div>\n                <button class="delete-btn" contenteditable="true">Ã—</button>\n            </div>','<div class="keyboard-layout keyboard-layout-voice">\n                \x3c!-- Voice input area --\x3e\n                <div class="voice-input-area">\n                    \x3c!-- Microphone button --\x3e\n                    <div class="microphone-button icon-container" style="background-color: var(--color-primary);">\n                        <i class="fas fa-microphone"></i>\n                    </div>\n                    \x3c!-- Voice instructions --\x3e\n                    <div style="margin-top: 12px; font-size: 14px; color: var(--basic-txt-color);">Tap to speak</div>\n                </div>\n                \x3c!-- Keyboard Controls --\x3e\n                <div class="keyboard-row">\n                    <div class="keyboard-key key-abc" style="flex: 1.5; min-width: 33px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">ABC</div>\n                    <div class="keyboard-key key-numbers" style="flex: 1.5; min-width: 33px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">123</div>\n                    <div class="keyboard-key key-space" style="flex: 4; min-width: 100px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">space</div>\n                    <div class="keyboard-key key-return" style="flex: 1.5; min-width: 33px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">return</div>\n                </div>\n                <button class="delete-btn" contenteditable="true">Ã—</button>\n            </div>','<div class="keyboard-layout keyboard-layout-calculator">\n                <div class="keyboard-row">\n                <div class="keyboard-key">C</div>\n                <div class="keyboard-key">Â±</div>\n                <div class="keyboard-key">%</div>\n                <div class="keyboard-key calc-key" style="background-color: var(--color-primary);">Ã·</div>\n                </div>\n                <div class="keyboard-row">\n                <div class="keyboard-key">7</div>\n                <div class="keyboard-key">8</div>\n                <div class="keyboard-key">9</div>\n                <div class="keyboard-key calc-key" style="background-color: var(--color-primary);">Ã—</div>\n                </div>\n                <div class="keyboard-row">\n                <div class="keyboard-key">4</div>\n                <div class="keyboard-key">5</div>\n                <div class="keyboard-key">6</div>\n                <div class="keyboard-key calc-key" style="background-color: var(--color-primary);">âˆ’</div>\n                </div>\n                <div class="keyboard-row">\n                <div class="keyboard-key">1</div>\n                <div class="keyboard-key">2</div>\n                <div class="keyboard-key">3</div>\n                <div class="keyboard-key calc-key" style="background-color: var(--color-primary);">+</div>\n                </div>\n                <div class="keyboard-row">\n                <div class="keyboard-key" style="flex: 2; color: var(--basic-txt-color); border-radius: 6px; padding: 12px 8px; margin: 4px; text-align: center; font-weight: 500; user-select: none; cursor: pointer;">0</div>\n                <div class="keyboard-key">.</div>\n                <div class="keyboard-key calc-key" style="background-color: var(--color-primary);">=</div>\n                </div>\n                <button class="delete-btn" contenteditable="true">Ã—</button>\n            </div>','<div class="keyboard-layout keyboard-layout-phone-dialer">\n                \x3c!-- Phone number display --\x3e\n                <div class="phone-number-display">\n                    <span contenteditable="true">+1 555 123 4567</span>\n                    <div class="backspace-button">\n                        <i class="fas fa-backspace"></i>\n                    </div>\n                </div>\n                \x3c!-- Dialer grid --\x3e\n                <div class="dialer-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 12px;">\n                    \x3c!-- Row 1 --\x3e\n                    <div class="dialer-key">\n                        <div class="dialer-num">1</div>\n                        <div class="dialer-letters"></div>\n                    </div>\n                    <div class="dialer-key">\n                        <div class="dialer-num">2</div>\n                        <div class="dialer-letters">ABC</div>\n                    </div>\n                    <div class="dialer-key">\n                        <div class="dialer-num">3</div>\n                        <div class="dialer-letters">DEF</div>\n                    </div>\n                    \x3c!-- Row 2 --\x3e\n                    <div class="dialer-key">\n                        <div class="dialer-num">4</div>\n                        <div class="dialer-letters">GHI</div>\n                    </div>\n                    <div class="dialer-key">\n                        <div class="dialer-num">5</div>\n                        <div class="dialer-letters">JKL</div>\n                    </div>\n                    <div class="dialer-key">\n                        <div class="dialer-num">6</div>\n                        <div class="dialer-letters">MNO</div>\n                    </div>\n                    \x3c!-- Row 3 --\x3e\n                    <div class="dialer-key">\n                        <div class="dialer-num">7</div>\n                        <div class="dialer-letters">PQRS</div>\n                    </div>\n                    <div class="dialer-key">\n                        <div class="dialer-num">8</div>\n                        <div class="dialer-letters">TUV</div>\n                    </div>\n                    <div class="dialer-key">\n                        <div class="dialer-num">9</div>\n                        <div class="dialer-letters">WXYZ</div>\n                    </div>\n                    \x3c!-- Row 4 --\x3e\n                    <div class="dialer-key">\n                        <div class="dialer-num">*</div>\n                        <div class="dialer-letters"></div>\n                    </div>\n                    <div class="dialer-key">\n                        <div class="dialer-num">0</div>\n                        <div class="dialer-letters">+</div>\n                    </div>\n                    <div class="dialer-key">\n                        <div class="dialer-num">#</div>\n                        <div class="dialer-letters"></div>\n                    </div>\n                </div>\n                \x3c!-- Call button --\x3e\n                <div class="call-button icon-container" style="background-color: var(--color-primary); border-radius: 8px; padding: 12px 0; text-align: center; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">\n                    <i class="fas fa-phone-alt" style="font-size: 24px; color: var(--basic-txt-color);"></i>\n                </div>\n                <button class="delete-btn" contenteditable="true">Ã—</button>\n            </div>'];case"searchBar":return['<div class="fw">\n                    <div class="search-container">\n                        <i class="fas fa-search search-icon"></i>\n                        <div contenteditable="true" spellcheck="false" class="search-input empty" data-placeholder="Search..."></div>\n                    </div>\n                </div>','<div class="fw">\n                <div class="search-minimal">\n                    <i class="fas fa-search search-minimal-icon"></i>\n                    <div contenteditable="true" spellcheck="false" class="search-minimal-input empty" data-placeholder="Search for items..."></div>\n                </div>\n            </div>','<div class="fw">\n                <div class="search-squared">\n                    <i class="fas fa-search search-squared-icon"></i>\n                    <div contenteditable="true" spellcheck="false" class="search-squared-input empty" data-placeholder="What are you looking for?"></div>\n                </div>\n            </div>','<div class="search-compact">\n                <i class="fas fa-search search-compact-icon"></i>\n                <div contenteditable="true" spellcheck="false" class="search-compact-input empty" data-placeholder="Quick search..."></div>\n            </div>'];default:return null}}const firebaseConfig={apiKey:"AIzaSyCI4i-fFdg9ca86jtLgT4d1yqPkE5Xylng",authDomain:"experience-builder-m-v-wxacv7.firebaseapp.com",projectId:"experience-builder-m-v-wxacv7",storageBucket:"experience-builder-m-v-wxacv7.appspot.com",messagingSenderId:"940965852397",appId:"1:940965852397:web:b00fb6ccd9ff65aed748e4"};firebase.initializeApp(firebaseConfig);const storage=firebase.storage(),db=firebase.firestore(),auth=firebase.auth(),startFirebaseUI=()=>{const e=new firebaseui.auth.AuthUI(firebase.auth()),t={signInOptions:[{provider:firebase.auth.GoogleAuthProvider.PROVIDER_ID,scopes:["profile","email"]},{provider:firebase.auth.EmailAuthProvider.PROVIDER_ID,signInMethod:firebase.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD,requireDisplayName:!0,disableSignUp:{status:!1},allowSignUp:!0}],signInFlow:"popup",credentialHelper:firebaseui.auth.CredentialHelper.NONE,signInSuccessUrl:window.location.href,callbacks:{signInSuccessWithAuthResult:e=>(this.showNotification("Signed in successfully!"),!1),signInFailure:e=>{console.error("Sign in failed:",e)}},tosUrl:"/tos",privacyPolicyUrl:"/privacy-policy"};e.start("#firebaseui-auth-container",t)};function showAuthModal(e="Sign in or Sign Up",t="Create faster with <i>Dlightningâš¡</i>"){if(!document.getElementById("auth-modal")){const n=`\n            <div style="text-align: center;" id="auth-modal" class="modal">\n                <div class="modal-content">\n                    <button class="close-modal">&times;</button>\n                    <h2>${e}</h2>\n                    <p style="color: var(--basic-txt-color)">${t}</p>\n                    <br>\n                    <div id="firebaseui-auth-container"></div>\n                </div>\n            </div>\n        `;document.body.insertAdjacentHTML("beforeend",n),startFirebaseUI(),document.querySelector("#auth-modal .close-modal").addEventListener("click",hideAuthModal)}document.getElementById("auth-modal").style.display="flex"}function hideAuthModal(){const e=document.getElementById("auth-modal");e&&(e.style.display="none")}document.addEventListener("keydown",(e=>{"Escape"===e.key&&hideAuthModal()}));const initAuth=()=>{document.createElement("div").id="firebaseui-auth-container";const e=new firebaseui.auth.AuthUI(firebase.auth()),t={signInOptions:[firebase.auth.GoogleAuthProvider.PROVIDER_ID,{provider:firebase.auth.EmailAuthProvider.PROVIDER_ID,signInMethod:firebase.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD,requireDisplayName:!0,allowSignUp:!0}],credentialHelper:firebaseui.auth.CredentialHelper.NONE,callbacks:{signInSuccessWithAuthResult:e=>(initUserData(e.user),!1)}};e.start("#firebaseui-auth-container",t)};class ProImageStorageManager{constructor(){this.storage=firebase.storage(),this.storageRef=this.storage.ref(),this.db=firebase.firestore(),this.maxImageSize=1048576}async handleImageUpload(e,t,n,a=null){try{if(!await this.checkProAccess(n))throw new Error("Pro account required for image storage");if(a&&a.includes("firebasestorage.googleapis.com"))try{const e=this.storage.refFromURL(a);await e.delete();const n=await this.db.collection("project_images").where("storageUrl","==",a).where("projectId","==",t).limit(1).get();n.empty||await n.docs[0].ref.delete()}catch(e){console.warn("Error deleting old image:",e)}const i=`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;let o=e;e.size>this.maxImageSize&&(o=await this.compressImage(e));const s=this.storageRef.child(`projects/${t}/images/${i}`),r=await s.put(o),l=await r.ref.getDownloadURL();return await this.db.collection("project_images").add({projectId:t,imageId:i,fileName:e.name||"image",storageUrl:l,size:o.size,uploadedBy:n,createdAt:firebase.firestore.FieldValue.serverTimestamp()}),{imageId:i,url:l}}catch(e){throw console.error("Error handling image upload:",e),e}}async checkProAccess(e){try{const t=await this.db.collection("users").doc(e).get();return t.exists&&!0===t.data().pro_account}catch(e){return console.error("Error checking pro access:",e),!1}}async compressImage(e){return new Promise((t=>{const n=new FileReader;n.onload=e=>{const n=new Image;n.onload=()=>{const e=document.createElement("canvas");let a=n.width,i=n.height;(a>1920||i>1920)&&(a>i?(i=i/a*1920,a=1920):(a=a/i*1920,i=1920)),e.width=a,e.height=i;const o=e.getContext("2d");o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high",o.drawImage(n,0,0,a,i),e.toBlob((e=>t(e)),"image/jpeg",.85)},n.src=e.target.result},n.readAsDataURL(e)}))}catch(e){throw console.error("Detailed upload error:",{error:e,userId:userId,projectId:projectId,errorCode:e.code,errorMessage:e.message}),e}}const imageManager=new ProImageStorageManager;class ProjectManager{constructor(){this.currentUser=null,this.currentProject=null,this.db=firebase.firestore(),this.autoSaveInterval=null,this.contentChanged=!1,this.setupChangeDetection(),this.initAuthListener(),this.initEventListeners(),this.setupColorChangeListener()}initEventListeners(){document.getElementById("new-project-btn").addEventListener("click",(()=>{this.checkProjectLimit()}))}async handleNewProject(){if(!this.currentUser)return void showAuthModal("Sign in to Save Projects","Create more with Dlightning");const e=document.getElementById("new-project-btn").closest(".modal");e&&hideModal(e.id);try{const e=document.querySelectorAll(".canvas-wrapper");if(e.length>0&&!this.currentProject){if(await showConfirmDialog("You have unsaved screens. Would you like to save them to your new project?",{heading:"Save Current Screens",confirmText:"Yes, Save Screens",cancelText:"No, Thanks"})){const e=await showPromptDialog("Name your project","Untitled Project",{heading:"New Project",confirmText:"Create",cancelText:"Cancel"});if(!e)return;const t=firebase.firestore.FieldValue.serverTimestamp(),n=await this.db.collection("project").add({project_name:e,owner:this.db.doc(`users/${this.currentUser.uid}`),description:"",complete_percent:0,img_hero_proj:"https://firebasestorage.googleapis.com/v0/b/experience-builder-m-v-wxacv7.appspot.com/o/noisy-gradients-lighter-sm.png?alt=media&token=947bbdf8-1752-4be0-b6e8-b15cf1c23556",last_edited:t,pinned_project:!1,private:!1,start_date:t,user_role:["-"],users_assigned:[this.db.doc(`users/${this.currentUser.uid}`)],time_created:t});this.currentProject={id:n.id,name:e};const a=document.querySelector("#project-title h3");a&&(a.textContent=e,a.style.display="block"),this.contentChanged=!0,await this.saveCanvases(),this.saveProjectColors(),this.setupAutoSave(),hideModal("projects-modal"),this.showNotification("Project created with existing screens!"),await this.loadUserProjects()}else{e.forEach((e=>e.remove())),editor.resetCanvasCount(),editor.createNewCanvas();const t=await showPromptDialog("Name your project","Untitled Project",{heading:"New Project",confirmText:"Create",cancelText:"Cancel"});if(!t)return;await this.createNewProject(t)}}else{const e=await showPromptDialog("Name your project","Untitled Project",{heading:"New Project",confirmText:"Create",cancelText:"Cancel"});if(!e)return;await this.createNewProject(e)}}catch(e){console.error("Error handling new project:",e),this.showNotification("Error creating new project","error")}}async createNewProject(e){try{const t=firebase.firestore.FieldValue.serverTimestamp(),n=await this.db.collection("project").add({project_name:e,owner:this.db.doc(`users/${this.currentUser.uid}`),description:"",complete_percent:0,img_hero_proj:"https://firebasestorage.googleapis.com/v0/b/experience-builder-m-v-wxacv7.appspot.com/o/noisy-gradients-lighter-sm.png?alt=media&token=947bbdf8-1752-4be0-b6e8-b15cf1c23556",last_edited:t,pinned_project:!1,private:!1,start_date:t,user_role:["-"],users_assigned:[this.db.doc(`users/${this.currentUser.uid}`)],time_created:t,canvases:[{index:0,content:"",hasTopNav:!1,hasBottomNav:!1}]});this.currentProject={id:n.id,name:e};const a=document.querySelector("#project-title h3");if(a&&(a.textContent=e,a.style.display="block"),document.querySelectorAll(".canvas-wrapper").forEach((e=>e.remove())),!editor)return console.error("Editor not found"),void this.showNotification("Error initializing screen(s)","error");{editor.createNewCanvas(),await new Promise((e=>setTimeout(e,100)));const e=document.querySelector(".canvas");if(e)e.classList.add("selected"),editor.state.selectedCanvases.add(e),e.addEventListener("click",(e=>editor.handleCanvasSelection(e)));else{console.warn("Canvas element not found after creation, will retry..."),await new Promise((e=>setTimeout(e,300)));const e=document.querySelector(".canvas");e?(e.classList.add("selected"),editor.state.selectedCanvases.add(e),e.addEventListener("click",(e=>editor.handleCanvasSelection(e)))):console.error("Could not find canvas element after retry")}}this.setupAutoSave(),hideModal("projects-modal"),this.showNotification("Project created successfully!"),await this.loadUserProjects();const i=document.querySelector(".save-canvas-btn");i&&(i.style.display="block")}catch(e){console.error("Error creating project:",e),this.showNotification("Error creating project","error")}}showNotification(e,t="success"){const n=document.createElement("div");n.className=`notification ${t}`,n.textContent=e,document.body.appendChild(n),setTimeout((()=>{n.remove()}),3800)}async getUserProjectCount(){return(await this.db.collection("projects").where("owner","==",this.currentUser.uid).get()).size}initAuthListener(){firebase.auth().onAuthStateChanged((async e=>{if(this.currentUser=e,e)this.loadUserProjects();else{this.clearAutoSave();const e=document.querySelector("#project-title h3");e&&(e.style.display="none")}}))}getCurrentColors(){const e=getComputedStyle(document.documentElement);return{primary:e.getPropertyValue("--color-primary").trim(),secondary:e.getPropertyValue("--color-secondary").trim(),accent:e.getPropertyValue("--color-accent").trim()}}saveProjectColors(){if(this.currentProject?.id&&!this.isSavingColors)try{const e=this.getCurrentColors(),t=JSON.parse(localStorage.getItem(`projectColors_${this.currentProject.id}`));if(t&&this.areColorsEqual(t,e))return;this.isSavingColors=!0,localStorage.setItem(`projectColors_${this.currentProject.id}`,JSON.stringify(e)),this.pendingUpdates={...this.pendingUpdates,colors:{...e,lastUpdated:firebase.firestore.FieldValue.serverTimestamp()}},this.pendingWriteTimer||(this.pendingWriteTimer=setTimeout((()=>{this.flushPendingUpdates()}),8e3))}catch(e){}finally{this.isSavingColors=!1}}async flushPendingUpdates(){if(this.pendingUpdates&&this.currentProject?.id)try{const e=this.db.collection("project").doc(this.currentProject.id);await e.update(this.pendingUpdates),this.pendingUpdates={},this.pendingWriteTimer=null,this.isSavingColors=!1}catch(e){console.error("Error saving color updates:",e),this.isSavingColors=!1}else this.pendingWriteTimer=null}async loadProjectColors(e){try{const t=await this.db.collection("project").doc(e).get();if(!t.exists)return;const n=t.data().colors,a=n||{primary:"#3498db",secondary:"#5f615d",accent:"#fbd513"};document.documentElement.style.setProperty("--color-primary",a.primary),document.documentElement.style.setProperty("--primary-color",a.primary),document.documentElement.style.setProperty("--color-secondary",a.secondary),document.documentElement.style.setProperty("--color-accent",a.accent),window.colorPicker&&(colorPicker.colors[0].hexString=a.primary,colorPicker.colors[1].hexString=a.secondary,colorPicker.colors[2].hexString=a.accent)}catch(e){console.error("Error loading project colors:",e),document.documentElement.style.setProperty("--color-primary","#3498db"),document.documentElement.style.setProperty("--primary-color","#3498db"),document.documentElement.style.setProperty("--color-secondary","#5f615d"),document.documentElement.style.setProperty("--color-accent","#fbd513")}}async handleCanvasDelete(e){if(this.currentProject?.id)try{this.clearAutoSave(),this.markAllCanvasesChanged("Canvas deletion");const t=firebase.firestore().collection("project").doc(this.currentProject.id),n=await t.collection("saved_screens").orderBy("index").get(),a=firebase.firestore().batch(),i=t.collection("saved_screens").doc(`screen_${e}`);a.delete(i);const o=n.docs.filter((t=>t.data().index>e));o.forEach((e=>{const t=e.data();a.update(e.ref,{index:t.index-1,lastUpdated:firebase.firestore.FieldValue.serverTimestamp()})})),await a.commit(),console.log(`%cDeleted screen at index ${e} and updated ${o.length} subsequent screens`,"color: #3F51B5; font-weight: bold"),await t.update({last_edited:firebase.firestore.FieldValue.serverTimestamp()}),this.resetChangeTracking(),setTimeout((()=>{this.setupAutoSave()}),1e3)}catch(e){console.error("Error deleting canvas from database:",e),this.showNotification("Error deleting canvas from database","error"),this.setupAutoSave()}else console.warn("No active project found")}unwrapComponents(e){const t=document.createElement("div");t.innerHTML=e;const n=e=>{if(e.nodeType===Node.ELEMENT_NODE){if(e.classList&&e.classList.contains("component-container")&&"table"===e.getAttribute("data-component-type")){const t=e.querySelector(".component-content"),n=t?.querySelector(".data-table-scroll-wrapper");if(t&&n){const t=n.innerHTML,a=document.createElement("div");return a.setAttribute("data-component-type","table"),a.setAttribute("data-top-level-component","true"),a.setAttribute("data-table-content",encodeURIComponent(t)),void e.replaceWith(a)}}if(e.classList&&e.classList.contains("component-container")){const t=e.getAttribute("data-component-type"),n=e.querySelector(".component-content")?.firstElementChild;if(n&&t){n.setAttribute("data-component-type",t);const a=e.querySelector(".component-content");return a?.dataset.currentVariant&&n.setAttribute("data-current-variant",a.dataset.currentVariant),a?.dataset.cachedVariants&&n.setAttribute("data-cached-variants",a.dataset.cachedVariants),n.setAttribute("data-top-level-component","true"),void e.replaceWith(n)}}if(e.children&&e.children.length){Array.from(e.children).forEach((e=>n(e)))}}};return Array.from(t.children).forEach((e=>n(e))),t.innerHTML}async loadProject(e){try{if(!e)throw new Error("No project ID provided");const t=await this.db.collection("project").doc(e).get();if(!t.exists)return void this.showNotification("Project not found","error");const n=await this.db.collection("project").doc(e).collection("saved_screens").get(),a=t.data(),i=document.querySelectorAll(".canvas-wrapper");if(n.empty&&i.length>0){if(await showConfirmDialog("This project has no screens. Would you like to add your current unsaved screens to this project?",{heading:"Add Current Screens",confirmText:"Add Screens",cancelText:"No, Thanks"})){const t=document.querySelector("#project-title h3");t&&(t.textContent=a.project_name,t.style.display="block"),this.currentProject={id:e,name:a.project_name},this.contentChanged=!0,await this.saveCanvases(),this.setupAutoSave(),await this.loadProjectColors(e),await this.loadProjectFonts(e),hideModal("projects-modal"),this.showNotification("Screens added to project successfully");const n=document.querySelector(".save-canvas-btn");return void(n&&(n.style.display="block"))}}const o=document.querySelector("#project-title h3");o&&(o.textContent=a.project_name,o.style.display="block"),this.currentProject={id:e,name:a.project_name},hideModal("projects-modal"),await this.loadProjectColors(e),await this.loadProjectFonts(e),await this.loadSavedCanvases(e);const s=document.querySelector(".save-canvas-btn");s&&(s.style.display="block"),this.showNotification("Project loaded successfully")}catch(e){console.error("Error loading project:",e),this.showNotification("Error loading project","error")}}setupColorChangeListener(){if(window.colorPicker){let e,t,n=this.getCurrentColors();const a=5e3;colorPicker.on("color:change",(i=>{e&&clearTimeout(e),t||(e=setTimeout((()=>{const e=this.getCurrentColors();this.areColorsEqual(n,e)||(this.saveProjectColors(),this.contentChanged=!0,n={...e},t=setTimeout((()=>{t=null}),a))}),2e3))}))}}areColorsEqual(e,t){return e.primary===t.primary&&e.secondary===t.secondary&&e.accent===t.accent}setupAutoSave(){this.autosaveInterval&&clearInterval(this.autosaveInterval),this.autosaveInterval=setInterval((()=>{this.currentProject&&this.contentChanged&&(this.saveCanvases(),this.contentChanged=!1)}),22e3),this.setupChangeDetection()}setupChangeDetection(){let e=null;this._changedCanvases=new Map;let t=!1;const n=new Set(["controls","component-handle","resize-handle","nav-control","alignment-controls","delete-canvas-btn","color-swatch-container","component-controls","drag-handle","alignment-arrow","text-alignment-controls","IroWheel","IroSlider","IroHandle"]),a=(new Set(["controls-hidden","controls-visible","selected","hovered","active","dragging","resizing","focused","disabled","success-drop","selected-drag","controls-hidden","duplicate-animation","component-add-animation"]),new Set(["opacity","visibility","display","transition","pointer-events","cursor","z-index","outline","user-select","position","transform","background-color","--color-primary","--color-secondary","--color-accent","--primary-color"])),i=e=>e.closest(".canvas-wrapper"),o=e=>e?.getAttribute("data-canvas-id")||null,s=(n,a,i)=>{n&&(e&&clearTimeout(e),e=setTimeout((()=>{this.addCanvasToChanged(n,`${a}: ${JSON.stringify(i).slice(0,100)}`),t=!0}),3500))},r=e=>{if(!e||!e.classList)return!1;if(e.closest(".IroColorPicker")||e.closest(".IroWheel")||e.closest(".IroSlider"))return!0;for(const t of e.classList)if(n.has(t))return!0;let t=e.parentElement,a=0;for(;t&&a<3;){for(const e of t.classList)if(n.has(e))return!0;t=t.parentElement,a++}return e.matches?.('button, .controls *, [class*="handle"], .modal *, .tooltip *, .popup *')};document.addEventListener("click",(e=>{if(e.eventPhase!==Event.BUBBLING_PHASE)return;const n=e.target.closest(".component-btn, .duplicate-btn, .delete-btn, .color-swatch, .nav-control");if(n){const a=i(n),r=o(a);r&&(t=!0,e.stopPropagation(),s(r,"User interaction",{type:"Button click",element:n.className,action:n.classList.contains("nav-control")?"Navigation control":"Component interaction"}))}}),!1);const l=e=>{const n=o(e);if(!n)return;const i=new MutationObserver((e=>{if(e.some((e=>{const t=e.target.nodeType===Node.TEXT_NODE?e.target.parentElement:e.target,n=t?.closest?.(".component-btn, .duplicate-btn, .delete-btn, .color-swatch, .nav-control");return null!==n})))return;let i=[];e.some((e=>{const t=e.target.nodeType===Node.TEXT_NODE?e.target.parentElement:e.target;if(!t||r(t))return!1;switch(e.type){case"characterData":const t=e.target.parentElement,n=t?.hasAttribute("contenteditable");return n&&i.push({type:"Text content",element:t.tagName,oldValue:e.oldValue,newValue:e.target.textContent}),n;case"attributes":if("style"===e.attributeName){const t=((e,t)=>{const n=e=>{const t={};return e?(e.split(";").forEach((e=>{const[n,i]=e.split(":").map((e=>e?.trim()));n&&!a.has(n.toLowerCase())&&(t[n]=i)})),t):t},i=n(e||""),o=n(t||"");for(const e in{...i,...o})if(!a.has(e.toLowerCase())&&i[e]!==o[e])return!0;return!1})(e.oldValue,e.target.style.cssText);return t&&i.push({type:"Style change",element:e.target.tagName,oldStyle:e.oldValue,newStyle:e.target.style.cssText}),t}return!1;case"childList":const o=Array.from(e.addedNodes),s=Array.from(e.removedNodes);return[...o,...s].some((e=>{if(e.nodeType===Node.TEXT_NODE){const t=e.parentElement?.hasAttribute("contenteditable");return t&&i.push({type:"Text node change",parent:e.parentElement?.tagName,content:e.textContent?.slice(0,50)+"..."}),t}const t=e.nodeType===Node.ELEMENT_NODE&&!r(e);return t&&i.push({type:"DOM structure change",operation:o.includes(e)?"added":"removed",element:e.tagName||e.nodeName}),t}));default:return!1}}))&&(t=!0,s(n,"MutationObserver",i))}));return i.observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0,attributeOldValue:!0}),i};["input","paste","drop","dragend"].forEach((e=>{document.addEventListener(e,(n=>{if(!r(n.target)){const a=i(n.target),r=o(a);r&&(t=!0,s(r,"User input",{type:e,element:n.target.tagName,elementType:n.target.type||"N/A"}))}}),!0)})),document.querySelectorAll(".canvas-wrapper").forEach((e=>{e.hasAttribute("data-canvas-id")||e.setAttribute("data-canvas-id",`canvas_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),l(e)}));const c=new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{e.classList?.contains("canvas-wrapper")&&(e.hasAttribute("data-canvas-id")||e.setAttribute("data-canvas-id",`canvas_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),l(e))}))}))})),d=document.querySelector("#mockZone");d&&c.observe(d,{childList:!0}),this.getChangedCanvases=()=>Array.from(this._changedCanvases.keys()),this.hasUnsavedChanges=()=>t&&this.contentChanged,this.resetChangeTracking=()=>{t=!1,this.contentChanged=!1,this._changedCanvases.clear()}}addCanvasToChanged(e,t){e&&(this._changedCanvases||(this._changedCanvases=new Map),this._changedCanvases.has(e)||this._changedCanvases.set(e,[]),this._changedCanvases.get(e).push({type:"Change tracking",timestamp:(new Date).toISOString(),details:t||"Component change"}),this.contentChanged=!0,console.log(`%cCanvas ${e} marked for saving: ${t}`,"color: #FF5722; font-weight: bold"))}async saveCanvases(){return firebase.auth().currentUser&&this.currentProject?.id&&this.contentChanged?this._savePromise?(console.log("Save already in progress, waiting for completion"),this._savePromise):(this._savePromise=(async()=>{try{this.saveProjectColors();const e=this.getChangedCanvases(),t=(new Date).toLocaleString(),n=this.db.collection("project").doc(this.currentProject.id),a=n.collection("saved_screens"),i=new ProImageStorageManager,o=await i.checkProAccess(this.currentUser.uid),s=document.querySelector(".canvas-timestamp");s&&(s.textContent="Saving...",s.classList.add("pulseAnim"));const r=document.querySelectorAll(".canvas-wrapper"),l=await a.get(),c=new Map;l.forEach((e=>{c.set(e.id,e.data())}));const d=firebase.firestore().batch(),p=new Map;Array.from(r).forEach(((e,t)=>{const n=e.getAttribute("data-canvas-id");n&&p.set(n,t+1)}));const u=[];c.forEach(((e,t)=>{Array.from(r).some((n=>`screen_${e.index}`===t))||(u.push(t),d.delete(a.doc(t)),console.log(`%cMarking screen ${t} for deletion (no longer in DOM)`,"color: #FF5722; font-weight: bold"))}));const m=Array.from(r).map((async(t,n)=>{const i=t.getAttribute("data-canvas-id"),s=n+1,r=`screen_${s}`,l=c.get(r),d=e.includes(i),p=!l||l.index!==s;if(!d&&!p)return null;const u=t.querySelector(".canvas-content");if(!u)return null;let m;if(d){const e=document.createElement("div");e.innerHTML=u.innerHTML;const t=e.querySelectorAll(".card-image, .nav-image");for(const e of t){if(e.style.backgroundImage){if("none"===e.style.backgroundImage)continue;const t=e.style.backgroundImage.replace(/^url\(['"]?/,"").replace(/['"]?\)$/,"");if(t){if(!o){e.style.backgroundImage="",e.style.backgroundColor="var(--neutral-gray)",e.innerHTML='<i class="fas fa-image" style="color: var(--placeholder-color);"></i><span class="imgMsg non-editable">Click to add image</span>',e.classList.add("had-image");continue}t.startsWith("data:")?(console.warn("Found data URL image for pro user - removing to avoid document size issues"),e.style.backgroundImage="",e.style.backgroundColor="var(--neutral-gray)",e.innerHTML='<i class="fas fa-image" style="color: var(--placeholder-color);"></i><span class="imgMsg non-editable">Click to add image</span>'):t.includes("firebasestorage.googleapis.com")&&(e.setAttribute("data-background-image",t),e.style.backgroundImage="",e.style.backgroundColor="var(--neutral-gray)")}}e.querySelectorAll('img[src^="data:"]').forEach((e=>{if(!o){const t=document.createElement("div");t.innerHTML='<i class="fas fa-image" style="color: var(--placeholder-color);"></i><span class="imgMsg non-editable">Click to add image</span>',e.parentNode.replaceChild(t,e)}}))}e.querySelectorAll('img[src^="data:"], *[style*="data:"]').forEach((e=>{if("IMG"===e.tagName){if(!o){const t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.flexDirection="column",t.style.backgroundColor="var(--neutral-gray)",t.innerHTML='<i class="fas fa-image" style="color: var(--placeholder-color);"></i><span style="color: var(--placeholder-color); font-size: 14px; margin-top: 8px;">Image</span>',e.parentNode.replaceChild(t,e)}}else{const t=e.getAttribute("style");if(t){const n=t.replace(/url\(\s*['"]?data:[^)]+\)/g,"url()");e.setAttribute("style",n)}}}));const n=["script",".alignment-arrow",".color-swatch-container",".text-alignment-controls",".controls",".variant-controls",".resize-handle",".iconControls",".bullet-list-item-controls"];e.querySelectorAll(n.join(", ")).forEach((e=>e.remove())),e.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((e=>{e.hasAttribute("contenteditable")||e.setAttribute("contenteditable","true")})),m=this.unwrapComponents(e.innerHTML)}const h={lastUpdated:firebase.firestore.FieldValue.serverTimestamp()};if(d){h.content=m;const e=t.querySelector(".canvas");if(e){Object.keys(editor.specialComponents).forEach((t=>{const n=`data-has-${t}`,a=e.hasAttribute(n)&&"true"===e.getAttribute(n),i=`has${t.charAt(0).toUpperCase()+t.slice(1)}`;if(h[i]=a,a){let n;switch(t){case"navbar":n=e.querySelector(".navContain");break;case"bottomNav":n=e.querySelector(".bottomNavContain");break;case"sidebar":n=e.querySelector(".sidebar-container");break;case"modal":n=e.querySelector(".modal-wrapper");break;case"floatingActionButton":n=e.querySelector(".fab-container");break;case"bottomSheet":n=e.querySelector(".bottomSheet-container");break;case"keyboard":n=e.querySelector(".keyboard-container");break;default:n=null}if(n){const e=n.cloneNode(!0);e.querySelectorAll(".color-swatch-container, .controls, .alignment-arrow, .alignment-controls, .resize-handle").forEach((e=>e.remove())),h[`${t}Content`]=e.outerHTML}else editor.specialComponents[t].content&&(h[`${t}Content`]=editor.specialComponents[t].content)}}))}if(e){const t=window.getComputedStyle(e),n=e.style.width?parseInt(e.style.width):parseInt(t.width),a=e.style.height?parseInt(e.style.height):parseInt(t.height);isNaN(n)||isNaN(a)||(h.width=n,h.height=a)}}h.index=s,d&&p?console.log(`%cUpdating screen ${r} content and index to ${s}`,"color: #4CAF50; font-weight: bold"):d?console.log(`%cUpdating screen ${r} content only`,"color: #2196F3; font-weight: bold"):p&&console.log(`%cUpdating screen ${r} index to ${s}`,"color: #FF9800; font-weight: bold");try{return c.has(r)?await a.doc(r).update(h):(h.content||(h.content="",Object.keys(editor.specialComponents).forEach((e=>{const t=`has${e.charAt(0).toUpperCase()+e.slice(1)}`;h[t]=!1}))),await a.doc(r).set(h)),i&&this._changedCanvases.delete(i),r}catch(e){throw console.error(`Error saving screen ${r}:`,e),e}}));return d._mutations&&d._mutations.length>0&&(await d.commit(),console.log("%cCommitted structural changes to database","color: #9C27B0; font-weight: bold")),await Promise.all(m),await n.update({last_edited:firebase.firestore.FieldValue.serverTimestamp(),lastSavedTimestamp:t}),console.log("%cAll canvases saved successfully","color: #4CAF50; font-weight: bold"),s&&(s.textContent=`${t}`,setTimeout((()=>{s.classList.remove("pulseAnim")}),1e3)),this.resetChangeTracking(),!0}catch(e){console.error("Error saving canvases:",e),console.error("Error details:",{code:e.code,message:e.message,stack:e.stack});const t=document.querySelector(".canvas-timestamp");throw t&&(t.textContent="Save failed! Retry...",t.classList.remove("pulseAnim")),e}finally{this._savePromise=null}})(),this._savePromise):(console.log("No user logged in, no project selected, or no content changed"),Promise.resolve())}clearAutoSave(){this.autosaveInterval&&(clearInterval(this.autosaveInterval),this.autosaveInterval=null),this.contentChanged=!1}updateCanvasNumbers(){const e=document.querySelectorAll(".canvas-wrapper");let t=!1;e.forEach(((e,n)=>{const a=e.querySelector(".canvas-number"),i=e.querySelector(".canvas"),o=editor.state.selectedCanvases.has(i);a&&(a.textContent=`Screen ${n+1}${o?" (Selected)":""}`);const s=n+1,r=parseInt(e.dataset.previousIndex||"0");if(e.dataset.currentIndex=s,r>0&&r!==s){const n=e.getAttribute("data-canvas-id");n&&this&&"function"==typeof this.addCanvasToChanged&&(this.addCanvasToChanged(n,`Index changed from ${r} to ${s}`),this.contentChanged=!0,t=!0,console.log(`%cCanvas ${n} changed index: ${r} â†’ ${s}`,"color: #4CAF50; font-weight: bold"))}e.dataset.previousIndex=s})),t&&this&&"function"==typeof this.saveCanvases&&(this._reorderSaveTimeout&&clearTimeout(this._reorderSaveTimeout),this._reorderSaveTimeout=setTimeout((()=>{console.log("%cSaving after canvas reordering...","color: #2196F3; font-weight: bold"),this.markAllCanvasesChanged("Canvas reordering"),this.saveCanvases().catch((e=>{console.error("Error saving after reordering:",e)}))}),1e3))}markAllCanvasesChanged(e){console.log(`%cMarking all canvases changed: ${e}`,"color: #E91E63; font-weight: bold");document.querySelectorAll(".canvas-wrapper").forEach((t=>{const n=t.getAttribute("data-canvas-id");n&&this.addCanvasToChanged(n,e)})),this.contentChanged=!0,clearTimeout(this._reorderSaveTimeout),this._reorderSaveTimeout=setTimeout((()=>{this.saveCanvases().catch((e=>{console.error("Error saving after reordering:",e)}))}),2e3)}rewrapComponents(e){if(!e)return"";console.log("Starting component rewrapping process");const t=performance.now(),n=document.createElement("div");n.innerHTML=e;const a=(e,t)=>e&&e.hasAttribute(t)?e.getAttribute(t):null,i=e=>{if(!e)return;const t=e.querySelectorAll('[data-top-level-component="true"]');console.log(`Found ${t.length} top-level components to process`),t.forEach(((e,t)=>{try{if((n=e).parentElement&&n.parentElement.classList&&n.parentElement.classList.contains("component-content")&&n.parentElement.parentElement&&n.parentElement.parentElement.classList&&n.parentElement.parentElement.classList.contains("component-container"))return;const i=a(e,"data-component-type");if(!i)return void console.warn(`Component #${t} missing componentType attribute`,e);if("table"===i){const t=a(e,"data-table-content");if(t)try{const n=editor.components.table(),a=editor.wrapComponentInContainer(n,"table",!0),i=a.querySelector(".data-table-scroll-wrapper");if(i){try{i.innerHTML=decodeURIComponent(t)}catch(e){console.warn("Error decoding table content, using raw content:",e),i.innerHTML=t}setTimeout((()=>{try{const e=a.querySelector(".component-content");e&&"function"==typeof editor.setupTable&&editor.setupTable(e)}catch(e){console.error("Error setting up table:",e)}}),100)}else console.warn("Table wrapper not found in wrapped table component");return void e.replaceWith(a)}catch(e){console.error("Error restoring table component:",e)}}e.removeAttribute("data-top-level-component");const o=a(e,"data-current-variant"),s=a(e,"data-cached-variants");let r;e.removeAttribute("data-component-type"),o&&e.removeAttribute("data-current-variant"),s&&e.removeAttribute("data-cached-variants");try{if(editor.components[i]){const t=editor.components[i](e);r=editor.wrapComponentInContainer(t,i,!0)}else r=editor.wrapComponentInContainer(e,i,!0);if(r&&(o||s)){const e=r.querySelector(".component-content");if(e&&(o&&(e.dataset.currentVariant=o),s))try{JSON.parse(s),e.dataset.cachedVariants=s}catch(e){console.warn("Invalid cachedVariants JSON:",s)}}r&&e.replaceWith(r)}catch(e){console.error(`Error wrapping component of type ${i}:`,e)}}catch(e){console.error(`Error processing component #${t}:`,e)}var n}));e.querySelectorAll(".blank-card-content, .colorBlock-inner, .accordion-content, .column-container").forEach((e=>{try{i(e)}catch(t){console.error(`Error processing container ${e.className}:`,t)}}))};try{i(n)}catch(e){console.error("Error in rewrapComponents root processing:",e)}const o=performance.now();return console.log(`Component rewrapping completed in ${Math.round(o-t)}ms`),n.innerHTML}async setupTableFunctionality(e){if(!e)return console.error("No content provided to setupTableFunctionality"),null;const t=e.querySelector(".data-table-scroll-wrapper");if(!t)return console.warn("Table wrapper not found during setup"),editor.setupTable(e),null;const n="checkbox",a="text",i="link",o="action (icon)",s={activeControls:null,isResizing:!1};return new Promise((r=>{setTimeout((()=>{try{const l=t.querySelector(".data-table-main");if(!l){console.warn("Table element not found in wrapper");const t=editor.setupTable(e);return void r(t)}const c=editor.setupTable(e),d=l.querySelectorAll("th.data-table-header-cell");d.forEach((e=>{const t=e.getAttribute("data-column-type");if(t){const s=e.querySelector(".dt-col-type-selector");if(s){s.value=t;const r=Array.from(e.parentElement.children).indexOf(e),c=l.querySelectorAll("tbody tr");s.value!==t&&c.forEach((e=>{if(e.children.length>r){const s=e.children[r],l=((e=a)=>{const t=document.createElement("td");switch(t.className="dt-cell-td",e){case n:const e=document.createElement("div");e.className="fa-regular fa-square",e.style.cssText="\n                    margin: -2px 10px 0 10px;\n                    border-radius: 4px;\n                    cursor: pointer;\n                    position: relative;\n                    font-size: 18px;\n                    color: #a0a0a0;\n                ";const a=document.createElement("i");a.className="fa-solid fa-square-check",a.style.cssText="\n                    font-size: 18px;\n                    color: var(--primary-color);\n                    display: none; \n                    position: absolute;\n                    top: 0px;\n                    left: 0px;\n                    border: none;\n                ",e.appendChild(a),e.addEventListener("click",(()=>{const e="none"===a.style.display;a.style.display=e?"block":"none"})),t.appendChild(e);break;case i:const s=document.createElement("span");s.textContent="Link Text",s.style.cssText="\n                    color: #0d87d8;\n                    cursor: pointer;\n                ",s.setAttribute("contenteditable","true"),t.appendChild(s);break;case o:const r=document.createElement("i");r.className="fas fa-bolt",r.addEventListener("click",(e=>{e.preventDefault(),showIconPicker(r)}));const l=document.createElement("span");l.setAttribute("contenteditable","true"),l.style.cssText="\n                    margin-left: 8px;\n                ",l.textContent="Action",t.classList.add("icon-container"),t.appendChild(r),t.appendChild(l);break;default:t.setAttribute("contenteditable","true"),t.textContent="Cell Text"}return t})(t);e.replaceChild(l,s)}}))}}})),l.querySelectorAll(".fa-square").forEach((e=>{const t=e.cloneNode(!0);e.parentNode&&e.parentNode.replaceChild(t,e);const n=t.querySelector(".fa-square-check");t.addEventListener("click",(()=>{if(n){const e="none"===n.style.display;n.style.display=e?"block":"none"}}))})),l.querySelectorAll("tr.data-table-row").forEach((e=>{let t=e.querySelector(".row-controls");if(t){const e=t.cloneNode(!0);t.parentNode.replaceChild(e,t),t=e}else t=document.createElement("i"),t.className="fas fa-trash row-controls",t.setAttribute("title","delete row"),t.style.display="none",e.appendChild(t);t.addEventListener("click",(()=>{const t=e.closest("tbody");e.remove(),c&&"function"==typeof c.updateAddButtonVisibility&&c.updateAddButtonVisibility(t)})),e.addEventListener("mouseenter",(()=>{e.style.position="relative",t.style.display="flex"})),e.addEventListener("mouseleave",(()=>{e.style.position="initial",t.style.display="none"}))})),d.forEach((e=>{const t=e.querySelector(".data-table-column-controls");if(!t)return;e.addEventListener("mouseenter",(()=>{s.activeControls||s.isResizing||(t.style.display="flex")})),e.addEventListener("mouseleave",(e=>{t.contains(e.relatedTarget)||s.activeControls===t||(t.style.display="none")}));const n=t.querySelector(".dt-col-type-selector");if(n){const t=n.cloneNode(!0);n.parentNode.replaceChild(t,n);const a=e.getAttribute("data-column-type")||t.value;e.setAttribute("data-column-type",a),t.addEventListener("change",(()=>{Array.from(e.parentElement.children).indexOf(e);const n=t.value;e.setAttribute("data-column-type",n),c&&"function"==typeof c.updateColumnType&&c.updateColumnType(e,n)}))}const a=t.querySelector(".delete-dt-col-btn");if(a){const t=a.cloneNode(!0);a.parentNode.replaceChild(t,a),t.addEventListener("click",(()=>{const t=Array.from(e.parentElement.children).indexOf(e);if(c&&"function"==typeof c.deleteColumn)c.deleteColumn(t);else{l.querySelectorAll("tr").forEach((e=>{const n=e.children;n.length>t&&e.removeChild(n[t])}))}}))}const i=e.querySelector(".td-column-resizer");if(i){const t=i.cloneNode(!0);i.parentNode.replaceChild(t,i),t.addEventListener("mousedown",(t=>{s.isResizing=!0;const n=t.pageX,a=e.offsetWidth,i=document.createElement("div");i.id="resize-overlay",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.zIndex="9999",document.body.appendChild(i);const o=t=>{if(!s.isResizing)return;const i=t.pageX-n;e.style.width=`${Math.max(60,a+i)}px`},r=()=>{s.isResizing=!1,document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",r),i.parentNode&&i.parentNode.removeChild(i)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",r,{once:!0}),t.preventDefault()}))}})),console.log("Enhanced table setup complete"),r(c)}catch(e){console.error("Error in setupTableFunctionality:",e),r(null)}}),200)}))}async loadSavedCanvases(e){try{editor&&editor.resetCanvasCount(),editor.state.selectedCanvases.clear();const t=await this.db.collection("project").doc(e).get();if(!t.exists)return void console.log("No saved project found");const n=t.data();document.querySelectorAll(".canvas-wrapper").forEach((e=>e.remove()));const a=await this.db.collection("project").doc(e).collection("saved_screens").get();if(a.empty){console.log("No saved screens found, creating a new canvas."),editor.createNewCanvas(),await new Promise((e=>setTimeout(e,100)));const t=document.querySelector(".canvas-wrapper");if(t){const e=t.querySelector(".canvas-content");e&&(editor.setupIconPicker(e),editor.initializeSortable(e))}return this.currentProject={id:e,name:n.project_name},console.log("Setting up autosave for new project canvas"),void setTimeout((()=>{this.setupAutoSave()}),1e3)}const i=[];a.forEach((e=>{i.push({...e.data(),id:e.id})})),i.sort(((e,t)=>e.index-t.index)),console.log(`Found ${i.length} screens to load`);for(let e=0;e<i.length;e++)editor.createNewCanvas(),await new Promise((e=>setTimeout(e,100)));let o=Array.from(document.querySelectorAll(".canvas-wrapper"));if(console.log(`Created ${o.length} canvas wrappers`),o.length!==i.length){console.warn(`Canvas count mismatch: ${o.length} wrappers vs ${i.length} saved screens`);let e=5;for(;o.length<i.length&&e>0;)editor.createNewCanvas(),await new Promise((e=>setTimeout(e,200))),o=Array.from(document.querySelectorAll(".canvas-wrapper")),e--,console.log(`Attempt ${5-e}: Now have ${o.length} wrappers`);o.length!==i.length&&console.error("Could not create correct number of canvases after multiple attempts.")}const s=3;for(let e=0;e<i.length;e+=s){const t=Math.min(e+s,i.length),n=[];for(let a=e;a<t;a++){if(a>=o.length){console.error(`Canvas wrapper missing for index ${a}`);continue}const e=i[a],t=o[a];n.push(this.processCanvasData(t,e,a))}await Promise.all(n)}this.currentProject={id:e,name:n.project_name},new TextAlignmentController(".canvas-content"),hideModal("projects-modal"),this.showNotification("Project loaded successfully"),setTimeout((()=>{this.setupAutoSave()}),4e3)}catch(e){console.error("Error loading canvases:",e),this.showNotification("Error loading canvases","error")}}async processCanvasData(e,t,n){try{console.log(`Processing screen ${n+1} (index: ${t.index})`);const a=e.querySelector(".canvas");if(!a)return void console.error(`Canvas element not found for wrapper at index ${n}`);if(t.width&&t.height){a.style.width=`${t.width}px`,a.style.height=`${t.height}px`;const n=e.querySelector(".dimensions");n&&(n.textContent=`${t.width-6} Ã— ${t.height-6}`),window.dispatchEvent(new Event("resize"))}const i=e.querySelector(".canvas-content");if(i&&t.content){const e=this.sanitizeContent(t.content),n=this.rewrapComponents(e);i.innerHTML=n,await new Promise((e=>setTimeout(e,50))),i.querySelectorAll(".card-image, .nav-image").forEach((e=>{const t=e.getAttribute("data-background-image");t&&(e.style.backgroundImage=`url(${t})`,e.removeAttribute("data-background-image"))})),editor.setupImageUpload(i),await this.processSpecialComponents(a,t),this.reattachEventHandlers(i),this.setupComponentFunctionality(i),this.updateColorAndTextContrast(i);a.querySelectorAll(".bottomSheet-container").forEach((e=>{const t=e.querySelector(".bottom-sheet-content");t&&(this.reattachEventHandlers(t),this.setupComponentFunctionality(t),this.updateColorAndTextContrast(t))}))}}catch(e){console.error(`Error processing canvas ${n+1}:`,e)}}sanitizeContent(e){if(!e)return"";const t=document.createElement("div");t.innerHTML=e;var n;return(n=t).querySelectorAll("[data-component-type]").forEach((e=>{const t=e.closest("[data-component-type]");if(t&&t!==e){const n=e.getAttribute("data-component-type");if(!e.closest(".blank-card-content, .colorBlock-inner, .accordion-content, .column-container")&&n){console.log(`Fixing incorrectly nested ${n} component`);const a=t.closest(".component-container")||t;a.parentNode.insertBefore(e,a.nextSibling)}}let a=e,i=e.parentElement;for(;i&&i!==n&&"DIV"===i.tagName&&!i.getAttribute("data-component-type")&&!i.classList.contains("component-content")&&!i.classList.contains("component-container")&&!i.classList.contains("blank-card-content")&&!i.classList.contains("colorBlock-inner")&&!i.classList.contains("accordion-content")&&!i.classList.contains("column-container")&&1===i.childNodes.length;){const t=i.getAttribute("style")||"";if(t){const n=e.getAttribute("style")||"";e.setAttribute("style",`${n}; ${t}`)}const n=i.parentNode;n.replaceChild(a,i),i=n}})),t.innerHTML}async processSpecialComponents(e,t){const n=Object.keys(editor.specialComponents);for(const a of n){const n=`has${a.charAt(0).toUpperCase()+a.slice(1)}`,i=`${a}Content`;if(t[n]){let n;if(e.setAttribute(`data-has-${a}`,"true"),t[i]){const e=document.createElement("div");e.innerHTML=t[i],n=e.firstElementChild,editor.specialComponents[a].content=t[i],editor.specialComponents[a].added=!0,n||(console.error(`Failed to parse saved ${a} content`),n=editor.components[a]())}else n=editor.components[a]();if(n){switch(editor.insertSpecialComponent(e,n,a),a){case"modal":editor.setupModal(n);break;case"bottomNav":editor.setupBottomNav(n);break;case"navbar":editor.setupNavbar(n);break;case"floatingActionButton":editor.setupFloatingActionButton(n);break;case"sidebar":editor.setupSidebar(n);break;case"bottomSheet":editor.setupBottomSheet(n);break;case"keyboard":editor.setupKeyboard(n)}await new Promise((e=>setTimeout(e,20)))}}else e.removeAttribute(`data-has-${a}`),editor.specialComponents[a].added=!1,editor.specialComponents[a].content=null}}reattachEventHandlers(e){e.querySelectorAll(".icon-container i, .iconContainerClass i").forEach((e=>{const t=e.cloneNode(!0);e.parentNode&&e.parentNode.replaceChild(t,e),t.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),showIconPicker(t)}))})),e.querySelectorAll(".delete-btn").forEach((e=>{const t=e.cloneNode(!0);e.parentNode&&e.parentNode.replaceChild(t,e),t.onclick=function(){this.closest(".component-container").remove()}})),e.querySelectorAll(".duplicate-btn").forEach((e=>{const t=e.cloneNode(!0);e.parentNode&&e.parentNode.replaceChild(t,e),t.onclick=function(){const e=this.closest(".component-container");if(e){const t=e.getAttribute("data-component-type");t&&editor.duplicateComponent(e,t)}}}));const t=e.querySelectorAll(".resizeable");t.length&&t.forEach((e=>{resizer.makeResizable(e)})),e.querySelectorAll(".component-container").forEach((e=>{const t=e.querySelector(".component-content");if(t){e.querySelectorAll(".color-swatch-container").forEach((e=>{e.remove()}));Array.from(t.querySelectorAll('[style*="var(--color"]')).filter((t=>{const n=t.closest(".component-container");return!n||n===e})).forEach((t=>{const n=createColorSwatches(t);Array.isArray(n)?n.forEach((t=>{t&&t.children&&t.children.length>0&&e.insertBefore(t,e.firstChild)})):n&&n.children&&n.children.length>0&&e.insertBefore(n,e.firstChild)}))}}))}updateColorAndTextContrast(e){requestAnimationFrame((()=>{e.querySelectorAll('[style*="background-color"]').forEach((e=>{window.TextContrastAdjuster&&window.TextContrastAdjuster.updateElementContrast(e)}));e.querySelectorAll('[style*="var(--"]').forEach((e=>{window.TextContrastAdjuster&&window.TextContrastAdjuster.updateElementContrast(e)}))}))}setupComponentFunctionality(e){e.querySelectorAll(".component-container").forEach((e=>{const t=e.getAttribute("data-component-type"),n=e.querySelector(".component-content");if(t&&n)switch(editor.setupVariantControls(e,n,t),t){case"adjustableSpace":const a=n.querySelector(".blankSpace");a&&editor.copyAdjustableSpaceState(a,a);break;case"heading":const i=n.querySelector(".heading-wrapper");if(!i)break;const o=i.querySelector(".heading-controls"),s=i.querySelector(".level-indicator"),r=i.querySelector(".heading-increment-btn");if(!o||!s||!r)break;const l=i.querySelector("h1, h2, h3, h4, h5, h6");l&&(i.dataset.headingLevel=l.tagName.toLowerCase()),i.addEventListener("mouseenter",(()=>{o.style.display="flex",o.style.opacity="1",s.style.opacity="1",r.style.opacity="1"})),i.addEventListener("mouseleave",(()=>{o.style.opacity="0",s.style.opacity="0",r.style.opacity="0",setTimeout((()=>{o.style.display="none"}),200)})),r.addEventListener("click",(()=>{const e=i.dataset.headingLevel||"h1",t=["h1","h2","h3","h4","h5","h6"].indexOf(e);editor.updateHeadingLevel(i,t+1)}));break;case"icon":editor.setupIcon(n);break;case"avatar":const c=n.querySelector(".align-content");if(c){createAlignmentControls(c);const e=c.getAttribute("data-alignment");e&&(c.style.justifyContent=e)}break;case"blankCard":editor.setupBlankCard(e);break;case"bulletedList":editor.setupBulletedList(n);break;case"columns":editor.setupColumns(n.querySelector(".columns-wrapper"));break;case"notificationBanner":editor.setupNotificationBanner(n);break;case"progressTracker":editor.setupProgressTracker(e);break;case"pagination":e.querySelectorAll(".color-swatch-container").forEach((e=>e.remove())),editor.setupPagination(e);break;case"divider":editor.copyDividerState(n);break;case"chipGroup":editor.setupChipGroup(e),createGroupColorSwatch(e);break;case"tabs":editor.setupTabs(e);break;case"table":this.setupTableFunctionality(n).then((e=>{e&&console.log("Table component initialized successfully")}));break;case"accordion":const d=n.querySelector(".accordion-content");editor.initializeSortable(d),editor.setupAccordionContent(d);break;case"hzDivider":editor.setupDividerState(n);break;case"colorBlock":const p=n.querySelector(".colorBlock-inner");editor.initializeSortable(p);break;case"checkbox":const u=n.querySelector(".checkbox-square-icon"),m=n.querySelector(".checkbox-check-icon");u.addEventListener("click",(()=>{m.classList.toggle("checked")}));const h=n.querySelector("span");editor.makeTextEditable(h);break;case"radio":const v=n.querySelector(".custom-radio"),g=v.querySelector("span");v.addEventListener("click",(()=>{document.querySelectorAll(".custom-radio").forEach((e=>{e.querySelector("span").style.display="none",e.style.borderColor="#e0e0e0"})),g.style.display="block",v.style.borderColor="var(--color-primary)"}));const y=n.querySelector('span:not([style*="border-radius"])');editor.makeTextEditable(y);break;case"toggleSwitch":const b=n.querySelector(".toggle-switch"),f=b.querySelector(".toggle-slider"),x=b.querySelector(".toggle-thumb");let w=!1;const k=()=>{w=!w,w?(f.style.backgroundColor="var(--color-primary)",x.style.left="30px"):(f.style.backgroundColor="var(--neutral-gray)",x.style.left="4px")};b.addEventListener("click",k);break;case"slider":const S=n.querySelector(".custom-range-slider"),C=n.querySelector(".range-value");S.addEventListener("input",(()=>{C.textContent=S.value}));break;case"textarea":editor.setupResize(n);break;case"imgGallery":setupImageGallery(n);break;case"progressBar":editor.setupProgressBar(n);break;case"featureComparisonCard":editor.setupFeatureComparisonCard(e);break;case"graph":createGraphColorSwatch(e);break;case"datePicker":const E=document.querySelector(".date-picker-wrapper");if(E){const e=E.querySelector("span"),t=E.querySelector(".date-picker-icon"),n=E.querySelector(".date-picker-calendar-con");editor.setupDatePicker(E,e,t,n)}break;case"dropdown":editor.setupDropdown(e);break;case"navbar":editor.setupNavbar(e);break;case"bottomSheet":editor.setupBottomSheet(e);break;case"keyboard":editor.setupKeyboard(e);break;case"leftChat":case"rightChat":editor.setupChatComponent(n);break;case"input":case"textarea":case"searchBar":editor.setupInputListeners(n,t)}}))}setCurrentProject(e){this.currentProject=e}async checkProjectLimit(){try{const e=this.db.collection("project"),t=await e.where("owner","==",this.db.doc(`users/${this.currentUser.uid}`)).get().then((e=>e.size)),n=await this.db.collection("users").doc(this.currentUser.uid).get(),a=n.exists&&!0===n.data().pro_account;return t>=2&&!a?void this.showSubscriptionModal("Upgrade to Create Unlimited Projects","You've reached the limit for free projects."):void this.handleNewProject()}catch(e){console.error("Error checking project limit:",e)}}async loadUserProjects(){try{if(!this.currentUser?.uid)throw new Error("No authenticated user");const e=firebase.firestore().doc(`users/${this.currentUser.uid}`),t=firebase.firestore().collection("project").where("owner","==",e).orderBy("last_edited","desc"),n=(await t.get()).docs;this.displayProjectsList(n)}catch(e){console.error("Error fetching user projects:",e.message)}}async displayProjectsList(e){const t=document.querySelector("#projects-container");if(t){if(t.innerHTML="",0===e.length){const e=document.createElement("div");return e.className="no-projects-message",e.innerHTML='\n                <i class="fa-regular fa-folder"></i> &nbsp; <i class="fa-solid fa-exclamation"></i>\n                <h2>No Projects Found</h2>\n                <p>Click "New Project" to get started!</p>\n            ',void t.appendChild(e)}for(const n of e){const e=n.data(),a=document.createElement("div");a.className="project-item";const i=await firebase.firestore().collection("project").doc(n.id).collection("saved_screens").get().then((e=>e.size)).catch((e=>(console.error("Error getting screens count:",e),0)));let o="Open Sans";e.fonts&&e.fonts.primaryFont&&(o=e.fonts.primaryFont,this.ensureFontLoaded(o)),a.innerHTML=`\n                <div class="project-info" onclick="projectManager.loadProject('${n.id}')">\n                    <div class="project-image-container" style="width: 42px; height: 42px; background-color: var(--neutral-gray); cursor: pointer; border-radius: 50%; overflow: hidden; position: relative;">\n                        <i class="fas fa-image" style="color: var(--placeholder-color); position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);"></i>\n                        <div class="project-image" style="width: 100%; height: 100%; position: absolute; top: 0; left: 0; background-image: url(${e.img_hero_proj}); background-size: cover; background-position: center; background-repeat: no-repeat;"></div>\n                    </div>\n                    <div>\n                        <h3 style="font-family: '${o}', sans-serif;">${e.project_name}</h3>\n                        <span>Last edited: ${e.last_edited?.toDate().toLocaleString()||"N/A"}</span>\n                    </div>\n                </div>\n                <div class="project-actions">\n                    <button onclick="projectManager.loadProject('${n.id}')" class="open-btn">\n                        <i class="fas fa-folder-open"></i> Open\n                    </button>\n                    <br>\n                    <span style="color: var(--placeholder-color); margin-right: 8px; font-size: 12px;">${i} screens</span>\n                </div>\n            `,t.appendChild(a)}}else console.warn("Projects container not found in DOM")}async ensureFontLoaded(e){if(!e)return!1;const t=e.trim();return new Promise((e=>{if(document.fonts&&document.fonts.check(`12px "${t}"`))return void e(!0);const n=t.replace(/\s+/g,"+"),a=document.createElement("link");a.href=`https://fonts.googleapis.com/css?family=${n}:400,700`,a.rel="stylesheet",a.onload=()=>{setTimeout((()=>e(!0)),200)},a.onerror=()=>{console.warn(`Failed to load font: ${t}`),e(!1)},document.head.appendChild(a)}))}saveFontSelection(e,t){if(this.currentProject?.id&&!this.isSavingFonts)try{this.isSavingFonts=!0;const n=this.getCurrentFonts(),a=JSON.parse(localStorage.getItem(`projectFonts_${this.currentProject.id}`))||{};if(a[e]===t)return void(this.isSavingFonts=!1);a[e]=t,localStorage.setItem(`projectFonts_${this.currentProject.id}`,JSON.stringify(a)),this.pendingUpdates={...this.pendingUpdates,fonts:{...n,[e]:t,lastUpdated:firebase.firestore.FieldValue.serverTimestamp()}},this.pendingWriteTimer||(this.pendingWriteTimer=setTimeout((()=>{this.flushPendingUpdates()}),8e3)),this.contentChanged=!0}catch(e){console.error("Error saving font selection:",e)}finally{this.isSavingFonts=!1}}getCurrentFonts(){return{primaryFont:document.documentElement.style.getPropertyValue("--primary-font").trim()||"",secondaryFont:document.documentElement.style.getPropertyValue("--secondary-font").trim()||""}}flushPendingUpdates(){if(this.pendingUpdates&&this.currentProject?.id)try{this.db.collection("project").doc(this.currentProject.id).update(this.pendingUpdates),this.pendingUpdates={},this.pendingWriteTimer=null,this.isSavingColors=!1,this.isSavingFonts=!1}catch(e){console.error("Error saving updates:",e),this.isSavingColors=!1,this.isSavingFonts=!1}else this.pendingWriteTimer=null}async loadProjectFonts(e){try{const t=await this.db.collection("project").doc(e).get();if(!t.exists)return;const n=t.data().fonts||{},a={primaryFont:"Open Sans",secondaryFont:"Roboto"},i={primaryFont:n.primaryFont||a.primaryFont,secondaryFont:n.secondaryFont||a.secondaryFont};return await Promise.all([this.ensureFontLoaded(i.primaryFont),this.ensureFontLoaded(i.secondaryFont)]),document.documentElement.style.setProperty("--primary-font",i.primaryFont),document.documentElement.style.setProperty("--secondary-font",i.secondaryFont),setTimeout((()=>{"undefined"!=typeof $&&($("#fontPicker1").trigger("setFont",i.primaryFont),$("#fontPicker2").trigger("setFont",i.secondaryFont),this.refreshFontDropdowns())}),600),"undefined"!=typeof $&&setTimeout((()=>{const e=$("#fontPicker1"),t=$("#fontPicker2");e.length&&e.trigger("setFont",i.primaryFont),t.length&&t.trigger("setFont",i.secondaryFont),this.refreshFontDropdowns()}),600),localStorage.setItem(`projectFonts_${e}`,JSON.stringify(i)),i}catch(e){return console.error("Error loading project fonts:",e),null}}refreshFontDropdowns(){if("undefined"==typeof $)return void console.warn("jQuery not available for font refresh");if(!$(".font-select").length)return void console.warn("No font selectors found");const e=JSON.parse(localStorage.getItem(`projectFonts_${this.currentProject.id}`))||{};for(const t in e){const n=e[t];n&&this.ensureFontInArray(n)}$("#fontPicker1, #fontPicker2").each((function(){const e=$(this).data("fontselect");e&&"function"==typeof e.refreshFontDropdown?e.refreshFontDropdown():console.warn("fontselect instance not found or missing refreshFontDropdown method")})),console.log("Font dropdowns refreshed")}ensureFontInArray(e){if(!e||"string"!=typeof e)return!1;const t=e.trim();if(!window.fonts.some((e=>e.split(":")[0].toLowerCase()===t.toLowerCase()))){const e=`${t}:,400,700: SansFilter :Google Fonts`;return window.fonts.unshift(e),this.refreshFontDropdowns(),!0}return!1}async handleSignOut(){try{this.currentProject=null,this.contentChanged=!1,this.clearAutoSave(),localStorage.removeItem("lastActiveProject"),Object.keys(localStorage).forEach((e=>{e.startsWith("projectColors_")&&localStorage.removeItem(e)})),document.documentElement.style.setProperty("--primary-font","Open Sans"),document.documentElement.style.setProperty("--secondary-font","Roboto"),"undefined"!=typeof $&&setTimeout((()=>{$("#fontPicker1").length&&$("#fontPicker1").val("Open Sans:regular").trigger("setFont","Open Sans"),$("#fontPicker2").length&&$("#fontPicker2").val("Roboto:regular").trigger("setFont","Roboto")}),300);const e=document.querySelector("#project-title h3");e&&(e.textContent="",e.style.display="none");document.querySelectorAll(".canvas-wrapper").forEach((e=>e.remove())),editor&&(editor.resetCanvasCount(),setTimeout((()=>{editor.createNewCanvas();const e=document.querySelector(".canvas-wrapper");if(e){const t=e.querySelector(".canvas-content");if(t){editor.setupImageUpload(t),editor.setupIconPicker(t),editor.initializeSortable(t);const n=e.querySelector(".canvas");n&&(editor.state.selectedCanvases.clear(),editor.state.selectedCanvases.add(n),n.classList.add("selected"),n.addEventListener("click",(e=>editor.handleCanvasSelection(e))))}}}),50));const t=document.querySelector(".save-canvas-btn");t&&(t.style.display="none");const n=document.querySelector(".canvas-timestamp");n&&(n.textContent=""),window.colorPicker&&(colorPicker.colors[0].hexString="#3498db",colorPicker.colors[1].hexString="#5f615d",colorPicker.colors[2].hexString="#fbd513"),document.documentElement.style.setProperty("--color-primary","#3498db"),document.documentElement.style.setProperty("--primary-color","#3498db"),document.documentElement.style.setProperty("--color-secondary","#5f615d"),document.documentElement.style.setProperty("--color-accent","#fbd513"),this.pendingUpdates={},this.pendingWriteTimer&&(clearTimeout(this.pendingWriteTimer),this.pendingWriteTimer=null),document.querySelector(".user-profile-section").style.display="none",document.querySelector(".login-button").style.display="flex",document.querySelector("#open-projects-btn").style.display="none";document.querySelectorAll(".modal").forEach((e=>{"flex"===e.style.display&&(e.style.display="none")})),this.showNotification("Signed out successfully")}catch(e){console.error("Error during sign out cleanup:",e),this.showNotification("Error during sign out","error")}}}const projectManager=new ProjectManager;function showModal(e){document.getElementById(e).style.display="flex"}function hideModal(e){document.getElementById(e).style.display="none"}function showConfirmDialog(e,t={}){return document.getElementById("projects-modal")&&hideModal("projects-modal"),new Promise((n=>{const a=document.createElement("div");a.className="confirmation-dialog",a.style.cssText="\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0, 0, 0, 0.5);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            z-index: 9999991;\n        ";const i=document.createElement("div");i.style.cssText="\n            background: var(--input-bg-color);\n            padding: 24px;\n            border-radius: 8px;\n            width: 90%;\n            max-width: 400px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            animation: fadeIn 0.2s ease-out;\n        ";const o=document.createElement("style");o.textContent="\n            @keyframes fadeIn {\n                from { opacity: 0; transform: translateY(-20px); }\n                to { opacity: 1; transform: translateY(0); }\n            }\n        ",document.head.appendChild(o),i.innerHTML=`\n            <h3 style="margin-top: 0; color: var(--basic-txt-color);">${t.heading||"Confirm Action"}</h3>\n            <p style="color: var(--basic-txt-color); margin-bottom: 24px;">${e}</p>\n            <div style="display: flex; justify-content: flex-end; gap: 12px;">\n                <button class="cancel-btn" style="\n                    padding: 8px 16px;\n                    border: none;\n                    border-radius: 4px;\n                    background: var(--neutral-gray);\n                    color: var(--basic-txt-color);\n                    cursor: pointer;\n                ">${t.cancelText||"Cancel"}</button>\n                <button class="confirm-btn" style="\n                    padding: 8px 16px;\n                    border: none;\n                    border-radius: 4px;\n                    background: var(--color-primary);\n                    color: var(--basic-txt-color);\n                    cursor: pointer;\n                ">${t.confirmText||"Confirm"}</button>\n            </div>\n        `,a.appendChild(i),document.body.appendChild(a),i.querySelector(".confirm-btn").addEventListener("click",(()=>{a.remove(),n(!0)})),i.querySelector(".cancel-btn").addEventListener("click",(()=>{a.remove(),n(!1)})),document.addEventListener("keydown",(function e(t){"Escape"===t.key&&(document.removeEventListener("keydown",e),a.remove(),n(!1))})),a.addEventListener("click",(e=>{e.target===a&&(a.remove(),n(!1))}))}))}function showPromptDialog(e,t="",n={}){return new Promise((a=>{const i=document.createElement("div");i.className="prompt-dialog",i.style.cssText="\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0, 0, 0, 0.5);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            z-index: 999999;\n        ";const o=document.createElement("div");o.style.cssText="\n            background: var(--input-bg-color);\n            padding: 24px;\n            border-radius: 8px;\n            width: 90%;\n            max-width: 400px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            animation: fadeIn 0.2s ease-out;\n        ",o.innerHTML=`\n            <h3 style="margin-top: 0; color: var(--basic-txt-color);">${n.heading||"Enter Value"}</h3>\n            <p style="color: var(--basic-txt-color); margin-bottom: 16px;">${e}</p>\n            <input type="text" value="${t}" style="\n                width: calc(100% - 16px);\n                padding: 8px;\n                margin-bottom: 24px;\n                border: 1px solid var(--neutral-gray);\n                border-radius: 4px;\n                background: var(--input-bg-color);\n                color: var(--basic-txt-color);\n            ">\n            <div style="display: flex; justify-content: flex-end; gap: 12px;">\n                <button class="cancel-btn" style="\n                    padding: 8px 16px;\n                    border: none;\n                    border-radius: 4px;\n                    background: var(--neutral-gray);\n                    color: var(--basic-txt-color);\n                    cursor: pointer;\n                ">${n.cancelText||"Cancel"}</button>\n                <button class="confirm-btn" style="\n                    padding: 8px 16px;\n                    border: none;\n                    border-radius: 4px;\n                    background: var(--color-primary);\n                    color: var(--basic-txt-color);\n                    cursor: pointer;\n                ">${n.confirmText||"OK"}</button>\n            </div>\n        `,i.appendChild(o),document.body.appendChild(i);const s=o.querySelector("input");s.focus(),s.select(),o.querySelector(".confirm-btn").addEventListener("click",(()=>{const e=s.value.trim();i.remove(),a(e)})),o.querySelector(".cancel-btn").addEventListener("click",(()=>{i.remove(),a(null)})),s.addEventListener("keypress",(e=>{if("Enter"===e.key){const e=s.value.trim();i.remove(),a(e)}})),document.addEventListener("keydown",(function e(t){"Escape"===t.key&&(document.removeEventListener("keydown",e),i.remove(),a(null))})),i.addEventListener("click",(e=>{e.target===i&&(i.remove(),a(null))}))}))}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("open-projects-btn");e&&e.addEventListener("click",(()=>showModal("projects-modal"))),document.querySelectorAll(".close-modal").forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".modal");t&&hideModal(t.id)}))})),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("click",(t=>{t.target===e&&hideModal(e.id)}))}))})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&(document.querySelector(".modal-overlay").style.display="none",document.querySelectorAll(".modal").forEach((e=>{"flex"===e.style.display&&hideModal(e.id)})))})),firebase.auth().onAuthStateChanged((async e=>{if(e)try{(await firebase.firestore().collection("users").doc(e.uid).get()).exists||await firebase.firestore().collection("users").doc(e.uid).set({display_name:e.displayName||e.email,photo_url:e.photoURL||"https://firebasestorage.googleapis.com/v0/b/experience-builder-m-v-wxacv7.appspot.com/o/avatar-placeholder.png?alt=media&token=6e0896e6-0285-46d9-b251-6b8ee8f690f4",email:e.email,created_time:e.createdTime||firebase.firestore.FieldValue.serverTimestamp(),last_active_time:firebase.firestore.FieldValue.serverTimestamp(),logged_in:!0}),document.querySelector(".user-profile-section").innerHTML=`\n                <div class="user-info">\n                    <img src="${e.photoURL||"https://firebasestorage.googleapis.com/v0/b/experience-builder-m-v-wxacv7.appspot.com/o/avatar-placeholder.png?alt=media&token=6e0896e6-0285-46d9-b251-6b8ee8f690f4"}" \n                         alt="Profile" \n                         class="profile-photo">\n                    <span>${e.displayName||e.email}</span>\n                </div>\n                <button title="settings" id="settings-btn"><i class="fas fa-cog"></i></button>\n            `,document.querySelector(".user-profile-section").style.display="flex",document.querySelector("#open-projects-btn").style.display="block",document.querySelector(".login-button").style.display="none";const t=document.querySelector("#auth-modal");t&&(t.style.display="none")}catch(e){console.error("Error handling auth state:",e)}})),"localhost"===location.hostname&&firebase.functions().useEmulator("localhost",5001),document.addEventListener("DOMContentLoaded",(()=>{projectManager&&projectManager.checkSubscriptionStatus()}));class SaveButtonHandler{constructor(e,t=5e3){this.button=document.querySelector(e),this.cooldownTime=t,this.isEnabled=!0,this.timeoutId=null,this.remainingTime=0,this.updateInterval=null,this.button&&this.setupButton()}setupButton(){if(this.button.addEventListener("click",(()=>this.handleSave())),!this.button.querySelector(".cooldown-tooltip")){const e=document.createElement("span");e.className="cooldown-tooltip",e.style.display="none",this.button.appendChild(e)}}async handleSave(){if(this.isEnabled)if(projectManager.hasUnsavedChanges()){try{this.disableButton(),await projectManager.saveCanvases(),this.startCooldown(),projectManager.showNotification("Changes saved successfully!","success")}catch(e){console.error("Save failed:",e),this.enableButton(),projectManager.showNotification("Failed to save changes","error")}projectManager.resetChangeTracking()}else projectManager.showNotification("No changes to save")}disableButton(){this.isEnabled=!1,this.button.classList.add("disabled")}enableButton(){this.isEnabled=!0,this.button.classList.remove("disabled");const e=this.button.querySelector(".cooldown-tooltip");e&&(e.style.display="none")}startCooldown(){this.remainingTime=this.cooldownTime,this.updateInterval&&clearInterval(this.updateInterval),this.updateInterval=setInterval((()=>{this.remainingTime-=1e3,this.updateTooltip(),this.remainingTime<=0&&(clearInterval(this.updateInterval),this.enableButton())}),1e3),this.updateTooltip(),this.timeoutId=setTimeout((()=>{this.enableButton()}),this.cooldownTime)}updateTooltip(){const e=this.button.querySelector(".cooldown-tooltip");if(e){const t=Math.ceil(this.remainingTime/1e3);e.textContent=`${t}s`,e.style.display="block"}}}const saveHandler=new SaveButtonHandler(".save-canvas-btn",3e4);class StripeClient{constructor(e={}){this.config={publishableKey:e.publishableKey||"pk_live_51Img78K5ZALgdbfFCDxjFQ8p0ZdoaozqL4qKqkJYRir3pGzcrlRBGvdqoq8ERRLVhhK7Y78q3PDpLhsH7pNss30U00RkPCgolE",functionBaseUrl:e.functionBaseUrl||"https://us-central1-experience-builder-m-v-wxacv7.cloudfunctions.net/api",retryAttempts:e.retryAttempts||2,retryDelay:e.retryDelay||1e3,productPrices:e.productPrices||{monthly:"price_1PnTWAK5ZALgdbfFDXytlpJ6",yearly:"price_1PnTdKK5ZALgdbfFhyRw7qma"}},this.stripe=null,this.initialized=!1,this.initStripe()}initStripe(){if(this.initialized)return this.stripe;try{return"undefined"==typeof Stripe?(console.warn("Stripe.js is not loaded yet. Make sure to include the Stripe script in your page."),null):(this.stripe=Stripe(this.config.publishableKey),this.initialized=!0,this.stripe)}catch(e){return console.error("Error initializing Stripe:",e),this.logError("initStripe",e),null}}async getCurrentUser(){const e=firebase.auth().currentUser;if(!e)throw new Error("User not authenticated");try{return await e.getIdToken(!0),e}catch(e){throw console.error("Token refresh failed:",e),this.logError("getCurrentUser",e),new Error(`Authentication error: ${e.message}`)}}async createCheckoutSession(e,t,n){try{const a=await this.getCurrentUser(),i=this.config.productPrices[e];if(!i)throw new Error(`Invalid plan selected: ${e}`);const o=await a.getIdToken(),s=`${this.config.functionBaseUrl}/createCheckoutSession`,r=await this.fetchWithRetry(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({priceId:i,successUrl:t,cancelUrl:n})});if(!r.ok){const e=await r.text();let t;try{t=JSON.parse(e).error||`HTTP error ${r.status}`}catch(n){t=`HTTP error ${r.status}: ${e}`}throw new Error(t)}const l=await r.json();if(!l.url)throw new Error("No checkout URL returned from server");return l.url}catch(e){if(console.error("Error creating checkout session:",e),this.logError("createCheckoutSession",e),"object"==typeof e&&null!==e)throw new Error(e.message||JSON.stringify(e));throw e}}async createCustomerPortal(e,t=!0){try{const n=await this.getCurrentUser(),a=await n.getIdToken(),i=`${this.config.functionBaseUrl}/createPortalSession`,o=await this.fetchWithRetry(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({returnUrl:e})});if(!o.ok){const e=await o.json();throw new Error(e.error||`HTTP error ${o.status}`)}const s=await o.json();return t&&s.url?void window.open(s.url,"_blank"):s}catch(e){throw console.error("Error creating portal session:",e),this.logError("createCustomerPortal",e),e}}async checkSubscriptionStatus(){try{const e=await this.getCurrentUser(),t=await e.getIdToken(),n=`${this.config.functionBaseUrl}/checkSubscriptionStatus`,a=await this.fetchWithRetry(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!a.ok){const e=await a.json();throw new Error(e.error||`HTTP error ${a.status}`)}return!0===(await a.json()).isActive}catch(e){return console.error("Error checking subscription status:",e),this.logError("checkSubscriptionStatus",e),!1}}async fetchWithRetry(e,t){let n;for(let a=0;a<=this.config.retryAttempts;a++)try{if(a>0){const e=Math.min(this.config.retryDelay*Math.pow(2,a-1),1e4);console.log(`Retry attempt ${a}/${this.config.retryAttempts} after ${e}ms`),await new Promise((t=>setTimeout(t,e)))}return await fetch(e,t)}catch(e){if(console.warn(`Fetch attempt ${a+1} failed:`,e),n=e,!e.message.includes("network")&&!e.message.includes("timeout"))throw e}throw n||new Error("All retry attempts failed")}logError(e,t){const n={message:t.message||String(t),stack:t.stack,code:t.code,time:(new Date).toISOString()};console.error(`Stripe operation failed: ${e}`,n)}}const stripeClient=new StripeClient;ProjectManager.prototype.showSubscriptionModal=function(e,t){if(!firebase.auth().currentUser)return this.showNotification("Please log in to subscribe","warning"),void showAuthModal("Log in to Subscribe","Create faster with <i>Dlightningâš¡</i>");const n=document.querySelector("#subscription-modal");n&&n.remove();const a=document.createElement("div");a.className="modal subscription-modal",a.id="subscription-modal",a.innerHTML=`\n      <div class="modal-content">\n        <span class="close-modal">&times;</span>\n        <h2>${e||'Upgrade to Dlightning Pro <i class="fas fa-bolt"></i>'}</h2>\n        <p>${t||"Unlock the full potential of Dlightning."}</p>\n  \n        <div style="display: flex; justify-content: space-between; align-items: center; gap: 12px;">\n          <ul class="features-list">\n            <label><b>Subscription Features Include</b></label>\n            <li>Unlimited projects and screens</li>\n            <li>Early Access to new components</li>\n            <li>Image saving abilities</li>\n          </ul>\n        </div>\n  \n        <div class="subscription-cards">\n          <div class="subscription-card" data-plan="monthly" onclick="projectManager.selectPlan(this)">\n            <h3>1 Month Subscription</h3>\n            <div class="price">$8.00</div>\n            <div class="price-subtext">Â¢27/day</div>\n          </div>\n          \n          <div class="subscription-card" data-plan="yearly" onclick="projectManager.selectPlan(this)">\n            <h3>1 Year Subscription</h3>\n            <div class="price">$72.00</div>\n            <div class="price-subtext">$6.00/month</div>\n          </div>\n        </div>\n        <div class="modal-buttons">\n          <button class="subscribe-button" onclick="projectManager.handleSubscriptionPurchase(this)">Subscribe Now &emsp;<i class="fas fa-arrow-up-right-from-square"></i></button>\n          <button onclick="this.closest('.modal').remove()">Cancel</button>\n        </div>\n        <img src="img/stripe-logo.svg" alt="Stripe" style="width: 86px; margin: 0 -24px -34px 0; float: right;">\n      </div>\n    `,document.body.appendChild(a),a.style.display="flex";const i=a.querySelector(".close-modal");i&&i.addEventListener("click",(()=>{a.style.display="none"})),a.addEventListener("click",(e=>{e.target===a&&(a.style.display="none")}))},ProjectManager.prototype.selectPlan=function(e){e.parentElement.querySelectorAll(".subscription-card").forEach((e=>e.classList.remove("selected"))),e.classList.add("selected")},ProjectManager.prototype.handleSubscriptionPurchase=async function(e){const t=e.closest(".modal").querySelector(".subscription-card.selected");if(t)try{e.disabled=!0,e.innerHTML='<i class="fas fa-spinner fa-spin"></i> Processing...';const n=t.dataset.plan;if(!firebase.auth().currentUser)throw new Error("User not authenticated");const a=window.location.origin+window.location.pathname,i=`${a}?subscription=success`,o=`${a}?subscription=cancel`;this.showNotification("Preparing checkout...","info"),console.log("Creating checkout session with:",{plan:n,successUrl:i,cancelUrl:o});const s=await stripeClient.createCheckoutSession(n,i,o);if(!s)throw new Error("No checkout URL returned");console.log("Opening Stripe Checkout in new tab:",s),this.showNotification("Opening checkout in new tab...","info"),window.open(s,"_blank")}catch(e){console.error("Subscription error:",e);let t="An error occurred. Please try again.";e&&"object"==typeof e?t=e.message||JSON.stringify(e):"string"==typeof e&&(t=e),t.includes("CORS")||t.includes("Network Error")?t="Connection issue. Please try again later.":t.includes("internal")||t.includes("Server error")?t="Server issue. Please try again later.":t.includes("timeout")&&(t="Connection timeout. Please check your internet and try again."),this.showNotification("âŒ "+t,"error")}finally{e.disabled=!1,e.innerHTML='Subscribe Now &emsp;<i class="fas fa-arrow-up-right-from-square"></i>'}else this.showNotification("Please select a subscription plan","warning")},ProjectManager.prototype.checkSubscriptionStatus=function(){const e=new URLSearchParams(window.location.search).get("subscription");"success"===e?(this.showNotification("âœ… Subscription successful!","success"),window.history.replaceState(null,"",window.location.pathname),setTimeout((()=>{this.refreshUserStatus()}),2e3)):"cancel"===e&&(this.showNotification("âŒ Subscription process canceled.","error"),window.history.replaceState(null,"",window.location.pathname))},ProjectManager.prototype.refreshUserStatus=async function(){try{if(!firebase.auth().currentUser)return;const e=await firebase.firestore().collection("users").doc(firebase.auth().currentUser.uid).get();e.exists&&e.data().pro_account&&(this.showNotification("âœ¨ Pro features activated!","success"),document.querySelectorAll(".pro-feature").forEach((e=>{e.classList.remove("disabled"),e.removeAttribute("disabled")})),document.querySelectorAll(".pro-badge").forEach((e=>{e.textContent="PRO"})))}catch(e){console.error("Error refreshing user status:",e)}},ProjectManager.prototype.checkProjectLimit=async function(){try{if(!this.currentUser)return void showAuthModal("Sign In to Save Projects","Create more with Dlightning");const e=this.db.collection("project"),t=await e.where("owner","==",this.db.doc(`users/${this.currentUser.uid}`)).get().then((e=>e.size)),n=await this.db.collection("users").doc(this.currentUser.uid).get(),a=n.exists&&!0===n.data().pro_account;if(t>=2&&!a)return void this.showSubscriptionModal("Upgrade to Create Unlimited Projects","You've reached the limit for free projects.");this.handleNewProject()}catch(e){console.error("Error checking project limit:",e),this.showNotification("Error checking project limit","error")}};class SimplifiedAccountManager{constructor(){this.db=firebase.firestore(),this.auth=firebase.auth(),this.currentUser=null,this.subscriptionData=null,this.stripeClient=window.stripeClient||new StripeClient,this.initAuthListener(),this.setupEventListeners()}initAuthListener(){this.auth.onAuthStateChanged((async e=>{this.currentUser=e,e&&await this.fetchSubscriptionData()}))}setupEventListeners(){document.addEventListener("click",(e=>{e.target.closest("#settings-btn")&&this.showAccountModal()}))}async fetchSubscriptionData(){if(!this.currentUser)return null;try{const e=await this.db.collection("users").doc(this.currentUser.uid).get();if(!e.exists)return null;const t=e.data();return this.subscriptionData={isPro:!0===t.pro_account,status:t.subscription_status||"none",startDate:t.subscription_start_date?t.subscription_start_date.toDate():null,endDate:t.subscription_current_period_end?new Date(t.subscription_current_period_end):null,lastPayment:t.last_payment_date?t.last_payment_date.toDate():null,paymentStatus:t.last_payment_status||"none"},this.subscriptionData}catch(e){return console.error("Error fetching subscription data:",e),null}}formatDate(e){return e?new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"N/A"}async showAccountModal(){await this.fetchSubscriptionData();const e=document.querySelector("#simplified-account-modal");e&&e.remove();const t=document.createElement("div");if(t.className="modal account-modal",t.id="simplified-account-modal",!this.currentUser)return t.innerHTML='\n        <div class="modal-content">\n          <button class="close-modal">&times;</button>\n          <h2>Account</h2>\n          <p>You need to sign in to access your account settings.</p>\n          <button id="account-sign-in-btn" class="account-action-btn">Sign In</button>\n        </div>\n      ',document.body.appendChild(t),t.style.display="flex",t.querySelector(".close-modal").addEventListener("click",(()=>{t.style.display="none"})),void t.querySelector("#account-sign-in-btn").addEventListener("click",(()=>{t.style.display="none",showAuthModal()}));const n=!0===(await this.db.collection("users").doc(this.currentUser.uid).get().then((e=>e.data()))).pro_account,a=this.subscriptionData?.endDate?this.formatDate(this.subscriptionData.endDate):"N/A";t.innerHTML=`\n      <div class="modal-content account-content">\n        <button class="close-modal">&times;</button>\n        <h2>Account Settings</h2>\n        \n        <div class="account-section user-info-section">\n          <div class="user-profile">\n            <img src="${this.currentUser.photoURL||"https://firebasestorage.googleapis.com/v0/b/experience-builder-m-v-wxacv7.appspot.com/o/avatar-placeholder.png?alt=media&token=6e0896e6-0285-46d9-b251-6b8ee8f690f4"}" \n                 alt="Profile" class="profile-image">\n            <div>\n              <h3>${this.currentUser.displayName||"User"}</h3>\n              <p>${this.currentUser.email}</p>\n            </div>\n          </div>\n          <button id="sign-out-btn" class="account-action-btn secondary">Log Out &nbsp;<i class="fas fa-sign-out-alt"></i></button>\n        </div>\n        \n        <div class="account-section subscription-section">\n          <h3>Subscription</h3>\n          <div class="subscription-details">\n            <div class="subscription-status">\n              <span class="status-value ${n?"active":"inactive"}">\n                ${n?"Active":"Free Tier"}\n              </span>\n            </div>\n            \n            ${n?`\n              <div class="subscription-info">\n                <div><span>Plan:</span> <span>Pro Plan</span></div>\n                <div><span>Next billing date:</span> <span>${a}</span></div>\n              </div>\n              <div class="subscription-actions">\n                <button id="manage-subscription-btn" class="primary-btn account-action-btn">UPDATE &nbsp;<i class="fas fa-bolt"></i></button>\n              </div>\n            `:'\n              <div class="subscription-upgrade">\n                <p>Upgrade to Pro to unlock all features:</p>\n                <ul>\n                  <li><i class="fas fa-check"></i> Unlimited projects</li>\n                  <li><i class="fas fa-check"></i> Image storage abilities</li>\n                  <li><i class="fas fa-check"></i> Advanced components</li>\n                </ul>\n                <button id="upgrade-subscription-btn" class="primary-btn">Dlightning Pro &nbsp;<i class="fas fa-bolt"></i></button>\n              </div>\n            '}\n          </div>\n        </div>\n        \n      </div>\n    `,document.body.appendChild(t),t.style.display="flex",t.querySelector(".close-modal").addEventListener("click",(()=>{t.style.display="none"})),t.querySelector("#sign-out-btn").addEventListener("click",(async()=>{try{projectManager&&await projectManager.handleSignOut(),await this.auth.signOut(),t.style.display="none"}catch(e){console.error("Error signing out:",e)}})),n?t.querySelector("#manage-subscription-btn").addEventListener("click",(()=>{this.openCustomerPortal()})):t.querySelector("#upgrade-subscription-btn").addEventListener("click",(()=>{t.style.display="none",projectManager&&projectManager.showSubscriptionModal()})),t.addEventListener("click",(e=>{e.target===t&&(t.style.display="none")}))}async openCustomerPortal(){try{if(!this.currentUser)throw new Error("You must be logged in to manage your subscription");const e=document.querySelector("#manage-subscription-btn");e&&(e.disabled=!0,e.innerHTML='<i class="fas fa-spinner fa-spin"></i> Loading...');const t=window.location.origin+window.location.pathname;console.log("Opening customer portal with return URL:",t),console.log("Using stripeClient:",!!this.stripeClient);const n=(await this.db.collection("users").doc(this.currentUser.uid).get()).data();if(!n||!n.stripe_customer_id)throw new Error("No Stripe customer ID found. You need to subscribe first.");if(this.stripeClient)await this.stripeClient.createCustomerPortal(t,!0);else{console.log("Using Firebase function fallback");const e=firebase.functions().httpsCallable("createPortalSession"),n=await e({returnUrl:t});if(!n.data||!n.data.url)throw new Error("No portal URL returned from server");console.log("Portal URL received:",n.data.url),window.open(n.data.url,"_blank")}e&&(e.disabled=!1,e.innerHTML="Update Subscription");const a=document.querySelector("#simplified-account-modal");a&&(a.style.display="none")}catch(e){console.error("Error opening customer portal:",e),console.log("Error details:",{message:e.message,code:e.code,stack:e.stack}),window.projectManager&&"function"==typeof window.projectManager.showNotification?window.projectManager.showNotification("Error: "+e.message,"error"):alert("Error opening subscription management portal: "+e.message);const t=document.querySelector("#manage-subscription-btn");t&&(t.disabled=!1,t.innerHTML="Update Subscription")}}}function addAccountManagerStyles(){const e=document.createElement("style");e.id="simplified-account-manager-styles",e.textContent="\n    .account-modal .modal-content {\n      max-width: 500px;\n      width: 90%;\n      color: var(--basic-txt-color);\n    }\n\n    .account-modal .modal-content h3 {\n    margin-top: 6px;\n    margin-bottom: 4px;\n    }\n\n    .account-modal .modal-content p {\n    margin-top: 4px;\n    margin-bottom: 6px;\n    }\n    \n    .account-section {\n      margin-bottom: 24px;\n      padding-bottom: 16px;\n      border-bottom: 1px solid var(--neutral-gray);\n    }\n    \n    .account-section:last-child {\n      border-bottom: none;\n      margin-bottom: 0;\n    }\n    \n    .user-info-section {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n    \n    .user-profile {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n    }\n    \n    .profile-image {\n      width: 48px;\n      height: 48px;\n      border-radius: 50%;\n      object-fit: cover;\n    }\n    \n    .subscription-status {\n      margin-bottom: 12px;\n      margin-top: 16px;\n    }\n    \n    .status-value {\n      font-weight: bold;\n      padding: 4px 8px;\n      border-radius: 4px;\n    }\n    \n    .status-value.active {\n      background-color: rgba(39, 174, 96, 0.15);\n      color: #27ae60;\n    }\n    \n    .status-value.inactive {\n      background-color: rgba(189, 195, 199, 0.3);\n      color: var(--basic-txt-color);\n    }\n    \n    .subscription-info {\n      margin-bottom: 16px;\n    }\n    \n    .subscription-info div {\n      margin-bottom: 8px;\n      display: flex;\n    }\n    \n    .subscription-info div span:first-child {\n      width: 150px;\n      color: var(--placeholder-color);\n    }\n    \n    .subscription-actions, .subscription-upgrade {\n      margin-top: 16px;\n    }\n    \n    .preference-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 12px;\n    }\n    \n    .preference-select {\n      padding: 8px;\n      border-radius: 4px;\n      border: 1px solid var(--neutral-gray);\n      background-color: var(--input-bg-color);\n      color: var(--basic-txt-color);\n      min-width: 150px;\n    }\n    \n    .account-action-btn {\n      padding: 8px 16px;\n      border-radius: 4px;\n      border: none;\n      cursor: pointer;\n      transition: all 0.2s;\n    }\n    \n    .account-action-btn.secondary {\n      background-color: var(--neutral-gray);\n      color: var(--basic-txt-color);\n    }\n    \n    .primary-btn {\n      background-color: #0a70b4;\n      color: white;\n      padding: 10px 16px;\n      border: none;\n      border-radius: 4px;\n      cursor: pointer;\n      font-weight: 500;\n      display: inline-block;\n      text-align: center;\n      transition: all 0.2s;\n    }\n\n    .primary-btn i {\n      color: #fbd513;\n    }\n    \n    .primary-btn:hover {\n      filter: brightness(1.15);\n    }\n    \n    .subscription-upgrade ul {\n      margin: 12px 0;\n      padding-left: 16px;\n    }\n    \n    .subscription-upgrade li {\n      margin-bottom: 8px;\n      list-style: none;\n    }\n    \n    .subscription-upgrade li i {\n      color: var(--color-primary);\n      margin-right: 8px;\n    }\n  ",document.getElementById("simplified-account-manager-styles")||document.head.appendChild(e)}function createTemplateModal(){const e=document.createElement("div");return e.id="template-modal",e.className="modal",e.innerHTML='\n      <div class="modal-content">\n        <div class="modal-header">\n          <h2>Templates</h2>\n          <button class="close-modal">&times;</button>\n        </div>\n        <div class="templates-container">\n\n          <div class="template-card" data-template="template1">\n            <h3>Profile</h3>\n            <p>Image, Avatar, Pills, and Paragraph</p>\n            \n            <div class="template-preview">\n            <div class="tp-scale">\n                \n                <div class="fw">\n                    <div style="height: 108px; border-radius: 6px 6px 0 0" class="card-image ui-image-full">\n                        <i class="fa-solid fa-image image-ph"></i>\n                    </div>\n                </div>\n                <br>\n                <div class="success-container fw">\n                    <div class="align-content avatar-inner">\n                        <div style="position: relative;">\n                        <div class="nav-image avatar-img avatar-base">\n                            <i class="fa-solid fa-image image-ph non-editable"></i>\n                        </div>\n                        <div class="icon-container avatar-checkmark" style="background-color: var(--color-primary);">\n                            <i class="fas fa-check" style="color: var(--basic-txt-color); font-size: 10px;"></i>\n                        </div>\n                        </div>\n                        <div class="avatar-column">\n                        <span class="avatar-text">Display Name</span>\n                        </div>\n                    </div>\n                </div>\n\n                <br>\n\n                <div class="chip-group-container">\n                    <div class="chip" style="background-color: var(--color-primary);">\n                        <span class="chip-text">Pill</span>\n                    </div>\n                    <div class="chip" style="background-color: var(--color-primary);">\n                        <span class="chip-text">Pill</span>\n                    </div>\n                    <div class="chip" style="background-color: var(--color-primary);">\n                        <span class="chip-text">Pill</span>\n                    </div>\n                </div>\n\n                <h1 style="margin: 2px 0">Heading Text</h1>\n                <p>This is a paragraph. Click to edit.</p>\n\n                <div class="image-gallery-wrapper" style="width: 100%; position: relative;">\n                <div class="image-gallery-con">\n                    <div class="ig-left-column-con">\n                        <div class="ig-image-wrapper">\n                            <div class="card-image resizeable ig-img-box" style="height: 68px;">\n                                <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                            </div>\n                        </div>\n                        <div class="ig-image-wrapper">\n                            <div class="card-image resizeable ig-img-box" style="height: 68px;">\n                                <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="ig-right-column-con">\n                        <div class="ig-image-wrapper">\n                            <div class="card-image resizeable ig-img-box" style="height: 68px;">\n                                <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                            </div>\n                        </div>\n                        <div class="ig-image-wrapper">\n                            <div class="card-image resizeable ig-img-box" style="height: 68px;">\n                                <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <br>\n                <div class="ui-button-container">\n                    <div class="ui-button">\n                        <div role="button" class="ui-button" style="background-color: var(--color-primary);">\n                        <div style="display: inline; margin: 0 6px 0 0;">\n                            BUTTON\n                        </div>\n                        <div contenteditable="false" style="display: inline; margin: 0 0 0 6px;">\n                            <i  contenteditable="false" class="fas fa-hand-point-left" style="font-size: 18px;"></i>\n                        </div>\n                        </div>\n                    </div>\n                </div>\n\n                </div>\n            </div>\n          </div>\n\n\n\n          <div class="template-card" data-template="template2">\n            <h3>Content</h3>\n            <p>Hero, Heading, Accordion, and Footer</p>\n            <div class="template-preview">\n            <div class="tp-scale">\n                <div class="hero hero-base justify-center" style="padding: 28px 0px; border-radius: 6px 6px 0 0;">\n                    <div class="hero-gradient" style="background: linear-gradient(135deg, var(--color-primary) 0%, transparent 90%); border-radius: 6px 6px 0 0;"></div>\n                    <div class="hero-content">\n                        <div class="heading-wrapper">\n                            <h2 class="hero-heading" style="font-size: 28px;">Hero</h2>\n                        </div>\n                        <div>\n                            <p class="hero-paragraph">A hero with a call-to-action button.</p>\n                        </div>\n                        <div class="hero-button">Get Started</div>\n                    </div>\n                </div>\n                <h2>Heading Text</h2>\n                <p>This is a paragraph. Click to edit.</p>\n                <div class="fas fa-bolt-lightning" style="width: 100%; color: var(--color-accent); font-size: 24px; text-align: center; margin-bottom: 16px;"></div>\n                <div class="accordion-container">\n                    <div class="accordion-header">\n                        <span>Accordion</span>\n                        <i class="fas fa-chevron-down"></i>\n                    </div>\n                </div>\n                <br>\n                <footer>\n                <div style="width: 100%; height: 100%; background-color: var(--color-primary); z-index: 1; padding: 0 10px; transform: translatex(-10px); position: relative; margin-bottom: -33px; border-radius: 0 0 6px 6px">\n            <div style="display: flex; justify-content: space-between; width: 100%; padding: 10px 0; z-index: 2; position: relative;">\n                <div style="text-align: left;">\n                    <div class="card-image" style="margin-bottom: 10px; background-color: var(--neutral-gray); width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; cursor: pointer;">\n                    <i style="color: var(--placeholder-color);" class="fa-solid fa-image non-editable"></i>\n                    </div>\n                    <div>\n                    <h4 spellcheck="false" contenteditable style="margin: 0; color: var(--basic-txt-color); ">Brand</h4>\n                    </div>\n                </div>\n                <div style="display: flex; gap: 8px; font-size: 10px; padding: 2px 6px;">\n                    <ul style="list-style: none; padding: 0; margin: 0;">\n                        <li contenteditable style="margin-bottom: 8px;"><a href="#" style="color: var(--basic-txt-color);  text-decoration: none;">About Us</a></li>\n                        <li contenteditable style="margin-bottom: 8px;"><a href="#" style="color: var(--basic-txt-color);  text-decoration: none;">Contact</a></li>\n                        <li contenteditable style="margin-bottom: 8px;"><a href="#" style="color: var(--basic-txt-color);  text-decoration: none;">Careers</a></li>\n                    </ul>\n                    <ul style="list-style: none; padding: 0; margin: 0;">\n                        <li contenteditable style="margin-bottom: 8px;"><a href="#" style="color: var(--basic-txt-color);  text-decoration: none;">Support</a></li>\n                        <li contenteditable style="margin-bottom: 8px;"><a href="#" style="color: var(--basic-txt-color);  text-decoration: none;">Privacy Policy</a></li>\n                        <li contenteditable style="margin-bottom: 8px;"><a href="#" style="color: var(--basic-txt-color);  text-decoration: none;">Terms of Use</a></li>\n                    </ul>\n                </div>\n            </div>\n                <div style="display: flex; gap: 40px; justify-content: center; padding: 14px 0 18px 0; border-top: 1px solid var(--neutral-gray);">\n                    <div class="icon-container">\n                        <i class="fas fa-seedling""></i>\n                    </div>\n                    <div class="icon-container">\n                        <i class="fas fa-bolt-lightning"></i>\n                    </div>\n                    <div class="icon-container">\n                        <i class="fas fa-skull"></i>\n                    </div>\n                </div>\n            </div>\n            <br>\n            </footer>\n            </div>\n            </div>\n          </div>\n\n\n\n          <div class="template-card" data-template="template3">\n            <h3>Form</h3>\n            <p>Heading, Form Elements, Submit Button</p>\n            <div class="template-preview">\n            <div class="tp-scale">\n                <h1 style="font-size: 24px">Form Template</h1>\n                <div class="ui-input-wrapper" style="margin-bottom: 12px;">\n                <div class="ui-input-required-label">\n                <div class="ui-input-required-asterisk">*</div>\n                    <div class="ui-input-label">Required</div>\n                </div>\n                <div spellcheck="false" class="ui-input-base empty" data-placeholder="Placeholder" style="border-bottom: 2px solid var(--color-primary);">\n                </div>\n            </div>\n            <div class="fw ta" style="margin-bottom: 12px;">\n                    <div class="ui-input-label">Label</div>\n                    <div contenteditable="true" spellcheck="false" class="ui-input-base ta-base empty" data-placeholder="Enter your text here..." style="border-bottom: 2px solid var(--color-primary);height: 24px;">\n                    </div>\n                    <div class="resize-handle rh-mod">\n                        <div class="resize-indicator"></div>\n                    </div>\n                    <div class="ui-input-character-count">0/500 characters</div>\n                </div>\n                <label class="field-label-element">Label Text</label>\n                <div class="custom-dropdown-container"><div class="dropdown-header"><div class="selected-text">Dropdown</div><i class="fas fa-chevron-down"></i></div>\n                </div>\n                <label class="field-label-element">Label Text</label>\n                <div style="display: flex; flex-direction: column; gap: 4px; margin-left: 4px;">\n                <i class="fa-regular fa-square" style="font-size: 18px; color: #a0a0a0;"></i>\n                <i class="fa-regular fa-square" style="font-size: 18px; color: #a0a0a0;"></i>\n                <i class="fa-regular fa-square" style="font-size: 18px; color: #a0a0a0;"></i>\n                </div>\n                <br>\n\n                    <div class="ui-button">\n                    <div role="button" class="ui-button usa" style="background-color: transparent; color: var(--color-primary); border: 2px solid var(--color-primary); height: 34px;">\n                        BTN\n                    </div>\n                    <div role="button" class="ui-button usa" style="background-color: var(--color-primary); height: 34px;">\n                        BTN\n                    </div>\n                    </div>\n\n            </div>\n            </div>\n          </div>\n\n\n\n          <div class="template-card" data-template="social">\n            <h3>Social</h3>\n            <p>Chat, Cards, and Social Feed</p>\n            <div class="template-preview">\n            <div class="tp-scale">\n              <div style="display: flex; justify-content: space-between; width: 100%; padding-top: 6px; background: var(--color-background)">\n              <span spellcheck="false" style="font-size: 20px; font-weight: bold; color: var(--color-primary);">Brand</span>\n\n                  <div>\n                      <i class="fas fa-bars" style="font-size: 20px; color: var(--color-primary);"></i>\n                  </div>\n\n              </div>\n                <h1>Social Feed</h1>\n                <div class="card-con">\n            <div class="card-image card-img-placeholder" style="height: 86px;">\n                <i class="fa-solid fa-image image-ph non-editable"></i>\n            </div>\n            <div class="card-content" style="padding: 6px;">\n                <div class="card-social-header">\n                <div class="nav-image card-avatar">\n                    <i class="fa-solid fa-image non-editable" style="font-size: smaller;"></i>\n                </div>\n                <div>\n                    <div class="card-social-name usa" style="color: var(--color-secondary);">Display Name</div>\n                    <div class="card-social-time usa">2 hours ago</div>\n                </div>\n                </div>\n                <div>\n                <p class="card-text usa">A social media style card.</p>\n                </div>\n                <div class="card-social-actions">\n                <span class="icon-container"><i class="fas fa-heart"></i>&emsp;<div style="display: inline;">24</div></span>\n                <span class="icon-container"><i class="fas fa-comment"></i>&emsp;<div style="display: inline;">3</div></span>\n                <span class="icon-container"><i class="fas fa-share-nodes"></i></span>\n                </div>\n            </div>\n            </div>\n            <br>\n            <div class="card-stats">\n                <div class="card-stat-header">\n                    <div class="icon-container">\n                      <i class="fa-solid fa-chart-line" style="color: var(--color-primary)"></i>\n                    </div>\n                    <div>\n                    <h1>95%</h1>\n                    </div>\n                </div>\n                <div>\n                <p class="card-text" style="text-align: center;">User Satisfaction</p>\n                </div>\n            </div>\n            <br>\n              <div class="chat-input-con" style="justify-content: space-between;">\n                  <input type="text" placeholder="Message..." class="chat-input" style="max-width: 80px;">\n                  <button class="chat-send-btn icon-container" style="background-color: var(--color-primary); color: white;">\n                      <i class="fas fa-paper-plane chat-send-icon"></i>\n                  </button>\n              </div>\n            </div>\n            </div>\n          </div>\n\n\n\n          <div class="template-card" data-template="dashboard">\n            <h3>Dashboard</h3>\n            <p>Charts, Graphs, and Data Visualization</p>\n\n            <div class="template-preview">\n            <div class="tp-scale">\n              <h1 style="font-size: 24px; margin-bottom: 10px;">Dashboard</h1>\n              <p>This is a paragraph. Click to edit.</p>\n              <div class="progress-group" style="width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center;">\n\n              <div class="progress-bar resizeable" style="width: 100%; height: 80px; position: relative; align-items: center; justify-content: center;">\n                  <svg viewBox="0 0 36 36" style="width: 100%; height: 100%;">\n                      <defs>\n                          <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="100%">\n                              <stop offset="0%" style="stop-color: var(--color-primary)"/>\n                              <stop offset="100%" style="stop-color: var(--color-accent)"/>\n                          </linearGradient>\n                      </defs>\n                      <path d="M18 2.0845\n                          a 15.9155 15.9155 0 0 1 0 31.831\n                          a 15.9155 15.9155 0 0 1 0 -31.831"\n                          fill="none"\n                          stroke="var(--neutral-gray)"\n                          stroke-width="4"\n                          stroke-linecap="round"\n                      />\n                      <path d="M18 2.0845\n                          a 15.9155 15.9155 0 0 1 0 31.831\n                          a 15.9155 15.9155 0 0 1 0 -31.831"\n                          fill="none"\n                          stroke="url(#progressGradient)"\n                          stroke-width="4"\n                          stroke-linecap="round"\n                          stroke-dasharray="76, 100"\n                          style="transition: stroke-dasharray 0.3s ease;"\n                      />\n                  </svg>\n                  <div contenteditable="true" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; font-size: 24px; font-weight: bold; color: var(--basic-txt-color);">76%</div>\n              </div>\n          </div>\n\n              <div class="progress-group" style="margin-bottom: 10px;">\n                <div class="progress-bar" style="width: 100%; height: 6px; background-color: var(--neutral-gray); border-radius: 5px; overflow: hidden;">\n                  <div style="width: 76%; height: 100%; background-color: var(--color-primary); transition: width 0.3s ease;"></div>\n                </div>\n                <div style="margin-top: 5px; font-weight: bold; color: var(--basic-txt-color);">76%</div>\n              </div>\n\n            <div style="height: 80px; position: relative; margin-bottom: 10px; background-color: var(--input-bg-color); border-radius: 4px; padding: 8px; border: 0.12rem solid var(--neutral-gray);">\n              <div style="position: absolute; bottom: 0; left: 25%; width: 10%; height: 60%; background-color: var(--color-primary); border-radius: 4px 4px 0 0;"></div>\n              <div style="position: absolute; bottom: 0; left: 40%; width: 10%; height: 30%; background-color: var(--color-primary); border-radius: 4px 4px 0 0;"></div>\n              <div style="position: absolute; bottom: 0; left: 55%; width: 10%; height: 70%; background-color: var(--color-primary); border-radius: 4px 4px 0 0;"></div>\n              <div style="position: absolute; bottom: 0; left: 70%; width: 10%; height: 50%; background-color: var(--color-primary); border-radius: 4px 4px 0 0;"></div>\n              <div style="position: absolute; bottom: 0; left: 70%; width: 10%; height: 92%; background-color: var(--color-primary); border-radius: 4px 4px 0 0;"></div>\n            </div>\n\n              <p style="font-size: 14px; margin: 10px 0;">View detailed performance metrics.</p>\n\n              <table class="data-table-main" style="width: 100%; border-collapse: collapse; font-size: 12px;">\n              <thead>\n                <tr>\n                  <th style="padding: 5px; text-align: left; background-color: var(--color-primary); color: white;">ID</th>\n                  <th style="padding: 5px; text-align: left; background-color: var(--color-primary); color: white;">Name</th>\n                  <th style="padding: 5px; text-align: right; background-color: var(--color-primary); color: white;">Value</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr style="color: var(--basic-txt-color);">\n                  <td style="padding: 5px; border-bottom: 1px solid var(--neutral-gray);">001</td>\n                  <td style="padding: 5px; border-bottom: 1px solid var(--neutral-gray);">Item One</td>\n                  <td style="padding: 5px; border-bottom: 1px solid var(--neutral-gray); text-align: right;">$1,200</td>\n                </tr>\n                <tr style="color: var(--basic-txt-color);">\n                  <td style="padding: 5px; border-bottom: 1px solid var(--neutral-gray);">002</td>\n                  <td style="padding: 5px; border-bottom: 1px solid var(--neutral-gray);">Item Two</td>\n                  <td style="padding: 5px; border-bottom: 1px solid var(--neutral-gray); text-align: right;">$950</td>\n                </tr>\n              </tbody>\n            </table>\n\n              </div>\n            </div>\n          </div>\n\n\n\n          <div class="template-card" data-template="ecommerce">\n            <h3>E-commerce</h3>\n            <p>Product Gallery, Search, and Filters</p>\n            <div class="template-preview">\n            <div class="tp-scale">\n            <div style="display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; background-color: var(--color-background); margin-bottom: 10px;">\n            <span style="font-size: 18px; font-weight: bold; color: var(--color-primary);">Brand</span>\n            <div style="display: flex; gap: 15px;">\n              <a href="#" style="color: var(--basic-txt-color); text-decoration: none;">Home</a>\n              <div class="icon-container">\n                <i class="fas fa-bars" style="font-size: 18px; color: var(--color-primary);"></i>\n              </div>\n            </div>\n          </div>\n          \n          <h1 style="font-size: 22px; margin: 0 0 5px 0;">Product Gallery</h1>\n          \n          <div class="fw" style="margin-bottom: 10px;">\n            <div class="search-container" style="height: 30px;">\n              <i class="fas fa-search search-icon" style="font-size: 12px;"></i>\n              <div class="search-input empty" data-placeholder="Search products..." style="font-size: 12px; height: 30px;"></div>\n            </div>\n          </div>\n          \n          <div class="chip-group-container" style="display: flex; gap: 8px; margin-bottom: 10px;">\n            <div class="chip" style="background-color: var(--color-primary);">\n              <span class="chip-text" style="color: white; font-size: 12px;">All</span>\n            </div>\n            <div class="chip" style="background-color: var(--neutral-gray);">\n              <span class="chip-text" style="font-size: 12px;">Clothing</span>\n            </div>\n            <div class="chip" style="background-color: var(--neutral-gray);">\n              <span class="chip-text" style="font-size: 12px;">Electronics</span>\n            </div>\n          </div>\n          \n          <div class="adjustableSpace" style="height: 10px;"></div>\n          \n          <div class="card-con card-hz" style="margin-bottom: 8px;">\n            <div class="card-image card-hz-img-lft" style="background-color: var(--neutral-gray); width: 60px; height: auto; display: flex; justify-content: center; align-items: center;">\n              <i class="fa-solid fa-image image-ph"></i>\n            </div>\n            <div class="card-hz-content">\n              <div>\n                <h3 class="card-title" style="font-size: 14px; margin: 0;">Product Name</h3>\n              </div>\n            </div>\n          </div>\n          \n          <div class="card-con" style="width: 100%; border: 1px solid var(--neutral-gray); border-radius: 8px; overflow: hidden; margin-bottom: 8px;">\n            <div class="card-simple" style="padding: 10px;">\n              <div class="card-icon-header">\n                <div class="icon-container card-icon-large" style="color: var(--color-primary);">\n                  <i class="fas fa-cube"></i>\n                </div>\n                <div style="width: 100%;">\n                  <h3 class="card-title" style="font-size: 14px; margin: 0;">Featured Product</h3>\n                </div>\n              </div>\n              <div>\n                <p class="card-text" style="font-size: 12px; margin: 5px 0 0 0;">High quality premium item</p>\n              </div>\n            </div>\n          </div>\n          \n          <div class="card-con card-hz" style="margin-bottom: 8px;">\n            <div class="card-image card-hz-img-lft" style="background-color: var(--neutral-gray); width: 60px; height: auto; display: flex; justify-content: center; align-items: center;">\n              <i class="fa-solid fa-image image-ph"></i>\n            </div>\n            <div class="card-hz-content">\n              <div>\n                <h3 class="card-title" style="font-size: 14px; margin: 0;">Product Name</h3>\n              </div>\n            </div>\n          </div>\n          \n          <div class="card-con" style="width: 100%; border: 1px solid var(--neutral-gray); border-radius: 8px; overflow: hidden; margin-bottom: 10px;">\n            <div class="card-quote">\n              <div class="card-quote-text">\n                <h4>\n                  <span style="margin-left: -12px;">"&hairsp;</span>This is a quote card for customer testimonials.&hairsp;"\n                </h4>\n              </div>\n              <div class="card-quote-author">\n                <p>â€” Happy Customer</p>\n              </div>\n            </div>\n          </div>\n          \n          <div class="feature-comparison-card" style="border: 1px solid var(--color-primary); border-radius: 8px; overflow: hidden; margin-bottom: 10px;">\n            <div style="background-color: var(--color-primary); color: white; padding: 8px 0; text-align: center; font-weight: bold; widht: 100%;">\n              Comparison\n            </div>\n            <div class="comparison-card-grid" style="display: grid; grid-template-columns: 1fr 1fr 1fr; padding: 5px 4px; font-size: 10px;">\n              <div style="padding: 5px; font-weight: bold; color: var(--basic-txt-color);">Features</div>\n              <div style="padding: 5px; text-align: center; font-weight: bold; color: var(--basic-txt-color);">Basic</div>\n              <div style="padding: 5px; text-align: center; font-weight: bold; color: var(--basic-txt-color);">Pro</div>\n              <div style="padding: 5px; color: var(--basic-txt-color);">Feature</div>\n              <div style="padding: 5px; text-align: center;"><i class="fas fa-check" style="color: green;"></i></div>\n              <div style="padding: 5px; text-align: center;"><i class="fas fa-check" style="color: green;"></i></div>\n              <div style="padding: 5px; color: var(--basic-txt-color);">Feature</div>\n              <div style="padding: 5px; text-align: center;"><i class="fas fa-close" style="color: gray;"></i></div>\n              <div style="padding: 5px; text-align: center;"><i class="fas fa-check" style="color: green;"></i></div>\n            </div>\n          </div>\n          \n          <div class="ui-button-container">\n            <div class="ui-button">\n              <div role="button" class="ui-button" style="background-color: transparent; color: var(--color-primary); border: 2px solid var(--color-primary);">\n                SHOP NOW\n              </div>\n            </div>\n          </div>\n            \n            </div>\n            </div>\n          </div>\n\n\n\n          <div class="template-card" data-template="mediaGallery">\n            <h3>Media</h3>\n            <p>Image and Video Gallery</p>\n            <div class="template-preview">\n            <div class="tp-scale">\n            <div style="display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; background-color: var(--color-background); margin-bottom: 10px;">\n              <i class="fas fa-arrow-left" style="font-size: 18px;"></i>\n              <div style="width: 100%; display: flex; justify-content: center;">\n                <span style="font-size: 18px; font-weight: bold; color: var(--basic-txt-color);">Gallery</span>\n              </div>\n              <i class="fas fa-bars" style="font-size: 18px; color: var(--basic-txt-color);"></i>\n            </div>\n            \n            <h1 style="font-size: 22px; margin: 0 0 5px 0;">Media Gallery</h1>\n            \n            <div class="fw" style="margin-bottom: 8px;">\n              <div class="search-squared">\n                <i class="fas fa-search search-squared-icon"></i>\n                <div class="search-squared-input empty" data-placeholder="Search media..." style="height: 30px;"></div>\n              </div>\n            </div>\n            \n            <div class="image-gallery-wrapper" style="width: 100%; position: relative; margin-bottom: 10px;">\n              <div class="image-gallery-con">\n                <div class="ig-left-column-con" style="display: grid; grid-template-rows: 1fr 1fr; gap: 5px;">\n                  <div class="ig-image-wrapper">\n                    <div class="card-image resizeable ig-img-box" style="background-color: var(--neutral-gray); width: 100%; height: 110px; display: flex; justify-content: center; align-items: center;">\n                      <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                    </div>\n                  </div>\n                  <div class="ig-image-wrapper">\n                    <div class="card-image resizeable ig-img-box" style="background-color: var(--neutral-gray); width: 100%; height: 110px; display: flex; justify-content: center; align-items: center;">\n                      <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                    </div>\n                  </div>\n                </div>\n                <div class="ig-right-column-con" style="display: grid; grid-template-rows: 1fr 1fr; gap: 5px;">\n                  <div class="ig-image-wrapper">\n                    <div class="card-image resizeable ig-img-box" style="background-color: var(--neutral-gray); width: 100%; height: 110px; display: flex; justify-content: center; align-items: center;">\n                      <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                    </div>\n                  </div>\n                  <div class="ig-image-wrapper">\n                    <div class="card-image resizeable ig-img-box" style="background-color: var(--neutral-gray); width: 100%; height: 110px; display: flex; justify-content: center; align-items: center;">\n                      <i style="color: var(--placeholder-color)" class="fa-solid fa-image non-editable"></i>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <br>\n            \n            <div class="img-gallery-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin-bottom: 10px;">\n              <div class="card-image img-gallery-grid-item" style="background-color: var(--neutral-gray); width: 100%; aspect-ratio: 1; display: flex; justify-content: center; align-items: center;">\n                <i class="fa fa-image img-gallery-ph"></i>\n              </div>\n              <div class="card-image img-gallery-grid-item" style="background-color: var(--neutral-gray); width: 100%; aspect-ratio: 1; display: flex; justify-content: center; align-items: center;">\n                <i class="fa fa-image img-gallery-ph"></i>\n              </div>\n              <div class="card-image img-gallery-grid-item" style="background-color: var(--neutral-gray); width: 100%; aspect-ratio: 1; display: flex; justify-content: center; align-items: center;">\n                <i class="fa fa-image img-gallery-ph"></i>\n              </div>\n              <div class="card-image img-gallery-grid-item" style="background-color: var(--neutral-gray); width: 100%; aspect-ratio: 1; display: flex; justify-content: center; align-items: center;">\n              <i class="fa fa-image img-gallery-ph"></i>\n              </div>\n              <div class="card-image img-gallery-grid-item" style="background-color: var(--neutral-gray); width: 100%; aspect-ratio: 1; display: flex; justify-content: center; align-items: center;">\n                <i class="fa fa-image img-gallery-ph"></i>\n              </div>\n              <div class="card-image img-gallery-grid-item" style="background-color: var(--neutral-gray); width: 100%; aspect-ratio: 1; display: flex; justify-content: center; align-items: center;">\n                <i class="fa fa-image img-gallery-ph"></i>\n              </div>\n            </div>\n            \n            <div class="video-container" style="margin-bottom: 10px;">\n              <div class="card-image resizeable video-thumbnail" style="background-color: var(--neutral-gray); height: 140px; display: flex; justify-content: center; align-items: center;">\n                <i class="fa-solid fa-image image-ph"></i>\n              </div>\n              <div class="video-play-button">\n                <div class="icon-container">\n                  <i class="fas fa-play video-play-icon" style="font-size: 24px;"></i>\n                </div>\n              </div>\n              <div class="video-title">Video Title</div>\n              <div class="video-duration">3:45</div>\n            </div>\n            \n            <div class="chip-group-container" style="display: flex; gap: 8px; margin-bottom: 10px;">\n              <div class="chip" style="background-color: var(--color-primary);">\n                <span class="chip-text" style="color: white; font-size: 12px;">Recent</span>\n              </div>\n              <div class="chip" style="background-color: var(--neutral-gray);">\n                <span class="chip-text" style="font-size: 12px;">Photos</span>\n              </div>\n              <div class="chip" style="background-color: var(--neutral-gray);">\n                <span class="chip-text" style="font-size: 12px;">Videos</span>\n              </div>\n            </div>\n            \n            <div style="display: flex; justify-content: space-around; padding: 5px 0; border-top: 1px solid var(--neutral-gray); color: var(--basic-txt-color); font-size: 8px;">\n              <div style="text-align: center;">\n                <i class="fas fa-home" style="color: gray; font-size: 16px;"></i>\n                <div style="font-size: 11px;">Home</div>\n              </div>\n              <div style="text-align: center;">\n                <i class="fas fa-image" style="color: var(--color-primary); font-size: 16px;"></i>\n                <div style="font-size: 11px;">Gallery</div>\n              </div>\n              <div style="text-align: center;">\n                <i class="fas fa-plus" style="color: gray; font-size: 16px;"></i>\n                <div style="font-size: 11px;">Add</div>\n              </div>\n              <div style="text-align: center;">\n                <i class="fas fa-heart" style="color: gray; font-size: 16px;"></i>\n                <div style="font-size: 11px;">Favorites</div>\n              </div>\n            </div>\n\n          </div>\n            </div>\n          </div>\n\n\n\n          <div class="template-card" data-template="login">\n            <h3>Login</h3>\n            <p>Sign in and sign up</p>\n            <div class="template-preview">\n            <div class="tp-scale">\n            <div class="tabs-wrapper" style="display: flex; width: 100%; border-bottom: 1px solid var(--neutral-gray); margin-bottom: 15px;">\n              <div class="ui-tab selected" style="background-color: var(--color-primary); color: white; padding: 8px 15px; border-radius: 4px 4px 0 0; flex: 1; text-align: center;">\n                Sign In\n              </div>\n              <div class="ui-tab" style="background-color: var(--neutral-gray); color: var(--basic-txt-color); padding: 8px 15px; border-radius: 4px 4px 0 0; flex: 1; text-align: center;">\n                Sign Up\n              </div>\n            </div>\n            \n            <div style="text-align: center; margin-bottom: 15px;">\n              <div class="ui-image-circle-con" style="margin: 0 auto; width: 60px; height: 60px;">\n                <div class="ui-image-circle-wrapper">\n                  <div class="card-image ui-image-circle" style="background-color: var(--color-primary); display: flex; justify-content: center; align-items: center;">\n                    <i class="fa-solid fa-user" style="color: white; font-size: 24px;"></i>\n                  </div>\n                </div>\n              </div>\n              \n              <h1 style="font-size: 22px; margin: 10px 0 0 0;">Welcome Back</h1>\n              <p style="font-size: 14px; margin: 5px 0 0 0; color: #666;">Sign in to your account</p>\n            </div>\n            \n            <div class="ui-input-wrapper" style="margin-bottom: 12px;">\n              <div class="ui-input-label">Email</div>\n              <div spellcheck="false" class="ui-input-base empty" data-placeholder="example@email.com" style="border-bottom: 2px solid var(--color-primary);">\n              </div>\n            </div>\n            \n            <div class="adjustableSpace" style="height: 10px;"></div>\n            \n            <div class="ui-input-wrapper" style="margin-bottom: 12px;">\n              <div class="ui-input-label">Password</div>\n              <div class="ui-input-password-wrapper">\n                <div contenteditable="true" spellcheck="false" class="ui-input-base empty password-input" data-placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" style="border-bottom: 2px solid var(--color-secondary);">\n                </div>\n                <div class="icon-container ui-input-password-icon">\n                  <i class="fas fa-eye"></i>\n                </div>\n              </div>\n            </div>\n            \n            <div class="custom-checkbox-wrapper" style="display: flex; align-items: center; gap: 8px; margin-bottom: 15px;">\n              <div class="fa-regular fa-square checkbox-square-icon" style="position: relative;">\n                <i class="fa-solid fa-square-check checkbox-check-icon" style="color: var(--color-primary); display: none;"></i>\n              </div>\n              <span style="font-size: 14px;">Remember me</span>\n            </div>\n            \n            <div class="adjustableSpace" style="height: 10px;"></div>\n            \n            <div class="ui-button-container" style="margin-bottom: 15px;">\n              <div class="ui-button">\n                <div role="button" class="ui-button" style="background-color: var(--color-primary); color: white;">\n                  SIGN IN\n                </div>\n              </div>\n            </div>\n            \n            <div class="adjustableSpace" style="height: 10px;"></div>\n            \n            <p style="text-align: center; font-size: 14px; margin: 0;">Don\'t have an account? <span style="color: var(--color-primary);">Sign up</span></p>\n          </div>\n            </div>\n          </div>\n\n\n\n          <div class="template-card" data-template="onboarding">\n          <h3>Onboarding</h3>\n          <p>Instrctions for new users</p>\n          <div class="template-preview">\n          <div class="tp-scale">\n          <div class="fw">\n            <div class="card-image ui-image resizeable" style="background-color: var(--neutral-gray); height: 80px; display: flex; justify-content: center; align-items: center; margin-top: 10px;">\n              <i class="fa-solid fa-image image-ph"></i>    \n            </div>\n          </div>\n          \n          <h1 style="font-size: 22px; text-align: center; margin: 10px 0 5px 0;">Welcome to the App</h1>\n          <p style="font-size: 14px; text-align: center; margin: 0 0 15px 0; color: #666;">Discover amazing features that will help you accomplish your goals.</p>\n          \n          <div class="adjustableSpace" style="height: 15px;"></div>\n          \n          <div class="progress-tracker-container">\n            <div class="steps-container" style="display: flex; align-items: center; position: relative; justify-content: center;">\n              <div class="step-container" data-step="" style="display: flex; flex-direction: column; align-items: center; z-index: 2; margin: 0 4px;">\n                <div class="step-circle" style="width: 30px; height: 30px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; background-color: var(--color-primary); color: white;">\n                  1\n                </div>\n                <div class="pt-step-label" style="font-size: 12px; margin-top: 5px;">Step 1</div>\n              </div>\n              <div style="height: 2px; background-color: #E0E0E0; flex: 1; margin: 15px 0 0 0;"></div>\n              <div class="step-container" data-step="" style="display: flex; flex-direction: column; align-items: center; z-index: 2; margin: 0 4px;">\n                <div class="step-circle" style="width: 30px; height: 30px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; background-color: var(--neutral-gray); color: #666;">\n                  2\n                </div>\n                <div class="pt-step-label" style="font-size: 12px; margin-top: 5px;">Step 2</div>\n              </div>\n              <div style="height: 2px; background-color: #E0E0E0; flex: 1; margin: 15px 0 0 0;"></div>\n              <div class="step-container" data-step="" style="display: flex; flex-direction: column; align-items: center; z-index: 2; margin: 0 4px;">\n                <div class="step-circle" style="width: 30px; height: 30px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; background-color: var(--neutral-gray); color: #666;">\n                  3\n                </div>\n                <div class="pt-step-label" style="font-size: 12px; margin-top: 5px;">Step 3</div>\n              </div>\n            </div>\n          </div>\n          \n          <div class="adjustableSpace" style="height: 15px;"></div>\n          \n          <div class="ui-button-container" style="margin-bottom: 15px;">\n            <div class="ui-button" style="height: 20px;">\n              <div role="button" class="ui-button" style="background-color: var(--color-primary); color: white;">\n                NEXT\n              </div>\n            </div>\n          </div>\n          \n          <div class="adjustableSpace" style="height: 5px;"></div>\n          \n          <p style="text-align: center; font-size: 14px; margin: 0; color: #666;">Skip intro</p>\n\n        </div>\n          </div>\n        </div>\n\n\n\n        <div class="template-card" data-template="settings">\n          <h3>Settings</h3>\n          <p>Toggle settings</p>\n          <div class="template-preview">\n          <div class="tp-scale">\n          <div style="display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; background-color: var(--color-background); margin-bottom: 10px;">\n            <div class="icon-container">\n              <i class="fas fa-arrow-left" style="font-size: 18px;"></i>\n            </div>\n            <div style="width: 100%; display: flex; justify-content: center;">\n              <span style="font-size: 18px; font-weight: bold; color: var(--basic-txt-color);">Settings</span>\n            </div>\n        </div>\n          \n          <div class="fw">\n            <div class="align-content avatar-inner">\n              <div class="avatar-base" style="background-color: var(--color-primary); padding: 4px; border-radius: 50%;">\n                <span>JD</span>\n              </div>\n              <div class="avatar-column">\n                <span class="avatar-text">John Doe</span>\n                <span class="avatar-sub-txt">john.doe@example.com</span>\n              </div>\n            </div>\n          </div>\n          \n          <div class="adjustableSpace" style="height: 15px;"></div>\n          \n          <h3 style="margin: 0 0 5px 0;">App Preferences</h3>\n          <div style="width: 100%; border-top: 1px solid var(--neutral-gray); margin-bottom: 10px;"></div>\n          \n          <div class="li-base li-padding-x" style="background-color: var(--input-bg-color); margin-bottom: 4px; display: flex; justify-content: space-between; align-items: center;">\n            <div class="li-content" style="padding-left: 12px; padding-right: 8px;">\n              <span>Notifications</span>\n              <span class="li-subtitle">Get updates about new features</span>\n            </div>\n          </div>\n          <div class="range-slider-container" style="width: 44px; margin-bottom: 8px;">\n          <div style="width: 40px; height: 20px; background-color: var(--color-primary); border-radius: 14px; position: relative; padding: 2px 0;">\n            <div style="width: 18px; height: 18px; background-color: white; border-radius: 50%; position: absolute; right: 2px; top: 3px;"></div>\n          </div>\n        </div>\n          \n          <div class="li-base li-padding-x" style="background-color: var(--input-bg-color); margin-bottom: 4px; display: flex; justify-content: space-between; align-items: center;">\n            <div class="li-content" style="padding-left: 12px; padding-right: 8px;">\n              <span>Dark Mode</span>\n              <span class="li-subtitle">Switch to dark mode interface</span>\n            </div>\n          </div>\n          <div class="range-slider-container" style="width: 44px; margin-bottom: 8px;">\n          <div style="width: 40px; height: 20px; background-color: var(--neutral-gray); border-radius: 14px; position: relative; padding: 2px 0;">\n            <div style="width: 18px; height: 18px; background-color: white; border-radius: 50%; position: absolute; left: 2px; top: 3px;"></div>\n          </div>\n        </div>\n          \n          <div class="adjustableSpace" style="height: 15px;"></div>\n          \n          <h3 style="margin: 0 0 5px 0;">Account Settings</h3>\n          <div style="width: 100%; border-top: 1px solid var(--neutral-gray); margin-bottom: 10px;"></div>\n          \n          <div class="li-base li-padding-x li-space-between" style="background-color: var(--input-bg-color); margin-bottom: 8px;">\n            <div style="display: flex; align-items: center; gap: 12px; padding-left: 8px;">\n              <div class="icon-container">\n                <i class="fas fa-user" style="color: var(--color-primary);"></i>\n              </div>\n              <span>Profile Information</span>\n            </div>\n            <div class="icon-container li-chevron">\n              <i class="fas fa-chevron-right" style="color: var(--color-primary);"></i>\n            </div>\n          </div>\n          \n          <div class="li-base li-padding-x li-space-between" style="background-color: var(--input-bg-color); margin-bottom: 8px;">\n            <div style="display: flex; align-items: center; gap: 12px; padding-left: 8px;">\n              <div class="icon-container">\n                <i class="fas fa-lock" style="color: var(--color-primary);"></i>\n              </div>\n              <span>Privacy & Security</span>\n            </div>\n            <div class="icon-container li-chevron">\n              <i class="fas fa-chevron-right" style="color: var(--color-primary);"></i>\n            </div>\n          </div>\n          \n          <div class="li-base li-padding-x li-space-between" style="background-color: var(--input-bg-color); margin-bottom: 8px;">\n            <div style="display: flex; align-items: center; gap: 12px; padding-left: 8px;">\n              <div class="icon-container">\n                <i class="fas fa-headset" style="color: var(--color-primary);"></i>\n              </div>\n              <span>Help & Support</span>\n            </div>\n            <div class="icon-container li-chevron">\n              <i class="fas fa-chevron-right" style="color: var(--color-primary);"></i>\n            </div>\n          </div>\n        </div>\n        </div>\n        </div>\n\n\n\n        <div class="template-card" data-template="messaging">\n          <h3>Messaging</h3>\n          <p>Chat with friends</p>\n          <div class="template-preview">\n          <div class="tp-scale">\n          <div style="display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; background-color: var(--color-background); margin-bottom: 10px;">\n            <div class="icon-container">\n              <i class="fas fa-arrow-left" style="font-size: 18px;"></i>\n            </div>\n            &emsp;\n            <div style="width: 100%; display: flex; justify-content: center; align-items: center; gap: 8px;">\n              <div style="width: 22px; height: 22px; background-color: var(--neutral-gray); border-radius: 50%; display: flex; justify-content: center; align-items: center;">\n                <i class="fas fa-user" style="font-size: 12px;"></i>\n              </div>\n              <div style="text-align: left;">\n                <div style="font-size: 14px; font-weight: bold; color: var(--basic-txt-color);">J Smith</div>\n                <div style="font-size: 10px; color: #27ae60;">Online</div>\n              </div>\n              <div style="margin-left: auto; display: flex; gap: 16px; color: var(--basic-txt-color);">\n                <i class="fas fa-phone" style="font-size: 14px;"></i>\n                <i class="fas fa-video" style="font-size: 14px;"></i>\n              </div>\n            </div>\n          </div>\n          \n          \x3c!-- Left chat bubble - received message --\x3e\n          <div class="chat-container" style="display: flex; margin-bottom: 12px; align-items: flex-end; flex-direction: row">\n            <div style="width: 32px; height: 32px; background-color: var(--color-primary); border-radius: 50%; display: flex; justify-content: center; align-items: center; margin-right: 8px; color: white; font-weight: bold;">\n              JS\n            </div>\n            <div style="max-width: 70%;">\n              <div style="background-color: var(--input-bg-color); padding: 10px 12px; border-radius: 18px 18px 18px 0; margin-bottom: 4px; color: var(--basic-txt-color); font-size: 14px;">\n                <div>Hi there! How are you doing today?</div>\n              </div>\n              <div style="font-size: 10px; color: #666;">10:03 AM</div>\n            </div>\n          </div>\n          \n          \x3c!-- Right chat bubble - sent message --\x3e\n          <div class="chat-container" style="display: flex; margin-bottom: 12px; align-items: flex-end;">\n            <div style="width: 32px; height: 32px; background-color: var(--color-accent); border-radius: 50%; display: flex; justify-content: center; align-items: center; margin-left: 8px; color: white; font-weight: bold;">\n              ME\n            </div>\n            <div style="max-width: 70%;">\n              <div style="background-color: var(--color-primary); padding: 10px 12px; border-radius: 18px 18px 0 18px; margin-bottom: 4px; color: white; font-size: 14px;">\n                <div>Hey! I\'m good, thanks for asking. How about you?</div>\n              </div>\n              <div style="font-size: 10px; color: #666; text-align: right;">10:05 AM</div>\n            </div>\n          </div>\n          \n          \x3c!-- Left chat bubble - received message --\x3e\n          <div class="chat-container" style="display: flex; margin-bottom: 12px; align-items: flex-end; flex-direction: row">\n            <div style="width: 32px; height: 32px; background-color: var(--color-primary); border-radius: 50%; display: flex; justify-content: center; align-items: center; margin-right: 8px; color: white; font-weight: bold;">\n              JS\n            </div>\n            <div style="max-width: 70%;">\n              <div style="background-color: var(--input-bg-color); padding: 10px 12px; border-radius: 18px 18px 18px 0; margin-bottom: 4px; color: var(--basic-txt-color); font-size: 14px;">\n                <div>I\'m great! Do you want to meet up this weekend?</div>\n              </div>\n              <div style="font-size: 10px; color: #666;">10:08 AM</div>\n            </div>\n          </div>\n          \n          \x3c!-- Right chat bubble - sent message --\x3e\n          <div class="chat-container" style="display: flex; flex-direction: row-reverse; margin-bottom: 12px; align-items: flex-end;">\n            <div style="width: 32px; height: 32px; background-color: var(--color-accent); border-radius: 50%; display: flex; justify-content: center; align-items: center; margin-left: 8px; color: white; font-weight: bold;">\n              ME\n            </div>\n            <div style="max-width: 70%;">\n              <div style="background-color: var(--color-primary); padding: 10px 12px; border-radius: 18px 18px 0 18px; margin-bottom: 4px; color: white; font-size: 14px;">\n                <div>Absolutely! I was thinking we could check out that new restaurant downtown.</div>\n              </div>\n              <div style="font-size: 10px; color: #666; text-align: right;">10:10 AM</div>\n            </div>\n          </div>\n          \n          <div style="position: relative; bottom: 10px; left: 0; right: 0; display: flex; padding: 0px; background-color: var(--color-background);">\n            <div class="chat-input-con" style="width:100%; display: flex; justify-content: space-between;">\n              <button class="chat-icon-btn icon-container" style="background: none; border: none;">\n                <i class="far fa-smile"></i>\n              </button>\n              Your message...\n              <button class="chat-send-btn icon-container" style="background-color: var(--color-primary); border: none; border-radius: 50%; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; color: white;">\n                <i class="fas fa-paper-plane"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n          </div>\n        </div>\n\n\n\n        <div class="template-card" data-template="restaurant">\n            <h3>Restaurant</h3>\n            <p>Menu, reviews, and payments</p>\n            <div class="template-preview">\n            <div class="tp-scale">\n            <div style="display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; background-color: var(--color-background); margin-bottom: 10px;">\n              <div style="font-size: 18px; font-weight: bold; color: var(--color-primary);">\n                Delicious\n              </div>\n              <div style="display: flex; gap: 15px; align-items: center; color: var(--basic-txt-color);">\n                <i class="fas fa-search" style="font-size: 16px;"></i>\n                <i class="fas fa-bars" style="font-size: 16px;"></i>\n              </div>\n            </div>\n            \n            <div class="hero hero-base" style="height: 100px; margin-bottom: 12px; position: relative; display: flex; align-items: flex-end;">\n              <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--neutral-gray);">\n                <i class="fa-solid fa-image" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 24px; color: var(--placeholder-color);"></i>\n              </div>\n              <div class="hero-gradient" style="background: linear-gradient(transparent 28%, rgba(0,0,0,0.7) 78%); position: absolute; top: 0; left: 0; right: 0; bottom: 0;"></div>\n              <div class="hero-content" style="padding: 10px; position: relative; z-index: 2; width: 100%;">\n                <h2 style="color: white; margin: 0;">Delicious Restaurant</h2>\n              </div>\n            </div>\n            \n            <div class="chip-group-container" style="display: flex; gap: 8px; margin-bottom: 12px; overflow-x: auto; padding: 0 2px;">\n              <div class="chip" style="background-color: var(--color-primary); border-radius: 16px; padding: 4px 12px; white-space: nowrap;">\n                <span style="color: white; font-size: 12px;">Appetizers</span>\n              </div>\n              <div class="chip" style="background-color: var(--neutral-gray); border-radius: 16px; padding: 4px 12px; white-space: nowrap;">\n                <span style="font-size: 12px;">Main Course</span>\n              </div>\n              <div class="chip" style="background-color: var(--neutral-gray); border-radius: 16px; padding: 4px 12px; white-space: nowrap;">\n                <span style="font-size: 12px;">Desserts</span>\n              </div>\n            </div>\n            \n            <h2 style="font-size: 18px; margin: 12px 0 8px;">Popular Dishes</h2>\n            \n            <div class="card-con card-hz" style="margin-bottom: 8px; border: 1px solid var(--neutral-gray); border-radius: 8px; overflow: hidden;">\n              <div class="card-image card-hz-img-lft" style="background-color: var(--neutral-gray); width: 80px; height: auto; display: flex; justify-content: center; align-items: center;">\n                <i class="fa-solid fa-image"></i>\n              </div>\n              <div class="card-hz-content" style="padding: 8px;">\n                <h3 class="card-title" style="font-size: 16px; margin: 0 0 4px;">Pasta Carbonara</h3>\n                <p class="card-text" style="font-size: 12px; margin: 0; color: #666;">Classic Italian pasta</p>\n                \n              </div>\n            </div>\n            \n            <div class="card-con card-hz" style="margin-bottom: 8px; border: 1px solid var(--neutral-gray); border-radius: 8px; overflow: hidden;">\n              <div class="card-image card-hz-img-lft" style="background-color: var(--neutral-gray); width: 80px; height: auto; display: flex; justify-content: center; align-items: center;">\n                <i class="fa-solid fa-image"></i>\n              </div>\n              <div class="card-hz-content" style="padding: 8px;">\n                <h3 class="card-title" style="font-size: 16px; margin: 0 0 4px;">Grilled Salmon</h3>\n                <p class="card-text" style="font-size: 12px; margin: 0; color: #666;">Fresh salmon fillet</p>\n                \n              </div>\n            </div>\n            \n            <h2 style="font-size: 18px; margin: 12px 0 8px;">Chef\'s Specials</h2>\n            \n            <div class="card-con card-hz" style="margin-bottom: 12px; border: 1px solid var(--neutral-gray); border-radius: 8px; overflow: hidden;">\n              <div class="card-image card-hz-img-lft" style="background-color: var(--neutral-gray); width: 80px; height: auto; display: flex; justify-content: center; align-items: center;">\n                <i class="fa-solid fa-image"></i>\n              </div>\n              <div class="card-hz-content" style="padding: 8px;">\n                <h3 class="card-title" style="font-size: 16px; margin: 0 0 4px;">Chocolate Cake</h3>\n                <p class="card-text" style="font-size: 12px; margin: 0; color: #666;">Chocolate cake with vanilla ice cream</p>\n              </div>\n            </div>\n            \n            <div class="ui-button-container" style="margin-bottom: 14px; height: 20px;">\n                <div role="button" class="ui-button" style="background-color: var(--color-primary); color: white; text-align: center; padding: 8px 0; border-radius: 8px; font-weight: bold; height: 20px;">\n                  VIEW FULL MENU\n                </div>\n            </div>\n            \n            <div style="display: flex; justify-content: space-around; padding: 10px; background-color: var(--color-background); border-top: 1px solid var(--neutral-gray); color: var(--basic-txt-color);">\n              <div style="text-align: center;">\n                <i class="fas fa-utensils" style="color: var(--color-primary); font-size: 20px;"></i>\n                <div style="font-size: 12px; margin-top: 4px;">Menu</div>\n              </div>\n              <div style="text-align: center;">\n                <i class="fas fa-search" style="color: #666; font-size: 20px;"></i>\n                <div style="font-size: 12px; margin-top: 4px;">Search</div>\n              </div>\n              <div style="text-align: center;">\n                <i class="fas fa-shopping-bag" style="color: #666; font-size: 20px;"></i>\n                <div style="font-size: 12px; margin-top: 4px;">Orders</div>\n              </div>\n              <div style="text-align: center;">\n                <i class="fas fa-user" style="color: #666; font-size: 20px;"></i>\n                <div style="font-size: 12px; margin-top: 4px;">Profile</div>\n              </div>\n            </div>\n          </div>\n            </div>\n      </div>\n\n\n\n      <div class="template-card" data-template="blog">\n        <h3>Blog</h3>\n        <p>Articles, comments, and social media</p>\n        <div class="template-preview">\n        <div class="tp-scale">\n        <div style="display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; background-color: var(--color-background); margin-bottom: 10px;">\n          <span style="font-size: 20px; font-weight: bold; color: var(--color-primary);">Blog</span>\n          <div>\n            <i class="fas fa-bars" style="font-size: 20px; color: var(--basic-txt-color);"></i>\n          </div>\n        </div>\n        \n        <div class="fw" style="margin-bottom: 12px;">\n          <div class="card-image ui-image-full" style="height: 100px; background-color: var(--neutral-gray); display: flex; justify-content: center; align-items: center;">\n            <i class="fa-solid fa-image" style="font-size: 24px; color: var(--placeholder-color);"></i>\n          </div>\n        </div>\n        \n        <h1 style="font-size: 20px; margin: 0 0 8px;">The Art of Creating User Interfaces</h1>\n        \n        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">\n          <div style="width: 40px; height: 40px; background-color: var(--neutral-gray); border-radius: 50%; display: flex; justify-content: center; align-items: center;">\n            <i class="fas fa-user" style="color: var(--placeholder-color);"></i>\n          </div>\n          <div>\n            <div style="font-weight: bold; color: var(--basic-txt-color);">Jane Designer</div>\n            <div style="font-size: 12px; color: #666;">March 15, 2025 â€¢ 5 min read</div>\n          </div>\n        </div>\n        \n        <p style="font-size: 14px; line-height: 1.5; margin-bottom: 12px;">User interface design is at the heart of every digital product. It\'s what users see, interact with, and ultimately judge your product by.</p>\n        \n        <p style="font-size: 14px; line-height: 1.5; margin-bottom: 12px;">In today\'s digital landscape, a well-designed user interface can make the difference between a product that succeeds and one that fails.</p>\n        \n        <h2 style="font-size: 18px; margin: 16px 0 8px;">Design Principles to Remember</h2>\n        \n        <p style="font-size: 14px; line-height: 1.5; margin-bottom: 12px;">Applying these principles consistently can elevate your designs from good to great. Each element should have a purpose.</p>\n        \n        <div style="margin-left: 20px; margin-bottom: 12px; color: var(--basic-txt-color);">\n          <div style="display: flex; align-items: flex-start; margin-bottom: 8px;">\n            <i class="fas fa-circle" style="font-size: 8px; margin-top: 6px; margin-right: 8px; color: var(--color-primary);"></i>\n            <div>Consistency across the interface</div>\n          </div>\n          <div style="display: flex; align-items: flex-start; margin-bottom: 8px;">\n            <i class="fas fa-circle" style="font-size: 8px; margin-top: 6px; margin-right: 8px; color: var(--color-primary);"></i>\n            <div>Clear visual hierarchy and focus</div>\n          </div>\n          <div style="display: flex; align-items: flex-start; margin-bottom: 8px;">\n            <i class="fas fa-circle" style="font-size: 8px; margin-top: 6px; margin-right: 8px; color: var(--color-primary);"></i>\n            <div>User-centered design approach</div>\n          </div>\n        </div>\n        \n        <div style="border-left: 4px solid var(--color-primary); padding: 8px 12px; background-color: var(--input-bg-color); margin-bottom: 12px; font-style: italic; color: var(--basic-txt-color);">\n          "Design is not just what it looks like and feels like. Design is how it works." â€” Steve Jobs\n        </div>\n        \n        <p style="font-size: 14px; line-height: 1.5; margin-bottom: 12px;">Remember that great UI design is iterative. Gather feedback, test with real users, and continuously refine your interfaces.</p>\n        \n        <div style="width: 100%; border-top: 1px solid var(--neutral-gray); margin: 16px 0;"></div>\n        \n        <div class="chip-group-container" style="display: flex; gap: 8px; margin-bottom: 12px;">\n          <div class="chip" style="background-color: var(--color-primary); border-radius: 16px; padding: 4px 12px;">\n            <span style="color: white; font-size: 12px;">Design</span>\n          </div>\n          <div class="chip" style="background-color: var(--color-primary); border-radius: 16px; padding: 4px 12px;">\n            <span style="color: white; font-size: 12px;">UI/UX</span>\n          </div>\n          <div class="chip" style="background-color: var(--color-primary); border-radius: 16px; padding: 4px 12px;">\n            <span style="color: white; font-size: 12px;">Tips</span>\n          </div>\n        </div>\n        \n        <p style="font-size: 14px; line-height: 1.5; margin-bottom: 12px;">Share this article with fellow designers and developers!</p>\n        \n        <div class="image-gallery-wrapper" style="margin-bottom: 16px;">\n          <div class="img-gallery-strip" style="display: flex; gap: 8px; overflow-x: auto; padding: 0px;">\n            <div class="card-image" style="background-color: var(--neutral-gray); min-width: 70px; height: 70px; border-radius: 4px; display: flex; justify-content: center; align-items: center;">\n              <i class="fa fa-image" style="color: var(--placeholder-color);"></i>\n            </div>\n            <div class="card-image" style="background-color: var(--neutral-gray); min-width: 70px; height: 70px; border-radius: 4px; display: flex; justify-content: center; align-items: center;">\n              <i class="fa fa-image" style="color: var(--placeholder-color);"></i>\n            </div>\n            <div class="card-image" style="background-color: var(--neutral-gray); min-width: 70px; height: 70px; border-radius: 4px; display: flex; justify-content: center; align-items: center;">\n              <i class="fa fa-image" style="color: var(--placeholder-color);"></i>\n            </div>\n          </div>\n        </div>\n        \n        <footer style="background-color: var(--color-primary); color: white; padding: 12px; border-radius: 8px;">\n          <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">\n            <div>\n              <h4 style="margin: 0 0 8px 0;">Blog</h4>\n              <div style="font-size: 12px;">Great articles for designers</div>\n            </div>\n            <div style="display: flex; flex-direction: column; font-size: 12px;">\n              <a href="#" style="color: white; margin-bottom: 4px;">Home</a>\n              <a href="#" style="color: white; margin-bottom: 4px;">Articles</a>\n              <a href="#" style="color: white;">About</a>\n            </div>\n          </div>\n          <div style="font-size: 12px; opacity: 0.8; text-align: center; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 8px;">\n            Â© 2025 Design Blog. All rights reserved.\n          </div>\n        </footer>\n      </div>\n      \n        </div>\n    </div>\n\n\n\n    <div class="template-card" data-template="education">\n        <h3>Education</h3>\n        <p>Learn new topics</p>\n        <div class="template-preview">\n        <div class="tp-scale">\n        <div style="display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; background-color: var(--color-background); margin-bottom: 10px;">\n          <span style="font-size: 20px; font-weight: bold; color: var(--color-primary);">LearnCode</span>\n          <div style="display: flex; gap: 16px;">\n            <i class="fas fa-search" style="font-size: 18px;"></i>\n            <i class="fas fa-bell" style="font-size: 18px;"></i>\n            <i class="fas fa-bars" style="font-size: 18px;"></i>\n          </div>\n        </div>\n        \n        <div class="hero hero-base" style="height: 100px; margin-bottom: 12px; position: relative; display: flex; align-items: flex-end;">\n          <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0;">\n            <i class="fas fa-image" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 24px; color: var(--placeholder-color);"></i>\n          </div>\n          <div class="hero-gradient" style="background: linear-gradient(transparent 28%, rgba(0,0,0,0.7) 78%); position: absolute; top: 0; left: 0; right: 0; bottom: 0;"></div>\n          <div class="hero-content" style="padding: 40px 0 0 0; position: relative; z-index: 2; width: 100%;">\n            <h2 style="color: white; margin: 0;">JavaScript Basics</h2>\n          </div>\n        </div>\n        \n        <p style="font-size: 14px; line-height:, 1.5; margin-bottom: 12px;">Master the basics of JavaScript programming with this comprehensive course. Learn syntax, functions, objects, and more.</p>\n        \n        <div class="progress-group" style="margin-bottom: 16px;">\n          <div class="progress-bar" style="width: 100%; height: 6px; background-color: var(--neutral-gray); border-radius: 5px; overflow: hidden;">\n            <div style="width: 25%; height: 100%; background-color: var(--color-primary); transition: width 0.3s ease;"></div>\n          </div>\n          <div style="color: var(--basic-txt-color); font-size: 12px; margin-top: 4px; text-align: right;">25% complete</div>\n        </div>\n        \n        <h2 style="font-size: 18px; margin: 16px 0 8px;">Module 1: Getting Started</h2>\n        \n        <div class="accordion-container" style="margin-bottom: 12px; border: 1px solid var(--color-primary); border-radius: 8px; overflow: hidden;">\n          <div class="accordion-header" style="background-color: var(--color-primary); padding: 10px; display: flex; justify-content: space-between; align-items: center;">\n            <span style="color: white;">Week 1: JavaScript Basics</span>\n            <i class="fas fa-chevron-down" style="color: white;"></i>\n          </div>\n        </div>\n        \n        <div class="li-base li-padding-x li-space-between" style="background-color: var(--input-bg-color); margin-bottom: 8px; border-left: 4px solid var(--color-primary);">\n          <div style="display: flex; align-items: center; gap: 12px;">\n            <div class="icon-container">\n              <i class="fas fa-play-circle" style="color: var(--color-primary);"></i>\n            </div>\n            <span>Lesson 1: Introduction to JavaScript</span>\n          </div>\n          <div class="icon-container">\n            <i class="fas fa-check-circle" style="color: green;"></i>\n          </div>\n        </div>\n        \n        <div class="li-base li-padding-x li-space-between" style="background-color: var(--input-bg-color); margin-bottom: 12px;">\n          <div style="display: flex; align-items: center; gap: 12px;">\n            <div class="icon-container">\n              <i class="fas fa-play-circle" style="color: var(--color-primary);"></i>\n            </div>\n            <span>Lesson 2: Variables and Data Types</span>\n          </div>\n          <div class="icon-container">\n            <i class="fas fa-lock" style="color: #999;"></i>\n          </div>\n        </div>\n        \n        <div class="accordion-container" style="margin-bottom: 12px; border: 1px solid var(--neutral-gray); border-radius: 8px; overflow: hidden;">\n          <div class="accordion-header" style="background-color: var(--neutral-gray); padding: 10px; display: flex; justify-content: space-between; align-items: center;">\n            <span>Week 2: Functions & Objects</span>\n            <i class="fas fa-chevron-down"></i>\n          </div>\n        </div>\n        \n        <h2 style="font-size: 18px; margin: 16px 0 8px;">Additional Resources</h2>\n        \n        <div class="card-con card-hz" style="margin-bottom: 12px; border: 1px solid var(--neutral-gray); border-radius: 8px; overflow: hidden;">\n          <div class="card-image card-hz-img-lft" style="background-color: var(--neutral-gray); width: 60px; height: auto; display: flex; justify-content: center; align-items: center;">\n            <i class="fas fa-file-code" style="color: var(--color-primary); font-size: 24px;"></i>\n          </div>\n          <div class="card-hz-content" style="padding: 8px;">\n            <h3 class="card-title" style="font-size: 16px; margin: 0 0 4px;">JavaScript</h3>\n            <p class="card-text" style="font-size: 12px; margin: 0; color: #666;">Documentation and reference guides</p>\n          </div>\n        </div>\n        \n        <div style="display: flex; justify-content: space-around; padding: 10px; background-color: var(--color-background); border-top: 1px solid var(--neutral-gray); color: var(--basic-txt-color);">\n          <div style="text-align: center;">\n            <i class="fas fa-book" style="color: var(--color-primary); font-size: 20px;"></i>\n            <div style="font-size: 12px; margin-top: 4px;">Courses</div>\n          </div>\n          <div style="text-align: center;">\n            <i class="fas fa-search" style="color: #666; font-size: 20px;"></i>\n            <div style="font-size: 12px; margin-top: 4px;">Search</div>\n          </div>\n          <div style="text-align: center;">\n            <i class="fas fa-sticky-note" style="color: #666; font-size: 20px;"></i>\n      <div style="font-size: 12px; margin-top: 4px;">Notes</div>\n    </div>\n    <div style="text-align: center;">\n      <i class="fas fa-user" style="color: #666; font-size: 20px;"></i>\n      <div style="font-size: 12px; margin-top: 4px;">Profile</div>\n    </div>\n  </div>\n</div>\n        </div>\n    </div>\n\n\n\n    <div class="template-card" data-template="mapLocation">\n        <h3>Map/Location</h3>\n        <p>Location-based services</p>\n        <div class="template-preview">\n        <div class="tp-scale">\n        <div style="display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; background-color: var(--color-background); margin-bottom: 10px; color: var(--basic-txt-color);">\n          <div class="icon-container">\n            <i class="fas fa-arrow-left" style="font-size: 18px;"></i>\n          </div>\n          <div style="width: 100%; display: flex; justify-content: center;">\n            <span style="font-size: 18px; font-weight: bold; color: var(--basic-txt-color);">Explore Nearby</span>\n          </div>\n          <div class="icon-container">\n            <i class="fas fa-sliders-h" style="font-size: 18px;"></i>\n          </div>\n        </div>\n        \n        <div class="fw" style="margin-bottom: 10px;">\n          <div class="search-container" style="height: 36px;">\n            <i class="fas fa-search search-icon"></i>\n            <div class="search-input empty" data-placeholder="Search locations..." style="color: #999;"></div>\n          </div>\n        </div>\n        \n        <div class="colorBlock-inner" style="height: 180px; background-color: #e3e9f3; position: relative; margin-bottom: 10px; border-radius: 8px;">\n          \x3c!-- Map pin icon --\x3e\n          <div class="icon-container" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">\n            <i class="fas fa-map-marker-alt" style="font-size: 32px; color: var(--color-primary);"></i>\n          </div>\n          \n          \x3c!-- Map controls --\x3e\n          <div style="position: absolute; top: 10px; right: 10px; display: flex; flex-direction: column; gap: 5px;">\n            <button style="width: 30px; height: 30px; border-radius: 4px; background: white; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border: none;">\n              <i class="fas fa-plus" style="font-size: 12px;"></i>\n            </button>\n            <button style="width: 30px; height: 30px; border-radius: 4px; background: white; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border: none;">\n              <i class="fas fa-minus" style="font-size: 12px;"></i>\n            </button>\n          </div>\n          \n          \x3c!-- Current location indicator --\x3e\n          <div style="position: absolute; bottom: 10px; left: 10px; background: white; border-radius: 16px; padding: 6px 12px; font-size: 12px; display: flex; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">\n            <i class="fas fa-location-arrow" style="color: var(--color-primary); margin-right: 6px;"></i>\n            <span>Current Location</span>\n          </div>\n        </div>\n        \n        <div class="chip-group-container" style="display: flex; gap: 8px; margin-bottom: 10px; overflow-x: auto; padding: 0 2px;">\n          <div class="chip" style="background-color: var(--color-primary); border-radius: 16px; padding: 4px 12px; white-space: nowrap;">\n            <span style="color: white; font-size: 12px;">Restaurants</span>\n          </div>\n          <div class="chip" style="background-color: var(--neutral-gray); border-radius: 16px; padding: 4px 12px; white-space: nowrap;">\n            <span style="font-size: 12px;">Hotels</span>\n          </div>\n          <div class="chip" style="background-color: var(--neutral-gray); border-radius: 16px; padding: 4px 12px; white-space: nowrap;">\n            <span style="font-size: 12px;">Attractions</span>\n          </div>\n        </div>\n        \n        <div class="card-con card-hz" style="margin-bottom: 8px; border: 1px solid var(--neutral-gray); border-radius: 8px; overflow: hidden;">\n          <div class="card-image card-hz-img-lft" style="background-color: var(--neutral-gray); width: 80px; height: auto; display: flex; justify-content: center; align-items: center;">\n            <i class="fa-solid fa-utensils"></i>\n          </div>\n          <div class="card-hz-content" style="padding: 8px;">\n            <h3 class="card-title" style="font-size: 16px; margin: 0 0 4px;">CafÃ©</h3>\n            <p class="card-text" style="font-size: 12px; margin: 0; color: #666;">â­ 4.5 (238) â€¢ 0.3 miles away</p>\n            <div style="font-size: 12px; margin-top: 4px;">\n            </div>\n          </div>\n        </div>\n        \n        <div class="card-con card-hz" style="margin-bottom: 8px; border: 1px solid var(--neutral-gray); border-radius: 8px; overflow: hidden;">\n          <div class="card-image card-hz-img-lft" style="background-color: var(--neutral-gray); width: 80px; height: auto; display: flex; justify-content: center; align-items: center;">\n            <i class="fa-solid fa-landmark"></i>\n          </div>\n          <div class="card-hz-content" style="padding: 8px;">\n            <h3 class="card-title" style="font-size: 16px; margin: 0 0 4px;">City Museum</h3>\n            <p class="card-text" style="font-size: 12px; margin: 0; color: #666;">â­ 4.8 (512) â€¢ 0.7 miles away</p>\n            <div style="font-size: 12px; margin-top: 4px;">\n            </div>\n          </div>\n        </div>\n        \n        <div class="card-con card-hz" style="margin-bottom: 12px; border: 1px solid var(--neutral-gray); border-radius: 8px; overflow: hidden;">\n          <div class="card-image card-hz-img-lft" style="background-color: var(--neutral-gray); width: 80px; height: auto; display: flex; justify-content: center; align-items: center;">\n            <i class="fa-solid fa-hotel"></i>\n          </div>\n          <div class="card-hz-content" style="padding: 8px;">\n            <h3 class="card-title" style="font-size: 16px; margin: 0 0 4px;">Riverside Hotel</h3>\n            <p class="card-text" style="font-size: 12px; margin: 0; color: #666;">â­ 4.2 (189) â€¢ 1.2 miles away</p>\n            <div style="font-size: 12px; margin-top: 4px;">\n            </div>\n          </div>\n        </div>\n        \n        <div style="position: fixed; bottom: 16px; right: 16px; width: 56px; height: 56px; border-radius: 28px; background-color: var(--color-primary); display: flex; justify-content: center; align-items: center; box-shadow: 0 4px 8px rgba(0,0,0,0.2); z-index: 1001;">\n          <i class="fas fa-directions" style="color: white; font-size: 24px;"></i>\n        </div>\n      </div>\n        </div>\n    </div>\n\n\n\n    <div class="template-card" data-template="calendar">\n        <h3>Calendar</h3>\n        <p>Schedule appointments</p>\n        <div class="template-preview">\n        <div class="tp-scale">\n        <div style="display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; background-color: var(--color-background); margin-bottom: 10px;">\n          <span style="font-size: 20px; font-weight: bold; color: var(--color-primary);">Calendar</span>\n          <div style="display: flex; gap: 16px; color: var(--basic-txt-color);">\n            <i class="fas fa-search" style="font-size: 18px;"></i>\n            <i class="fas fa-bars" style="font-size: 18px;"></i>\n          </div>\n        </div>\n        \n        <h2 style="font-size: 18px; margin: 12px 0 8px; text-align: center; color: var(--basic-txt-color);">March 2025</h2>\n        \n        <table style="width: 100%; border-collapse: collapse; font-size: 14px; margin-bottom: 12px; color: var(--basic-txt-color);">\n          <thead>\n            <tr>\n              <th style="padding: 8px 0; text-align: center; font-weight: bold;">S</th>\n              <th style="padding: 8px 0; text-align: center; font-weight: bold;">M</th>\n              <th style="padding: 8px 0; text-align: center; font-weight: bold;">T</th>\n              <th style="padding: 8px 0; text-align: center; font-weight: bold;">W</th>\n              <th style="padding: 8px 0; text-align: center; font-weight: bold;">T</th>\n              <th style="padding: 8px 0; text-align: center; font-weight: bold;">F</th>\n              <th style="padding: 8px 0; text-align: center; font-weight: bold;">S</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td style="text-align: center; height: 36px; width: 36px;"></td>\n              <td style="text-align: center; height: 36px; width: 36px;"></td>\n              <td style="text-align: center; height: 36px; width: 36px;"></td>\n              <td style="text-align: center; height: 36px; width: 36px;">1</td>\n              <td style="text-align: center; height: 36px; width: 36px;">2</td>\n              <td style="text-align: center; height: 36px; width: 36px;">3</td>\n              <td style="text-align: center; height: 36px; width: 36px;">4</td>\n            </tr>\n            <tr>\n              <td style="text-align: center; height: 36px; width: 36px;">5\n                <div style="width: 6px; height: 6px; background-color: var(--color-accent); border-radius: 50%; margin: 2px auto 0;"></div>\n              </td>\n              <td style="text-align: center; height: 36px; width: 36px;">6</td>\n              <td style="text-align: center; height: 36px; width: 36px;">7</td>\n              <td style="text-align: center; height: 36px; width: 36px;">8</td>\n              <td style="text-align: center; height: 36px; width: 36px;">9</td>\n              <td style="text-align: center; height: 36px; width: 36px;">10\n                <div style="width: 6px; height: 6px; background-color: var(--color-accent); border-radius: 50%; margin: 2px auto 0;"></div>\n              </td>\n              <td style="text-align: center; height: 36px; width: 36px;">11</td>\n            </tr>\n            <tr>\n              <td style="text-align: center; height: 36px; width: 36px;">12</td>\n              <td style="text-align: center; height: 36px; width: 36px;">13</td>\n              <td style="text-align: center; height: 36px; width: 36px;">14</td>\n              <td style="text-align: center; height: 36px; width: 36px;">15\n                <div style="width: 6px; height: 6px; background-color: var(--color-accent); border-radius: 50%; margin: 2px auto 0;"></div>\n              </td>\n              <td style="text-align: center; height: 30px; width: 30px; background-color: var(--color-primary); color: white; border-radius: 50%;">16</td>\n              <td style="text-align: center; height: 36px; width: 36px;">17\n                <div style="width: 6px; height: 6px; background-color: var(--color-accent); border-radius: 50%; margin: 2px auto 0;"></div>\n              </td>\n              <td style="text-align: center; height: 36px; width: 36px;">18</td>\n            </tr>\n            <tr>\n              <td style="text-align: center; height: 36px; width: 36px;">19</td>\n              <td style="text-align: center; height: 36px; width: 36px;">20</td>\n              <td style="text-align: center; height: 36px; width: 36px;">21</td>\n              <td style="text-align: center; height: 36px; width: 36px;">22</td>\n              <td style="text-align: center; height: 36px; width: 36px;">23\n                <div style="width: 6px; height: 6px; background-color: var(--color-accent); border-radius: 50%; margin: 2px auto 0;"></div>\n              </td>\n              <td style="text-align: center; height: 36px; width: 36px;">24</td>\n              <td style="text-align: center; height: 36px; width: 36px;">25</td>\n            </tr>\n            <tr>\n              <td style="text-align: center; height: 36px; width: 36px;">26</td>\n              <td style="text-align: center; height: 36px; width: 36px;">27\n                <div style="width: 6px; height: 6px; background-color: var(--color-accent); border-radius: 50%; margin: 2px auto 0;"></div>\n              </td>\n              <td style="text-align: center; height: 36px; width: 36px;">28</td>\n              <td style="text-align: center; height: 36px; width: 36px;">29</td>\n              <td style="text-align: center; height: 36px; width: 36px;">30</td>\n              <td style="text-align: center; height: 36px; width: 36px;">31</td>\n              <td style="text-align: center; height: 36px; width: 36px;"></td>\n            </tr>\n          </tbody>\n        </table>\n        \n        <h3 style="font-size: 16px; margin: 16px 0 4px;">Today â€¢ March 16</h3>\n        <div style="width: 100%; border-top: 1px solid var(--neutral-gray); margin-bottom: 8px;"></div>\n        \n        <div class="li-base li-padding-x" style="background-color: var(--input-bg-color); margin-bottom: 8px; border-left: 3px solid var(--color-primary);">\n          <div class="icon-container li-icon">\n            <i class="fas fa-users" style="color: var(--color-primary);"></i>\n          </div>\n          <div class="li-content">\n            <span>9:00 AM - 10:30 AM â€¢ Team Meeting</span>\n            <span class="li-subtitle">Conference Room A</span>\n          </div>\n        </div>\n        \n        <div class="li-base li-padding-x" style="background-color: var(--input-bg-color); margin-bottom: 8px; border-left: 3px solid var(--color-accent);">\n          <div class="icon-container li-icon">\n            <i class="fas fa-briefcase" style="color: var(--color-accent);"></i>\n          </div>\n          <div class="li-content">\n            <span>2:30 PM - 4:00 PM â€¢ Client Presentation</span>\n            <span class="li-subtitle">Meeting Room B</span>\n          </div>\n        </div>\n        \n        <div class="li-base li-padding-x" style="background-color: rgba(52, 152, 219, 0.1); margin-bottom: 8px; border-left: 3px solid var(--color-primary);">\n          <div class="icon-container li-icon">\n            <i class="fas fa-utensils" style="color: var(--color-primary);"></i>\n          </div>\n          <div class="li-content">\n            <span>6:00 PM - 8:30 PM â€¢ Dinner with Friends</span>\n            <span class="li-subtitle">Downtown Restaurant</span>\n          </div>\n        </div>\n        \n        <h3 style="font-size: 16px; margin: 16px 0 4px;">Tomorrow â€¢ March 17</h3>\n        <div style="width: 100%; border-top: 1px solid var(--neutral-gray); margin-bottom: 8px;"></div>\n        \n        <div class="li-base li-padding-x" style="background-color: var(--input-bg-color); margin-bottom: 12px; border-left: 3px solid #e74c3c;">\n          <div class="icon-container li-icon">\n            <i class="fas fa-tooth" style="color: #e74c3c;"></i>\n          </div>\n          <div class="li-content">\n            <span>10:00 AM - 11:30 AM â€¢ Dentist Appointment</span>\n            <span class="li-subtitle">City Dental Clinic</span>\n          </div>\n        </div>\n        \n        <div style="position: fixed; bottom: 16px; right: 16px; width: 56px; height: 56px; border-radius: 28px; background-color: var(--color-primary); display: flex; justify-content: center; align-items: center; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">\n          <i class="fas fa-plus" style="color: white; font-size: 24px;"></i>\n        </div>\n      </div>\n        </div>\n    </div>\n\n\n        </div>\n      </div>\n    ',document.body.appendChild(e),e}function initializeTemplateSystem(){let e=document.getElementById("template-modal");e||(e=createTemplateModal());const t=document.getElementById("addTemplateBtn");if(!t)return void console.error("Add Template button not found");t.addEventListener("click",(async()=>{const t=document.querySelectorAll(".canvas-wrapper").length,n=await async function(e){if(!firebase.auth().currentUser&&e>=2)return showAuthModal("Sign In to create more screens","Signed-in designers can save projects and add more screens!"),!1;if(firebase.auth().currentUser&&e>=3)try{const e=await firebase.firestore().collection("users").doc(firebase.auth().currentUser.uid).get();if(!e.data()?.pro_account)return projectManager.showSubscriptionModal("Upgrade to Create Unlimited Screens","You've reached the limit for free screens."),!1}catch(e){return console.error("Error checking subscription status:",e),!1}return!0}(t);n&&(e.style.display="flex")}));e.querySelector(".close-modal").addEventListener("click",(()=>{e.style.display="none"})),e.addEventListener("click",(t=>{t.target===e&&(e.style.display="none")}));e.querySelectorAll(".template-card").forEach((t=>{t.addEventListener("click",(()=>{applyTemplate(t.getAttribute("data-template")),e.style.display="none"}))}))}function applyTemplate(e){createNewCanvasAndApplyTemplate(e)}function createNewCanvasAndApplyTemplate(e){const t=document.querySelector(".add-canvas-btn");t?(t.click(),setTimeout((()=>{const t=document.querySelectorAll(".canvas"),n=t[t.length-1];if(!n)return void console.error("New canvas not found after creation");n.classList.contains("selected")||n.click();const a=n.querySelector(".canvas-content");if(!a)return void console.error("Canvas content not found in new canvas");switch(a.innerHTML="",e){case"template1":addComponentsFromButtons([{selector:'[data-component="image"]',type:"image",variant:1},{selector:'[data-component="avatar"]',type:"avatar",variant:7},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="chipGroup"]',type:"chipGroup"},{selector:'[data-component="heading"]',type:"heading"},{selector:'[data-component="paragraph"]',type:"paragraph"},{selector:'[data-component="imgGallery"]',type:"imgGallery"},{selector:'[data-component="button"]',type:"button",variant:2}],a);break;case"template2":addComponentsFromButtons([{selector:'[data-component="hero"]',type:"hero",variant:2},{selector:'[data-component="heading"]',type:"heading"},{selector:'[data-component="paragraph"]',type:"paragraph",repeat:2},{selector:'[data-component="icon"]',type:"icon"},{selector:'[data-component="accordion"]',type:"accordion"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="footer"]',type:"footer"}],a);break;case"template3":addComponentsFromButtons([{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading"},{selector:'[data-component="paragraph"]',type:"paragraph"},{selector:'[data-component="input"]',type:"input",variant:2},{selector:'[data-component="textarea"]',type:"textarea",variant:1},{selector:'[data-component="label"]',type:"label"},{selector:'[data-component="dropdown"]',type:"dropdown"},{selector:'[data-component="label"]',type:"label"},{selector:'[data-component="checkbox"]',type:"checkbox",repeat:3},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="button"]',type:"button",variant:4}],a);break;case"social":addComponentsFromButtons([{selector:'[data-component="navbar"]',type:"navbar",special:!0,variant:3},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading"},{selector:'[data-component="card"]',type:"card",variant:4},{selector:'[data-component="card2"]',type:"card2",variant:6},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="chatInput"]',type:"chatInput",variant:2}],a),setTimeout((()=>{const e=a.querySelector("h1");e&&(e.textContent="Social Feed")}),1e3);break;case"dashboard":addComponentsFromButtons([{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading"},{selector:'[data-component="paragraph"]',type:"paragraph"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="progressBar"]',type:"progressBar",variant:5},{selector:'[data-component="progressBar"]',type:"progressBar",variant:3},{selector:'[data-component="columns"]',type:"columns"},{selector:'[data-component="graph"]',type:"graph"},{selector:'[data-component="paragraph"]',type:"paragraph"},{selector:'[data-component="table"]',type:"table"}],a),setTimeout((()=>{const e=a.querySelector("h1");e&&(e.textContent="Dashboard")}),1e3);break;case"ecommerce":addComponentsFromButtons([{selector:'[data-component="navbar"]',type:"navbar",special:!0,variant:0},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading"},{selector:'[data-component="searchBar"]',type:"searchBar",variant:0},{selector:'[data-component="chipGroup"]',type:"chipGroup"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="card"]',type:"card",variant:5},{selector:'[data-component="card2"]',type:"card2",variant:1},{selector:'[data-component="card"]',type:"card",variant:5},{selector:'[data-component="card2"]',type:"card2",variant:3},{selector:'[data-component="featureComparisonCard"]',type:"featureComparisonCard"},{selector:'[data-component="button"]',type:"button",variant:2}],a),setTimeout((()=>{const e=a.querySelector("h1");e&&(e.textContent="Product Gallery")}),1e3);break;case"mediaGallery":addComponentsFromButtons([{selector:'[data-component="navbar"]',type:"navbar",special:!0,variant:2},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading"},{selector:'[data-component="searchBar"]',type:"searchBar",variant:2},{selector:'[data-component="imgGallery"]',type:"imgGallery",variant:0},{selector:'[data-component="imgGallery"]',type:"imgGallery",variant:2},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="video"]',type:"video",variant:0},{selector:'[data-component="chipGroup"]',type:"chipGroup"},{selector:'[data-component="bottomNav"]',type:"bottomNav",special:!0}],a),setTimeout((()=>{const e=a.querySelector("h1");e&&(e.textContent="Media Gallery")}),1e3);break;case"login":addComponentsFromButtons([{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="tabs"]',type:"tabs"},{selector:'[data-component="image"]',type:"image",variant:5},{selector:'[data-component="heading"]',type:"heading"},{selector:'[data-component="paragraph"]',type:"paragraph"},{selector:'[data-component="input"]',type:"input",variant:2},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="input"]',type:"input",variant:5},{selector:'[data-component="checkbox"]',type:"checkbox"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="button"]',type:"button",variant:0},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="paragraph"]',type:"paragraph"}],a),setTimeout((()=>{const e=a.querySelectorAll(".ui-tab");e.length&&(e[0].textContent="Sign In",e[1].textContent="Sign Up");const t=a.querySelector("h1");t&&(t.textContent="Welcome Back");const n=a.querySelectorAll("p");n.length&&(n[0].textContent="Sign in to your account",n[1].textContent="Don't have an account? Sign up");const i=a.querySelectorAll("label");i.length>=2&&(i[0].textContent="Email",i[1].textContent="Password");const o=a.querySelector(".checkbox-square-icon + span");o&&(o.textContent="Remember me");const s=a.querySelector('.ui-button div[role="button"]');s&&(s.textContent="SIGN IN")}),2080);break;case"onboarding":addComponentsFromButtons([{selector:'[data-component="image"]',type:"image",variant:0},{selector:'[data-component="heading"]',type:"heading"},{selector:'[data-component="paragraph"]',type:"paragraph"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="progressTracker"]',type:"progressTracker"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="button"]',type:"button",variant:0},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="paragraph"]',type:"paragraph"}],a),setTimeout((()=>{const e=a.querySelector("h1");e&&(e.textContent="Welcome to the App");const t=a.querySelectorAll("p");t.length>=2&&(t[0].textContent="Discover amazing features that will help you accomplish your goals.",t[1].textContent="Skip intro",t[1].style.textAlign="center",t[1].style.opacity="0.7");const n=a.querySelector('.ui-button div[role="button"]');n&&(n.textContent="NEXT")}),1e3);break;case"settings":addComponentsFromButtons([{selector:'[data-component="navbar"]',type:"navbar",special:!0,variant:2},{selector:'[data-component="avatar"]',type:"avatar",variant:6},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading",variant:"h3"},{selector:'[data-component="hzDivider"]',type:"hzDivider"},{selector:'[data-component="listItem"]',type:"listItem",variant:2},{selector:'[data-component="toggleSwitch"]',type:"toggleSwitch"},{selector:'[data-component="listItem"]',type:"listItem",variant:2},{selector:'[data-component="toggleSwitch"]',type:"toggleSwitch"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading",variant:"h3"},{selector:'[data-component="hzDivider"]',type:"hzDivider"},{selector:'[data-component="listItem"]',type:"listItem",variant:3},{selector:'[data-component="listItem"]',type:"listItem",variant:3},{selector:'[data-component="listItem"]',type:"listItem",variant:3}],a),setTimeout((()=>{const e=a.querySelectorAll("h1");e.length>=2&&(e[0].textContent="App Preferences",e[1].textContent="Account Settings");const t=a.querySelector(".navbar span:not(.non-editable)");t&&(t.textContent="Settings");const n=a.querySelectorAll(".li-content span:first-child");n.length&&(n[0].textContent="Notifications",n[1].textContent="Dark Mode",n[2].textContent="Profile Information",n[3].textContent="Privacy & Security",n[4].textContent="Help & Support");const i=a.querySelectorAll(".li-subtitle");i.length&&(i[0].textContent="Get updates about new features",i[1].textContent="Switch to dark mode interface")}),1600);break;case"messaging":addComponentsFromButtons([{selector:'[data-component="navbar"]',type:"navbar",special:!0,variant:3},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="leftChat"]',type:"leftChat"},{selector:'[data-component="rightChat"]',type:"rightChat"},{selector:'[data-component="leftChat"]',type:"leftChat"},{selector:'[data-component="rightChat"]',type:"rightChat"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="chatInput"]',type:"chatInput",variant:4},{selector:'[data-component="bottomNav"]',type:"bottomNav",special:!0}],a),setTimeout((()=>{const e=a.querySelector('.navbar span[style*="font-weight: bold"]');e&&(e.textContent="John Smith");const t=a.querySelector(".navbar .status");t&&(t.textContent="Online");const n=a.querySelectorAll(".chat-content");n.length>=4&&(n[0].textContent="Hi there! How are you doing today?",n[1].textContent="Hey! I'm good, thanks for asking. How about you?",n[2].textContent="I'm great! Do you want to meet up this weekend?",n[3].textContent="Absolutely! I was thinking we could check out that new restaurant downtown.");const i=a.querySelectorAll(".leftChat + .chat-avatar");i.length>0&&i.forEach((e=>{e.textContent="JS"}))}),1e3);break;case"restaurant":addComponentsFromButtons([{selector:'[data-component="navbar"]',type:"navbar",special:!0,variant:1},{selector:'[data-component="hero"]',type:"hero",variant:0},{selector:'[data-component="heading"]',type:"heading"},{selector:'[data-component="chipGroup"]',type:"chipGroup"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading",variant:"h2"},{selector:'[data-component="card"]',type:"card",variant:3},{selector:'[data-component="card"]',type:"card",variant:3},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading",variant:"h2"},{selector:'[data-component="card"]',type:"card",variant:3},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="button"]',type:"button",variant:0},{selector:'[data-component="bottomNav"]',type:"bottomNav",special:!0}],a),setTimeout((()=>{const e=a.querySelectorAll("h1, h2");e.length>=3&&(e[0].textContent="Delicious Restaurant",e[1].textContent="Popular Dishes",e[2].textContent="Chef's Specials");const t=a.querySelectorAll(".chip span");t.length>=3&&(t[0].textContent="Appetizers",t[1].textContent="Main Course",t[2].textContent="Desserts");const n=a.querySelectorAll(".card-title");n.length>=3&&(n[0].textContent="Pasta Carbonara",n[1].textContent="Grilled Salmon",n[2].textContent="Chocolate Cake");const i=a.querySelectorAll(".card-text");i.length>=3&&(i[0].textContent="Classic Italian pasta with eggs, cheese, and pancetta",i[1].textContent="Fresh salmon fillet with seasonal vegetables",i[2].textContent="Rich chocolate cake with vanilla ice cream");const o=a.querySelector('.ui-button div[role="button"]');o&&(o.textContent="VIEW FULL MENU");const s=a.querySelectorAll(".bottom-nav-item span");s.length>=4&&(s[0].textContent="Menu",s[1].textContent="Search",s[2].textContent="Orders",s[3].textContent="Profile")}),1e3);break;case"blog":addComponentsFromButtons([{selector:'[data-component="navbar"]',type:"navbar",special:!0,variant:0},{selector:'[data-component="image"]',type:"image",variant:1},{selector:'[data-component="heading"]',type:"heading"},{selector:'[data-component="card2"]',type:"card2",variant:4},{selector:'[data-component="paragraph"]',type:"paragraph"},{selector:'[data-component="paragraph"]',type:"paragraph"},{selector:'[data-component="heading"]',type:"heading",variant:"h2"},{selector:'[data-component="paragraph"]',type:"paragraph"},{selector:'[data-component="bulletedList"]',type:"bulletedList"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="blockquote"]',type:"blockquote"},{selector:'[data-component="paragraph"]',type:"paragraph"},{selector:'[data-component="hzDivider"]',type:"hzDivider"},{selector:'[data-component="chipGroup"]',type:"chipGroup"},{selector:'[data-component="paragraph"]',type:"paragraph"},{selector:'[data-component="imgGallery"]',type:"imgGallery",variant:3},{selector:'[data-component="footer"]',type:"footer"}],a),setTimeout((()=>{const e=a.querySelectorAll("h1, h2");e.length>=2&&(e[0].textContent="The Art of Creating User Interfaces",e[1].textContent="Design Principles to Remember");const t=a.querySelectorAll("p");t.length>=4&&(t[0].textContent="User interface design is at the heart of every digital product. It's what users see, interact with, and ultimately judge your product by.",t[1].textContent="In today's digital landscape, a well-designed user interface can make the difference between a product that succeeds and one that fails. Users have come to expect intuitive, responsive, and visually appealing interfaces that help them accomplish their goals efficiently.",t[2].textContent="Applying these principles consistently can elevate your designs from good to great. Each element of your interface should have a purpose and contribute to the overall user experience.",t[3].textContent="Remember that great UI design is iterative. Gather feedback, test with real users, and continuously refine your interfaces to create experiences that users love.");const n=a.querySelector("blockquote");n&&(n.textContent="Design is not just what it looks like and feels like. Design is how it works. â€” Steve Jobs");const i=a.querySelectorAll(".bullet-list-item-text");i.length>=3&&(i[0].textContent="Consistency across the interface",i[1].textContent="Clear visual hierarchy and focus",i[2].textContent="User-centered design approach");const o=a.querySelectorAll(".chip span");o.length>=3&&(o[0].textContent="Design",o[1].textContent="UI/UX",o[2].textContent="Tips");const s=a.querySelector(".card-quote-author p");s&&(s.textContent="â€” Jane Designer, Senior UX Designer")}),1e3);break;case"education":addComponentsFromButtons([{selector:'[data-component="navbar"]',type:"navbar",special:!0,variant:0},{selector:'[data-component="hero"]',type:"hero",variant:0},{selector:'[data-component="heading"]',type:"heading"},{selector:'[data-component="paragraph"]',type:"paragraph"},{selector:'[data-component="progressBar"]',type:"progressBar",variant:0},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading",variant:"h2"},{selector:'[data-component="accordion"]',type:"accordion"},{selector:'[data-component="listItem"]',type:"listItem",variant:3},{selector:'[data-component="listItem"]',type:"listItem",variant:3},{selector:'[data-component="accordion"]',type:"accordion"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading",variant:"h2"},{selector:'[data-component="card"]',type:"card",variant:3},{selector:'[data-component="bottomNav"]',type:"bottomNav",special:!0}],a),setTimeout((()=>{const e=a.querySelectorAll("h1, h2");e.length>=3&&(e[0].textContent="JavaScript Fundamentals",e[1].textContent="Module 1: Getting Started",e[2].textContent="Additional Resources");const t=a.querySelector("p");t&&(t.textContent="Master the basics of JavaScript programming with this comprehensive course. Learn syntax, functions, objects, and more.");const n=a.querySelectorAll(".accordion-header span");n.length>=2&&(n[0].textContent="Week 1: JavaScript Basics",n[1].textContent="Week 2: Functions & Objects");const i=a.querySelectorAll(".li-content span:first-child");i.length>=2&&(i[0].textContent="Lesson 1: Introduction to JavaScript",i[1].textContent="Lesson 2: Variables and Data Types");const o=a.querySelector(".card-title");o&&(o.textContent="JavaScript Documentation");const s=a.querySelector(".card-text");s&&(s.textContent="Official documentation and reference guides");const r=a.querySelector('.progress-label, [contenteditable="true"]');r&&(r.textContent="25%");const l=a.querySelectorAll(".bottom-nav-item span");l.length>=4&&(l[0].textContent="Courses",l[1].textContent="Search",l[2].textContent="Notes",l[3].textContent="Profile")}),1e3);break;case"mapLocation":addComponentsFromButtons([{selector:'[data-component="navbar"]',type:"navbar",special:!0,variant:2},{selector:'[data-component="searchBar"]',type:"searchBar",variant:0},{selector:'[data-component="colorBlock"]',type:"colorBlock"},{selector:'[data-component="chipGroup"]',type:"chipGroup"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="card"]',type:"card",variant:3},{selector:'[data-component="card"]',type:"card",variant:3},{selector:'[data-component="card"]',type:"card",variant:3},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="floatingActionButton"]',type:"floatingActionButton",special:!0}],a),setTimeout((()=>{const e=a.querySelector(".navbar span:not(.non-editable)");e&&(e.textContent="Explore Nearby");const t=a.querySelector(".search-input");t&&t.setAttribute("data-placeholder","Search locations...");const n=a.querySelector(".colorBlock-inner");if(n){n.style.height="220px",n.style.backgroundColor="#e3e9f3";const e=document.createElement("div");e.className="icon-container",e.style.cssText="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);",e.innerHTML='<i class="fas fa-map-marker-alt" style="font-size: 32px; color: var(--color-primary);"></i>',n.appendChild(e);const t=document.createElement("div");t.style.cssText="position: absolute; top: 10px; right: 10px; display: flex; flex-direction: column; gap: 5px;";const a=document.createElement("button");a.style.cssText="width: 30px; height: 30px; border-radius: 4px; background: white; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1);",a.innerHTML='<i class="fas fa-plus" style="font-size: 12px;"></i>';const i=document.createElement("button");i.style.cssText="width: 30px; height: 30px; border-radius: 4px; background: white; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1);",i.innerHTML='<i class="fas fa-minus" style="font-size: 12px;"></i>',t.appendChild(a),t.appendChild(i),n.appendChild(t)}const i=a.querySelectorAll(".chip span");i.length>=3&&(i[0].textContent="Restaurants",i[1].textContent="Hotels",i[2].textContent="Attractions");const o=a.querySelectorAll(".card-title");o.length>=3&&(o[0].textContent="Central Park Cafe",o[1].textContent="City Museum",o[2].textContent="Riverside Hotel");const s=a.querySelectorAll(".card-text");s.length>=3&&(s[0].textContent="â­ 4.5 (238) â€¢ 0.3 miles away",s[1].textContent="â­ 4.8 (512) â€¢ 0.7 miles away",s[2].textContent="â­ 4.2 (189) â€¢ 1.2 miles away");const r=a.querySelector(".fab-icon");r&&(r.className="fas fa-directions fab-icon")}),1e3);break;case"calendar":addComponentsFromButtons([{selector:'[data-component="navbar"]',type:"navbar",special:!0,variant:0},{selector:'[data-component="heading"]',type:"heading",variant:"h2"},{selector:'[data-component="table"]',type:"table"},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading",variant:"h3"},{selector:'[data-component="hzDivider"]',type:"hzDivider"},{selector:'[data-component="listItem"]',type:"listItem",variant:8},{selector:'[data-component="listItem"]',type:"listItem",variant:8},{selector:'[data-component="listItem"]',type:"listItem",variant:9},{selector:'[data-component="adjustableSpace"]',type:"adjustableSpace"},{selector:'[data-component="heading"]',type:"heading",variant:"h3"},{selector:'[data-component="hzDivider"]',type:"hzDivider"},{selector:'[data-component="listItem"]',type:"listItem",variant:8},{selector:'[data-component="floatingActionButton"]',type:"floatingActionButton",special:!0}],a),setTimeout((()=>{const e=a.querySelector(".navbar span:not(.non-editable)");e&&(e.textContent="Calendar");const t=a.querySelectorAll("h2, h3");t.length>=3&&(t[0].textContent="March 2025",t[1].textContent="Today â€¢ March 16",t[2].textContent="Tomorrow â€¢ March 17");const n=a.querySelector(".data-table-main");if(n){const e=n.querySelector("thead"),t=n.querySelector("tbody");if(e&&t){e.innerHTML="";const n=document.createElement("tr");["S","M","T","W","T","F","S"].forEach((e=>{const t=document.createElement("th");t.textContent=e,t.style.textAlign="center",t.style.padding="10px 0",t.style.fontWeight="bold",n.appendChild(t)})),e.appendChild(n),t.innerHTML="";for(let e=0;e<5;e++){const n=document.createElement("tr");for(let t=1;t<=7;t++){const a=document.createElement("td");let i=7*e+t-3;if(i>=1&&i<=31&&(a.textContent=i),16===i&&(a.style.backgroundColor="var(--color-primary)",a.style.color="white",a.style.borderRadius="50%",a.style.fontWeight="bold"),[5,10,15,17,23,27].includes(i)){const e=document.createElement("div");e.style.cssText="width: 6px; height: 6px; background-color: var(--color-accent); border-radius: 50%; margin: 2px auto 0;",a.appendChild(e)}a.style.textAlign="center",a.style.height="40px",a.style.width="40px",a.style.cursor="pointer",n.appendChild(a)}t.appendChild(n)}}}const i=a.querySelectorAll(".li-content span:first-child");i.length>=4&&(i[0].textContent="9:00 AM - 10:30 AM â€¢ Team Meeting",i[1].textContent="2:30 PM - 4:00 PM â€¢ Client Presentation",i[2].textContent="6:00 PM - 8:30 PM â€¢ Dinner with Friends",i[3].textContent="10:00 AM - 11:30 AM â€¢ Dentist Appointment");const o=a.querySelectorAll(".li-icon i");o.length>=4&&(o[0].className="fas fa-users",o[1].className="fas fa-presentation",o[2].className="fas fa-utensils",o[3].className="fas fa-tooth");const s=a.querySelectorAll(".li-base")[2];s&&(s.style.backgroundColor="rgba(52, 152, 219, 0.1)",s.style.borderLeft="4px solid var(--color-primary)");const r=a.querySelector(".fab-icon");r&&(r.className="fas fa-plus fab-icon")}),1600);break;default:console.error(`Unknown template type: ${e}`)}const i=n.querySelector(".phoneScrollCon");if(i&&(i.scrollTop=0),window.projectManager){const t=n.closest(".canvas-wrapper");if(t){const n=t.getAttribute("data-canvas-id");window.projectManager&&window.projectManager.addCanvasToChanged&&n&&(window.projectManager.addCanvasToChanged(n,`Applied template: ${e}`),window.projectManager.contentChanged=!0)}}}),100)):console.error("Add Canvas button not found")}function addComponentsFromButtons(e,t){let n=0;e.forEach((({selector:e,type:t,repeat:a=1})=>{setTimeout((()=>{const n=document.querySelector(e);if(n)for(let e=0;e<a;e++)n.click();else console.warn(`Button for ${t} not found`)}),n),n+=10*a}))}function addComponentsFromButtons(e,t){let n=0;e.forEach((({selector:e,type:a,repeat:i=1,variant:o=0})=>{setTimeout((()=>{const n=document.querySelector(e);if(n)for(let e=0;e<i;e++)n.click(),setTimeout((()=>{applyDirectVariant(t,a,o)}),50);else console.warn(`Button for ${a} not found`)}),n),n+=10*i}))}function applyDirectVariant(e,t,n){const a=Array.from(e.querySelectorAll(`.component-container[data-component-type="${t}"]`));if(0===a.length)return void console.warn(`No components of type ${t} found to apply variant`);const i=a[a.length-1],o=i.querySelector(".component-content");if(!o)return void console.warn(`Component content not found for ${t}`);i.querySelector(".variant-controls")||window.editor&&window.editor.setupVariantControls&&window.editor.setupVariantControls(i,o,t);const s=i.querySelector(".variant-controls");if(!s)return void console.warn(`Variant controls not found for ${t}, component might not have variants`);const r=s.querySelector(".next-nav"),l=s.querySelector(".prev-nav");if(!r||!l)return void console.warn("Variant navigation buttons not found");const c=parseInt(o.dataset.currentVariant||"0"),d=(setupVariants(t)||[]).length;if(d<=1)return;const p=(n-c+d)%d,u=(c-n+d)%d;if(p<=u)for(let e=0;e<p;e++)r.click();else for(let e=0;e<u;e++)l.click()}function addComponentsFromButtons(e,t){let n=0;e.forEach((({selector:e,type:a,repeat:i=1,variant:o=0})=>{setTimeout((()=>{const n=document.querySelector(e);if(n)for(let e=0;e<i;e++)n.click(),setTimeout((()=>{applyDirectVariant(t,a,o)}),50);else console.warn(`Button for ${a} not found`)}),n),n+=100*i}))}document.addEventListener("DOMContentLoaded",(()=>{addAccountManagerStyles(),window.simplifiedAccountManager=new SimplifiedAccountManager,initTheme();const e=document.querySelector("#settings-btn");e&&e.addEventListener("click",(()=>{window.simplifiedAccountManager.showAccountModal()}))})),document.addEventListener("DOMContentLoaded",(()=>{setTimeout(initializeTemplateSystem,500)})),"complete"!==document.readyState&&"interactive"!==document.readyState||setTimeout(initializeTemplateSystem,500),function(e){e.fn.fontselect=function(t){const n=function(e,t){return function(){return e.apply(t,arguments)}},a={style:"font-select fs-anim-lower fs-anim-upper",placeholder:" Select a font",randombtninner:" Random",filtercontainer:"filtercontainer",filter1:" Sans",filter2:" Serif",filter3:" Script",filter4:" Slab",AllFilter:" All",lookahead:"12",api:"https://fonts.googleapis.com/css?family=",weight:"400i"};t&&e.extend(a,t),window._fontSelectInitializing=!0,setTimeout((()=>{window._fontSelectInitializing=!1}),1e3),window.fonts=["ABeeZee:,400i: SansFilter :Anja Meiners","Abhaya Libre:,700: SerifFilter :mooniak.com","Abril Fatface:: SerifFilter :type-together.com","Actor:: SansFilter :Thomas Junold","Albert Sans:,300,300i,400i,700,700i,900,900i: SansFilter :Andreas Rasmussen","Alex Brush:: ScriptFilter :TypeSETit","Alfa Slab One:: SlabFilter :JM Sole","Alice:: SerifFilter :Cyreal","Alumni Sans Pinstripe:: SansFilter :Robert Leuschke","Allerta:: SansFilter :Matt McInerney","Allura:: ScriptFilter :TypeSETit","Amaranth:,400i,700,700i: SansFilter :Gesine Todt","Anonymous Pro:,700: SlabFilter :Mark Simonson","Anton:: SansFilter :Vernon Adams","Archivo Black:: SansFilter :Onibus-Type","Archivo Narrow:: SansFilter :Onibus-Type","Arimo:,400i,700: SansFilter :Steve Matteson","Arvo:,400i,700: SlabFilter :Anton Koovit","Asap:,400i,700,700i: SansFilter :Omnibus-Type","Asap Condensed:,400i,700,700i: SansFilter :Omnibus-Type","Baloo Bhaina:: SansFilter :EK Type","Barlow Condensed:,300,300i,400i,700,700i,900 : SansFilter :Jeremy Tribby","Belgrano:: SerifFilter :Latino Type","Bentham:: SerifFilter :Ben Weiner","Bevan:: SlabFilter :Vernon Adams","Bigshot One:: SlabFilter :Gesine Todt","BioRhyme:,300,700 : SlabFilter :Aoife Mooney","Bitter:: SlabFilter :Huerta TipogrÃ¡fica","Black Han Sans:: SansFilter :Zess Type","Bowlby One:: SansFilter :Vernon Adams","Bree Serif:: SlabFilter :type-together.com","Cabin:,400i,700,700i: SansFilter :ImpAllFilterari Type","Cabin Condensed:,700: SansFilter :ImpAllFilterari Type","Cairo:,300,700: SansFilter :Mohamed Gaber","Cambay:,400i,700: SansFilter :Pooja Saxena","Cambo:: SerifFilter :Huerta TipogrÃ¡fica","Cantata One:: SerifFilter :Joana Correia","Cardo:: SerifFilter : David Perry","Catamaran:,300,700: SansFilter :Pria Ravichandran","Chakra Petch:,300,300i,400i,700,700i: SansFilter :Cadson Demak","Cinzel:,700,900: SerifFilter :Natanael Gama","Coiny:: SansFilter :Marcelo MagalhÃ£es","Comfortaa:: SansFilter :Johan Aakerlund","Copse:: SlabFilter :Dan Rhatigan","Cormorant:,300,300i,400i,700,700i: SerifFilter :Christian Thalmann","Cousine:: SlabFilter :Steve Matteson","Crimson Text:,400i,700: SerifFilter :Sebastian Kosh","Didact Gothic:: SansFilter :Daniel Johnson","DM Sans:,400i,700,700i: SansFilter :Colophon Foundry","DM Serif Text:,400i: SerifFilter :Colophon Foundry","Dosis:: SansFilter :Steve Matteson","Droid Sans:,700: SansFilter :Ascender","Droid Sans Mono:: SansFilter :Ascender","Droid Serif:: SerifFilter :Ascender","Dynalight:: ScriptFilter :Astigmatic","EB Garamond:,400i,700,700i: SerifFilter :Georg Duffner","Economica:,400i,700,700i: SansFilter :Vicente LamÃ³naca","Emmeline:: ScriptFilter :Sinikka Li","Epilogue:,300,300i,400i,700,700i,900: SansFilter :Tyler Finck","Erica One:: SansFilter :Miguel Hernandez","Fanwood Text:,400i: SerifFilter :Barry Schwartz","Fjalla One:: SansFilter :Sorkin Type","Flamenco:,300: SerifFilter :LatinoType","Francois One:: SansFilter :Vernon Adams","Frank Ruhl Libre:,300,700,900: SerifFilter :Yanek Iontef","Fraunces:,300,300i,400i,700,700i,900,900i: SerifFilter :Undercase Type","Fredoka One:: SansFilter :Milena Brandao","Fugaz One:: SansFilter :LatinoType","Gafata:: SansFilter :Lautaro Hourcade","Gentium Book Basic:,400i,700,700i: SerifFilter :Victor Gaultney","Germania One:: SansFilter :John Vargas BeltrÃ¡n","Gilbert:: SansFilter :Gilbert Baker","Gilda Display:: SerifFilter :Eduardo Tunni ","Glegoo:,700: SlabFilter :Eduardo Tunni","Graduate:: SansFilter :Eduardo Tunni ","Gravitas One:: SerifFilter :Sorkin Type","Gruppo:: SansFilter :Vernon Adams","Gudea:,400i,700: SansFilter :Agustina Mingote","Habibi:: SerifFilter :Magnus Gaarde","Heebo:,300,700,900: SansFilter :Meir Sadan","Helvetica:: SansFilter :Max Miedinger","Holtwood One SC:: SlabFilter :Vernon Adams","Homenaje:: SansFilter :Constanza Artigas Preller & Agustina Mingote","Inknut Antiqua:,300,700,800,900: SerifFilter :Claus Eggers SÃ¸rensen","Inter:,300,300i,400i,700,700i,900: SansFilter :Rasmus Andersson","Istok Web:,400i,700,700i: SansFilter :Andrey V. Panov","Italiana:: SerifFilter :Santiago Orozco","Josefin Slab:,300,300i,400i,700,700i: SlabFilter :Santiago Orozco","Judson:,400i,700: SerifFilter :Daniel Johnson","Julius Sans One:: SansFilter :Luciano Vergara","Jura:,300,600,700: SansFilter :Daniel Johnson","Kadwa:,700: SlabFilter :Sol Matas","Kameron:,700: SerifFilter :Vernon Adams","Karla:,400i,700,700i: SansFilter :Jonny Pinhorn","Kite One:: SansFilter :Eduardo Tunni ","Knewave:: SansFilter :Tyler Finck","Kreon:,300,700: SlabFilter :Julia Petretta ","Kumar One:: SerifFilter :Indian Type Foundry","Lato:,300,300i,400i,700,700i,900,900i: SansFilter :Åukasz Dziedzic","Lexend Deca:,300,700,900: SansFilter :Bonnie Shaver-Troup","Libre Baskerville:,400i,700: SerifFilter :Pablo Impallari","Literata:,300,300i,400i,700,700i: SerifFilter :TypeTogether","Lora:,400i,700,700i: SerifFilter :Cyreal","Mada:,200,300,700,900: SansFilter :Khaled Hosny & Paul D. Hunt","Magra:,700: SansFilter :FontFuror","Mako:: SansFilter :Vernon Adams","Mansalva:: SansFilter :Carolina Short","Marcellus:: SerifFilter :Astigmatic","Marmelad:: SansFilter :Cyreal","Merriweather:,300,300i,400i,700,700i: SlabFilter :Sorkin Type","Metrophobic:: SansFilter :Vernon Adams","Michroma:: SansFilter :Vernon Adams","Molengo:: SansFilter :Denis Jacquerye","Montserrat:,300,300i,400i,700,700i,900,900i: SansFilter :Julieta Ulanovsky","Mrs Saint Delafield:: ScriptFilter :Sudtipos ","Mukta:,300,700: SansFilter :Ek Type","Muli:,300,300i,400i,700,700i,900,900i: SansFilter :Vernon Adams","Nabla:: SansFilter :Arthur Reinders Folmer, Just van Rossum ","News Cycle:,700: SansFilter :Nathan Willis","Niconne:: ScriptFilter :Vernon Adams","Nixie One:: SerifFilter :Jovanny Lemonad","Nobile:,400i,700,700i: SansFilter :Vernon Adams","Norican:: ScriptFilter :Vernon Adams","Noto Sans:,400i,700,700i: SansFilter :Google","Noto Serif:,400i,700,700i: SerifFilter :Google","Nunito:,300,300i,400i,700,700i,900,900i: SansFilter :Vernon Adams","Oi:: SlabFilter :Kostas Bartsokas","Oleo Script:: ScriptFilter :soytutype fonts","Open Sans:,300,300i,400i,700,700i,900,900i: SansFilter :Steve Matteson","Oswald:,300,600,700: SansFilter :Vernon Adams, Kalapi Gajjar, Cyreal","Outfit:,300,400i,700,900: SansFilter :Rodrigo Fuenzalida","Overpass:,300,300i,400i,700,700i,900,900i: SansFilter :Delve Withrington","Oxygen:,300,700: SansFilter :Vernon Adams","Palanquin Dark:,700: SansFilter :Pria Ravichandran","Pathway Gothic One:: SansFilter :Eduardo Tunni","Patua One:: SlabFilter :LatinoType","Paytone One:: SansFilter :Vernon Adams","Petit Formal Script:: ScriptFilter :ImpAllFilterari Type","Philosopher:,400i,700,700i: SerifFilter :Jovanny Lemonad","Playfair Display:,400i,700,700i,900,900i: SerifFilter :Claus Eggers SÃ¸rensen","Podkova:,500,600,700,900: SlabFilter :Cyreal","Poiret One:: SansFilter :Denis Masharov","Poppins:,300,300i,400i,700,700i,900,900i: SansFilter :Indian Type Foundry","Pragati Narrow:,700 : SansFilter :Omnibus-Type","Prata:: SerifFilter :Cyreal","Pridi:,300,600,700: SlabFilter :Cadson Demak","PT Sans:,400i,700,700i: SansFilter :ParaType","PT Sans Narrow:,700: SansFilter :ParaType","PT Serif:,400i,700,700i: SerifFilter :ParaType","PT Serif Caption:,400i: SerifFilter :ParaType","Public Sans:,300,300i,400i,700,700i,900: SansFilter :USWDS","Quattrocento:,700: SerifFilter :ImpAllFilterari Type","Quattrocento Sans:,400i,700: SansFilter :ImpAllFilterari Type","Questrial:: SansFilter :Joe Prince","Quicksand:,300,600,700: SansFilter :Andrew Paglinawan ","Racing Sans One:: SansFilter :ImpAllFilterari Type","Radley:,400i: SerifFilter :Vernon Adams","Rajdhani:,300,600,700: SansFilter :Indian Type Foundry ","Raleway:,300,300i,400i,700,700i,900,900i: SansFilter :Matt McInerney","Rammetto One:: SansFilter :Vernon Adams","Redressed:: ScriptFilter :Astigmatic","Rouge Script:: ScriptFilter :Sabrina Mariela Lopez","Roboto:,300,300i,400i,700,700i,900,900i: SansFilter :Christian Robertson ","Rokkitt:,300,700,900: SlabFilter :Vernon Adams, Kalapi Gajjar","Rozha One:: SerifFilter :Indian Type Foundry","Rubik:,400i,700,700i,900,900i: SansFilter :Hubert and Fischer, Meir Sadan, Cyreal","Rubik Mono One:: SansFilter :Hubert and Fischer","Rufina:,700: SerifFilter :Martin Sommaruga","Russo One:: SansFilter :Jovanny Lemonad","Sacramento:: ScriptFilter :Astigmatic","Sail:: ScriptFilter :Miguel Hernandez","Sanchez:,400i: SlabFilter :Daniel Hernandez","Sancreek:: SerifFilter :Vernon Adams","Sansita:,400i,700,700i,900,900i: SansFilter :Omnibus-Type","Seaweed Script:: ScriptFilter :Neapolitan","Secular One:: SansFilter :Michal Sahar","Shanti:: SansFilter :Vernon Adams","Shrikhand:: ScriptFilter :Jonny Pinhorn","Sigmar:: SansFilter :Vernon Adams","Signika:,300,700: SansFilter :Anna GiedryÅ›","Silkscreen:,700: SansFilter :Jason Kottke","Six Caps:: SansFilter :Vernon Adams","Smokum:: SlabFilter :Astigmatic","Source Sans Pro:,400i,700: SansFilter :Paul D. Hunt","Space Grotesk:,300,700: SansFilter :Florian Karsten","Staatliches:: SansFilter :Brian LaRossa & Erica Carras","Stoke:,300: SerifFilter :Nicole FAllFiltery","Suez One:: SlabFilter :Michal Sahar","Sura:,700: SerifFilter :Carolina Giovagnoli","Syncopate:,700: SansFilter :Astigmatic","Titillium Web:,300i,300,400i,700,700i,900: SansFilter :Accademia di Belle Arti di Urbino","Ultra:: SlabFilter :Astigmatic","Unna:: SlabFilter :Omnibus-Type","Varela Round:: SansFilter :Joe Prince","Vidaloka:: SerifFilter :Cyreal","Viga:: SansFilter :Fontstage","Vollkorn:,400i,700,700i,900,900i: SerifFilter :Cyreal","Wire One:: SansFilter :Cyreal","Work Sans:,300,700,900: SansFilter :Wei Huang","Yantramanav:,300,700,900: SansFilter :Erin McLaughlin","Yellowtail:: ScriptFilter :&emsp;Astigmatic","Yeseva One:: SerifFilter :Jovanny Lemonad","Yesteryear:: ScriptFilter :&emsp;Astigmatic","Zilla Slab:,300,300i,400i,700,700i: SlabFilter :Typotheque"];class i{constructor(t,n){this.$original=e(t),this.options=n,this.active=!1,this.setupHtml(),this.getVisibleFonts(),this.bindEvents();const a=this.$original.val();a&&(this.updateSelected(),this.addFontLink(a)),this.$original.data("fontselect",this)}setupHtml(){this.$original.empty().hide(),this.$element=e("<div>",{class:this.options.style}),this.$select=e('<div class="Fselectbtn" id="activeFont"><span><smAllFilter style="color:gray;margin:0 .3em 0 .3em;">'+this.options.placeholder+"</smAllFilter></span></div>"),this.$arrow=e("<div><b></b></div>"),this.$drop=e("<div>",{class:"fs-drop"}),this.$results=e("<ul>",{class:"fs-results"}),this.$search=e('<input placeholder="Search..." class="search">'),this.$clear=e('<button class="clear"><i class="fa fa-times-circle"></i></button>'),this.$randombtn=e('<div class="randombtn">'+this.options.randombtninner+"</div>"),this.$SansFilterbtn=e('<div class="filter SansFilterbtn">'+this.options.filter1+"</div>"),this.$SerifFilterbtn=e('<div class="filter SerifFilterbtn">'+this.options.filter2+"</div>"),this.$ScriptFilterbtn=e('<div class="filter ScriptFilterbtn">'+this.options.filter3+"</div>"),this.$SlabFilterbtn=e('<div class="filter SlabFilterbtn">'+this.options.filter4+"</div>"),this.$AllFilterbtn=e('<div class="filter AllFilterbtn">'+this.options.AllFilter+"</div>"),this.$addFontBtn=e('<button class="add-font-btn" style="display:none;">Add "<span class="font-name"></span>" from Google&nbsp;Fonts</button>'),this.$addFontBtn.css({margin:"6px 6px",width:"calc(100% - 12px)",height:"auto",padding:"8px","background-color":"#3875d7",color:"white",border:"none","border-radius":"3px",cursor:"pointer","font-weight":"bold","z-index":"99003"}),this.$addFontBtn.hover((function(){e(this).css("background-color","#2a5db0")}),(function(){e(this).css("background-color","#3875d7")})),this.$original.after(this.$element.append(this.$select.append(this.$arrow)).append(this.$drop)),this.$drop.append(this.$results.append(this.fontsAsHtml())).hide(),this.$results.before(this.$randombtn),this.$results.before(this.$SansFilterbtn),this.$SansFilterbtn.after(this.$SerifFilterbtn),this.$SerifFilterbtn.after(this.$ScriptFilterbtn),this.$ScriptFilterbtn.after(this.$SlabFilterbtn),this.$SlabFilterbtn.after(this.$AllFilterbtn),this.$AllFilterbtn.after(this.$search),this.$search.after(this.$clear),this.$clear.after(this.$addFontBtn)}bindEvents(){e("li",this.$results).click(n(this.selectFont,this)).click(n(this.weights,this)).click(n(this.weights2,this)).mousemove(n(this.previewFont,this)).mouseenter(n(this.activateFont,this)).mouseout(n(this.deactivateFont,this)),this.$randombtn.click(n(this.randomfont,this)),this.$randombtn.click(n(this.weights,this)),this.$randombtn.click(n(this.weights2,this)),this.$SansFilterbtn.click(n(this.Filterfun,this)),this.$SerifFilterbtn.click(n(this.Filterfun,this)),this.$ScriptFilterbtn.click(n(this.Filterfun,this)),this.$SlabFilterbtn.click(n(this.Filterfun,this)),this.$AllFilterbtn.click(n(this.Filterfun,this)),this.$select.click(n(this.toggleDrop,this)),this.$search.on("input keyup",n(this.searchFonts,this)),this.$search.on("input",(()=>{const t=this.$search.val().trim();e(".font-name",this.$addFontBtn).text(t)})),this.$clear.click(n(this.clearSearchinput,this)),this.$search.on("focus",(()=>{const t=this.$search.val().trim();e(".font-name",this.$addFontBtn).text(t),t.length>2&&0===e("li:visible",this.$results).length?this.$addFontBtn.show():this.$addFontBtn.hide()})),this.$original.on("setFont",function(e,t,n){this.setFont(t,n)}.bind(this)),this.$element.on("setFont",function(e,t,n){this.setFont(t,n)}.bind(this)),this.$addFontBtn.click((e=>{e.preventDefault(),this.addSearchedFont()}))}toggleDrop(){this.active?(this.$element.removeClass("font-select-active"),this.$drop.hide(),clearInterval(this.visibleInterval)):(this.$element.addClass("font-select-active"),this.$drop.slideDown(250,(()=>{this.getVisibleFonts()})),this.moveToSelected(),this.visibleInterval=setInterval(n(this.getVisibleFonts,this),500)),this.active=!this.active}selectFont(){const t=e("li.active",this.$results).data("value");t&&(this._originalFontVar=null,this.$original.val(t),this.updateSelected(),this.$element.removeClass("previewing"),this.$original.trigger("change"),this.toggleDrop())}weights(t){const n=e(".active:eq(0)").data("value");if(!n)return;const a=n.includes("300"),i=n.includes("900"),o=n.includes("700"),s=n.includes("400i"),r=n.includes("300i"),l=n.includes("700i"),c=n.includes("900i"),d=document.getElementById("headline").style.fontWeight,p=document.getElementById("headline").style.fontStyle,u=e("#headline").hasClass("italic"),m=e("#headline").hasClass("bold");a?e("#thin").css("display","inline-block"):e("#thin").css("display","none"),i?e("#ninehundred").css("display","inline-block"):e("#ninehundred").css("display","none"),("italic"==p&&!r||u&&!r)&&e("#thin").css("display","none"),("italic"==p&&!c||u&&!c)&&e("#ninehundred").css("display","none"),900==d&&i?document.getElementById("headline").style.fontWeight="900":300==d&&a?document.getElementById("headline").style.fontWeight="300":700==d&&o||m&&o?(document.getElementById("headline").style.fontWeight="700",e("#headline").removeClass("bold")):700==d&&!o||m&&!o?(document.getElementById("headline").style.fontWeight="",e("#headline").addClass("bold")):document.getElementById("headline").style.fontWeight="",this.applyItalicStyles(d,p,u,s,l,r,c,"headline")}weights2(){const t=e(".active:eq(1)").data("value");if(!t)return;const n=t.includes("300"),a=t.includes("900"),i=t.includes("700"),o=t.includes("400i"),s=t.includes("300i"),r=t.includes("700i"),l=t.includes("900i"),c=document.getElementById("tagline").style.fontWeight,d=document.getElementById("tagline").style.fontStyle,p=e("#tagline").hasClass("italic"),u=e("#tagline").hasClass("bold");n?e("#thin2").css("display","inline-block"):e("#thin2").css("display","none"),a?e("#ninehundred2").css("display","inline-block"):e("#ninehundred2").css("display","none"),("italic"==d&&!s||p&&!s)&&e("#thin2").css("display","none"),("italic"==d&&!l||p&&!l)&&e("#ninehundred2").css("display","none"),900==c&&a?document.getElementById("tagline").style.fontWeight="900":300==c&&n?document.getElementById("tagline").style.fontWeight="300":700==c&&i||u&&i?(document.getElementById("tagline").style.fontWeight="700",e("#tagline").removeClass("bold")):700==c&&!i||u&&!i?(document.getElementById("tagline").style.fontWeight="",e("#tagline").addClass("bold")):document.getElementById("tagline").style.fontWeight="",this.applyItalicStyles(c,d,p,o,r,s,l,"tagline")}applyItalicStyles(t,n,a,i,o,s,r,l){const c=document.getElementById(l);400==t&&"italic"==n&&i||400==t&&a&&i?c.style.fontStyle="italic":(400==t&&"italic"==n&&!i||400==t&&a&&!i)&&(e("#"+l).addClass("italic"),c.style.fontStyle=""),700==t&&"italic"==n&&o||700==t&&a&&o||e("#"+l).hasClass("bold")&&a&&o||e("#"+l).hasClass("bold")&&"italic"==n&&o?c.style.fontStyle="italic":(700==t&&"italic"==n&&!o||700==t&&a&&!o)&&(c.style.fontStyle="",e("#"+l).addClass("italic")),(700==t&&"italic"==n&&!o&&i||e("#"+l).hasClass("bold")&&"italic"==n&&!o&&i)&&(c.style.fontWeight="",c.style.fontStyle="italic",e("#"+l).removeClass("italic"),e("#"+l).addClass("bold")),300==t&&"italic"==n&&s||300==t&&a&&s?c.style.fontStyle="italic":300==t&&"italic"==n&&!s&&i||300==t&&a&&!s&&i?(c.style.fontWeight="",c.style.fontStyle="italic"):(300==t&&"italic"==n&&!s||300==t&&a&&!s)&&(c.style.fontWeight="",c.style.fontStyle="",e("#"+l).addClass("italic")),900==t&&"italic"==n&&r||900==t&&a&&r?c.style.fontStyle="italic":(900==t&&"italic"==n&&!r||900==t&&a&&!r)&&(c.style.fontWeight="",c.style.fontStyle="",e("#"+l).addClass("italic"))}Filterfun(t){const n=e(t.currentTarget);n.addClass("filterByThis"),n.css("background-color","#0e3572"),n.siblings(".filter").removeClass("filterByThis"),n.siblings(".filter").css("background-color","#222222");const a=n.attr("class").split(/\s+/)[1];"SansFilterbtn"===a?(n.siblings("ul").children().filter(".SerifFilter, .ScriptFilter, .SlabFilter").not(".active").hide("fast"),n.siblings("ul").children().filter(".SansFilter").show("fast")):"SerifFilterbtn"===a?(n.siblings("ul").children().filter(".SansFilter, .ScriptFilter, .SlabFilter").not(".active").hide("fast"),n.siblings("ul").children().filter(".SerifFilter").show("fast")):"ScriptFilterbtn"===a?(n.siblings("ul").children().filter(".SansFilter, .SerifFilter, .SlabFilter").not(".active").hide("fast"),n.siblings("ul").children().filter(".ScriptFilter").show("fast")):"SlabFilterbtn"===a?(n.siblings("ul").children().filter(".SansFilter, .SerifFilter, .ScriptFilter").not(".active").hide("fast"),n.siblings("ul").children().filter(".SlabFilter").show("fast")):n.siblings("ul").children().filter(".SansFilter, .SerifFilter, .ScriptFilter, .SlabFilter").show("fast")}previewFont(t){const n=e(t.currentTarget).data("value");if(!n)return;this._originalFontVar||("fontPicker1"===this.$original.attr("id")?this._originalFontVar=document.documentElement.style.getPropertyValue("--primary-font"):"fontPicker2"===this.$original.attr("id")&&(this._originalFontVar=document.documentElement.style.getPropertyValue("--secondary-font")));const a=this.toReadable(n);e("span",this.$element).text(a.readable).css(this.toStyle(n)),this.$element.addClass("previewing"),this.addFontLink(n);const i=n.split(":")[0];"fontPicker1"===this.$original.attr("id")?document.documentElement.style.setProperty("--primary-font",i):"fontPicker2"===this.$original.attr("id")&&document.documentElement.style.setProperty("--secondary-font",i),e(t.currentTarget).one("mouseout",(()=>{if(this.$original.val()!==n){const t=this.$original.val();if(t){const n=this.toReadable(t);e("span",this.$element).text(n.readable).css(this.toStyle(t))}this._originalFontVar&&("fontPicker1"===this.$original.attr("id")?document.documentElement.style.setProperty("--primary-font",this._originalFontVar):"fontPicker2"===this.$original.attr("id")&&document.documentElement.style.setProperty("--secondary-font",this._originalFontVar)),this.$element.removeClass("previewing")}}))}moveToSelected(){let t;const n=this.$original.val();if(t=n?e("li[data-value='"+n+"']",this.$results):e("li",this.$results).first(),this.$search.val(""),e("li",this.$results).show(),e("li.active",this.$results).removeClass("active"),t.length>0)t.addClass("active"),this.$results.scrollTop(t[0].offsetTop);else{const t=e("li",this.$results).first();t.length>0&&t.addClass("active")}}searchFonts(){const t=this.$search.val().toLowerCase().trim(),n=this.$search.val().trim();if(e(".font-name",this.$addFontBtn).text(n),e("li",this.$results).each((function(){-1===e(this).text().toLowerCase().indexOf(t)?e(this).hide():e(this).show()})),t)clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{const t=this.$search.val().trim();if(e(".font-name",this.$addFontBtn).text(t),t.length>2){e("li:visible",this.$results).length>0?this.$addFontBtn.hide():this.$addFontBtn.show().prop("disabled",!1)}else this.$addFontBtn.hide()}),300);else{let t;const n=this.$original.val();if(t=n?e("li[data-value='"+n+"']",this.$results):e("li",this.$results).first(),e("li.active",this.$results).removeClass("active"),t.length>0)t.addClass("active"),this.$results.scrollTop(t[0].offsetTop);else{const t=e("li:visible",this.$results).first();t.length>0&&t.addClass("active")}this.$addFontBtn.hide()}}clearSearchinput(){this.$search.val(""),e("li",this.$results).show(),e("li.active",this.$results).removeClass("active"),this.moveToSelected(),this.$addFontBtn.hide()}activateFont(t){e("li.active",this.$results).removeClass("active"),e(t.currentTarget).addClass("active")}deactivateFont(t){e(t.currentTarget).addClass("active")}updateSelected(){const t=this.$original.val(),n=this.toReadable(t);e("span",this.$element).text(n.readable).css(this.toStyle(t))}addLocalFontFace(e,t){const n=document.getElementsByTagName("head")[0],a=document.createElement("style");a.textContent='@font-face { font-family: "'+e+"\"; src: url('"+t+"'); }",n.appendChild(a)}bindToNewArray(t){this.$results.empty(),fonts.unshift(t),this.$drop.append(this.$results.append(this.fontsAsHtml()));e("li",this.$results).eq(0).addClass("active");const a=e("li.active",this.$results).data("value");this.$original.val(a).change(),this.updateSelected(),e("li",this.$results).click(n(this.selectFont,this)).click(n(this.weights,this)).click(n(this.weights2,this)).mousemove(n(this.previewFont,this)).mouseenter(n(this.activateFont,this)).mouseout(n(this.deactivateFont,this))}fontsAsHtml(){const e=fonts.length;let t="";for(let n=0;n<e;n++){const e=this.toReadable(fonts[n]),a=this.toStyle(fonts[n]);t+="<li class="+a.class+' data-value="'+a["font-family"]+":400"+a["font-weight"]+'" style="font-family: '+a["font-family"]+"; font-weight:400,"+a["font-weight"]+'" >'+e.readable+'<br><smAllFilter style="font-size: 13px;">'+a.author+"</smAllFilter></li>"}return t}toReadable(e){return{readable:e.split(":")[0]}}toStyle(e){const t=e.split(":");return{"font-family":t[0],"font-weight":t[1],class:t[2],author:t[3]}}getVisibleFonts(){if(this.$results.is(":hidden"))return;const t=this,n=this.$results.scrollTop();let a=n+this.$results.height();if(this.options.lookahead){const t=e("li",this.$results).first().height()||0;a+=t*parseInt(this.options.lookahead)}e("li",this.$results).each((function(){const i=e(this).position().top+n;if(i+e(this).height()>=n&&i<=a){const n=e(this).data("value");n&&t.addFontLink(n)}}))}randomfont(){const t=Math.round(Math.random()*(fonts.length-1)),n=fonts[t];e("li.active",this.$results).removeClass("active");const a=e("li",this.$results).eq(t);a.show("fast"),this.$results.scrollTop(a.addClass("active")[0].offsetTop);const i=e("li.active",this.$results).data("value");this.$original.val(i).change(),this.updateSelected(),this.addFontLink(n)}addGoogleFont(t){const a=t.trim(),i=a.replace(/\s+/g,"+");this.$addFontBtn.prop("disabled",!0).css("opacity","0.7");const o=e(".font-name",this.$addFontBtn),s=o.text();o.text("Loading...");const r=document.createElement("link");r.href=`${this.options.api}${i}`,r.rel="stylesheet",r.onload=()=>{const t=`${a}:,400,700: SansFilter :Google Fonts`;fonts.unshift(t),this.$results.empty(),this.$results.append(this.fontsAsHtml());const i=e("li",this.$results).eq(0);i.addClass("active");const r=i.data("value");this.$original.val(r).change(),this.updateSelected(),e("li",this.$results).click(n(this.selectFont,this)).click(n(this.weights,this)).click(n(this.weights2,this)).mousemove(n(this.previewFont,this)).mouseenter(n(this.activateFont,this)).mouseout(n(this.deactivateFont,this)),this.$search.val(""),this.$addFontBtn.hide(),this.$addFontBtn.prop("disabled",!1).css("opacity","1"),o.text(s),void 0!==projectManager&&projectManager.showNotification&&projectManager.showNotification(`"${a}" added successfully!`,"success"),console.log(`Added "${a}" from Google Fonts`)},r.onerror=()=>{const t=this.toTitleCase(a),i=t.replace(/\s+/g,"+");if(t!==a){const r=document.createElement("link");r.href=`${this.options.api}${i}`,r.rel="stylesheet",r.onload=()=>{const a=`${t}:,400,700: SansFilter :Google Fonts`;fonts.unshift(a),this.$results.empty(),this.$results.append(this.fontsAsHtml());const i=e("li",this.$results).eq(0);i.addClass("active");const r=i.data("value");this.$original.val(r).change(),this.updateSelected(),e("li",this.$results).click(n(this.selectFont,this)).click(n(this.weights,this)).click(n(this.weights2,this)).mousemove(n(this.previewFont,this)).mouseenter(n(this.activateFont,this)).mouseout(n(this.deactivateFont,this)),this.$search.val(""),this.$addFontBtn.hide(),this.$addFontBtn.prop("disabled",!1).css("opacity","1"),o.text(s),void 0!==projectManager&&projectManager.showNotification&&projectManager.showNotification(`"${t}" added!`,"success"),console.log(`Added "${t}" from Google Fonts`)},r.onerror=()=>{this.$addFontBtn.prop("disabled",!1).css("opacity","1"),o.text(s),void 0!==projectManager&&projectManager.showNotification&&projectManager.showNotification(`"${a}" not found in Google Fonts`,"error"),console.log(`Font "${a}" not found in Google Fonts`)},document.head.appendChild(r)}else this.$addFontBtn.prop("disabled",!1).css("opacity","1"),o.text(s),void 0!==projectManager&&projectManager.showNotification&&projectManager.showNotification(`"${a}" not found in Google Fonts`,"error"),console.log(`"${a}" not found in Google Fonts`)},document.head.appendChild(r)}toTitleCase(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ")}addSearchedFont(){const e=this.$search.val().trim();e&&e.length>2&&this.addGoogleFont(e)}resetSearch(){this.$search.val(""),e("li",this.$results).show(),this.$addFontBtn.hide(),e("li.active",this.$results).removeClass("active"),this.moveToSelected()}addFontLink(t){if(!t)return;const n=t.split(":")[0],a=this.options.api+n.replace(/ /g,"+");0===e("link[href*='"+n.replace(/ /g,"+")+"']").length&&0===e("link[href*='"+n.replace(/ /g,"+").toLowerCase()+"']").length&&0===e("link[href*='"+this.toTitleCase(n).replace(/ /g,"+")+"']").length&&e("link:last").after('<link href="'+a+'" rel="stylesheet" type="text/css">')}setFont(t,n){let a=null;for(const e of fonts){const i=e.split(":");if(i[0]===t){if(n&&i[1]&&i[1].includes(n)){a=e;break}a||(a=e)}}if(a){const n=e('li[data-value^="'+t+':"]',this.$results);n.length&&(e("li.active",this.$results).removeClass("active"),n.addClass("active"),this.$original.val(a).change(),this.updateSelected(),this.addFontLink(a),this.active&&this.toggleDrop(),this.weights(),this.weights2())}}addFontLink(t){if(!t)return;const n=t.split(":")[0],a=this.options.api+n.replace(/ /g,"+");0===e("link[href*='"+n.replace(/ /g,"+")+"']").length&&e("link:last").after('<link href="'+a+'" rel="stylesheet" type="text/css">')}refreshFontDropdown(){this.$results.empty(),this.$results.append(this.fontsAsHtml()),e("li",this.$results).click(n(this.selectFont,this)).click(n(this.weights,this)).click(n(this.weights2,this)).mousemove(n(this.previewFont,this)).mouseenter(n(this.activateFont,this)).mouseout(n(this.deactivateFont,this));const t=this.$original.val();if(t){const n=t.split(":")[0];e("li",this.$results).each((function(){const t=e(this).data("value");if(t&&t.startsWith(n+":"))return e("li.active",this.$results).removeClass("active"),e(this).addClass("active"),!1}))}console.log("Font dropdown refreshed with updated fonts array")}}return this.each((function(){return"undefined"==typeof fonts&&(console.warn("fontselect: Fonts array is not defined. Please define the fonts array before using this plugin."),window.fonts=[]),new i(this,a)}))}}(jQuery);