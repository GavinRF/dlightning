

<head>

    <style>
        .email-capture {
            max-width: 394px;
            margin: 12px auto;
            padding: 28px 22px 20px 22px;
            border-radius: 8px;
            background: #f7fafc;
            text-align: left;
        }

        .email-capture input,
        .email-capture textarea {
            width: 100%;
            padding: 8px 14px;
            margin-bottom: 6px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            color: #333;
            transition: all 0.2s ease;
            box-sizing: border-box;
            background: white;
        }

        .email-capture input:focus,
        .email-capture textarea:focus {
            outline: none;
            border-color: #0066cc;
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }

        .email-capture input.is-invalid {
            border-color: #dc3545;
        }

        .email-capture input.is-valid {
            border-color: #28a745;
        }

        .email-capture textarea {
            resize: vertical;
            min-height: 80px;
        }

        .email-capture .error-message {
            color: #dc3545;
            font-size: 14px;
            margin-top: -4px;
            margin-bottom: 8px;
            display: none;
        }

        .email-capture .error-message.show {
            display: block;
        }

        .email-capture .char-counter {
            font-size: 12px;
            color: #6c757d;
            text-align: right;
            margin-top: -4px;
            margin-bottom: 8px;
        }

        .email-capture label {
            display: block;
            margin-bottom: 2px;
            text-align: left;
        }

        .privacy-notice {
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .privacy-notice a {
            color: #0066cc;
            text-decoration: none;
        }

        .email-capture button {
            width: 100%;
            padding: 12px 24px;
            background: #0066cc;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .email-capture button:hover {
            background: #0052a3;
            transform: translateY(-1px);
        }

        .email-capture button:active {
            transform: translateY(0);
        }

        .email-capture button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .email-capture button .btn-spinner {
            display: none;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Success message styling */
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            display: none;
            font-weight: 500;
        }

        .success-message.show {
            display: block;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Placeholder styling */
        .email-capture input::placeholder,
        .email-capture textarea::placeholder {
            color: #6c757d;
        }

        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        
        .modal-content {
            background: white;
            padding: 24px;
            border-radius: 8px;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 12px;
            right: 16px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        
        .description {
            background: white;
            padding: 20px;
            margin: 20px;
            border-left: 4px solid #0066cc;
        }
        
    </style>
</head>
<body>
    <div class="email-capture">
        <div class="success-message" id="success-message">
            Thanks! We'll be in touch soon.
        </div>

        <!-- <h4>Contact Dlightning</h4> -->
        <h2 style="color:#0052a3; font-size: 32px; margin-bottom: 8px; text-align: left;">Have a business<br>design challenge?</h2>
        <h5>Let's discuss how <i>Dlightning</i>⚡can help.</h5>
        <br>
        <form id="email-form">
            <label for="email-input">Your Email</label>
            <input
                type="email"
                id="email-input"
                required
            >
            <div class="error-message" id="email-error"></div>

            <label for="message-input">Message (optional)</label>
            <textarea
                id="message-input"
                rows="2"
                maxlength="500"
            ></textarea>
            <div class="char-counter" id="char-counter">0 / 500 characters</div>

            <div class="privacy-notice">
            We collect basic analytics (browser info, referrer) to improve our service.
            <a href="#" onclick="openModal();">See details</a>
            </div>
            <button type="submit" id="submit-btn">
                <span class="btn-spinner"></span>
                <span class="btn-text">Send</span>
            </button>
        </form>
    </div>

    <div class="modal-backdrop" id="privacyModal" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModal()">×</button>
            <h3 style="color: #0052a3; font-size: 1.48rem;">Data Collection Transparency</h3>
            <p><strong>What we collect when you submit this form:</strong></p>
            <ul style="line-height: 1.8; color: #333;">
                <li><strong>Your email and message</strong> - Obviously needed to contact you</li>
                <li><strong>Tool name</strong> - Which of our tools you're contacting us from</li>
                <li><strong>Interaction data</strong> - Any inputs or choices entered in our tool</li>
                <li style="margin-top: 8px;"><strong>Technical info:</strong>
                    <ul style="margin-top: 8px; color: #333">
                        <li>Referrer (where you came from)</li>
                        <li>Browser type (Helps us fix compatibility issues)</li>
                        <li>Screen size and viewport (Improves our responsive design)</li>
                        <li>Platform (Windows, Mac, etc.)</li>
                        <li>Time spent on page</li>
                        <li>URL parameters</li>
                    </ul>
                </li>
            </ul>
            <p style="font-size: 14px; color: #666; margin-top: 20px;">
                <strong>Why?</strong> This context helps us provide better support and improve our tools based on how they're actually being used. We never sell your data or use it for advertising.
            </p>
        </div>
    </div>

    <script>
        // const tool = document.getElementById('tool').value;
        // const infoDump = document.getElementById('infoDump').value;

        function getToolName() {
            // You can customize this based on your needs
            const toolName = document.querySelector('[data-tool-name]')?.dataset.toolName || 
                            document.title || 
                            window.location.pathname.split('/').pop() || 
                            'Unknown Tool';
            return toolName;
        }
        
        function getInfoDump() {
             const interactionData = window.userInteractionData || '';

            // Collect useful data about the page/tool
            const info = {
                referrer: document.referrer || 'Direct',
                userAgent: navigator.userAgent.substring(0, 100), // First 100 chars
                screenSize: `${screen.width}x${screen.height}`,
                viewport: `${window.innerWidth}x${window.innerHeight}`,
                platform: navigator.platform,
                scrollDepth: Math.round((window.pageYOffset / (document.body.scrollHeight - window.innerHeight)) * 100) + '%',
                timeOnPage: getTimeOnPage(),
                urlParams: new URLSearchParams(window.location.search).toString()
            };
            
            // Convert to readable string
            return Object.entries(info)
                .map(([key, value]) => `${key}: ${value}`)
                .join('\n');
        }

        function getTimeOnPage() {
            const start = performance.now();
            return Math.round(start / 1000) + 's';
        }

        // Form validation and submission
        const emailField = document.getElementById('email-input');
        const messageField = document.getElementById('message-input');
        const emailError = document.getElementById('email-error');
        const charCounter = document.getElementById('char-counter');
        let isSubmitting = false;

        // Real-time email validation
        emailField.addEventListener('blur', function() {
            validateEmail();
        });

        emailField.addEventListener('input', function() {
            if (this.classList.contains('is-invalid')) {
                validateEmail();
            }
        });

        function validateEmail() {
            const email = emailField.value.trim();
            const emailPattern = /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/i;

            if (email === '') {
                emailField.classList.remove('is-valid', 'is-invalid');
                emailError.classList.remove('show');
                return false;
            }

            if (!emailPattern.test(email)) {
                emailField.classList.remove('is-valid');
                emailField.classList.add('is-invalid');
                emailError.textContent = 'Please enter a valid email address';
                emailError.classList.add('show');
                return false;
            }

            emailField.classList.remove('is-invalid');
            emailField.classList.add('is-valid');
            emailError.classList.remove('show');
            return true;
        }

        // Character counter for message
        messageField.addEventListener('input', function() {
            const length = this.value.length;
            charCounter.textContent = length + ' / 500 characters';
            if (length > 450) {
                charCounter.style.color = '#dc3545';
            } else {
                charCounter.style.color = '#6c757d';
            }
        });

        document.getElementById('email-form').addEventListener('submit', function(e) {
            e.preventDefault();

            // Prevent double submission
            if (isSubmitting) return;

            // Validate email before submission
            if (!validateEmail()) {
                emailField.focus();
                return;
            }

            isSubmitting = true;

            const email = emailField.value.trim();
            const message = messageField.value.trim();
            const submitBtn = document.getElementById('submit-btn');
            const btnText = submitBtn.querySelector('.btn-text');
            const btnSpinner = submitBtn.querySelector('.btn-spinner');
            const successMsg = document.getElementById('success-message');

            // Show loading state
            submitBtn.disabled = true;
            btnText.style.display = 'none';
            btnSpinner.style.display = 'inline-flex';
            const interactionData = window.userInteractionData || '';

            // Replace with your actual Google Form details
            const formData = new FormData();
            formData.append('entry.1246979305', email);
            formData.append('entry.544528883', message);
            formData.append('entry.2116565090', getToolName());
            formData.append('entry.2069635273', interactionData);
            formData.append('entry.1823501667', getInfoDump());

            fetch('https://docs.google.com/forms/d/e/1FAIpQLSea1ckrv5cOMpnCu5huK-Dyc2zBnuX6vRaOSq_uacYykWJoZg/formResponse', {
                method: 'POST',
                mode: 'no-cors',
                body: formData
            }).then(() => {
                // Show success message with animation
                successMsg.classList.add('show');
                this.reset();

                // Reset validation states
                emailField.classList.remove('is-valid', 'is-invalid');
                charCounter.textContent = '0 / 500 characters';
                charCounter.style.color = '#6c757d';

                // Reset button
                submitBtn.disabled = false;
                btnText.style.display = 'inline';
                btnSpinner.style.display = 'none';
                isSubmitting = false;

                // Hide success message after 5 seconds
                setTimeout(() => {
                    successMsg.classList.remove('show');
                }, 5000);

            }).catch(err => {
                console.error('Error:', err);
                submitBtn.disabled = false;
                btnText.style.display = 'inline';
                btnSpinner.style.display = 'none';
                isSubmitting = false;
                alert('Something went wrong. Please try again.');
            });
        });

        function openModal() {
            document.getElementById('privacyModal').style.display = 'flex';
        }
        
        function closeModal() {
            document.getElementById('privacyModal').style.display = 'none';
        }
        
        // Close modal on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>